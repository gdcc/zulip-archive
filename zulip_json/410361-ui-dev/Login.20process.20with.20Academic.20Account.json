[
    {
        "content": "<p>Hi, I have created a feature issue in GitHub, as I was having trouble when logging in with the student account from my university URJC, <a href=\"https://github.com/IQSS/dataverse-frontend/issues/837\">https://github.com/IQSS/dataverse-frontend/issues/837</a></p>",
        "id": 540954178,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758615504
    },
    {
        "content": "<p>Interesting. As a workaround you could pick a different username, right?</p>",
        "id": 540970649,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758620500
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/540970649\">ha dicho</a>:</p>\n<blockquote>\n<p>Interesting. As a workaround you could pick a different username, right?</p>\n</blockquote>\n<p>I received a blue notification box which said values provided by IdP (in my case my uni) could not be modifed at such part of registration, so still have not got access to dashboard and be able to change it</p>",
        "id": 540976999,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758622756
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"934432\">Pablo Picurelli Ortiz</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/540976999\">ha dicho</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/540970649\">ha dicho</a>:</p>\n<blockquote>\n<p>Interesting. As a workaround you could pick a different username, right?</p>\n</blockquote>\n<p>I received a blue notification box which said values provided by IdP (in my case my uni) could not be modifed at such part of registration, so still have not got access to dashboard and be able to change it</p>\n</blockquote>\n<p><a href=\"/user_uploads/53090/uUj9aWVf9ocW2hHx8e0ZU9a7/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/uUj9aWVf9ocW2hHx8e0ZU9a7/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1319x214\" src=\"/user_uploads/thumbnail/53090/uUj9aWVf9ocW2hHx8e0ZU9a7/image.png/840x560.webp\"></a></div>",
        "id": 540977366,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758622894
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/540970649\">ha dicho</a>:</p>\n<blockquote>\n<p>Interesting. As a workaround you could pick a different username, right?</p>\n</blockquote>\n<p>Maybe at that part of registration, allowing to change only username could be a good idea.</p>",
        "id": 540977827,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758623086
    },
    {
        "content": "<p>Interesting. I didn't realize it works this way. Thanks for opening that issue! And thanks for adding those extra screenshots to it!</p>",
        "id": 540987706,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758626692
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/540987706\">said</a>:</p>\n<blockquote>\n<p>Interesting. I didn't realize it works this way. Thanks for opening that issue! And thanks for adding those extra screenshots to it!</p>\n</blockquote>\n<p>You are welcome!</p>",
        "id": 540987792,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758626716
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598442\">@Guillermo Portas</span> to work on this bug, one should use <code>dev-env/shib-dev-env</code>, right? From <a href=\"https://github.com/IQSS/dataverse-frontend/pull/688\">https://github.com/IQSS/dataverse-frontend/pull/688</a></p>",
        "id": 541015792,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758634341
    },
    {
        "content": "<p>I have created a PR if it not passes tests I will remove such PR, but I have used the option which allow you devs to modify it in case some enhancement are considered</p>",
        "id": 541043289,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758641092
    },
    {
        "content": "<p>This PR: <a href=\"https://github.com/IQSS/dataverse-frontend/pull/838\">https://github.com/IQSS/dataverse-frontend/pull/838</a></p>\n<p>Thanks!</p>",
        "id": 541044620,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758641393
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"934432\">@Pablo Picurelli Ortiz</span> can you please change</p>\n<div class=\"codehilite\"><pre><span></span><code>- Closes #\nhttps://github.com/IQSS/dataverse-frontend/issues/837\n</code></pre></div>\n<p>to</p>\n<div class=\"codehilite\"><pre><span></span><code>- Closes #837\n</code></pre></div>",
        "id": 541044761,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758641424
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/541044761\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"934432\">Pablo Picurelli Ortiz</span> can you please change</p>\n<div class=\"codehilite\"><pre><span></span><code>- Closes #\nhttps://github.com/IQSS/dataverse-frontend/issues/837\n</code></pre></div>\n<p>to</p>\n<p><div class=\"codehilite\"><pre><span></span><code>- Closes #837\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Going to do that</p>",
        "id": 541044830,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758641441
    },
    {
        "content": "<p>Btw I haven't collaborated so much in GitHub until this summer, so it's my first pull request <span aria-label=\"fingers crossed\" class=\"emoji emoji-1f91e\" role=\"img\" title=\"fingers crossed\">:fingers_crossed:</span></p>",
        "id": 541051205,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758643164
    },
    {
        "content": "<p>No worries, we're friendly <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 541051722,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758643293
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"934432\">@Pablo Picurelli Ortiz</span> we had a long chat about your PR this morning: <a href=\"https://github.com/IQSS/dataverse-frontend/pull/838\">https://github.com/IQSS/dataverse-frontend/pull/838</a> <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 541524661,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758826147
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/541524661\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"934432\">Pablo Picurelli Ortiz</span> we had a long chat about your PR this morning: <a href=\"https://github.com/IQSS/dataverse-frontend/pull/838\">https://github.com/IQSS/dataverse-frontend/pull/838</a> <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>\n</blockquote>\n<p>Is it going to be reviewed and merged?</p>",
        "id": 541525537,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758826436
    },
    {
        "content": "<p>Well, reviewed, at least.</p>",
        "id": 541525898,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758826519
    },
    {
        "content": "<p>Have you tried reproducing the bug in the development environment?</p>",
        "id": 541526204,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758826591
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/541526204\">said</a>:</p>\n<blockquote>\n<p>Have you tried reproducing the bug in the development environment?</p>\n</blockquote>\n<p>Do you mean dev domain <a href=\"http://beta.dataverse.org\">beta.dataverse.org</a>?</p>",
        "id": 541526394,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758826664
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"934432\">Pablo Picurelli Ortiz</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/541526394\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/541526204\">said</a>:</p>\n<blockquote>\n<p>Have you tried reproducing the bug in the development environment?</p>\n</blockquote>\n<p>Do you mean dev domain <a href=\"http://beta.dataverse.org\">beta.dataverse.org</a>?</p>\n</blockquote>\n<p>It happened there</p>",
        "id": 541526432,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758826682
    },
    {
        "content": "<p>No, I mean by running project locally: <a href=\"https://github.com/IQSS/dataverse-frontend/blob/develop/DEVELOPER_GUIDE.md#running-the-project-locally\">https://github.com/IQSS/dataverse-frontend/blob/develop/DEVELOPER_GUIDE.md#running-the-project-locally</a></p>",
        "id": 541526519,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758826716
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/541526519\">said</a>:</p>\n<blockquote>\n<p>No, I mean by running project locally: <a href=\"https://github.com/IQSS/dataverse-frontend/blob/develop/DEVELOPER_GUIDE.md#running-the-project-locally\">https://github.com/IQSS/dataverse-frontend/blob/develop/DEVELOPER_GUIDE.md#running-the-project-locally</a></p>\n</blockquote>\n<p>No but I can try tomorrow, pull request code can be tried also, I am about to go to rest</p>",
        "id": 541527108,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758826933
    },
    {
        "content": "<p>Great, thanks. I think you're going to want to add a user with an email address for a username in one of these files (I'm not sure which one):</p>\n<div class=\"codehilite\"><pre><span></span><code>dev-env/keycloak/test-realm.json\ndev-env/shib-dev-env/keycloak/test-realm.json\n</code></pre></div>",
        "id": 541527352,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758827044
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/541527352\">said</a>:</p>\n<blockquote>\n<p>Great, thanks. I think you're going to want to add a user with an email address for a username in one of these files (I'm not sure which one):</p>\n<p><div class=\"codehilite\"><pre><span></span><code>dev-env/keycloak/test-realm.json\ndev-env/shib-dev-env/keycloak/test-realm.json\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Apart from modifying one of those files, can the process also be done manually? I mean loging in with my URJC uni account and verify before and after pull request code if manage to log in</p>",
        "id": 541527859,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758827264
    },
    {
        "content": "<p>It will be a stronger pull request if you provide a test case and instructions under <a href=\"https://github.com/IQSS/dataverse-frontend/blob/develop/.github/PULL_REQUEST_TEMPLATE.md\">how to test</a>. I don't think you want to give us your URJC password. <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 541528441,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758827423
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/541528441\">said</a>:</p>\n<blockquote>\n<p>It will be a stronger pull request if you provide a test case and instructions under <a href=\"https://github.com/IQSS/dataverse-frontend/blob/develop/.github/PULL_REQUEST_TEMPLATE.md\">how to test</a>. I don't think you want to give us your URJC password. <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>\n</blockquote>\n<p>Didn't realize, so maybe any other simulated identity provider in my instance?</p>",
        "id": 541528804,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758827591
    },
    {
        "content": "<p>I'm now traveling to URJC and don't have classes until 2 and half hours aprox I ll start the process and then modifying pull request so it adjusts to template</p>",
        "id": 541594032,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1758868872
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"934432\">@Pablo Picurelli Ortiz</span> no worries, please take your time.</p>\n<p>Also, I believe <span class=\"user-mention\" data-user-id=\"598442\">@Guillermo Portas</span> also plans to give you feedback on <a href=\"https://github.com/IQSS/dataverse-frontend/pull/838\">your pull request</a>.</p>",
        "id": 541627192,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1758880086
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin 🚀</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/541627192\">ha dicho</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"934432\">Pablo Picurelli Ortiz</span> no worries, please take your time.</p>\n<p>Also, I believe <span class=\"user-mention silent\" data-user-id=\"598442\">Guillermo Portas</span> also plans to give you feedback on <a href=\"https://github.com/IQSS/dataverse-frontend/pull/838\">your pull request</a>.</p>\n</blockquote>\n<p>I have just reproduced it locally and completed the pull request</p>",
        "id": 541907054,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1759080180
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"934432\">@Pablo Picurelli Ortiz</span> \"how to test\" looks great! Thanks!</p>",
        "id": 541924895,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1759101735
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin 🚀</span> I have modified Login.spec.tsx and test-realm.json to include a user which has an email as username, i completed registraron with the cypress test and then logged in manually and did not recieve error at least in my localhost</p>",
        "id": 543477050,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1759827391
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"770046\">@Germán Saracca</span> did you test It on dev-env im not sure why such error appeared but i have not received such error, and registered with cypress and then logged in in keycloak and seemed to work properly, furthermore to avoid logic business flaws like validation logic disparity I recommend validation both in frontend and backend so those are synchronized</p>",
        "id": 543524940,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1759841752
    },
    {
        "content": "<p>I totally agree, we also perform many validations both on the frontend and backend to stay in sync and avoid discrepancies like the one you mentioned.<br>\nHowever, in this particular case, even though the fix itself is simple, it wouldn’t work properly with the current logic of the <code>/register</code> endpoint since this will fail if we send a different username.<br>\nIn my opinion, it would make more sense for the backend to handle the username modification so it remains consistent with Dataverse’s rules and we keep that strong security in the registration endpoint, anyways open to ideas 👍🏼 </p>\n<p>What we could do, I think, is changing the frontend username rules validations to allow \"@\" in the username?</p>\n<div class=\"codehilite\"><pre><span></span><code>  const userNameRules = {\n    required: isUsernameRequired ? t(&#39;fields.username.required&#39;) : false, // &lt;= &lt;= We only require the username if not present in token data\n    validate: (value: string) =&gt; {\n      if (!Validator.isValidUsername(value)) { // &lt;= &lt;= &lt;= THIS PART IS SHOWING THE ERROR\n        return t(&#39;fields.username.invalid.username&#39;)\n      }\n      return true\n    },\n    maxLength: {\n      value: 255,\n      message: t(&#39;fields.username.invalid.maxLength&#39;, {\n        maxLength: 255\n      })\n    }\n  }\n</code></pre></div>",
        "id": 543532236,
        "sender_full_name": "Germán Saracca",
        "timestamp": 1759843611
    },
    {
        "content": "<p>Yes, using the dockerized dev environment. Could it be that your test pass because you just modify the form value username to remove the \"@\" and that avoids the form to show an error, but that username wasn't sent to the API since the username was present in the token data (frontend logic).</p>",
        "id": 543533356,
        "sender_full_name": "Germán Saracca",
        "timestamp": 1759843898
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"770046\">Germán Saracca</span> <a href=\"#narrow/channel/410361-ui-dev/topic/Login.20process.20with.20Academic.20Account/near/543533356\">said</a>:</p>\n<blockquote>\n<p>Yes, using the dockerized dev environment. Could it be that your test pass because you just modify the form value username to remove the \"@\" and that avoids the form to show an error, but that username wasn't sent to the API since the username was present in the token data (frontend logic).</p>\n</blockquote>\n<p>What i still don't understand if the test had skipped such part, the registraron process should not have been finished and i should not be able to login manually and see that <a href=\"/user_uploads/53090/H944dV_aP5BmtDoAneldd3Dg/498198778-ba20a384-03a0-44e7-b8c3-51fb416bc138.png\">498198778-ba20a384-03a0-44e7-b8c3-51fb416bc138.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/H944dV_aP5BmtDoAneldd3Dg/498198778-ba20a384-03a0-44e7-b8c3-51fb416bc138.png\" title=\"498198778-ba20a384-03a0-44e7-b8c3-51fb416bc138.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1354x461\" src=\"/user_uploads/thumbnail/53090/H944dV_aP5BmtDoAneldd3Dg/498198778-ba20a384-03a0-44e7-b8c3-51fb416bc138.png/840x560.webp\"></a></div>",
        "id": 543534968,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1759844357
    },
    {
        "content": "<p>When i logged in second time It redirected me directly to Dashboard, not to complete details</p>",
        "id": 543535153,
        "sender_full_name": "Pablo Picurelli Ortiz",
        "timestamp": 1759844408
    }
]