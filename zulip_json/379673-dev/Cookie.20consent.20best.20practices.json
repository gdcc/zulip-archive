[
    {
        "content": "<p>As far as I can see there is no GDPR compliant cookie consent banner support built in to Dataverse. What is the best practice or suggestion of the community in this regard? Has anyone added such a banner to their installations? If yes, how?</p>\n<p>I can only see one cookie used in the system, which is the standard J2EE JSESSIONID. But we would also like to add google analytics, which should be made optional, therefore we need to provide the users with a cookie-tracker management banner.</p>\n<p>I am currently evaluating this library for this purpose <a href=\"https://cookieconsent.orestbida.com/\">https://cookieconsent.orestbida.com/</a>, but if anyone has experience with how to do this in Dataverse, I would be grateful for any suggestions.</p>",
        "id": 421238701,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1707829081
    },
    {
        "content": "<p>This library is pretty easy to use. I could add a basic cookie consent panel available both in English or Hungarian based on the current Dataverse language and it can enable/disable the google analytics script I added to dataverse_template.xhtml</p>\n<p><a href=\"/user_uploads/53090/IfqiHkeEx1ARye8nWYsGsp8l/image.png\">image.png</a><br>\n<a href=\"/user_uploads/53090/xa3dXGdOgfB0zRY4bCb5bmki/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/IfqiHkeEx1ARye8nWYsGsp8l/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/IfqiHkeEx1ARye8nWYsGsp8l/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/53090/xa3dXGdOgfB0zRY4bCb5bmki/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/xa3dXGdOgfB0zRY4bCb5bmki/image.png\"></a></div>",
        "id": 421278310,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1707840988
    },
    {
        "content": "<p>Very cool. Would it also work in the optional header or footer? Instead of hard-coding it into the template.</p>",
        "id": 421279022,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1707841184
    },
    {
        "content": "<p>The only requirement is to have the script loaded on practically every page, so no matter where the users start using Dataverse they are presented with this popup.</p>\n<p>What do you think the best place would be for this?</p>",
        "id": 421279784,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1707841394
    },
    {
        "content": "<p>Hmm, I think I'd suggest a custom footer. If you haven't played with it, here are the docs: <a href=\"https://guides.dataverse.org/en/6.1/installation/config.html#footer-block\">https://guides.dataverse.org/en/6.1/installation/config.html#footer-block</a></p>",
        "id": 421280222,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1707841517
    },
    {
        "content": "<p>Oh, I see. As we have a lot of customization already all over in our Dataverse fork, I think we are OK with the template. But for other installations the custom header makes the most sense, I agree (google analytics code should be closest to the beginning of the page.)</p>",
        "id": 421280953,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1707841741
    },
    {
        "content": "<p>Yeah, I'm thinking of non-forks, how they might be able to follow your lead. Do you plan to do some sort of write up? Maybe post something on the Google Group?</p>",
        "id": 421281720,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1707841983
    },
    {
        "content": "<p>Is there maybe a section for these kind of customizations, hacks in the documentation? I can add a write up there, sure.</p>",
        "id": 421314479,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1707853752
    },
    {
        "content": "<p>Hmm, maybe we could just throw it on that configuration page? Where would you look for it?</p>",
        "id": 421315500,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1707854183
    },
    {
        "content": "<p>Maybe in <a href=\"https://guides.dataverse.org/en/6.1/installation/config.html#:~:text=Upload%20File%20Storage-,Branding%20Your%20Installation,-Parts%20of%20a\">Branding Your Installation</a> or under or after <a href=\"https://guides.dataverse.org/en/6.1/installation/config.html#:~:text=Tools%20for%20Translators-,Web%20Analytics%20Code,-Tracking%20Button%20Clicks\">Web Analytics Code</a>.</p>\n<p>Regarding implementation, maybe the <code>analytics-code.html </code> would be the best place to put the cookie consent code, as it would make a lot of sense semantically as well, because we mostly need the users' consent regarding analytics tracking.</p>",
        "id": 421373361,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1707888677
    },
    {
        "content": "<p>Added this PR: <a href=\"https://github.com/IQSS/dataverse/pull/10320\">https://github.com/IQSS/dataverse/pull/10320</a></p>",
        "id": 421382481,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1707894488
    },
    {
        "content": "<p>I see, under <a href=\"https://dataverse-guide--10320.org.readthedocs.build/en/10320/installation/config.html#web-analytics-code\">https://dataverse-guide--10320.org.readthedocs.build/en/10320/installation/config.html#web-analytics-code</a></p>",
        "id": 421429770,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1707911990
    },
    {
        "content": "<p>Hmm, I wonder why the image isn't showing up. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 421430038,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1707912076
    },
    {
        "content": "<p>Anyway, this is great! Thanks!</p>",
        "id": 421430051,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1707912082
    },
    {
        "content": "<p>You are welcome. Can you please also test whether the actual procedure of adding the consent popup as I described works for you?</p>",
        "id": 421430443,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1707912213
    },
    {
        "content": "<p>Well, probably not today but sure. <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 421434641,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1707913832
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"602497\">@Balázs Pataki</span> I finally got around to fixing the image. Please see <a href=\"https://github.com/IQSS/dataverse/pull/10320#issuecomment-2379365698\">https://github.com/IQSS/dataverse/pull/10320#issuecomment-2379365698</a></p>",
        "id": 473120138,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1727446039
    },
    {
        "content": "<p>Also, I'm wondering if we should bring this to the new <a class=\"stream\" data-stream-id=\"446770\" href=\"/#narrow/stream/446770-docs\">#docs</a> group for their opinion.</p>",
        "id": 473120211,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1727446065
    },
    {
        "content": "<p>We set up ours with <a href=\"https://tarteaucitron.io/en/\">https://tarteaucitron.io/en/</a> , but <span class=\"user-mention\" data-user-id=\"649905\">@luddaniel</span> <span class=\"user-mention\" data-user-id=\"651106\">@Jérôme Roucou</span> are the ones that could give you more details about it :)</p>",
        "id": 473776778,
        "sender_full_name": "Dimitri Szabo",
        "timestamp": 1727711097
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"602497\">@Balázs Pataki</span> we pulled your <a href=\"https://github.com/IQSS/dataverse/issues/10320\">#10320</a> into the current sprint but it needs your attention. Can you please check out my <a href=\"https://github.com/IQSS/dataverse/pull/10320#issuecomment-2379365698\">comment from Sep 27</a>? Or if you give me write access I'll push the changes myself. <span aria-label=\"smiling imp\" class=\"emoji emoji-1f608\" role=\"img\" title=\"smiling imp\">:smiling_imp:</span></p>",
        "id": 484383437,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1732566241
    },
    {
        "content": "<p>Sorry, yes, sure, I will check those!</p>",
        "id": 484388196,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1732568191
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 484389030,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1732568539
    },
    {
        "content": "<p>I merged your changes in the PR, built the docs. Looks good to me. Do I need to do anything more?</p>",
        "id": 484539167,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1732634723
    },
    {
        "content": "<p>Can you please merge the latest from develop into your branch?</p>",
        "id": 484540275,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1732635022
    },
    {
        "content": "<p>Pff, didn't push it, sorry about that. What about now?</p>",
        "id": 484555203,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1732639434
    },
    {
        "content": "<p>Let's take a look at <a href=\"https://dataverse-guide--10320.org.readthedocs.build/en/10320/installation/config.html#adding-cookie-consent-for-gdpr-etc\">https://dataverse-guide--10320.org.readthedocs.build/en/10320/installation/config.html#adding-cookie-consent-for-gdpr-etc</a></p>",
        "id": 484557775,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1732640245
    },
    {
        "content": "<p>Looks like what I have locally.</p>",
        "id": 484557931,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1732640291
    },
    {
        "content": "<p>I like it. Can you please add a release note snippet? At doc/release-notes/10320-cookie-consent.md or whatever. It can say something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>## Cookie Consent Popup (GDPR)\n\nFor compliance with GDPR and other privacy regulations, advice ) on adding a cookie consent popup has been added to the guides. See the new [cookie consent](https://dataverse-guide--10320.org.readthedocs.build/en/10320/installation/config.html#adding-cookie-consent-for-gdpr-etc) section and #10320.\n</code></pre></div>",
        "id": 484559509,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1732640786
    },
    {
        "content": "<p>I wrote that quickly so please fix any typos <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 484559573,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1732640810
    },
    {
        "content": "<p>Sure thing! This time, a complementary push is included with the commit. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 484574592,
        "sender_full_name": "Balázs Pataki",
        "timestamp": 1732646361
    },
    {
        "content": "<p>it's a good combo <span aria-label=\"crazy\" class=\"emoji emoji-1f61c\" role=\"img\" title=\"crazy\">:crazy:</span></p>",
        "id": 484575569,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1732646780
    },
    {
        "content": "<p>approved! thanks!</p>",
        "id": 484575679,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1732646828
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"602497\">@Balázs Pataki</span> it looks like <span class=\"user-mention\" data-user-id=\"760290\">@Omer M Fahim</span> suggested a change at <a href=\"https://github.com/IQSS/dataverse/pull/10320\">https://github.com/IQSS/dataverse/pull/10320</a> and I agree with it.</p>",
        "id": 495578504,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1737663395
    }
]