[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> do you have experience in sharing an action to the marketplace? Those that I did always included a script or something. Is it possible to just share the <code>yml</code> in its current form?</p>",
        "id": 355451736,
        "sender_full_name": "Jan Range",
        "timestamp": 1683122284
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> no but <span class=\"user-mention\" data-user-id=\"599446\">@Ana Trisovic</span> does!</p>",
        "id": 355452089,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1683122366
    },
    {
        "content": "<p>Check out <a href=\"https://github.com/marketplace/actions/dataverse-uploader-action\">https://github.com/marketplace/actions/dataverse-uploader-action</a> !</p>",
        "id": 355452160,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1683122385
    },
    {
        "content": "<p>Oh nice! Thanks for sending</p>",
        "id": 355452594,
        "sender_full_name": "Jan Range",
        "timestamp": 1683122474
    },
    {
        "content": "<p>What would you like to achieve with that action?</p>",
        "id": 355518707,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683124585
    },
    {
        "content": "<p>I would like to bundle all of this, so that end users can simply call this as a step. Nothing fancy, just to reduce boilterplate.</p>\n<div class=\"codehilite\"><pre><span></span><code>steps:\n   - name: Setup Dataverse\n      uses: IQSS/dataverse-dev@master\n</code></pre></div>",
        "id": 355520974,
        "sender_full_name": "Jan Range",
        "timestamp": 1683124871
    },
    {
        "content": "<p>Well we can create a composite action for this <a href=\"https://docs.github.com/en/actions/creating-actions/creating-a-composite-action\">https://docs.github.com/en/actions/creating-actions/creating-a-composite-action</a></p>",
        "id": 355521544,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683124983
    },
    {
        "content": "<p>But we would need to think about stuff like variables etc</p>",
        "id": 355521775,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683125036
    },
    {
        "content": "<p>Certainly those would be inputs...</p>",
        "id": 355521858,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683125044
    },
    {
        "content": "<p>And I'm not sure if the compose thing is the best way to go here</p>",
        "id": 355522106,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683125098
    },
    {
        "content": "<p>It's hard to put in env vars for the container</p>",
        "id": 355522214,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683125120
    },
    {
        "content": "<p>Ah wait, if we go for an action, we might create a compose file that references an env_file in the flesh... That might work for generating these vars before we start the container</p>",
        "id": 355523051,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683125299
    },
    {
        "content": "<p>OK so we need as inputs:</p>\n<ul>\n<li>App image name/tag</li>\n<li>Registry</li>\n<li>env var content as simple string (it's yaml, so we can just dump that in a file)</li>\n<li>Path to volume storage</li>\n</ul>\n<p>Anything else?</p>",
        "id": 355523684,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683125454
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598442\">@Guillermo Portas</span> would such an action be of use for you as well?</p>",
        "id": 355533949,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683127528
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> Of course! That action would be useful for running frontend e2e and integration tests in an automated way through GitHub actions</p>",
        "id": 355849586,
        "sender_full_name": "Guillermo Portas",
        "timestamp": 1683223177
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> is configbaker part of this?</p>",
        "id": 356983837,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1683638800
    },
    {
        "content": "<p>Absolutely</p>",
        "id": 356987851,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683639561
    },
    {
        "content": "<p>That's what will provide the hard part of bootstrapping et al</p>",
        "id": 356987936,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1683639577
    },
    {
        "content": "<p>Ok, so it's a dependency, basically. Thanks.</p>",
        "id": 356990185,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1683639977
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> and I talked about this briefly today. Stay tuned! <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 388127551,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693406532
    },
    {
        "content": "<p>We ended up creating <a href=\"https://github.com/gdcc/dataverse-action\">https://github.com/gdcc/dataverse-action</a> (a private repo) but no action there yet. <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389626217,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694083607
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin</span> <a href=\"#narrow/stream/377090-python/topic/Dataverse.20GitHub.20Action/near/389626217\">schrieb</a>:</p>\n<blockquote>\n<p>We ended up creating <a href=\"https://github.com/gdcc/dataverse-action\">https://github.com/gdcc/dataverse-action</a> (a private repo) but no action there yet. <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>\n</blockquote>\n<p>Hi Phil! Sorry for the delay, I was on vacation until today. Going to push the action today :-)</p>",
        "id": 391623475,
        "sender_full_name": "Jan Range",
        "timestamp": 1695015749
    },
    {
        "content": "<p>I just pushed the action to the repository. Here is an example run</p>\n<p><a href=\"https://github.com/gdcc/dataverse-action/actions/runs/6221210931/job/16882733005\">https://github.com/gdcc/dataverse-action/actions/runs/6221210931/job/16882733005</a></p>",
        "id": 391667624,
        "sender_full_name": "Jan Range",
        "timestamp": 1695032681
    },
    {
        "content": "<p>I am running into issues when creating a dataverse:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"o\">{</span><span class=\"s2\">\"status\"</span>:<span class=\"s2\">\"ERROR\"</span>,<span class=\"s2\">\"message\"</span>:<span class=\"s2\">\"Can't find dataverse with identifier='1'\"</span><span class=\"o\">}</span>\n</code></pre></div>\n<p>Tried it also with <code>root</code>, but no chance. My guess is that the respective dataverse hasnt been created yet - Container setup might lagging. If that is the cause, is there an API endpoint I can use to check?</p>\n<p>It worked once though, but at that point the builtin user I have created does not have permission yet. How can I set this up? The given <code>API_TOKEN</code> should enable testers to fully operate without permission issues.</p>",
        "id": 391668155,
        "sender_full_name": "Jan Range",
        "timestamp": 1695032861
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> should we talk?</p>",
        "id": 391671806,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695034161
    },
    {
        "content": "<p>I was able to resolve the issue by adding a health check for the dataverse URL \".../api/dataverses/root\", but now there is a new error message:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>ðŸš€<span class=\"w\"> </span>Creating<span class=\"w\"> </span>Test<span class=\"w\"> </span>Dataverse\n<span class=\"m\">147</span>\n<span class=\"o\">{</span><span class=\"s2\">\"status\"</span>:<span class=\"s2\">\"ERROR\"</span>,<span class=\"s2\">\"message\"</span>:<span class=\"s2\">\"Command edu.harvard.iq.dataverse.engine.command.impl.CreateDataverseCommand@5424d2a6 failed: Exception thrown from bean: jakarta.ejb.EJBTransactionRolledbackException: Exception thrown from bean: org.apache.solr.client.solrj.impl.BaseHttpSolrClient</span><span class=\"nv\">$RemoteSolrException</span><span class=\"s2\">: Error from server at http://solr:8983/solr/collection1: SolrCore 'collection1' is not available due to init failure: Could not load conf for core collection1: Can't load schema /var/solr/data/collection1/conf/schema.xml: Plugin init failure for [schema.xml] fieldType \\\"text_ws\\\": Plugin init failure for [schema.xml] analyzer/tokenizer \\\"whitespace\\\": [schema.xml] analyzer/tokenizer: missing mandatory attribute 'class'\"</span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 391671952,
        "sender_full_name": "Jan Range",
        "timestamp": 1695034214
    },
    {
        "content": "<p>We should tweak a few things probably...</p>",
        "id": 391672162,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695034300
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> sounds great! I have a meeting now and will be available again around 14.00. Would that work for you?</p>",
        "id": 391672187,
        "sender_full_name": "Jan Range",
        "timestamp": 1695034311
    },
    {
        "content": "<p>Sure, should work</p>",
        "id": 391672260,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695034325
    },
    {
        "content": "<p>Alright, does WebEx work for you? Otherwise we can also use Zoom if you have a free room or sth</p>",
        "id": 391672808,
        "sender_full_name": "Jan Range",
        "timestamp": 1695034519
    },
    {
        "content": "<p>I can provide a Zoom room</p>",
        "id": 391672843,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695034532
    },
    {
        "content": "<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 391672866,
        "sender_full_name": "Jan Range",
        "timestamp": 1695034541
    },
    {
        "content": "<p><a href=\"https://fz-juelich-de.zoom.us/j/69281413267?pwd=bDZGbFVGM1A3U0lkT3JjOE9WdkpNQT09\">https://fz-juelich-de.zoom.us/j/69281413267?pwd=bDZGbFVGM1A3U0lkT3JjOE9WdkpNQT09</a></p>\n<p><span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span></p>",
        "id": 391681940,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695038019
    },
    {
        "content": "<p>Joining in a minute :-)</p>",
        "id": 391682293,
        "sender_full_name": "Jan Range",
        "timestamp": 1695038133
    },
    {
        "content": "<p>See ya on the other side</p>",
        "id": 391682352,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695038156
    },
    {
        "content": "<p>So we worked on the action a little and created two issues: <a href=\"https://github.com/gdcc/dataverse-action/issues/2\">https://github.com/gdcc/dataverse-action/issues/2</a> and <a href=\"https://github.com/gdcc/dataverse-action/issues/1\">https://github.com/gdcc/dataverse-action/issues/1</a></p>",
        "id": 391699328,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695043503
    },
    {
        "content": "<p>We want functionality from upstream! <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 391699378,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695043518
    },
    {
        "content": "<p>2 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"377090\" href=\"/#narrow/stream/377090-python/topic/downloading.20a.20file.20by.20dataset.20DOI.20and.20filename\">#python &gt; downloading a file by dataset DOI and filename</a> by <span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin</span>.</p>",
        "id": 391705005,
        "sender_full_name": "Notification Bot",
        "timestamp": 1695045119
    },
    {
        "content": "<p>Interesting issues. <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 391733055,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695053320
    },
    {
        "content": "<p>Say more...? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 391749845,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695059615
    },
    {
        "content": "<p>I'm just looking forward to hearing more about it. I just put it on the agenda for Thursday: <a href=\"https://ct.gdcc.io\">https://ct.gdcc.io</a> <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 391750537,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695059925
    },
    {
        "content": "<p>Here's an idea for shipping the postgres/solr version: how about we use <a href=\"https://github.com/opencontainers/image-spec/blob/main/annotations.md\">labels/annotations</a>?</p>",
        "id": 391757995,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695063281
    },
    {
        "content": "<p>No objection.</p>",
        "id": 391758223,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695063391
    },
    {
        "content": "<p>We could use sth like \"org.dataverse.deps.postgresql=13\" and \"org.dataverse.deps.solr=9.3.0\"</p>",
        "id": 391758242,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695063401
    },
    {
        "content": "<p>These can be added when building the image, Maven will provide those</p>",
        "id": 391758299,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695063434
    },
    {
        "content": "<p>Sure, sounds fancy. <span aria-label=\"monocle\" class=\"emoji emoji-1f9d0\" role=\"img\" title=\"monocle\">:monocle:</span></p>",
        "id": 391758460,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695063500
    },
    {
        "content": "<p>This information definitely is metadata about the application, so it should be treated as metadata</p>",
        "id": 391758501,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695063530
    },
    {
        "content": "<p>That's what annotations are supposed to be used for</p>",
        "id": 391758518,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695063540
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> since we've added the bootstrap to the action, will the API Token be present in the environment? I remember that this will be written to it if I am not mistaking. If so, we could add a small step moving it into the Action Env.</p>",
        "id": 391875244,
        "sender_full_name": "Jan Range",
        "timestamp": 1695117308
    },
    {
        "content": "<p>I definitely wanted to make the API token available as an output of the action</p>",
        "id": 391892094,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695123157
    },
    {
        "content": "<p>But I don't think it'll be around yet</p>",
        "id": 391892110,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695123165
    },
    {
        "content": "<p>Need to look at the scripts again - that token is extracted at some place</p>",
        "id": 391892176,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695123183
    },
    {
        "content": "<p>So we should be able to expose it</p>",
        "id": 391892187,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695123190
    },
    {
        "content": "<p>Just checked the <a href=\"https://github.com/IQSS/dataverse/blob/4e1bc5bccda70f0c11fe5b6ad41e2b63360dc330/modules/container-configbaker/scripts/bootstrap/dev/init.sh#L18C1-L19C17\">scripts</a> and it is actually exported. Hence, should be available at runtime.</p>\n<p>We could write it to the GitHub env by using this line right after bootstrapping:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"nb\">echo</span><span class=\"w\"> </span><span class=\"s2\">\"API_TOKEN=</span><span class=\"nv\">$API_TOKEN</span><span class=\"s2\">\"</span><span class=\"w\"> </span>&gt;&gt;<span class=\"nv\">$GITHUB_ENV</span>\n</code></pre></div>\n<p>That way it is accessible in successive steps within the action. Shall I add and test it?</p>",
        "id": 391894157,
        "sender_full_name": "Jan Range",
        "timestamp": 1695123902
    },
    {
        "content": "<p>We could, but that is only within the action!</p>",
        "id": 391894376,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695123972
    },
    {
        "content": "<p>Alright, so you were thinking of having this as a general output of the bootstrapping alongside other outputs? Makes sense</p>",
        "id": 391894486,
        "sender_full_name": "Jan Range",
        "timestamp": 1695124011
    },
    {
        "content": "<p>Wait - actually what you are proposing... I doubt it'll work</p>",
        "id": 391894539,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124030
    },
    {
        "content": "<p>The token is exposed <em>within the script</em> running in a container</p>",
        "id": 391894575,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124043
    },
    {
        "content": "<p>That means the outer layer of our action will not know about it</p>",
        "id": 391894661,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124076
    },
    {
        "content": "<p>Oh okay, that makes sense. So there needs to be a way to extract it.</p>",
        "id": 391894782,
        "sender_full_name": "Jan Range",
        "timestamp": 1695124107
    },
    {
        "content": "<p>Stackoverflow ftw :-D </p>\n<p><a href=\"https://stackoverflow.com/questions/34051747/get-environment-variable-from-docker-container\">https://stackoverflow.com/questions/34051747/get-environment-variable-from-docker-container</a></p>",
        "id": 391894919,
        "sender_full_name": "Jan Range",
        "timestamp": 1695124155
    },
    {
        "content": "<p>No sir, that is not going to help us... The bootstrap container will not be running any longer after it's done</p>",
        "id": 391895110,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124223
    },
    {
        "content": "<p>Hm thats unfortunate :-D</p>",
        "id": 391895219,
        "sender_full_name": "Jan Range",
        "timestamp": 1695124262
    },
    {
        "content": "<p>Do you need the dataverseAdmin API token? To run tests or whatever, can you just create a new user? If the admin API isn't blocked that user can even make themselves a superuser.</p>",
        "id": 391895372,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695124306
    },
    {
        "content": "<p>So we could mount some dir to drop a file into</p>",
        "id": 391895383,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124308
    },
    {
        "content": "<p>Let me evaluate one other simple idea</p>",
        "id": 391895479,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124331
    },
    {
        "content": "<p>We could use another output channel</p>",
        "id": 391895521,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124346
    },
    {
        "content": "<p>We have fd 0, 1 and 2 by default. Let me see if I can make use of 3 to output something</p>",
        "id": 391895610,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124377
    },
    {
        "content": "<p>output redirection for the win</p>",
        "id": 391895661,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124399
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> yes, we were thinking of the bootstrap process to provide the API Token right after finishing. Done it the way you described too, but havent tried to permit super admin rights. How can that be done?</p>",
        "id": 391895937,
        "sender_full_name": "Jan Range",
        "timestamp": 1695124505
    },
    {
        "content": "<p>Hmm no we need to mount a file or directory</p>",
        "id": 391896768,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124808
    },
    {
        "content": "<p><a href=\"https://guides.dataverse.org/en/6.0/api/native-api.html#make-user-a-superuser\">https://guides.dataverse.org/en/6.0/api/native-api.html#make-user-a-superuser</a></p>",
        "id": 391897042,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695124916
    },
    {
        "content": "<p>OK this needs upstream support...</p>",
        "id": 391897192,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124968
    },
    {
        "content": "<p>I'm going to create a new issue in upstream</p>",
        "id": 391897212,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695124976
    },
    {
        "content": "<p>So I added <a href=\"https://github.com/IQSS/dataverse/issues/9933\">https://github.com/IQSS/dataverse/issues/9933</a> and created <a href=\"https://github.com/IQSS/dataverse/pull/9935\">https://github.com/IQSS/dataverse/pull/9935</a></p>",
        "id": 391924280,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695133588
    },
    {
        "content": "<p>Have a look :-)</p>",
        "id": 391924336,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695133599
    },
    {
        "content": "<p>We probably need to get some stuff merged to continue with the action...</p>",
        "id": 391924423,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695133619
    },
    {
        "content": "<p>\"Modify compose file to mount an existing file into the bootstrap container\"... should we go ahead and add this to the dev compose file? Maybe commented out?</p>",
        "id": 391931554,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695135498
    },
    {
        "content": "<p>Hmm. This use case might be far stretched from what we do in the main repo. Currently, I can't think of a usage there... But I might be wrong.</p>",
        "id": 391936073,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695136647
    },
    {
        "content": "<p>Ok. In the PR can you show a diff of what you mean?</p>",
        "id": 391937799,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695137110
    },
    {
        "content": "<p>You mean an example in the description?</p>",
        "id": 391948179,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695140130
    },
    {
        "content": "<p>Like this?</p>\n<div class=\"codehilite\"><pre><span></span><code>diff --git a/docker-compose-dev.yml b/docker-compose-dev.yml\nindex ab44dbc180..d6129cf738 100644\n--- a/docker-compose-dev.yml\n+++ b/docker-compose-dev.yml\n@@ -41,6 +41,8 @@ services:\n     command:\n       - bootstrap.sh\n       - dev\n+      - -e\n+      - /tmp/envfile.txt\n     networks:\n       - dataverse\n</code></pre></div>",
        "id": 391967876,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695146748
    },
    {
        "content": "<p>Close. Order is wrong. And it needs a volume mount for the file.</p>",
        "id": 391968457,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695146985
    },
    {
        "content": "<p>This why I'm asking for a diff <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 391968572,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695147018
    },
    {
        "content": "<p>Hrhr</p>",
        "id": 391968589,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695147027
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"w\"> </span> dev_bootstrap:\n<span class=\"w\"> </span>   container_name: \"dev_bootstrap\"\n<span class=\"w\"> </span>   image: gdcc/configbaker:unstable\n<span class=\"w\"> </span>   restart: \"no\"\n<span class=\"w\"> </span>   command:\n<span class=\"w\"> </span>     - bootstrap.sh\n<span class=\"gi\">+     - -e</span>\n<span class=\"gi\">+     - /tmp/envfile.txt</span>\n<span class=\"w\"> </span>     - dev\n<span class=\"gi\">+   volumes:</span>\n<span class=\"gi\">+     - ./envfile.txt:/tmp/envfile.txt</span>\n<span class=\"w\"> </span>   networks:\n<span class=\"w\"> </span>     - dataverse\n</code></pre></div>",
        "id": 391968891,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695147157
    },
    {
        "content": "<p>But it is important to create that file on the host first - otherwise you will end up with a folder called \"envfile.txt\"... <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 391969084,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695147241
    },
    {
        "content": "<p>Uh oh:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ file /tmp/envfile.txt\n/tmp/envfile.txt: empty\n</code></pre></div>",
        "id": 391971088,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695147830
    },
    {
        "content": "<p>oh dev needs to be last</p>",
        "id": 391971366,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695147890
    },
    {
        "content": "<p>closer, I think, but...</p>\n<p><code>dev_bootstrap&gt; File /tmp/envfile.txt not found, is a directory or not writeable</code></p>",
        "id": 391972087,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695148148
    },
    {
        "content": "<p>Did you mount the file?</p>",
        "id": 391972161,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695148174
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>$ file /tmp/envfile.txt\n/tmp/envfile.txt: empty\n$ cd /tmp/envfile.txt\n-bash: cd: /tmp/envfile.txt: Not a directory\n$ ls -l /tmp/envfile.txt\n-rw-r--r--  1 pdurbin  wheel  0 Sep 19 14:05 /tmp/envfile.txt\n</code></pre></div>",
        "id": 391972168,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695148175
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>diff --git a/docker-compose-dev.yml b/docker-compose-dev.yml\nindex ab44dbc180..82f320c1e9 100644\n--- a/docker-compose-dev.yml\n+++ b/docker-compose-dev.yml\n@@ -40,7 +40,11 @@ services:\n     restart: &quot;no&quot;\n     command:\n       - bootstrap.sh\n+      - -e\n+      - /tmp/envfile.txt\n       - dev\n+    volumes:\n+      - ./envfile.txt:/tmp/envfile.txt\n     networks:\n       - dataverse\n</code></pre></div>",
        "id": 391972234,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695148190
    },
    {
        "content": "<p>I'm glad we're talking about this here and not in the PR. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> Chat is so nice.</p>",
        "id": 391972395,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695148232
    },
    {
        "content": "<p>The container should be running as root, right? So it should have the required permissions...</p>",
        "id": 391973848,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695148653
    },
    {
        "content": "<p><code>/Library/PrivilegedHelperTools/com.docker.vmnetd</code> is running as root but all other docker things from <code>ps aux</code> are running as my user, pdurbin.</p>",
        "id": 391974885,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695149037
    },
    {
        "content": "<p>Interesting - when I mount the file to <code>/tmp</code>, it doesn't work on my machine either!</p>",
        "id": 391974950,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149060
    },
    {
        "content": "<p>It did work when I mounted to <code>/</code></p>",
        "id": 391974992,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149075
    },
    {
        "content": "<p><code>dev_bootstrap&gt; /scripts/bootstrap.sh: line 72: /tmp/envfile.txt: Permission denied</code></p>",
        "id": 391975155,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149122
    },
    {
        "content": "<p>When you say / do you really mean / of my whole file system? Or do you mean I should put my envfile.txt in the root of my git clone of dataverse?</p>",
        "id": 391975736,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695149338
    },
    {
        "content": "<p>No, I mean / of the container</p>",
        "id": 391975924,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149409
    },
    {
        "content": "<p>please show me a diff</p>",
        "id": 391975981,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695149444
    },
    {
        "content": "<p>I suppose the /tmp folder has the sticky bit set.</p>",
        "id": 391976620,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149669
    },
    {
        "content": "<p>Haha yes that is a security feature</p>",
        "id": 391977017,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149813
    },
    {
        "content": "<p><a href=\"https://stackoverflow.com/a/70894162\">https://stackoverflow.com/a/70894162</a></p>",
        "id": 391977116,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149840
    },
    {
        "content": "<p>So better not mount to /tmp <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 391977417,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149903
    },
    {
        "content": "<p>I'm happy to try whatever, a diff would help</p>",
        "id": 391977515,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695149943
    },
    {
        "content": "<p>It certainly explains why the checks did not fail but the permission still was denied</p>",
        "id": 391977524,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149945
    },
    {
        "content": "<p>Just remove /tmp</p>",
        "id": 391977539,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149953
    },
    {
        "content": "<p>All of the above but s#/tmp##</p>",
        "id": 391977601,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695149975
    },
    {
        "content": "<p>like this?</p>\n<div class=\"codehilite\"><pre><span></span><code>diff --git a/docker-compose-dev.yml b/docker-compose-dev.yml\nindex ab44dbc180..1d155561ca 100644\n--- a/docker-compose-dev.yml\n+++ b/docker-compose-dev.yml\n@@ -40,7 +40,11 @@ services:\n     restart: &quot;no&quot;\n     command:\n       - bootstrap.sh\n+      - -e\n+      - envfile.txt\n       - dev\n+    volumes:\n+      - ./envfile.txt:envfile.txt\n     networks:\n       - dataverse\n</code></pre></div>",
        "id": 391977776,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150039
    },
    {
        "content": "<p>trying it</p>",
        "id": 391978029,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150150
    },
    {
        "content": "<p><code>[ERROR] DOCKER&gt; I/O Error [Unable to create container for [gdcc/configbaker:unstable] : {\"message\":\"invalid volume specification: '/Users/pdurbin/github/iqss/dataverse/envfile.txt:envfile.txt': invalid mount config for type \\\"bind\\\": invalid mount path: 'envfile.txt' mount path must be absolute\"} (Internal Server Error: 500)]</code></p>",
        "id": 391978208,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150241
    },
    {
        "content": "<p>haven't given up yet</p>",
        "id": 391978461,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150343
    },
    {
        "content": "<p>Dude you deleted both / now</p>",
        "id": 391978997,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695150594
    },
    {
        "content": "<p>Plz go for <code>/envfile.txt</code></p>",
        "id": 391979143,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695150638
    },
    {
        "content": "<p>got it!</p>\n<div class=\"codehilite\"><pre><span></span><code>diff --git a/docker-compose-dev.yml b/docker-compose-dev.yml\nindex ab44dbc180..4a0d40917e 100644\n--- a/docker-compose-dev.yml\n+++ b/docker-compose-dev.yml\n@@ -40,7 +40,11 @@ services:\n     restart: &quot;no&quot;\n     command:\n       - bootstrap.sh\n+      - -e\n+      - envfile.txt\n       - dev\n+    volumes:\n+      - ./envfile.txt:/envfile.txt\n     networks:\n       - dataverse\n</code></pre></div>",
        "id": 391979175,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150658
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>$ cat envfile.txt\nAPI_TOKEN=97cad752-983a-446f-866e-b032998ee33d\n</code></pre></div>",
        "id": 391979256,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150702
    },
    {
        "content": "<p>Splendid!</p>",
        "id": 391979279,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695150715
    },
    {
        "content": "<p>That's what you wanted me to do?</p>",
        "id": 391979313,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150723
    },
    {
        "content": "<p>Yes Sir! <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 391979370,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695150738
    },
    {
        "content": "<p>phew</p>",
        "id": 391979394,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150745
    },
    {
        "content": "<p>So what do we do now...?</p>",
        "id": 391979654,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695150845
    },
    {
        "content": "<p>We're stuck a little with trivial changes to configbaker</p>",
        "id": 391979685,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695150862
    },
    {
        "content": "<p>I just approved <a href=\"https://github.com/IQSS/dataverse/issues/9935\">#9935</a>.</p>",
        "id": 391979726,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150884
    },
    {
        "content": "<p>Now we just wait for that PR to get merged, right?</p>",
        "id": 391979888,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150924
    },
    {
        "content": "<p>Yeah. Or PRs.</p>",
        "id": 391979954,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695150943
    },
    {
        "content": "<p>keep 'em coming!</p>",
        "id": 391980062,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695150971
    },
    {
        "content": "<p>I could hack on the action some more but I'm stuck because I don't have the upstream changes merged</p>",
        "id": 391980163,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695151011
    },
    {
        "content": "<p>Don't worry, there are only 14 PRs in QA or ready for QA! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 391980538,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695151172
    },
    {
        "content": "<p>I'm not sure if our containers-only PRs actually are helpful consuming space in QA</p>",
        "id": 391980668,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695151222
    },
    {
        "content": "<p>Sounds like its own topic. <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 391980962,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695151354
    },
    {
        "content": "<p>True, true</p>",
        "id": 391982189,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695151843
    },
    {
        "content": "<p>This topic is kinda strange already. We're talking containers in the Python stream... <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 391982276,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695151883
    },
    {
        "content": "<p>/me looks</p>\n<p>d'oh!</p>",
        "id": 391982334,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695151908
    },
    {
        "content": "<p>It's a cross section topic</p>",
        "id": 391982432,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695151938
    },
    {
        "content": "<p><img alt=\":doh:\" class=\"emoji\" src=\"https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/48103.png\" title=\"doh\"></p>",
        "id": 391982557,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695152003
    },
    {
        "content": "<p>As this is a cross section topic, let's move this to <a class=\"stream\" data-stream-id=\"379673\" href=\"/#narrow/stream/379673-dev\">#dev</a> instead of the Python channel...</p>",
        "id": 392053771,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695192495
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"377090\" href=\"/#narrow/stream/377090-python/topic/Dataverse.20GitHub.20Action\">#python &gt; Dataverse GitHub Action</a> by <span class=\"user-mention silent\" data-user-id=\"598183\">Oliver Bertuch</span>.</p>",
        "id": 392053783,
        "sender_full_name": "Notification Bot",
        "timestamp": 1695192507
    },
    {
        "content": "<p>Should we brainstorm about a list of inputs and outputs?</p>",
        "id": 392053856,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695192565
    },
    {
        "content": "<p>We should probably have an input for the tag and the image names</p>",
        "id": 392053910,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695192602
    },
    {
        "content": "<p>Should we have inputs for a Dataverse ref (tag/commit) and build images from there?</p>",
        "id": 392054035,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695192650
    },
    {
        "content": "<p>Port would also be good</p>",
        "id": 392054085,
        "sender_full_name": "Jan Range",
        "timestamp": 1695192688
    },
    {
        "content": "<p>That way people could use it with forks as well or simply make sure a specific DV version is used</p>",
        "id": 392054096,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695192697
    },
    {
        "content": "<p>Port for DV only or also for Solr/Postgres?</p>",
        "id": 392054200,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695192731
    },
    {
        "content": "<p>Oh and is that input only or outputs, too?</p>",
        "id": 392054240,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695192755
    },
    {
        "content": "<p>I'd say yes. Guess its a rare occasion but in case the default ports are occupied already, users can change it.</p>",
        "id": 392054321,
        "sender_full_name": "Jan Range",
        "timestamp": 1695192816
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598183\">Oliver Bertuch</span> <a href=\"#narrow/stream/379673-dev/topic/Dataverse.20GitHub.20Action/near/392054240\">schrieb</a>:</p>\n<blockquote>\n<p>Oh and is that input only or outputs, too?</p>\n</blockquote>\n<p>Do you mean outputting the ports?</p>",
        "id": 392054402,
        "sender_full_name": "Jan Range",
        "timestamp": 1695192847
    },
    {
        "content": "<p>Yes. Or maybe even provide a URL where DV can be reached once you set it up with the action</p>",
        "id": 392054477,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695192887
    },
    {
        "content": "<p>I mean that is probably sth people want - interact with Dataverse</p>",
        "id": 392054503,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695192904
    },
    {
        "content": "<p>Great idea!</p>",
        "id": 392054846,
        "sender_full_name": "Jan Range",
        "timestamp": 1695193103
    },
    {
        "content": "<p>Input for bootstrap timeout</p>",
        "id": 392054908,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695193141
    },
    {
        "content": "<p>Input for bootstrap persona</p>",
        "id": 392055006,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695193197
    },
    {
        "content": "<p>You've mentioned memory usage too. Would that be one to consider adding?</p>",
        "id": 392055266,
        "sender_full_name": "Jan Range",
        "timestamp": 1695193312
    },
    {
        "content": "<p>Absolutely! Some actions might require more than 2GB RAM</p>",
        "id": 392056292,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695193828
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span>  <a href=\"https://github.com/gdcc/dataverse-action/issues/3\">https://github.com/gdcc/dataverse-action/issues/3</a></p>",
        "id": 392201068,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695241109
    },
    {
        "content": "<p><a href=\"https://github.com/IQSS/dataverse/issues/9935\">#9935</a> has been merged! <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 392201339,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695241236
    },
    {
        "content": "<p>Progress...<br>\nUnder <a href=\"https://github.com/gdcc/dataverse-action/actions/runs/6254427827/job/16981926546\">https://github.com/gdcc/dataverse-action/actions/runs/6254427827/job/16981926546</a> you can see that we already are able to gather some insights and inputs.<br>\nCleaned up <a href=\"https://github.com/gdcc/dataverse-action/blob/main/action.yml\">https://github.com/gdcc/dataverse-action/blob/main/action.yml</a> and the compose file already!</p>",
        "id": 392212431,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695246760
    },
    {
        "content": "<p>Also making use of the metadata for postgres/solr version, but keep it overrideable from the action config</p>",
        "id": 392212478,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695246800
    },
    {
        "content": "<p>go go go! <img alt=\":dataverse_man:\" class=\"emoji\" src=\"https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/44207.png\" title=\"dataverse man\"></p>",
        "id": 392221332,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695252595
    },
    {
        "content": "<p>Added option to supply your own JVM options (can also be set/updated after the containers started!)</p>",
        "id": 392270425,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695284060
    },
    {
        "content": "<p>And added the exposing mechanism added with <a href=\"https://github.com/IQSS/dataverse/issues/9935\">https://github.com/IQSS/dataverse/issues/9935</a>...</p>",
        "id": 392273865,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695285239
    },
    {
        "content": "<p>Probably time to start creating some outputs...</p>",
        "id": 392273949,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1695285252
    },
    {
        "content": "<p>If people want to talk about the action, perhaps because they have a question or want to improve it, where should they go? Can we say something about this in the README? I just opened <a href=\"https://github.com/gdcc/dataverse-action/issues/6\">https://github.com/gdcc/dataverse-action/issues/6</a> about this.</p>",
        "id": 402708244,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1700230676
    },
    {
        "content": "<p>Last week we spent a few minutes talking about the action and clean up the issues a bit at <a href=\"https://github.com/gdcc/dataverse-action/issues\">https://github.com/gdcc/dataverse-action/issues</a></p>",
        "id": 406387576,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1701896434
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> is there any issue or other task we can help with?</p>",
        "id": 406387663,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1701896456
    },
    {
        "content": "<p>Should we talk about it during tomorrow's meeting?</p>",
        "id": 406387722,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1701896471
    },
    {
        "content": "<p>I'm happy to join tomorrow's meeting <span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span> One thing that <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> already addressed <a href=\"https://github.com/gdcc/pyDataverse/pull/167\">here</a> is to specify a version of Dataverse. Perhaps we can utilize this to some extent to enhance the testing process of pyDataverse.</p>",
        "id": 406388758,
        "sender_full_name": "Jan Range",
        "timestamp": 1701896757
    },
    {
        "content": "<p>Yes! Great stuff happening. Ok! I added it to <a href=\"https://docs.google.com/document/d/1Kk6oKaC2QErEVmuMYc6gTK6Qm7_n_9huiYMjlDRnAYs/edit?usp=sharing\">the agenda</a>. Thanks!</p>",
        "id": 406390259,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1701897249
    },
    {
        "content": "<p>I am currently setting up tests for python-dvuploader and I am using a local installation via <code>docker-compose</code> of the current <code>develop</code> branch. This stack containes S3-compatible services <code>minio</code> and `localstack. It would be very convenient to also have these included in the GitHub Action for CI/CD tests.</p>\n<p>If we decide to include both <code>minio</code> and <code>localstack</code>, should they be included by default or made optional? If we choose to make them optional, how can we include them in the Action?</p>",
        "id": 411695671,
        "sender_full_name": "Jan Range",
        "timestamp": 1704704737
    },
    {
        "content": "<p>A challenge might be to set/change a collection's storage. Does the endpoint <code>$SERVER_URL/api/dataverses/$PARENT</code> allow to specify a storage location, given the client is a superuser?</p>",
        "id": 411700552,
        "sender_full_name": "Jan Range",
        "timestamp": 1704706533
    },
    {
        "content": "<p>Would it make sense to have a flavor kind of thing going?</p>",
        "id": 411702312,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707183
    },
    {
        "content": "<p>We can include a base compose file with the essential services for Dataverse core</p>",
        "id": 411702359,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707202
    },
    {
        "content": "<p>And add more compose files as flavors with extension that would reference the base file</p>",
        "id": 411702438,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707236
    },
    {
        "content": "<p>A user could choose among the flavors, depending on their use case</p>",
        "id": 411702487,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707258
    },
    {
        "content": "<p>Sounds great! I think that's also nice for others who want to deploy DV to re-use these compose files <span aria-label=\"raised hands\" class=\"emoji emoji-1f64c\" role=\"img\" title=\"raised hands\">:raised_hands:</span></p>",
        "id": 411703005,
        "sender_full_name": "Jan Range",
        "timestamp": 1704707411
    },
    {
        "content": "<p><a href=\"https://docs.docker.com/compose/compose-file/14-include/\">https://docs.docker.com/compose/compose-file/14-include/</a></p>",
        "id": 411703243,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707494
    },
    {
        "content": "<p>Note: I'm not sure since which Compose version this is included...</p>",
        "id": 411703313,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707520
    },
    {
        "content": "<p>The docs for this have been created ~7 months ago, so it is probably only included in very recent versions of Docker</p>",
        "id": 411703475,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707572
    },
    {
        "content": "<p>(See <a href=\"https://github.com/compose-spec/compose-spec/commit/27008f85ac127e4d91e89bcad8bf7686ffde241f\">https://github.com/compose-spec/compose-spec/commit/27008f85ac127e4d91e89bcad8bf7686ffde241f</a>)</p>",
        "id": 411703564,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707607
    },
    {
        "content": "<p>Fancy!</p>",
        "id": 411703729,
        "sender_full_name": "Jan Range",
        "timestamp": 1704707648
    },
    {
        "content": "<p>But at least for the Action, we shall be safe if the Docker version included in the runners is recent enough</p>",
        "id": 411703832,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707692
    },
    {
        "content": "<p>It is at least a controlled environment</p>",
        "id": 411703856,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707701
    },
    {
        "content": "<p>Off topic: Is there a reason not to use 3  We are using 2.4 atm</p>",
        "id": 411703923,
        "sender_full_name": "Jan Range",
        "timestamp": 1704707724
    },
    {
        "content": "<p>Yes. Docker Maven Plugin compatibility</p>",
        "id": 411704002,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707744
    },
    {
        "content": "<p>Ah alright, that makes sense</p>",
        "id": 411704020,
        "sender_full_name": "Jan Range",
        "timestamp": 1704707752
    },
    {
        "content": "<p>We probably should leave a note in the file about that...</p>",
        "id": 411704103,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707770
    },
    {
        "content": "<p>(In upstream - downstream we can do whatever we want)</p>",
        "id": 411704187,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707805
    },
    {
        "content": "<p>When this is sorted, how can we create a collection that uses the other storage?</p>",
        "id": 411704301,
        "sender_full_name": "Jan Range",
        "timestamp": 1704707849
    },
    {
        "content": "<p>The easiest way for that would probably be a different bootstrapping flavor</p>",
        "id": 411704369,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707876
    },
    {
        "content": "<p>That will simply require us to provide such a script as a mounted file into the bootstrapping container</p>",
        "id": 411704483,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707909
    },
    {
        "content": "<p>Ok, thats nice!</p>",
        "id": 411704506,
        "sender_full_name": "Jan Range",
        "timestamp": 1704707921
    },
    {
        "content": "<p>Yeah the idea behind configbaker was always to keep things modular</p>",
        "id": 411704677,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1704707988
    },
    {
        "content": "<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/jB1o7jeFK8Wj3zh7yBSoisQi/image.png\"><img src=\"/user_uploads/53090/jB1o7jeFK8Wj3zh7yBSoisQi/image.png\"></a></div>",
        "id": 411705638,
        "sender_full_name": "Jan Range",
        "timestamp": 1704708270
    },
    {
        "content": "<p>I will create a PR this week to test the flavoring <span aria-label=\"raised hands\" class=\"emoji emoji-1f64c\" role=\"img\" title=\"raised hands\">:raised_hands:</span></p>",
        "id": 411705792,
        "sender_full_name": "Jan Range",
        "timestamp": 1704708332
    },
    {
        "content": "<p>Delicious! <span aria-label=\"yum\" class=\"emoji emoji-1f60b\" role=\"img\" title=\"yum\">:yum:</span></p>",
        "id": 411758465,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1704726989
    },
    {
        "content": "<p>I'm including the GitHub Action in a list of ways to run Dataverse in containers (<a href=\"https://github.com/IQSS/dataverse/issues/10273\">#10273</a>). What use cases am I forgetting?</p>\n<p>Use cases for the GitHub Action include:</p>\n<ul>\n<li>\n<p>Testing Client Libraries that interact with Dataverse APIs</p>\n</li>\n<li>\n<p>Testing Integrations of third party software with Dataverse</p>\n</li>\n</ul>",
        "id": 418302271,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1706284236
    },
    {
        "content": "<p>Would metadata blocks count as third party software?</p>",
        "id": 418337785,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1706296887
    },
    {
        "content": "<p>What about testing Dataverse itself for compliance with some standard?</p>",
        "id": 418337844,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1706296913
    },
    {
        "content": "<p>Is an SPI extension just an integration with third party software?</p>",
        "id": 418337970,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1706296961
    },
    {
        "content": "<p>Well, I already have a page for metadata blocks: <a href=\"https://dataverse-guide--10273.org.readthedocs.build/en/10273/container/running/metadata-blocks.html\">https://dataverse-guide--10273.org.readthedocs.build/en/10273/container/running/metadata-blocks.html</a> ... but let's discuss that over at <a class=\"stream-topic\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers/topic/tutorial.20for.20demo.20or.20eval.20.2310238\">#containers &gt; tutorial for demo or eval #10238</a></p>",
        "id": 418338194,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1706297052
    },
    {
        "content": "<p>Hmm, like if Dataverse complies with OAI-PMH?</p>",
        "id": 418338284,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1706297097
    },
    {
        "content": "<p>For SPI stuff, yeah I could maybe see \"Testing custom exports\" as a potential use of the action.</p>\n<p><a href=\"https://github.com/gdcc/dataverse-exporters\">https://github.com/gdcc/dataverse-exporters</a> contains a \"MyJSON\" exporter as an example. Maybe we could write a CI workflow that builds the jar file, drops it into the right place, spins up Dataverse, and makes an assertion (look for \"myjson\" or whatever).</p>",
        "id": 418339250,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1706297489
    },
    {
        "content": "<p>Anyway, we could discuss any of this over in the other thread. I just wanted to let folks working on the action know that I'm writing about it.</p>",
        "id": 418339436,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1706297550
    }
]