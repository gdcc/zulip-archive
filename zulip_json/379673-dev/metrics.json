[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"626369\">@Don Sizemore</span>  I was looking at this <a href=\"https://github.com/IQSS/dataverse-metrics/issues/92\">https://github.com/IQSS/dataverse-metrics/issues/92</a> <span aria-label=\"eyes\" class=\"emoji emoji-1f440\" role=\"img\" title=\"eyes\">:eyes:</span> do you have this on your radar? lol</p>",
        "id": 454047377,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1721938784
    },
    {
        "content": "<p>I'm guilty of making that PR. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 454050913,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1721940068
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> the history here is that, maybe a year or two ago(? too lazy to look) the global and site-specific metrics codebases were split apart, and global hasn't seen much attention since then. sounds like Stefano wants some metrics work done in general, but yes it's on my radar.</p>",
        "id": 454288678,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1721996643
    },
    {
        "content": "<p>I was wondering if we should merge that pr lol!</p>",
        "id": 454288756,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1721996689
    },
    {
        "content": "<p>It has a review pending from you so I was not sure <span aria-label=\"stuck out tongue wink\" class=\"emoji emoji-1f61c\" role=\"img\" title=\"stuck out tongue wink\">:stuck_out_tongue_wink:</span></p>",
        "id": 454288825,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1721996721
    },
    {
        "content": "<p>Before we pull a crowdstrike <span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span><span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span><span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span></p>",
        "id": 454288978,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1721996765
    },
    {
        "content": "<p>I'm in favor of merging it (of course, as the author), but there's no need to deploy it right away. We could even make a release first.</p>",
        "id": 454295041,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1721999064
    },
    {
        "content": "<p>I am down to merge it but since it was assigned to <span class=\"user-mention\" data-user-id=\"626369\">@Don Sizemore</span> wanted to ask first lol</p>",
        "id": 454295352,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1721999200
    },
    {
        "content": "<p>I did review it? <a href=\"https://github.com/IQSS/dataverse-metrics/pull/101\">https://github.com/IQSS/dataverse-metrics/pull/101</a></p>",
        "id": 454295454,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1721999250
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/GSNCspKateICST5kp0IRMaXn/Screenshot-2024-07-26-at-09.07.47.png\">Screenshot-2024-07-26-at-09.07.47.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/GSNCspKateICST5kp0IRMaXn/Screenshot-2024-07-26-at-09.07.47.png\" title=\"Screenshot-2024-07-26-at-09.07.47.png\"><img data-original-dimensions=\"817x266\" src=\"/user_uploads/thumbnail/53090/GSNCspKateICST5kp0IRMaXn/Screenshot-2024-07-26-at-09.07.47.png/840x560.webp\"></a></div>",
        "id": 454295527,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1721999280
    },
    {
        "content": "<p>Oh!</p>",
        "id": 454295597,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1721999298
    },
    {
        "content": "<p><span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 454295637,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1721999310
    },
    {
        "content": "<p>let me know when you want me to update the code served from <a href=\"http://metrics.dataverse.org\">metrics.dataverse.org</a> and I will.</p>",
        "id": 454295729,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1721999350
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"626369\">@Don Sizemore</span>  Beware, the review comment says \"pending\", so you did create a draft that is not visible to someone else.</p>",
        "id": 454295907,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721999407
    },
    {
        "content": "<p>I'm happy to put our a release first, if you want. Maybe it would be a good occasion to bump to 0.3.</p>",
        "id": 454295909,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1721999408
    },
    {
        "content": "<p>I merged it!</p>",
        "id": 454296027,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1721999453
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> why in the absolute hockey sticks would GitHub create a review which is not visible to the submitting party? my only options alongside that comment are to edit/delete/report.</p>",
        "id": 454307860,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1722003337
    },
    {
        "content": "<p>edit/delete/report? Should I change something?</p>",
        "id": 454314972,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1722005224
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"626369\">@Don Sizemore</span> do you happen to remember seeing this?</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;urlopen error [Errno 54] Connection reset by peer&gt;\nhttps://borealisdata.ca had an oops: &lt;urlopen error [Errno 54] Connection reset by peer&gt;\n</code></pre></div>\n<p>Nothing is jumping out at me at <a href=\"https://github.com/IQSS/dataverse-metrics/issues\">https://github.com/IQSS/dataverse-metrics/issues</a></p>",
        "id": 457182440,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723058406
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span>  I opened <a href=\"https://github.com/IQSS/dataverse-metrics/issues/97\">https://github.com/IQSS/dataverse-metrics/issues/97</a> in response to Borealis disallowing <code>..</code> but also they're behind a security device that will block anything it doesn't like</p>",
        "id": 457187238,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1723059668
    },
    {
        "content": "<p>last time, I wrote to Bikram to get metrics unblocked, I think they blocked all of <code>3.n.n.n</code></p>",
        "id": 457187285,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1723059696
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"719882\">@Bikram</span> help! <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 457187745,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723059923
    },
    {
        "content": "<p>I pushed a few unrelated commits for stuff I missed in <a href=\"https://github.com/IQSS/dataverse-metrics/pull/101\">https://github.com/IQSS/dataverse-metrics/pull/101</a> (restore to global only).</p>",
        "id": 457187973,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723060041
    },
    {
        "content": "<p>We may have found an installation that is missing from the list in production</p>",
        "id": 457188701,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723060399
    },
    {
        "content": "<p><a href=\"http://dadosabertos.rnp.br\">http://dadosabertos.rnp.br</a></p>",
        "id": 457188713,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723060407
    },
    {
        "content": "<p>Is not responding</p>",
        "id": 457188718,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723060413
    },
    {
        "content": "<p>From <span class=\"user-mention\" data-user-id=\"626369\">@Don Sizemore</span> [rocky@ip-10-0-2-188 2024-08]$ ls -al <em>abertos</em><br>\nls: cannot access '<em>abertos</em>': No such file or directory</p>",
        "id": 457188759,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723060440
    },
    {
        "content": "<p>thanks for tagging Phil, how can I help? is it getting blocked again by borealis?</p>",
        "id": 457188863,
        "sender_full_name": "Bikram",
        "timestamp": 1723060477
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> it's in the config.json list, but it's not responding so there is no cached file.</p>",
        "id": 457188890,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1723060493
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"719882\">@Bikram</span> Juan Pablo is working with metrics and getting a 403 from Borealis</p>",
        "id": 457188927,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1723060508
    },
    {
        "content": "<p>O okay, let me check</p>",
        "id": 457189202,
        "sender_full_name": "Bikram",
        "timestamp": 1723060626
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 457189788,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723060856
    },
    {
        "content": "<p>Thanks a lot <span class=\"user-mention\" data-user-id=\"719882\">@Bikram</span></p>",
        "id": 457189840,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723060875
    },
    {
        "content": "<p>I see only requests with 403 from these 2 IPs \"96.230.239.124\" \"65.112.8.22\"<br>\nnone of these IPs is in block list. I am guessing its because of the specific request \"GET /api/info/metrics/../version\"</p>",
        "id": 457193535,
        "sender_full_name": "Bikram",
        "timestamp": 1723062243
    },
    {
        "content": "<p>I think we have a rule in our proxy which does not allow \"/../\" In requests.</p>",
        "id": 457193852,
        "sender_full_name": "Bikram",
        "timestamp": 1723062338
    },
    {
        "content": "<p>I see! I will give this a look, thanks for the information <span class=\"user-mention\" data-user-id=\"719882\">@Bikram</span> t</p>",
        "id": 457194473,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723062491
    },
    {
        "content": "<p>I see IP \"65.112.8.22\" is gathering metrics from borealis right now.</p>",
        "id": 457195010,
        "sender_full_name": "Bikram",
        "timestamp": 1723062622
    },
    {
        "content": "<p>Yikes, that's me. Sorry!</p>",
        "id": 457195183,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723062659
    },
    {
        "content": "<p>I removed \"../version\" from this but I still saw the error:</p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;endpoints&quot;: {\n    &quot;single&quot;: [\n      &quot;dataverses/byCategory&quot;,\n      &quot;datasets/bySubject&quot;,\n      &quot;../version&quot;\n    ],\n</code></pre></div>",
        "id": 457195367,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723062715
    },
    {
        "content": "<p>Actually, huh. Adding <code>time.sleep(1)</code> seems to be helping. (Plus I still have the ../version endpoint out.)</p>",
        "id": 457196645,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723063091
    },
    {
        "content": "<p>oh I see now, its being blocked by abuse rule <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 457196736,
        "sender_full_name": "Bikram",
        "timestamp": 1723063118
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>0x2f12180: key=65.112.8.22 use=0 exp=59324 shard=0 gpc0=0 conn_rate(3000)=2 conn_cur=0 http_req_rate(10000)=8 http_err_rate(20000)=0\n</code></pre></div>",
        "id": 457196842,
        "sender_full_name": "Bikram",
        "timestamp": 1723063146
    },
    {
        "content": "<p>sorry for the confusion <span aria-label=\"pensive\" class=\"emoji emoji-1f614\" role=\"img\" title=\"pensive\">:pensive:</span></p>",
        "id": 457197089,
        "sender_full_name": "Bikram",
        "timestamp": 1723063213
    },
    {
        "content": "<p>due to recent AI boom and everyone want to crawl data with bots, we have been rate limiting access to one our main service with lots of data <a href=\"https://journals.scholarsportal.info/\">https://journals.scholarsportal.info/</a> and Borealis is behind same proxy. <br>\n<span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> your method is perfect, just add a bit of delay and proxy is happy. And you can add <code>../version</code> back</p>",
        "id": 457197596,
        "sender_full_name": "Bikram",
        "timestamp": 1723063360
    },
    {
        "content": "<p>I dunno, I'm still seeing this:</p>\n<div class=\"codehilite\"><pre><span></span><code>https://borealisdata.ca/api/info/metrics/../version\nhttps://borealisdata.ca had an oops: HTTP Error 403: Forbidden\n</code></pre></div>\n<p>Smells like a bug. I agree we shouldn't be sending that <code>..</code>.</p>",
        "id": 457197921,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723063470
    },
    {
        "content": "<p>when I do curl or use a browser to access <code>https://borealisdata.ca/api/info/metrics/../version</code>, the request is automatically changing to <code>GET /api/info/version</code> <br>\nI think its the bug with python library not transforming the request. And I was right about blocking requests with <code>/../</code></p>",
        "id": 457198601,
        "sender_full_name": "Bikram",
        "timestamp": 1723063685
    },
    {
        "content": "<p>Meh, I say it's a bug in our code. Here's a quick fix to get rid of the <code>..</code>:</p>\n<p><a href=\"https://github.com/IQSS/dataverse-metrics/pull/103\">https://github.com/IQSS/dataverse-metrics/pull/103</a></p>",
        "id": 457200756,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723064361
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> if you want to make a PR to add some sleep, please feel free.</p>",
        "id": 457200812,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723064383
    },
    {
        "content": "<p>We seem to need both fixes.</p>",
        "id": 457200922,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723064402
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"719882\">@Bikram</span> thanks for all your help!</p>",
        "id": 457201015,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723064412
    },
    {
        "content": "<p>Great! Want me to merge it?</p>",
        "id": 457201148,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723064455
    },
    {
        "content": "<p>you are welcome, happy to help <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 457201485,
        "sender_full_name": "Bikram",
        "timestamp": 1723064563
    },
    {
        "content": "<p>Sure! Go for it!</p>",
        "id": 457229500,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723075846
    },
    {
        "content": "<p><a href=\"http://keen.zih.tu-dresden.de\">keen.zih.tu-dresden.de</a> seems to also be down</p>",
        "id": 457377783,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723125700
    },
    {
        "content": "<p>Huh. I guess you could create an issue for that too.</p>",
        "id": 457378329,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723125872
    },
    {
        "content": "<p>Where should I create the issue? both <a href=\"http://dadosabertos.rnp.br/\">http://dadosabertos.rnp.br/</a> and <a href=\"http://keen.zih.tu-dresden.de/\">http://keen.zih.tu-dresden.de/</a> are down or should we contact someone in there?</p>",
        "id": 457379322,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723126141
    },
    {
        "content": "<p>on the dv repo?</p>",
        "id": 457379341,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723126148
    },
    {
        "content": "<p>I would think <a href=\"https://github.com/IQSS/dataverse-metrics/issues\">https://github.com/IQSS/dataverse-metrics/issues</a></p>",
        "id": 457379417,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723126180
    },
    {
        "content": "<p>Or <a href=\"https://github.com/IQSS/dataverse-installations/issues\">https://github.com/IQSS/dataverse-installations/issues</a></p>",
        "id": 457379514,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723126202
    },
    {
        "content": "<p>Thanks <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 457379551,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1723126212
    },
    {
        "content": "<p>For example <a href=\"https://github.com/IQSS/dataverse-installations/issues/235\">https://github.com/IQSS/dataverse-installations/issues/235</a> or <a href=\"https://github.com/IQSS/dataverse-installations/issues/211\">https://github.com/IQSS/dataverse-installations/issues/211</a></p>",
        "id": 457379582,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723126222
    },
    {
        "content": "<p>We can always move the issue to another repo.</p>",
        "id": 457379660,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1723126244
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin ðŸš€</span> <a href=\"#narrow/channel/379673-dev/topic/metrics/near/457182440\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"626369\">Don Sizemore</span> do you happen to remember seeing this?</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;urlopen error [Errno 54] Connection reset by peer&gt;\nhttps://borealisdata.ca had an oops: &lt;urlopen error [Errno 54] Connection reset by peer&gt;\n</code></pre></div>\n<p>Nothing is jumping out at me at <a href=\"https://github.com/IQSS/dataverse-metrics/issues\">https://github.com/IQSS/dataverse-metrics/issues</a></p>\n</blockquote>\n<p>known issue in the older metrics code. the dataverse metrics code makes use of <code>/../</code> in the URL to construct the info API call, and Borealis' WAF chomps it: <a href=\"https://github.com/IQSS/dataverse-metrics/issues/97\">https://github.com/IQSS/dataverse-metrics/issues/97</a> (are y'all using the \"global\" metrics code?)</p>",
        "id": 533965430,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1754999988
    },
    {
        "content": "<p>Sorry who are we talking about using the \"global\" metrics code?</p>\n<p>Also, thanks for reminding me of that issue.</p>",
        "id": 533979684,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1755004743
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin ðŸš€</span>  <a href=\"http://metrics.dataverse.org\">metrics.dataverse.org</a> is still running the (now-deleted) global/ subdirectory version of dataverse-metrics. I can cobble in your PR there.</p>",
        "id": 533992761,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1755008529
    },
    {
        "content": "<p>Or I can put out a proper release if you like!</p>",
        "id": 533993067,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1755008615
    }
]