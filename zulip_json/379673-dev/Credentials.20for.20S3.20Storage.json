[
    {
        "content": "<p>Hi, I have just started working with Dataverse and today I'm working on adding the necessary configuration to use S3 for storage. I know from the documentation that AWS credentials need to be in the credentials file. I was just wondering if environment variables wouldn't work as well (ASW_ACCESS_KEY_ID and  AWS_SECRET_ACCESS_KEY) as it is normally the standard behavior: <a href=\"https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/credentials.html\">https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/credentials.html</a>. Looking at the source code I see why it is not working, as you build your own  AWSCredentialsProviderChain. Now I was wondering if you would accept a PR which adds the EnvironmentVariableCredentialsProvider  into the chain as well, so that environment variables are supported as well, similar to the default behavior. Especially in a development environment with docker-compose this would be easier that mapping a credential file into the docker container.</p>",
        "id": 395678380,
        "sender_full_name": "Guido Schmutz",
        "timestamp": 1696851432
    },
    {
        "content": "<p>Just realized that I have missed the two properties <code>dataverse.files.&lt;id&gt;.access-key</code> and <code>dataverse.files.&lt;id&gt;.secret-key</code> which solves the problem, but I think supporting the environment variables would still be a nice, of course with a WARNING in the doc to not use it for production deployments <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 395681721,
        "sender_full_name": "Guido Schmutz",
        "timestamp": 1696852454
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"656972\">@Guido Schmutz</span> and welcome <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span></p>",
        "id": 395690614,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855299
    },
    {
        "content": "<p>Please note that both <code>dataverse.files.&lt;id&gt;.access-key</code> and <code>dataverse.files.&lt;id&gt;.secret-key</code> are MicroProfile Config enabled already, thus you can already use environment variables to get them in</p>",
        "id": 395690814,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855353
    },
    {
        "content": "<p>You can also use <a href=\"https://docs.payara.fish/community/docs/Technical%20Documentation/MicroProfile/Config/Overview.html\">any other MPC source</a>, as linked in the <a href=\"http://preview.guides.gdcc.io/en/develop/installation/config.html#credentials-via-microprofile-config\">guides</a>.</p>",
        "id": 395691111,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855450
    },
    {
        "content": "<p>If you are using containers, you might be interested in <a href=\"http://preview.guides.gdcc.io/en/develop/container/index.html\">http://preview.guides.gdcc.io/en/develop/container/index.html</a></p>",
        "id": 395691167,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855470
    },
    {
        "content": "<p>And if you're using containers in a cloud / K8s scenario, you might want to use the cloud provider's KMS solution - there are some sources available builtin with Payara</p>",
        "id": 395691306,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855515
    },
    {
        "content": "<p>That said, please be aware that the other <code>dataverse.files.&lt;...&gt;</code> have not yet been enabled to be used with MicroProfile Config. It's on the <a href=\"https://docs.google.com/document/d/14DHDB24Cp_kzpYqhHCKCtnzOw8_WuLOOONyqJHSsaYM/edit#heading=h.ysp9fn6ri34v\">roadmap in Milestone D</a>.</p>",
        "id": 395691566,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855599
    },
    {
        "content": "<p>And last but not least: the container nerds hang in <a class=\"stream\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers\">#containers</a> - feel free to ask questions there</p>",
        "id": 395691664,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855630
    },
    {
        "content": "<p>We also have a weekly working group call, see <a href=\"https://ct.gdcc.io/\">https://ct.gdcc.io/</a> for notes and recordings</p>",
        "id": 395691729,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855655
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598183\">Oliver Bertuch</span> <a href=\"#narrow/stream/379673-dev/topic/Credentials.20for.20S3.20Storage/near/395690814\">said</a>:</p>\n<blockquote>\n<p>Please note that both <code>dataverse.files.&lt;id&gt;.access-key</code> and <code>dataverse.files.&lt;id&gt;.secret-key</code> are MicroProfile Config enabled already, thus you can already use environment variables to get them in</p>\n</blockquote>\n<p>To make that easier: the env vars are <code>DATAVERSE_FILES_&lt;ID&gt;_ACCESS_KEY</code> and <code>DATAVERSE_FILES_&lt;ID&gt;_SECRET_KEY</code></p>",
        "id": 395691936,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855715
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> thanks for your help and reply. Yes I have already used the two env variables for the access key and secret and it works perfectly! Have only seen it in the doc after I have sent my first message. I know RTFM ;-) which I did just didn't scroll down until the end of the many <code>dataverse.files.xxxx</code> settings <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 395692402,
        "sender_full_name": "Guido Schmutz",
        "timestamp": 1696855866
    },
    {
        "content": "<p>Yeah, saw your second message but thought I'd provide some more pointers and context... <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 395692562,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855922
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598183\">Oliver Bertuch</span> <a href=\"#narrow/stream/379673-dev/topic/Credentials.20for.20S3.20Storage/near/395691664\">said</a>:</p>\n<blockquote>\n<p>And last but not least: the container nerds hang in <a class=\"stream\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers\">#containers</a> - feel free to ask questions there</p>\n</blockquote>\n<p>yes that's where I was but then thought it is more a general questions and that's why I posted it here ....</p>",
        "id": 395692639,
        "sender_full_name": "Guido Schmutz",
        "timestamp": 1696855928
    },
    {
        "content": "<p>I agree - the whole <code>dataverse.files.&lt;id&gt;</code> complex is still TODO and will be beneficial for all kinds of use cases / installation types.</p>",
        "id": 395692802,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1696855983
    },
    {
        "content": "<p>A message was moved from this topic to <a class=\"stream-topic\" data-stream-id=\"379673\" href=\"/#narrow/stream/379673-dev/topic/Platys.20App.20Stack\">#dev &gt; Platys App Stack</a> by <span class=\"user-mention silent\" data-user-id=\"598183\">Oliver Bertuch</span>.</p>",
        "id": 395694244,
        "sender_full_name": "Notification Bot",
        "timestamp": 1696856404
    },
    {
        "content": "<p>This week I plan to start working on this issue: Add S3 tests to the regular integration test suite <a href=\"https://github.com/IQSS/dataverse/issues/6783\">#6783</a></p>",
        "id": 395696294,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1696857028
    },
    {
        "content": "<p>So hopefully I'll start exercising some of this code. It's good timing.</p>",
        "id": 395696345,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1696857053
    }
]