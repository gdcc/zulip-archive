[
    {
        "content": "<p>Hi! I'm trying to set a step in my workflow to let the Curator of a dataset, send a message to the author when they return the dataset in question. So far I've used this workflow.json: </p>\n<blockquote>\n<p>{<br>\n    \"name\": \"Internal steps with pause\",<br>\n    \"steps\": [<br>\n        {<br>\n            \"provider\":\":internal\",<br>\n            \"stepType\":\"log\",<br>\n            \"parameters\": {<br>\n                \"step\":1,<br>\n                \"stepName\":\"first step\"<br>\n            }<br>\n        },<br>\n        {<br>\n            \"provider\":\":internal\",<br>\n            \"stepType\":\"pause/message\",<br>\n            \"parameters\": {<br>\n                \"paramName\":\"parameter value with a longer name.\"<br>\n            }<br>\n        },<br>\n        {<br>\n            \"provider\":\":internal\",<br>\n            \"stepType\":\"log\",<br>\n            \"parameters\": {<br>\n                \"number\":42,<br>\n                \"anotherMessage\": \"This is the last step before releasing.\"<br>\n            }<br>\n        }<br>\n    ]<br>\n}<br>\n</p>\n</blockquote>\n<p>I've set the workflow with this: &nbsp;curl -X PUT -H \"Content-Type: application/json\" --upload-file workflow.json &nbsp;<a href=\"https://papyrus-datos.co/api/admin/workflows\">https://papyrus-datos.co/api/admin/workflows</a></p>\n<p>And then assigned that workflow to \"PrePublishDataset\" like this: curl -X PUT -d 1 <a href=\"http://localhost:8080/api/admin/workflows/default/PrePublishDataset\">http://localhost:8080/api/admin/workflows/default/PrePublishDataset</a></p>\n<p>When I do a &nbsp;\"curl <a href=\"http://localhost:8080/api/admin/workflows/default\">http://localhost:8080/api/admin/workflows/default</a>\" I get the following: {\"status\":\"OK\",\"data\":{\"PrePublishDataset\":{\"id\":1,\"name\":\"Internal steps with pause\"},\"PostPublishDataset\":null}}</p>\n<p>But when I'm trying to return the dataset to the author... Dataverse doesn't show the modal with the message textbox:<br>\n<a href=\"/user_uploads/53090/I0iwhbA9SnNzmtf5aSJ4ggx1/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/I0iwhbA9SnNzmtf5aSJ4ggx1/image.png\" title=\"image.png\"><img data-original-dimensions=\"716x177\" src=\"/user_uploads/thumbnail/53090/I0iwhbA9SnNzmtf5aSJ4ggx1/image.png/840x560.webp\"></a></div><p>Can anyone help me a little bit? What am I doing wrong?</p>",
        "id": 461955451,
        "sender_full_name": "Juan López",
        "timestamp": 1723495682
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"651393\">@Juan López</span> what version of Dataverse are you running? If you upgrade to 6.2, this feature is included.</p>\n<p>Please see \"When Returning Datasets to Authors, Reviewers Can Add a Note to the Author\" at <a href=\"https://github.com/IQSS/dataverse/releases/tag/v6.2\">https://github.com/IQSS/dataverse/releases/tag/v6.2</a></p>",
        "id": 461957396,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1723496613
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span>  Hi Philip... I'm running Dataverse 6.0. Is upgrading to 6.2 the only way to have this feature?</p>",
        "id": 461957878,
        "sender_full_name": "Juan López",
        "timestamp": 1723496804
    },
    {
        "content": "<p>Well, with 6.0 your curators can send a message via API. See <code>reasonForReturn</code> at <a href=\"https://guides.dataverse.org/en/6.0/api/native-api.html#return-a-dataset-to-author\">https://guides.dataverse.org/en/6.0/api/native-api.html#return-a-dataset-to-author</a></p>",
        "id": 461958347,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1723497017
    },
    {
        "content": "<p>Ok... that works! Thank you Philip</p>",
        "id": 461960802,
        "sender_full_name": "Juan López",
        "timestamp": 1723498090
    }
]