[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> in the docs meeting I just mentioned the API docs you generated using OpenAPI and <a href=\"https://readme.com\">https://readme.com</a></p>",
        "id": 477658082,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1729258739
    },
    {
        "content": "<p>Do you still have an example up somewhere?</p>",
        "id": 477658107,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1729258747
    },
    {
        "content": "<p>Of course, you can find the example here - <a href=\"https://test-dv.readme.io\">https://test-dv.readme.io</a></p>",
        "id": 477658815,
        "sender_full_name": "Jan Range",
        "timestamp": 1729258965
    },
    {
        "content": "<p>wow, that looks great!</p>",
        "id": 477658921,
        "sender_full_name": "Dieuwertje Bloemen",
        "timestamp": 1729259001
    },
    {
        "content": "<p>I agree, its really nice! You can also test/run the endpoints</p>",
        "id": 477659128,
        "sender_full_name": "Jan Range",
        "timestamp": 1729259053
    },
    {
        "content": "<p>This non-developer is very happy to see that <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 477660668,
        "sender_full_name": "Dieuwertje Bloemen",
        "timestamp": 1729259477
    },
    {
        "content": "<p>this looks so cool! love the ability to edit the variables in an API call directly from the interface, makes that really clear for people. we discussed having this kind of API docs in the <a href=\"https://docs.google.com/document/d/1O1v9aMSCNe9ak2_Md2plfaJw42XJuIrb7l1-sSg4hus/edit?usp=sharing\">docs meeting</a> today, to remove manual error/inconsistencies and have more automated updating.</p>",
        "id": 477661772,
        "sender_full_name": "Vaida Plankytƒó üé®",
        "timestamp": 1729259818
    },
    {
        "content": "<p>It's extremely cool. Thanks, <span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span>! <img alt=\":dataverse_man:\" class=\"emoji\" src=\"https://avatars.zulip.com/53090/emoji/images/c7b94a03.png\" title=\"dataverse man\"></p>",
        "id": 477685374,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1729266802
    },
    {
        "content": "<p>I'm slightly bummed that if I click \"try it\" at <a href=\"https://test-dv.readme.io/reference/getversioninfo\">https://test-dv.readme.io/reference/getversioninfo</a> it complains that I need an API token. It's an open API that doesn't require auth: <a href=\"https://demo.dataverse.org/api/v1/info/version\">https://demo.dataverse.org/api/v1/info/version</a></p>",
        "id": 477685562,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1729266875
    },
    {
        "content": "<p>Yes, that is a bit annoying. This stems from the OpenAPI specs though, because I have added the TokenAuth globally to use endpoints that do require auth. You can add the security scheme per endpoint though and then it shouldnt be mandatory anymore for all of them</p>",
        "id": 477687930,
        "sender_full_name": "Jan Range",
        "timestamp": 1729267670
    },
    {
        "content": "<p>I see. <span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> do you happen to know what we should add on the Java side?</p>",
        "id": 477688114,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1729267712
    },
    {
        "content": "<p>I will figure it out, but will it work even if it is set globally ? <span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> ?</p>",
        "id": 477701318,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1729272970
    },
    {
        "content": "<p>Like if you set it globally and then some endpoints are just marked as secured</p>",
        "id": 477701387,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1729273001
    },
    {
        "content": "<p>I wonder how it will work or should work with endpoints that return different things depending on auth</p>",
        "id": 477701457,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1729273038
    },
    {
        "content": "<p>We already put <code>@AuthRequired</code> on all the endpoints that require auth, if that helps.</p>",
        "id": 477703887,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1729274058
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> yes you can define a global auth scheme and then assign it to each endpoint that requires it. It is also possible to render auth optional, using the following on an endpoint:</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">security</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"p p-Indicator\">{}</span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">api_key</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">[]</span>\n</code></pre></div>",
        "id": 477786826,
        "sender_full_name": "Jan Range",
        "timestamp": 1729326625
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599841\">Jan Range</span> <a href=\"#narrow/channel/446770-docs/topic/API.20docs.20from.20OpenAPI/near/477786826\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"648750\">Juan Pablo Tosca Villanueva</span> yes you can define a global auth scheme and then assign it to each endpoint that requires it. It is also possible to render auth optional, using the following on an endpoint:</p>\n<p><div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">security</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"p p-Indicator\">{}</span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">api_key</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">[]</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I have to start making merits so <span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> mentions me on the next DV community meeting <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> , would this be what we need for this to work correctly? \"<a href=\"https://github.com/IQSS/dataverse/pull/10971\">https://github.com/IQSS/dataverse/pull/10971</a>\" sample:</p>\n<div class=\"codehilite\"><pre><span></span><code>post:\n      tags:\n      - saveAuxiliaryFileWithVersion\n      summary: Save auxiliary file with version\n      description: Saves an auxiliary file\n      operationId: Access_saveAuxiliaryFileWithVersion\n      parameters:\n      - name: fileId\n        in: path\n        required: true\n        schema:\n          format: int64\n          type: integer\n      - name: formatTag\n        in: path\n        required: true\n        schema:\n          type: string\n      - name: formatVersion\n        in: path\n        required: true\n        schema:\n          type: string\n      requestBody:\n        content:\n          multipart/form-data:\n            schema:\n              type: string\n      responses:\n        &quot;200&quot;:\n          description: File saved response\n        &quot;403&quot;:\n          description: User not authorized to edit the dataset.\n        &quot;400&quot;:\n          description: File not found based on id.\n      security:\n      - api_token: []\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin üêâ</span></p>",
        "id": 478944026,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1729870874
    },
    {
        "content": "<p>We would need to add the annotation ¬†@SecurityRequirement(name = \"api_token\") to each secured endpoint and then disable the global one is my guess.</p>",
        "id": 478944235,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1729870940
    },
    {
        "content": "<p>I think we also need to define the:</p>\n<div class=\"codehilite\"><pre><span></span><code> &quot;securitySchemes&quot; : {\n      &quot;api_key&quot; : {\n        &quot;type&quot; : &quot;apiKey&quot;,\n        &quot;name&quot; : &quot;api_key&quot;,\n        &quot;scheme&quot; : &quot;api_key&quot;\n      }\n    }\n</code></pre></div>\n<p>Still trying to figure it out how to do it for microprofile</p>",
        "id": 478951257,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1729873395
    },
    {
        "content": "<p>I am so close...</p>",
        "id": 480115004,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1730493384
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/rVQDTeNnbvA1QE9iK4vf_Hq2/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/rVQDTeNnbvA1QE9iK4vf_Hq2/image.png\" title=\"image.png\"><img data-original-dimensions=\"459x478\" src=\"/user_uploads/thumbnail/53090/rVQDTeNnbvA1QE9iK4vf_Hq2/image.png/840x560.webp\"></a></div>",
        "id": 480115007,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1730493388
    },
    {
        "content": "<p>2 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"379673\" href=\"/#narrow/channel/379673-dev/topic/Zed\">#dev &gt; Zed</a> by <span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin üêâ</span>.</p>",
        "id": 480115086,
        "sender_full_name": "Notification Bot",
        "timestamp": 1730493445
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> that looks promising! Looking forward to the result</p>",
        "id": 480853371,
        "sender_full_name": "Jan Range",
        "timestamp": 1730875082
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> he's talking about the hub, not Dataverse: <a href=\"https://github.com/IQSS/dataverse-hub\">https://github.com/IQSS/dataverse-hub</a></p>\n<p>I wouldn't want to get your hopes up. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 480925278,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1730901403
    },
    {
        "content": "<p>But it may pave the path to do this on DV one day in the future <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 480930465,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1730902907
    },
    {
        "content": "<p>I am/was looking at this today, the documentation I made for the hub was done with SpringDoc (to generate) and Swagger tags to define the documentation, it seems that smallrye (generator) favors the use of the eclipse microprofile tags for definition of the documentation. Which makes it awkward because A LOT of the annotations share the same exact same name, and let's say 95% of the properties but there are small differences that make them not compatible between the two of them.</p>",
        "id": 484591774,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1732653273
    },
    {
        "content": "<p>For example this issue is something that is also preventing me from defining this global security schema: <a href=\"https://stackoverflow.com/questions/78701162/generating-openapi-with-eclipse-microprofile-annotations-how-to-configure-globa\">https://stackoverflow.com/questions/78701162/generating-openapi-with-eclipse-microprofile-annotations-how-to-configure-globa</a></p>",
        "id": 484591854,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1732653312
    },
    {
        "content": "<p>I probably could try to make a demo with SpringDocs + Swagger annotations but I am not sure if any of you guys have hard set opinions on one or the other... (looks at <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span>) <span aria-label=\"eyes\" class=\"emoji emoji-1f440\" role=\"img\" title=\"eyes\">:eyes:</span></p>",
        "id": 484592021,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1732653378
    },
    {
        "content": "<p>TLDR: [Spring docs + Swagger tags] vs [Smallrye + Microprofile]</p>",
        "id": 484592124,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1732653430
    },
    {
        "content": "<p>We could also look at a third option that is removing the generator and see what payara likes...</p>",
        "id": 484593141,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1732653867
    },
    {
        "content": "<p>Maybe we could experiment in a couple branches with different solutions.</p>",
        "id": 484595307,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1732654779
    },
    {
        "content": "<p>How does this look?</p>\n<div class=\"codehilite\"><pre><span></span><code>/info/applicationTermsOfUse:\n  get:\n    tags:\n    - info\n    operationId: Info_getApplicationTermsOfUse\n    parameters:\n    - name: lang\n      in: query\n      description: Two-character language code.\n      required: false\n      schema:\n        type: string\n      example: en\n    responses:\n      &quot;200&quot;:\n        description: Application Terms of Use (General Terms of Use) that must be\n          agreed to at signup.\n</code></pre></div>",
        "id": 511658248,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1744379683
    },
    {
        "content": "<p>That's from this commit: <a href=\"https://github.com/IQSS/dataverse/pull/11422/commits/26b9be752c0603ef7689244b5d2bab4c1e88f8de\">https://github.com/IQSS/dataverse/pull/11422/commits/26b9be752c0603ef7689244b5d2bab4c1e88f8de</a></p>",
        "id": 511658315,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1744379703
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> <span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> ^^</p>",
        "id": 511658362,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1744379714
    }
]