[
    {
        "content": "<p>When running the dev containers via <code>docker compose</code> or <code>mvn</code> the container names will differ. This causes problems when I want to use the file watcher mechanism to track changes to xhtml-s and to copy them to the container via <code>cpwebapp.sh</code>, which assumes the container is called <code>dev_dataverse</code>. However, when the container is run via <code>mvn</code> the container name will be <code> dataverse-1</code>.</p>\n<p>Should we solve the container names, or should we check for either names in <a href=\"http://cpwebapp.sh\">cpwebapp.sh</a>?</p>\n<div class=\"codehilite\"><pre><span></span><code>docker compose -f docker-compose-dev.yml up\n\n&gt; docker ps --format &quot;table {{.ID}}\\t{{.Image}}\\t{{.Command}}\\t{{.Names}}&quot;\nCONTAINER ID   IMAGE                                           COMMAND                  NAMES\nbeb95a3c1d2d   caddy:2-alpine                                  &quot;caddy run -c /Caddyâ€¦&quot;   dataverse-develop-dev_proxy-1\n4614654d1b01   gdcc/dataverse:unstable                         &quot;/usr/bin/dumb-init â€¦&quot;   dev_dataverse\n0b5c5232d941   solr:9.8.0                                      &quot;docker-entrypoint.sâ€¦&quot;   dev_solr\nedb7e9476909   postgres:17                                     &quot;docker-entrypoint.sâ€¦&quot;   dev_postgres\n7044e743147b   localstack/localstack:4.2.0                     &quot;docker-entrypoint.sh&quot;   dev_localstack\n76dd4250c801   minio/minio                                     &quot;/usr/bin/docker-entâ€¦&quot;   dev_minio\nb5636aa4f019   maildev/maildev:2.0.5                           &quot;bin/maildev&quot;            dev_smtp\n393d8c10079e   quay.io/keycloak/keycloak:26.3.2                &quot;/opt/keycloak/bin/kâ€¦&quot;   dev_keycloak\nc2ada61a01ac   trivadis/dataverse-previewers-provider:latest   &quot;/docker-entrypoint.â€¦&quot;   previewers-provider\nc5b364b6e237   moby/buildkit:buildx-stable-1                   &quot;buildkitd&quot;              buildx_buildkit_maven0\n</code></pre></div>\n<hr>\n<div class=\"codehilite\"><pre><span></span><code>mvn -Pct docker:run -Dapp.skipDeploy\n\n&gt; docker ps --format &quot;table {{.ID}}\\t{{.Image}}\\t{{.Command}}\\t{{.Names}}&quot;\nCONTAINER ID   IMAGE                                           COMMAND                  NAMES\nd7fc1dadd3c5   caddy:2-alpine                                  &quot;caddy run -c /Caddyâ€¦&quot;   caddy-1\ne927ec10f15e   gdcc/dataverse:unstable                         &quot;/usr/bin/dumb-init â€¦&quot;   dataverse-1\nc900f4ebc1a5   solr:9.8.0                                      &quot;docker-entrypoint.sâ€¦&quot;   solr-1\n74429f1d6d33   trivadis/dataverse-deploy-previewers:latest     &quot;./entrypoint.sh depâ€¦&quot;   dataverse-deploy-previewers-1\n8b52ebd65611   trivadis/dataverse-previewers-provider:latest   &quot;/docker-entrypoint.â€¦&quot;   dataverse-previewers-provider-1\n982bd0b46f49   minio/minio                                     &quot;/usr/bin/docker-entâ€¦&quot;   minio-1\nd5bd12b5d4fd   localstack/localstack:4.2.0                     &quot;docker-entrypoint.sh&quot;   localstack-1\ne4f714deaf07   quay.io/keycloak/keycloak:26.3.2                &quot;/opt/keycloak/bin/kâ€¦&quot;   keycloak-1\n54b960639150   maildev/maildev:2.0.5                           &quot;bin/maildev&quot;            maildev-5\n51124b94a648   postgres:17                                     &quot;docker-entrypoint.sâ€¦&quot;   postgres-1\nec6eb6226341   gdcc/configbaker:unstable                       &quot;/usr/bin/dumb-init â€¦&quot;   configbaker-1\n94d745503c49   gdcc/configbaker:unstable                       &quot;/usr/bin/dumb-init â€¦&quot;   dev_bootstrap\nbf559db844df   trivadis/dataverse-deploy-previewers:latest     &quot;./entrypoint.sh depâ€¦&quot;   register-previewers\nc5b364b6e237   moby/buildkit:buildx-stable-1                   &quot;buildkitd&quot;              buildx_buildkit_maven0\n</code></pre></div>",
        "id": 547314434,
        "sender_full_name": "BalÃ¡zs Pataki",
        "timestamp": 1761580409
    },
    {
        "content": "<p>Consistent naming sounds good to me. <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> what do you think?</p>",
        "id": 547315015,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1761580541
    },
    {
        "content": "<p>And also <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> : how to solve it? <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 547316084,
        "sender_full_name": "BalÃ¡zs Pataki",
        "timestamp": 1761580796
    },
    {
        "content": "<p>I can work around the names in Â <a href=\"http://cpwebapp.sh\">cpwebapp.sh</a> but I'd prefer consistent naming as well.</p>",
        "id": 547316300,
        "sender_full_name": "BalÃ¡zs Pataki",
        "timestamp": 1761580839
    },
    {
        "content": "<p>Ok, this maybe easy, just need to add <code>&lt;containerNamePattern&gt;%a&lt;/containerNamePattern&gt;</code> to <code>docker-maven-plugin</code> config, sg. like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;plugin&gt;\n  &lt;groupId&gt;io.fabric8&lt;/groupId&gt;\n  &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n   ...\n    &lt;containerNamePattern&gt;%a&lt;/containerNamePattern&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre></div>\n<p>Very intuitive. <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 547322943,
        "sender_full_name": "BalÃ¡zs Pataki",
        "timestamp": 1761582516
    },
    {
        "content": "<p>Hi folks. I'm fine with whatever.  It's probably easier to make the Maven Plugin use the same names as compose creates. PRs welcome.</p>",
        "id": 547429105,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1761638529
    },
    {
        "content": "<p>Submitted PRs for both issues:</p>\n<p><a href=\"https://github.com/IQSS/dataverse/pull/11935\">https://github.com/IQSS/dataverse/pull/11935</a></p>\n<p><a href=\"https://github.com/IQSS/dataverse/pull/11936\">https://github.com/IQSS/dataverse/pull/11936</a></p>",
        "id": 547442707,
        "sender_full_name": "BalÃ¡zs Pataki",
        "timestamp": 1761643143
    },
    {
        "content": "<p>The fix was to add <code>&lt;containerNamePattern&gt;%a&lt;/containerNamePattern&gt;</code>? Weird. <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 547473565,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1761652499
    },
    {
        "content": "<p>\"The <code>&lt;alias&gt;</code> of an image which must be set. The alias is set in the top-level image configuration\" -- <a href=\"https://fabric8io.github.io/docker-maven-plugin/\">https://fabric8io.github.io/docker-maven-plugin/</a> 4.2. Container Names</p>",
        "id": 547473782,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1761652572
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"602497\">@BalÃ¡zs Pataki</span> thanks for the PRs!</p>",
        "id": 547473810,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1761652583
    }
]