[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> i have tried starting up the dataverse container using compose .. i see it going through creating all of the containers for solr, dataverse, postgres, maildev, etc .. and building the db, etc .. but i see a lot of errors that look like: </p>\n<p>\"dev_bootstrap         | 2023-09-05T19:38:21Z ERR Expectation failed error=\"failed to establish an http connection, caused by: Get \\\"<a href=\"http://dataverse:8080/api/info/version\\\">http://dataverse:8080/api/info/version\\</a>\": dial tcp 172.18.0.7:8080: connect: connection refused\" address=http://dataverse:8080/api/info/version<br>\ndev_bootstrap         | 2023-09-05T19:39:23Z INF [HTTP] Checking the <a href=\"http://dataverse:8080/api/info/version\">http://dataverse:8080/api/info/version</a> ...<br>\ndev_bootstrap         | 2023-09-05T19:39:23Z ERR Expectation failed error=\"the status code doesn't expect\" actual=404 expect=200\"</p>",
        "id": 389268526,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693943242
    },
    {
        "content": "<p>Hmm, a few of those errors are ok at the beginning.</p>",
        "id": 389268609,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693943276
    },
    {
        "content": "<p>Is it still going? Still doing stuff?</p>",
        "id": 389268687,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693943294
    },
    {
        "content": "<p>do i need to edit the docker-compose-dev.yml file and change the hostname? and/or do i still need to build the image?</p>",
        "id": 389268708,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693943307
    },
    {
        "content": "<p>it is running (looks like it) but i can't reach it from &lt;mydomain&gt;:8080 (I added a dns entry pointing to a load balancer, pointing to the instance that I am running docker in)</p>",
        "id": 389268797,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693943347
    },
    {
        "content": "<p>You shouldn't need to build the image.</p>",
        "id": 389268944,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693943396
    },
    {
        "content": "<p>Did you see this at the end? \"Done, your instance has been configured for development. Have a nice day!\"</p>",
        "id": 389269152,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693943475
    },
    {
        "content": "<p>okay it might be okay and i just need to adjust something with security groups or something else .. it looks like it is running, i am seeing payara messages that look like normal ones</p>",
        "id": 389269155,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693943475
    },
    {
        "content": "<p>oh i didn't see that message you mentioned ..</p>",
        "id": 389269247,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693943515
    },
    {
        "content": "<p>That message should come at the end. It's how you know Dataverse has been configured.</p>",
        "id": 389269425,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693943580
    },
    {
        "content": "<p>You shouldn't need to edit any hostnames.</p>",
        "id": 389269484,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693943609
    },
    {
        "content": "<p>the last thing that i see is the payara log and the message \"HarvesterService: checking timer 2\"</p>",
        "id": 389269508,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693943618
    },
    {
        "content": "<p>Hmm, would you be able to attach as much of the output as possible here as a text file?</p>",
        "id": 389270050,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693943853
    },
    {
        "content": "<p>yes, let me stop and start it again .. here are all the containers running: <br>\n<a href=\"/user_uploads/53090/nL37HqJHmsiG0-ekrMw1oaR_/docker-stuff.JPG\">docker-stuff.JPG</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/nL37HqJHmsiG0-ekrMw1oaR_/docker-stuff.JPG\" title=\"docker-stuff.JPG\"><img src=\"/user_uploads/53090/nL37HqJHmsiG0-ekrMw1oaR_/docker-stuff.JPG\"></a></div>",
        "id": 389270240,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693943915
    },
    {
        "content": "<p>just a sec ..  will get the output</p>",
        "id": 389270282,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693943929
    },
    {
        "content": "<p>here is all that i was able to get .. not sure it is getting all of the errors<br>\n<a href=\"/user_uploads/53090/D3j3eOPyEHZH0CcWaa8Uk8Ge/docker-output4.txt\">docker-output4.txt</a></p>",
        "id": 389274736,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693945756
    },
    {
        "content": "<p>Thanks. Something is fishy <span aria-label=\"fish\" class=\"emoji emoji-1f41f\" role=\"img\" title=\"fish\">:fish:</span></p>",
        "id": 389275083,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693945896
    },
    {
        "content": "<p>This is a bad sign: <code>dev_bootstrap         | Error: context deadline exceeded</code></p>",
        "id": 389275620,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693946011
    },
    {
        "content": "<p>Anything we should know about the machine you're running Docker on? Is it Linux? Some server somewhere?</p>",
        "id": 389276048,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693946181
    },
    {
        "content": "<p>i'm running it on ubuntu 22 in aws</p>",
        "id": 389276065,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693946193
    },
    {
        "content": "<p>maybe i should try centos or rocky linux?</p>",
        "id": 389276091,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693946205
    },
    {
        "content": "<p>Ok, my first thought is to simply try again. That is kill all the running containers (Ctrl-c might be enough). rm -rf docker-dev volumes. Then try again. Fresh terminal for fresh output. <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389276383,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693946263
    },
    {
        "content": "<p>okay will do .. i deleted all the images and containers before running this time, but didn't kill the dev volumes .. thanks! will let you know how that goes :-)</p>",
        "id": 389276571,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693946311
    },
    {
        "content": "<p>Awesome. Thanks. And Ubuntu should be fine. I'm using a Mac.</p>",
        "id": 389276684,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693946359
    },
    {
        "content": "<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> thanks for your help!</p>",
        "id": 389276750,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693946388
    },
    {
        "content": "<p>Sure. Sorry it didn't just work.</p>",
        "id": 389277023,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693946472
    },
    {
        "content": "<p>oh that's okay .. it's probably just me! i have a way of making things not work until i put hours of time into figuring out what I messed up! :-D</p>",
        "id": 389277129,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693946506
    },
    {
        "content": "<p>I mean, something else I could have you try is the \"alpha\" images. That's what <span class=\"user-mention\" data-user-id=\"601950\">@Thomas van Erven</span> is using. They are equivalent to 5.14 or the \"master\" branch. You're getting the \"unstable\" images, which is the tip of the \"develop\" branch.</p>",
        "id": 389277509,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693946626
    },
    {
        "content": "<p>i think i did clone the master branch <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span>  .. should i clone a different one?</p>",
        "id": 389278017,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693946779
    },
    {
        "content": "<p>Well, we switched our default branch from master/main to develop. You could run a \"git status\" to check.</p>",
        "id": 389278198,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693946826
    },
    {
        "content": "<p>ah yea, it is \"develop\"</p>",
        "id": 389278355,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693946868
    },
    {
        "content": "<p>i killed everything and created it all again .. here is the output .. don't see any obvious errors, but I also don't see the \"Done\" message<br>\n<a href=\"/user_uploads/53090/mNuEw-sRKU_fFas73RMHlJVk/docker-output4.txt\">docker-output4.txt</a></p>",
        "id": 389284704,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693948757
    },
    {
        "content": "<p>i can try the master branch images .. haven't done that yet</p>",
        "id": 389284818,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693948797
    },
    {
        "content": "<p>or try installing maven, java, etc and build/run it that way</p>",
        "id": 389287589,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693949693
    },
    {
        "content": "<p>This is good! <code>dev_dataverse         |   Loading application [dataverse] at [/]|#]</code></p>",
        "id": 389292532,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693952013
    },
    {
        "content": "<p>But again we have this: <code>dev_bootstrap         | Error: context deadline exceeded</code></p>",
        "id": 389292855,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693952151
    },
    {
        "content": "<p>Ah, you should be able to override the timeout: <a href=\"https://github.com/IQSS/dataverse/blob/2246d666017fbc169552e4dfc74f4c635d84ce28/modules/container-configbaker/scripts/bootstrap.sh#L27\">https://github.com/IQSS/dataverse/blob/2246d666017fbc169552e4dfc74f4c635d84ce28/modules/container-configbaker/scripts/bootstrap.sh#L27</a></p>",
        "id": 389293149,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693952255
    },
    {
        "content": "<p>Adding something like this might help:</p>\n<div class=\"codehilite\"><pre><span></span><code>diff --git a/docker-compose-dev.yml b/docker-compose-dev.yml\nindex ab44dbc180..07ccf67e44 100644\n--- a/docker-compose-dev.yml\n+++ b/docker-compose-dev.yml\n@@ -38,6 +38,8 @@ services:\n     container_name: &quot;dev_bootstrap&quot;\n     image: gdcc/configbaker:unstable\n     restart: &quot;no&quot;\n+    environment:\n+      - TIMEOUT:3m\n     command:\n       - bootstrap.sh\n       - dev\n</code></pre></div>",
        "id": 389293390,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693952398
    },
    {
        "content": "<p>I think. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 389293473,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1693952424
    },
    {
        "content": "<p>will try it .. thanks!</p>",
        "id": 389293570,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1693952486
    },
    {
        "content": "<p>Maybe a bit late to the party (and possibly you've hit the point already), but what size machine are you trying to run it on? JVM instances are typically a bit on the \"heavy\" side in terms of underlying resource requirements.</p>",
        "id": 389341168,
        "sender_full_name": "Thomas van Erven",
        "timestamp": 1693978399
    },
    {
        "content": "<p>The Dataverse container is typically limited to 2GB of RAM. Stats show that's often enough for development and running tests.</p>",
        "id": 389342986,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1693979566
    },
    {
        "content": "<p>I get the same failure if I lower the timeout from 2m to 1m like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>diff --git a/docker-compose-dev.yml b/docker-compose-dev.yml\nindex ab44dbc180..41a450616c 100644\n--- a/docker-compose-dev.yml\n+++ b/docker-compose-dev.yml\n@@ -38,6 +38,8 @@ services:\n     container_name: &quot;dev_bootstrap&quot;\n     image: gdcc/configbaker:unstable\n     restart: &quot;no&quot;\n+    environment:\n+      - TIMEOUT=1m\n     command:\n       - bootstrap.sh\n       - dev\n</code></pre></div>",
        "id": 389440476,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694010857
    },
    {
        "content": "<p>Actually, I'm getting <code>dev_bootstrap         | Error: context deadline exceeded</code> when I revert back to 2m. <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 389444679,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694011754
    },
    {
        "content": "<p>This is on my Mac, I mean.</p>",
        "id": 389447461,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694012419
    },
    {
        "content": "<p>I'm getting this:</p>\n<div class=\"codehilite\"><pre><span></span><code>dev_dataverse         |   Exception while loading the app|#]\n</code></pre></div>",
        "id": 389447523,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694012432
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>dev_dataverse         | Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V4.11__5513-database-variablemetadata.sql failed\n</code></pre></div>",
        "id": 389447579,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694012444
    },
    {
        "content": "<p>And yet, it's working fine at <a href=\"https://github.com/gdcc/api-test-runner\">https://github.com/gdcc/api-test-runner</a></p>",
        "id": 389447738,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694012468
    },
    {
        "content": "<p>Why?</p>",
        "id": 389447751,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694012470
    },
    {
        "content": "<p>I suspect IO problems.</p>",
        "id": 389449298,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694012833
    },
    {
        "content": "<p>Who knows. And my problem seems different than Deirdre's.</p>",
        "id": 389452871,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694013647
    },
    {
        "content": "<p>My Mac had been up for 196 days. I just rebooted (and updated to macOS 12.6.8 while I was at it).</p>\n<p><code>docker compose -f docker-compose-dev.yml up</code> works fine now. Phew.</p>",
        "id": 389498759,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694026349
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> how are you making out? Sorry for the noise above. My troubles seem unrelated to yours. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 389498847,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694026387
    },
    {
        "content": "<p>sorry just got back to this .. i am using a t3a.medium instance .. i can try increasing that .. i tried setting the timeout to 3m but still failed with the context deadline exceeded error .. i looked that up and it seems like it could indicate network errors so I could have some security group issues (although I have port 8080, 80, and 443 open) .. so may try to just create a public instance</p>",
        "id": 389498862,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694026394
    },
    {
        "content": "<p>or i could try a higher timeout?</p>",
        "id": 389499068,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694026472
    },
    {
        "content": "<p>Hmm, t3a.medium seems to have 4 GB of memory according to <a href=\"https://aws.amazon.com/ec2/instance-types/t3/\">https://aws.amazon.com/ec2/instance-types/t3/</a></p>\n<p>The runners in GitHub Actions have 7 GB of memory according to <a href=\"https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners#supported-runners-and-hardware-resources\">https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners#supported-runners-and-hardware-resources</a></p>\n<p>So, yeah, could you try a t3a.large? That should give you 8 GB of memory.</p>",
        "id": 389499895,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694026795
    },
    {
        "content": "<p>okay will do that now <span aria-label=\"fingers crossed\" class=\"emoji emoji-1f91e\" role=\"img\" title=\"fingers crossed\">:fingers_crossed:</span></p>",
        "id": 389501155,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694027321
    },
    {
        "content": "<p>sorry i know open ports don't matter if i'm just trying to get the app running <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 389502874,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694028028
    },
    {
        "content": "<p>have increased the instance size and starting it up now (with 3m timeout)</p>",
        "id": 389502956,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694028067
    },
    {
        "content": "<p>Ha, no worries. Occupied ports do matter. When I rebooted I had a local postgres running that I had to kill. <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389503003,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694028092
    },
    {
        "content": "<p>argh got the same error</p>",
        "id": 389503198,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694028194
    },
    {
        "content": "<p>wonder if i should try a different instance type altogether .. we just use the t3a instances by default in our dev account to start with</p>",
        "id": 389503264,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694028227
    },
    {
        "content": "<p>or, i'm okay with installing java and maven and trying to build/run it that way .. just haven't tried yet</p>",
        "id": 389503381,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694028270
    },
    {
        "content": "<p>You see <code>dev_bootstrap         | Error: context deadline exceeded</code>?</p>",
        "id": 389503403,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694028280
    },
    {
        "content": "<p>yes .. was watching closely and saw it right in the midst of a bunch of other payara messages .. it ends with \"JMXStartupService has started JMXConnector on JMXService URL service:jmx:rmi\" and then just stops</p>",
        "id": 389503619,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694028380
    },
    {
        "content": "<p>Any errors about the app failing to deploy?</p>",
        "id": 389503686,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694028411
    },
    {
        "content": "<p>Does curl <a href=\"http://localhost:8080/api/info/version\">http://localhost:8080/api/info/version</a> work?</p>",
        "id": 389503714,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694028425
    },
    {
        "content": "<p>If there's a deployment failure sometimes you have to scroll up quite a bit.</p>",
        "id": 389503766,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694028451
    },
    {
        "content": "<p>yikes, let me do it all again and save the output .. i forgot to redirect output to a file!</p>",
        "id": 389503946,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694028548
    },
    {
        "content": "<p>If the containers are still running you can do <code>docker logs dataverse-1</code></p>",
        "id": 389504023,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694028596
    },
    {
        "content": "<p>Or maybe <code>docker logs dev_dataverse</code></p>",
        "id": 389504102,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694028618
    },
    {
        "content": "<p>oh right! still learning docker, too :-)</p>",
        "id": 389504170,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694028655
    },
    {
        "content": "<p>here is the output .. i see errors, but mostly the ones you said may be normal .. and the dev_bootstrap error<br>\n<a href=\"/user_uploads/53090/_J2_iE8WrPNeq3vRBFi0apNU/docker-output5.txt\">docker-output5.txt</a></p>",
        "id": 389504806,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694028960
    },
    {
        "content": "<p>docker logs dev-dataverse worked <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 389504970,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694029025
    },
    {
        "content": "<p>curl <a href=\"http://localhost:8080/api/info/version\">http://localhost:8080/api/info/version</a> works</p>",
        "id": 389505037,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694029055
    },
    {
        "content": "<p>I'm a little confused by what I'm seeing in the logs. The difference between the first messages from <code>dev_bootstrap</code> and the last seems to be under two minutes:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ grep ^dev_bootstrap docker-output5.txt | head -2\ndev_bootstrap         | Waiting for http://dataverse:8080 to become ready in max 2m.\ndev_bootstrap         | 2023-09-06T19:31:21Z INF [HTTP] Checking the http://dataverse:8080/api/info/version ...\n$\n$ grep ^dev_bootstrap docker-output5.txt | tail -3\ndev_bootstrap         | 2023-09-06T19:33:19Z ERR Expectation failed error=&quot;the status code doesn&#39;t expect&quot; actual=404 expect=200\ndev_bootstrap         | Error: context deadline exceeded\ndev_bootstrap exited with code 124\n</code></pre></div>",
        "id": 389506417,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694029693
    },
    {
        "content": "<p>So I'm wondering if our attempts to bump it to 3m is working or not. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 389506450,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694029712
    },
    {
        "content": "<p>Also, there's a message in the middle with <code>timeout=3s</code> that I don't understand. 3s instead of 3m? Weird.</p>\n<p><code>dev_bootstrap         | 2023-09-06T19:32:15Z ERR Expectation failed error=\"timed out while making an http call, caused by: Get \\\"http://dataverse:8080/api/info/version\\\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)\" timeout=3s</code></p>",
        "id": 389506532,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694029761
    },
    {
        "content": "<p>errr maybe not? here is what i changed:  <br>\n<a href=\"/user_uploads/53090/pnrDG_tG10_EbleU9X0_RnPg/config-changes.jpg\">config-changes.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/pnrDG_tG10_EbleU9X0_RnPg/config-changes.jpg\" title=\"config-changes.jpg\"><img src=\"/user_uploads/53090/pnrDG_tG10_EbleU9X0_RnPg/config-changes.jpg\"></a></div>",
        "id": 389506681,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694029845
    },
    {
        "content": "<p>Yeah, looks good. But maybe this env TIMEOUT thing doesn't work. I'm sure <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> could tell us if we're barking up the wrong tree. <span aria-label=\"tree\" class=\"emoji emoji-1f333\" role=\"img\" title=\"tree\">:tree:</span>  <span aria-label=\"dog\" class=\"emoji emoji-1f415\" role=\"img\" title=\"dog\">:dog:</span></p>",
        "id": 389506803,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694029922
    },
    {
        "content": "<p>It looks like the 3m isn't getting into the script:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ grep &#39;in max&#39; docker-output5.txt\ndev_bootstrap         | Waiting for http://dataverse:8080 to become ready in max 2m.\n</code></pre></div>\n<p>From <a href=\"https://github.com/IQSS/dataverse/blob/2246d666017fbc169552e4dfc74f4c635d84ce28/modules/container-configbaker/scripts/bootstrap.sh#L47\">https://github.com/IQSS/dataverse/blob/2246d666017fbc169552e4dfc74f4c635d84ce28/modules/container-configbaker/scripts/bootstrap.sh#L47</a></p>",
        "id": 389507220,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694030093
    },
    {
        "content": "<p>but it did seem to in your issue above .. there was an impact when you changed it to 1m?</p>",
        "id": 389508094,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694030479
    },
    {
        "content": "<p>Well, I was having all sorts of trouble. I think rebooting it fixed it.</p>",
        "id": 389508173,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694030508
    },
    {
        "content": "<p>I can teach you how to bump up the timeout in the script itself if you want. You'll need mvn installed though.</p>",
        "id": 389508259,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694030535
    },
    {
        "content": "<p>okay i'll go ahead and install maven and java 11</p>",
        "id": 389508456,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694030637
    },
    {
        "content": "<p>Java 17, you mean <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389508554,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694030665
    },
    {
        "content": "<p>oops yea</p>",
        "id": 389508577,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694030674
    },
    {
        "content": "<p>okay got mvn v3.6.3 and jdk 17.0.8.1 installed .. should i go through the quick start/build/run or is there a way to still use compose to run after editing the script?</p>",
        "id": 389509638,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031204
    },
    {
        "content": "<p>have deleted all the containers, images, and the docker-dev-volumes directory again so all clean!</p>",
        "id": 389509743,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031251
    },
    {
        "content": "<p>I'm on my cell, but we could do a quick Zoom if y'all want.</p>",
        "id": 389509907,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694031356
    },
    {
        "content": "<p>Maybe it helps looking at things as they happen</p>",
        "id": 389509971,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694031372
    },
    {
        "content": "<p>sure if you are all available and willing! i don't want to be a pain <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> <br>\nnow that i have mvn and java installed i could probably go through the quick start and see if that works</p>",
        "id": 389510266,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031526
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> well, we started this thread with docker compose so I guess we should stick with that. <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389510283,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694031540
    },
    {
        "content": "<p>okay sounds good .. however i can get it to work! i'm learning a lot about docker</p>",
        "id": 389510316,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031565
    },
    {
        "content": "<p>Please edit <code>vim modules/container-configbaker/scripts/bootstrap.sh</code> and increase the timeout.</p>",
        "id": 389510327,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694031571
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> can you light a fireplace to gather round?</p>",
        "id": 389510345,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694031583
    },
    {
        "content": "<p>Then try this</p>\n<div class=\"codehilite\"><pre><span></span><code>mvn -Pct docker:build -Ddocker.filter=dev_bootstrap\n</code></pre></div>",
        "id": 389510430,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694031618
    },
    {
        "content": "<p>i increased it to 3m</p>",
        "id": 389510453,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031630
    },
    {
        "content": "<p>(As I just re-documented! See <a class=\"stream-topic\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers/topic/iterating.20on.20configbaker\">#containers &gt; iterating on configbaker</a> ) <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389510474,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694031642
    },
    {
        "content": "<p>running the mvn command ...</p>",
        "id": 389510532,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031683
    },
    {
        "content": "<p>You should see something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>[INFO] DOCKER&gt; [gdcc/configbaker:unstable] &quot;dev_bootstrap&quot;: Built image sha256:c5e0d\n</code></pre></div>",
        "id": 389510566,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694031709
    },
    {
        "content": "<p>still going ...</p>",
        "id": 389510676,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031770
    },
    {
        "content": "<p>It should only take a few seconds...</p>\n<div class=\"codehilite\"><pre><span></span><code>[INFO] Total time:  4.181 s\n</code></pre></div>",
        "id": 389510749,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694031833
    },
    {
        "content": "<p>Might be taking a while to download the Solr image</p>",
        "id": 389510806,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694031848
    },
    {
        "content": "<p>Ah, right</p>",
        "id": 389510820,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694031858
    },
    {
        "content": "<p>it is downloading things from the maven repo</p>",
        "id": 389510821,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031859
    },
    {
        "content": "<p>First timers, cold cache</p>",
        "id": 389510822,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694031860
    },
    {
        "content": "<p>brr! <span aria-label=\"cold face\" class=\"emoji emoji-1f976\" role=\"img\" title=\"cold face\">:cold_face:</span></p>",
        "id": 389510840,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694031871
    },
    {
        "content": "<p>Oh dear, Maven downloading the internet</p>",
        "id": 389510851,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694031878
    },
    {
        "content": "<p>That's a very cold cache</p>",
        "id": 389510866,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694031889
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> welcome to our world <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 389510911,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694031921
    },
    {
        "content": "<p>it is doing this: <br>\nDownloading from central-repo: <a href=\"https://repo1.maven.org/maven2/com/google/cloud/google-cloud-security-private-ca-bom/2.5.1/google-cloud-security-private-ca-bom-2.5.1.pom\">https://repo1.maven.org/maven2/com/google/cloud/google-cloud-security-private-ca-bom/2.5.1/google-cloud-security-private-ca-bom-2.5.1.pom</a><br>\nDownloaded from central-repo: <a href=\"https://repo1.maven.org/maven2/com/google/cloud/google-cloud-security-private-ca-bom/2.5.1/google-cloud-security-private-ca-bom-2.5.1.pom\">https://repo1.maven.org/maven2/com/google/cloud/google-cloud-security-private-ca-bom/2.5.1/google-cloud-security-private-ca-bom-2.5.1.pom</a> (3.5 kB at 140 kB/s)<br>\nDownloading from payara-nexus-artifacts: <a href=\"https://nexus.payara.fish/repository/payara-artifacts/com/google/cloud/google-cloud-servicedirectory-bom/2.4.1/google-cloud-servicedirectory-bom-2.4.1.pom\">https://nexus.payara.fish/repository/payara-artifacts/com/google/cloud/google-cloud-servicedirectory-bom/2.4.1/google-cloud-servicedirectory-bom-2.4.1.pom</a><br>\nDownloading from payara-patched-externals: <a href=\"https://raw.github.com/payara/Payara_PatchedProjects/master/com/google/cloud/google-cloud-servicedirectory-bom/2.4.1/google-cloud-servicedirectory-bom-2.4.1.pom\">https://raw.github.com/payara/Payara_PatchedProjects/master/com/google/cloud/google-cloud-servicedirectory-bom/2.4.1/google-cloud-servicedirectory-bom-2.4.1.pom</a></p>",
        "id": 389510912,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031921
    },
    {
        "content": "<p>Maybe we should put a note about that in the docs <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 389510927,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694031929
    },
    {
        "content": "<p>but many more things ..</p>",
        "id": 389510937,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031936
    },
    {
        "content": "<p>Yeah, basically each and every dependency necessary for the project.</p>",
        "id": 389510984,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694031961
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> I'm having flashbacks to getting Steve to try Docker. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 389511064,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694031985
    },
    {
        "content": "<p>hope i made the volume large enough! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 389511076,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694031989
    },
    {
        "content": "<p>Can't try now but still wondering about timeout env not being picked up...</p>",
        "id": 389511172,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032043
    },
    {
        "content": "<p>Have you tried changing it with a command argument?</p>",
        "id": 389511204,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032061
    },
    {
        "content": "<p>Instead of repackaging...</p>",
        "id": 389511237,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032076
    },
    {
        "content": "<p>Now the only arg is \"dev\". You can give more arguments.</p>",
        "id": 389511314,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032103
    },
    {
        "content": "<p>See <a href=\"http://bootstrap.sh\">bootstrap.sh</a> -h for deets</p>",
        "id": 389511374,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032135
    },
    {
        "content": "<p>no but i can if you think that's a better idea? i could do it in another console while this is running, if that would work</p>",
        "id": 389511415,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694032154
    },
    {
        "content": "<p>Sure, that's no problemo</p>",
        "id": 389511454,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032175
    },
    {
        "content": "<p>You could try with docker run first to get a feeling for the command</p>",
        "id": 389511488,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032192
    },
    {
        "content": "<p>So like <code>docker run -it --rm gdcc/configbaker:unstable bootstrap.sh -h </code></p>",
        "id": 389511626,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032233
    },
    {
        "content": "<p>what is that command doing?</p>",
        "id": 389511735,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694032295
    },
    {
        "content": "<p>It will start an interactive container for you, run the specified shell script inside the container and when that ends will stop and remove the container for you</p>",
        "id": 389511876,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032343
    },
    {
        "content": "<p>oh right okay i see .. it did all that</p>",
        "id": 389511941,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694032371
    },
    {
        "content": "<p>You should see some help messages in the output <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 389512016,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032410
    },
    {
        "content": "<p>yes, timeout is one of them</p>",
        "id": 389512040,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694032427
    },
    {
        "content": "<p>IIRC, it should be sth like <a href=\"http://bootstrap.sh\">bootstrap.sh</a> -t 3m dev</p>",
        "id": 389512114,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032452
    },
    {
        "content": "<p>Could you try that with docker run for me, see if it gets picked up?</p>",
        "id": 389512152,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032470
    },
    {
        "content": "<p>You can always exit the script with ctrl-c as with any other shell script you're running on your machine</p>",
        "id": 389512236,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032507
    },
    {
        "content": "<p>so .. docker run -it --rm gdcc/configbaker:unstable <a href=\"http://bootstrap.sh\">bootstrap.sh</a> -h -t 3m dev ??</p>",
        "id": 389512311,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694032559
    },
    {
        "content": "<p>Please skip the -h, we don't want the help output again <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 389512390,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032583
    },
    {
        "content": "<p>Other than that: fire at will</p>",
        "id": 389512474,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032624
    },
    {
        "content": "<p>it does say \" to become ready in max 3m\"</p>",
        "id": 389512502,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694032634
    },
    {
        "content": "<p>Ha!</p>",
        "id": 389512518,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032643
    },
    {
        "content": "<p>So correct syntax</p>",
        "id": 389512534,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032651
    },
    {
        "content": "<p>So let's put this in the docker compose</p>",
        "id": 389512555,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032660
    },
    {
        "content": "<p>that's a lot easier .. so i would add to the end of the compose command?</p>",
        "id": 389512582,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694032671
    },
    {
        "content": "<p>Something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>diff --git a/docker-compose-dev.yml b/docker-compose-dev.yml\nindex ab44dbc180..2126aa2c0e 100644\n--- a/docker-compose-dev.yml\n+++ b/docker-compose-dev.yml\n@@ -39,7 +39,7 @@ services:\n     image: gdcc/configbaker:unstable\n     restart: &quot;no&quot;\n     command:\n-      - bootstrap.sh\n+      - bootstrap.sh -t 3m\n       - dev\n     networks:\n       - dataverse\n</code></pre></div>",
        "id": 389512608,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694032682
    },
    {
        "content": "<p>(adding \"dev\" isn't strictly necessary)</p>",
        "id": 389512680,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694032699
    },
    {
        "content": "<p>Careful... args are a  it tricky in commands when not from CLI</p>",
        "id": 389512706,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032715
    },
    {
        "content": "<p>oh?</p>",
        "id": 389512725,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694032724
    },
    {
        "content": "<p>It's an array for a reason</p>",
        "id": 389512750,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032736
    },
    {
        "content": "<p>Let me go get deets from the compose refernce</p>",
        "id": 389512808,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032763
    },
    {
        "content": "<p>i thought you meant .. \"docker compose -f docker-compose-dev.yml <a href=\"http://bootstrap.sh\">bootstrap.sh</a> -t 3m up\" or something like that?</p>",
        "id": 389512954,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694032831
    },
    {
        "content": "<p>the maven build is done btw <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389513047,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694032880
    },
    {
        "content": "<p><a href=\"https://docs.docker.com/compose/compose-file/05-services/#command\">https://docs.docker.com/compose/compose-file/05-services/#command</a></p>",
        "id": 389513102,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032916
    },
    {
        "content": "<p>Whoops, you're right:</p>\n<div class=\"codehilite\"><pre><span></span><code>dev_bootstrap         | [dumb-init] bootstrap.sh -t 1m: No such file or directory\n</code></pre></div>",
        "id": 389513180,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694032938
    },
    {
        "content": "<p>If given as array, we must use</p>\n<div class=\"codehilite\"><pre><span></span><code>- bootstrap.sh\n- -t\n- 3m\n- dev\n</code></pre></div>",
        "id": 389513256,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032977
    },
    {
        "content": "<p>So just split at every space char</p>",
        "id": 389513289,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694032991
    },
    {
        "content": "<p>ahhhh .. glad i didn't try my idea .. okay will edit the yml again</p>",
        "id": 389513306,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033001
    },
    {
        "content": "<p>okay like this?<br>\n<a href=\"/user_uploads/53090/aL1-rM13h3bnbe4sXV7cHBUs/yml-changes.JPG\">yml-changes.JPG</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/aL1-rM13h3bnbe4sXV7cHBUs/yml-changes.JPG\" title=\"yml-changes.JPG\"><img src=\"/user_uploads/53090/aL1-rM13h3bnbe4sXV7cHBUs/yml-changes.JPG\"></a></div>",
        "id": 389513550,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033102
    },
    {
        "content": "<p>Maybe while at it go for 5m</p>",
        "id": 389513591,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033125
    },
    {
        "content": "<p>Reducing later is easy... <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 389513623,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033149
    },
    {
        "content": "<p>done! .. will try the original compose command again</p>",
        "id": 389513629,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033153
    },
    {
        "content": "<p>BTW if you don't want all the clutter, just start compose in background with -d</p>",
        "id": 389513733,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033195
    },
    {
        "content": "<p>You can get the logs from just the bootstrap container</p>",
        "id": 389513747,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033210
    },
    {
        "content": "<p>Probably easier to monitor for changes</p>",
        "id": 389513765,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033223
    },
    {
        "content": "<p>There is an entire subsection in the guide about running in foreground/background</p>",
        "id": 389513811,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033258
    },
    {
        "content": "<p>thanks for the guide and all the info and help</p>",
        "id": 389514009,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033350
    },
    {
        "content": "<p><a href=\"http://preview.guides.gdcc.io/en/develop/container/dev-usage.html#running\">http://preview.guides.gdcc.io/en/develop/container/dev-usage.html#running</a></p>",
        "id": 389514014,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033352
    },
    {
        "content": "<p>Oh don't thank me. Most of it probably was <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span></p>",
        "id": 389514069,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033386
    },
    {
        "content": "<p>thank you phil! <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 389514164,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033407
    },
    {
        "content": "<p>Docs, docs, docs. Docker docs!</p>",
        "id": 389514215,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694033428
    },
    {
        "content": "<p>it worked!</p>",
        "id": 389514269,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033451
    },
    {
        "content": "<p>i got the \"have a nice day\" message!</p>",
        "id": 389514281,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033459
    },
    {
        "content": "<p>i still can't connect in a browser, but that is probably my instance and SG settings .. will work on that</p>",
        "id": 389514501,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033547
    },
    {
        "content": "<p>that's awesome</p>",
        "id": 389514512,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694033551
    },
    {
        "content": "<p>welcome to Club Docker</p>",
        "id": 389514526,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694033560
    },
    {
        "content": "<p>thank you both so much! at least i know the docker container is running dataverse!</p>",
        "id": 389514548,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033570
    },
    {
        "content": "<p>You could curl <a href=\"http://localhost:8080/api/metadatablocks/citation\">http://localhost:8080/api/metadatablocks/citation</a> if you want</p>",
        "id": 389514604,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694033602
    },
    {
        "content": "<p>it should be running in the browser on port 8080 right?<br>\nso my SG should just allow that port?</p>",
        "id": 389514609,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033604
    },
    {
        "content": "<p>Hmm, good question. I've only run this on my laptop.</p>",
        "id": 389514729,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694033648
    },
    {
        "content": "<p>To be frank: I have next to never ever used AWS, so I'm afraid I'm not of much help here</p>",
        "id": 389514757,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033664
    },
    {
        "content": "<p>that curl command worked .. i can figure out the SG thing .. i think i know what the issue is .. thank you, thank you, thank you!!!!</p>",
        "id": 389514819,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033697
    },
    {
        "content": "<p>But... there probably are good tutorials about how to expose a container on AWS</p>",
        "id": 389514835,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033702
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> you could come to the container meeting tomorrow if you like. A bit early for you though. <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span> <a href=\"https://ct.gdcc.io\">https://ct.gdcc.io</a></p>",
        "id": 389514854,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694033711
    },
    {
        "content": "<p>yes, i will look it up .. you all are awesome!!!!!</p>",
        "id": 389514881,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033726
    },
    {
        "content": "<p>Yes, please come and hang with us! We need people to tell us what to improve to make the experience smoother</p>",
        "id": 389514934,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033757
    },
    {
        "content": "<p>yes, i will look it up .. you all are awesome!!!!!</p>",
        "id": 389514973,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033764
    },
    {
        "content": "<p>i may attend the container meeting as a fly on the wall .. i can't contribute, but i can learn</p>",
        "id": 389514974,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033764
    },
    {
        "content": "<p>For the frontend repo they use nginx: <a href=\"https://github.com/IQSS/dataverse-frontend/blob/b44205da066698fe2b1015be7d264f45b274e27b/dev-env/docker-compose-dev.yml#L4-L16\">https://github.com/IQSS/dataverse-frontend/blob/b44205da066698fe2b1015be7d264f45b274e27b/dev-env/docker-compose-dev.yml#L4-L16</a></p>",
        "id": 389514993,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694033765
    },
    {
        "content": "<p>ah yes, i need to configure nginx! will do that</p>",
        "id": 389515036,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694033793
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> when you're ready, a new Zulip topic about ports, please! <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389515056,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694033803
    },
    {
        "content": "<p>If you want let's encrypt, I suggest Traefik</p>",
        "id": 389515072,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033811
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> should we bump up the default timeout to 3m?</p>",
        "id": 389515138,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694033845
    },
    {
        "content": "<p>Fine with me!</p>",
        "id": 389515169,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033860
    },
    {
        "content": "<p>Thinking along the lines of options to detect where we are running to auto adapt...</p>",
        "id": 389515252,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033886
    },
    {
        "content": "<p>But maybe just not worth the effort</p>",
        "id": 389515264,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033894
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> would it make sense to document steps taken on AWS for this?</p>",
        "id": 389515395,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033956
    },
    {
        "content": "<p>It might help others to know which EC2 flavor has been successfully used before</p>",
        "id": 389515457,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694033987
    },
    {
        "content": "<p>Maybe we can ask <span class=\"user-mention\" data-user-id=\"622851\">@LoÃ¯c</span> and <span class=\"user-mention\" data-user-id=\"601950\">@Thomas van Erven</span> to add their XP with Google and Azure</p>",
        "id": 389515634,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694034038
    },
    {
        "content": "<p>Here's a PR to bump from 2m to 3m: <a href=\"https://github.com/IQSS/dataverse/pull/9886\">https://github.com/IQSS/dataverse/pull/9886</a></p>",
        "id": 389516196,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694034301
    },
    {
        "content": "<p>yes, for sure, as soon as i get this figured out i'll document how i got it working .. trying to figure out the config for nginx to run it ... i just set it up recently to run an angular app so must be somewhat similar .. ??</p>",
        "id": 389516529,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694034492
    },
    {
        "content": "<p>and will document the instance size that i'm using .. i could try downgrading it back to t3a.medium and see if it still runs</p>",
        "id": 389516789,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694034630
    },
    {
        "content": "<p>gotta go to a meeting but will work on all of this after .. thanks again!</p>",
        "id": 389517356,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694034923
    },
    {
        "content": "<p>Yeah, good idea. Maybe a t3a.medium is enough. Worth trying.</p>",
        "id": 389625196,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694083327
    },
    {
        "content": "<p>i downgraded to t3a.medium and re-ran the deployment and it worked! .. i am able to reach it from <a href=\"http://dataverse-docker.lib.asu.edu:8080/\">http://dataverse-docker.lib.asu.edu:8080/</a>; still working on getting it running behind a load balancer with https, port 443, etc .. had it working last night but messed something up and now it isn't <span aria-label=\"neutral\" class=\"emoji emoji-1f610\" role=\"img\" title=\"neutral\">:neutral:</span> .. think i will have to figure out how to run nginx in a container to do proxy pass</p>",
        "id": 389708444,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694105212
    },
    {
        "content": "<p>with containers, in order to customize branding, set jvm options, etc .. do you have to just build that into the build?</p>",
        "id": 389708868,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694105311
    },
    {
        "content": "<p>errr image i mean?</p>",
        "id": 389709049,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694105368
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 389715991,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694107375
    },
    {
        "content": "<p>I think we roll up all of that under \"customization\" in our proposal, linked from <a href=\"https://ct.gdcc.io\">https://ct.gdcc.io</a></p>",
        "id": 389721856,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109180
    },
    {
        "content": "<p>It's mostly a TODO, I think.</p>",
        "id": 389721900,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109195
    },
    {
        "content": "<p>Direct link to the proposal: <a href=\"https://docs.google.com/document/d/14DHDB24Cp_kzpYqhHCKCtnzOw8_WuLOOONyqJHSsaYM/edit\">https://docs.google.com/document/d/14DHDB24Cp_kzpYqhHCKCtnzOw8_WuLOOONyqJHSsaYM/edit</a></p>",
        "id": 389721945,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109209
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> please feel free to create new topics under <a class=\"stream\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers\">#containers</a> for this or that issue.</p>",
        "id": 389722016,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109243
    },
    {
        "content": "<p>Also! During our meeting today I realized I told you TIMEOUT:3m instead of TIMEOUT=3m above!</p>",
        "id": 389722179,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109273
    },
    {
        "content": "<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 389722239,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694109284
    },
    {
        "content": "<p>TIMEOUT=7m works for Guillermo</p>",
        "id": 389722342,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109303
    },
    {
        "content": "<p>oh maybe i'll try that and see if it works too</p>",
        "id": 389722376,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694109308
    },
    {
        "content": "<p>Yeah, and I'd like to verify it on my machine as well.</p>",
        "id": 389722440,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109324
    },
    {
        "content": "<p>But good to know we don't have to rebuild the configbaker image. Two ways to configure the timeout, I guess. <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389722504,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109347
    },
    {
        "content": "<p>so many options! <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389722625,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694109371
    },
    {
        "content": "<p>As for JVM options, you can add a lot of them to your compose file.</p>",
        "id": 389722680,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109383
    },
    {
        "content": "<p>See <a href=\"https://guides.dataverse.org/en/5.14/container/app-image.html#tunables\">https://guides.dataverse.org/en/5.14/container/app-image.html#tunables</a></p>",
        "id": 389722913,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109461
    },
    {
        "content": "<p>Examples:</p>\n<div class=\"codehilite\"><pre><span></span><code>environment:\n- DATAVERSE_DB_HOST=postgres\n- dataverse_files_s3_upload__redirect=true\n</code></pre></div>",
        "id": 389723220,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109547
    },
    {
        "content": "<p>i will try to add some</p>",
        "id": 389723298,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694109566
    },
    {
        "content": "<p>You're also wondering about branding?</p>",
        "id": 389723347,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109584
    },
    {
        "content": "<p>yea we have a  lot of custom branding on our live site to match our other web communications so eventually we would want to be able to do that</p>",
        "id": 389723543,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694109623
    },
    {
        "content": "<p>Generally speaking, you'll probably want to create your own \"persona\" instead of the \"dev\" personal to configure stuff like that.</p>",
        "id": 389723895,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694109700
    },
    {
        "content": "<p>I just tried this and it works fine...</p>\n<div class=\"codehilite\"><pre><span></span><code>diff --git a/docker-compose-dev.yml b/docker-compose-dev.yml\nindex ab44dbc180..41a450616c 100644\n--- a/docker-compose-dev.yml\n+++ b/docker-compose-dev.yml\n@@ -38,6 +38,8 @@ services:\n     container_name: &quot;dev_bootstrap&quot;\n     image: gdcc/configbaker:unstable\n     restart: &quot;no&quot;\n+    environment:\n+      - TIMEOUT=1m\n     command:\n       - bootstrap.sh\n       - dev\n</code></pre></div>\n<p>... <code>docker logs dev_bootstrap</code> shows \"Waiting for <a href=\"http://dataverse:8080\">http://dataverse:8080</a> to become ready in max 1m.\"</p>\n<p>Sorry for the confusion yesterday!</p>",
        "id": 389735877,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694113189
    },
    {
        "content": "<p>oh no worries .. this is all a learning experience for me! <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span> .. every little bit helps!</p>",
        "id": 389736702,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694113441
    },
    {
        "content": "<p>i tried it on my 2nd dev installation and it worked, too <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 389736960,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1694113521
    },
    {
        "content": "<p>nice!</p>",
        "id": 389737000,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694113538
    }
]