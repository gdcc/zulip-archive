[
    {
        "content": "<p>hi there .. i am attempting to follow the demo container install and am running into issues (of course .. it's me!) .. I launched an ec2 instance (ubuntu 22), installed docker, put the \"ubuntu\" user into the docker group, copied compose.yml, and ran \"docker compose up\" .. the installer exits with a bootstrap error (attached) ... and it looks like the solr container (and bootstrap) are exited .. the landing page looks like the attached ..<br>\n .. i tried both the \"dev\" and \"demo\" personas (with edits suggested) and same on both .. i tried stopping/removing all the containers and images and deleting the data directory and tried installing again a few times for both personas .. it's almost there, just not quite! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>  .. any suggestions? </p>\n<p><a href=\"/user_uploads/53090/0dco04ge-qNh9DaywDXBikpv/dv-docker-demo.jpg\">dv-docker-demo.jpg</a><br>\n<a href=\"/user_uploads/53090/A1htwFrLolVMu_A-4DGqujRx/dv-compose-error.jpg\">dv-compose-error.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/0dco04ge-qNh9DaywDXBikpv/dv-docker-demo.jpg\" title=\"dv-docker-demo.jpg\"><img src=\"/user_uploads/53090/0dco04ge-qNh9DaywDXBikpv/dv-docker-demo.jpg\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/53090/A1htwFrLolVMu_A-4DGqujRx/dv-compose-error.jpg\" title=\"dv-compose-error.jpg\"><img src=\"/user_uploads/53090/A1htwFrLolVMu_A-4DGqujRx/dv-compose-error.jpg\"></a></div>",
        "id": 426173814,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710262998
    },
    {
        "content": "<p>looking through docker logs for errors ..</p>",
        "id": 426175755,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710263627
    },
    {
        "content": "<p>Hmm, can you please share your server.log file?</p>",
        "id": 426183700,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710266267
    },
    {
        "content": "<p>here is payara logs text .. and also .. \"docker logs bootstrap\" errors ..</p>\n<p><a href=\"/user_uploads/53090/qczcgnQagjwHPzCgn-7Zznkg/ServerLogs.txt\">ServerLogs.txt</a><br>\n<a href=\"/user_uploads/53090/b5qPrxWwevSoQcLZwjYsAJaR/docker-bootstrap-errors.jpg\">docker-bootstrap-errors.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/b5qPrxWwevSoQcLZwjYsAJaR/docker-bootstrap-errors.jpg\" title=\"docker-bootstrap-errors.jpg\"><img src=\"/user_uploads/53090/b5qPrxWwevSoQcLZwjYsAJaR/docker-bootstrap-errors.jpg\"></a></div>",
        "id": 426187292,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710267486
    },
    {
        "content": "<p>Thanks, what does <a href=\"http://localhost:8080/api/info/version\">http://localhost:8080/api/info/version</a> show?</p>",
        "id": 426188982,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710268115
    },
    {
        "content": "<p>Nothing is jumping out at me.</p>",
        "id": 426189585,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710268327
    },
    {
        "content": "<p>shows OK .. version 6.1</p>",
        "id": 426191462,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710269072
    },
    {
        "content": "<p>okay, i'll keep messing with it .. thanks!</p>",
        "id": 426191488,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710269082
    },
    {
        "content": "<p>Maybe it timed out. Maybe you need to bump the timeout.</p>",
        "id": 426191684,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710269160
    },
    {
        "content": "<p>Please see <a href=\"https://preview.guides.gdcc.io/en/develop/container/running/demo.html#bootstrapping-did-not-complete\">https://preview.guides.gdcc.io/en/develop/container/running/demo.html#bootstrapping-did-not-complete</a></p>",
        "id": 426191986,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710269266
    },
    {
        "content": "<p>that WAS my issue when I did this before <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 426192230,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710269343
    },
    {
        "content": "<p>i'll try it</p>",
        "id": 426192246,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710269350
    },
    {
        "content": "<p>no luck .. set the timeout to 1m, 3m, 10m; tried increasing memory/CPU; tried running as root <span aria-label=\"woman shrugging\" class=\"emoji emoji-1f937-200d-2640\" role=\"img\" title=\"woman shrugging\">:woman_shrugging:</span> <br>\ni do keep seeing the below bootstrap error at startup .. but the curl command to check version at command line is okay .. will keep trying things <span aria-label=\"smirk\" class=\"emoji emoji-1f60f\" role=\"img\" title=\"smirk\">:smirk:</span><br>\n<a href=\"/user_uploads/53090/f0dmL_r0z4ev1voPFv-hpPGN/bootstrap-error.jpg\">bootstrap-error.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/f0dmL_r0z4ev1voPFv-hpPGN/bootstrap-error.jpg\" title=\"bootstrap-error.jpg\"><img src=\"/user_uploads/53090/f0dmL_r0z4ev1voPFv-hpPGN/bootstrap-error.jpg\"></a></div>",
        "id": 426200570,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710272742
    },
    {
        "content": "<p>Bah. Instead of a jpg, are you able to capture the entire output as a txt file?</p>",
        "id": 426205278,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710274670
    },
    {
        "content": "<p>oops sorry wasn't getting all of the error output .. i think this has all of the startup output</p>\n<p><a href=\"/user_uploads/53090/VU2K6roIdpEWLPAhDNN27Mzr/StartupLogs.txt\">StartupLogs.txt</a></p>",
        "id": 426210319,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710276734
    },
    {
        "content": "<p>including those bootstrap errors</p>",
        "id": 426210359,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710276749
    },
    {
        "content": "<p>weird the connection refused as i have everything open to port 8080 .. and it works from the command line</p>",
        "id": 426210735,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710276903
    },
    {
        "content": "<p>that IP is a network device on the VPN .. i think?</p>",
        "id": 426211145,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710277070
    },
    {
        "content": "<p>I'm seeing this: <code>bootstrap         | Waiting for http://dataverse:8080 to become ready in max 3m.</code></p>\n<p>Have you tried 10 minutes?</p>",
        "id": 426211527,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710277211
    },
    {
        "content": "<p>yes i did but i'll try it again</p>",
        "id": 426211661,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710277268
    },
    {
        "content": "<p>Ok, thanks because I'm seeing <code>bootstrap         | 2024-03-12T20:47:14Z ERR Expectation failed error=\"timed out while making an http call, caused by: Get \\\"http://dataverse:8080/api/info/version\\\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)\" timeout=3s</code> followed by Dataverse continuing to try to deploy.</p>",
        "id": 426211790,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710277315
    },
    {
        "content": "<p>maybe i wrote the timeout block wrong .. it looks like this:</p>\n<p>bootstrap:<br>\n    container_name: \"bootstrap\"<br>\n    image: gdcc/configbaker:alpha<br>\n    restart: \"no\"<br>\n    environment:</p>\n<div class=\"codehilite\"><pre><span></span><code>  - TIMEOUT=3m\ncommand:\n\n  - bootstrap.sh\n  - dev\n</code></pre></div>",
        "id": 426212023,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710277383
    },
    {
        "content": "<p>from last time, i think maybe it needs to be TIMEOUT:3m right? agh</p>",
        "id": 426212080,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710277406
    },
    {
        "content": "<p>or .. maybe i just ended up putting it in the command line</p>",
        "id": 426212141,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710277429
    },
    {
        "content": "<p>The main thing is to check the output to make sure it changes to 10 or whatever.</p>",
        "id": 426212254,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710277458
    },
    {
        "content": "<p>You're right, we DID talk about this before! Over here: <a href=\"#narrow/stream/375812-containers/topic/running.20using.20compose/near/389735877\">https://dataverse.zulipchat.com/#narrow/stream/375812-containers/topic/running.20using.20compose/near/389735877</a></p>",
        "id": 426212544,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710277566
    },
    {
        "content": "<p>Should be similar.</p>",
        "id": 426212575,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710277585
    },
    {
        "content": "<p>yea i looked at that to get the format and made it just like that</p>",
        "id": 426212662,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710277631
    },
    {
        "content": "<p>bah</p>",
        "id": 426212706,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710277655
    },
    {
        "content": "<p>oh yea, and it is equals and not :</p>",
        "id": 426212711,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710277658
    },
    {
        "content": "<p>Do you see 10 in the output?</p>",
        "id": 426212728,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710277665
    },
    {
        "content": "<p>i still see 10s .. i think i need to format the yml file as an array like oliver suggested above in that thread .. trying that now</p>",
        "id": 426213970,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710278193
    },
    {
        "content": "<p>Ok. If you figure it out, please consider making a pull request to improve <a href=\"https://github.com/IQSS/dataverse/blob/develop/doc/sphinx-guides/source/container/running/demo.rst\">https://github.com/IQSS/dataverse/blob/develop/doc/sphinx-guides/source/container/running/demo.rst</a> !</p>",
        "id": 426214351,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710278349
    },
    {
        "content": "<p>argh still didn't work .. still shows 10s in the log no matter how I format the .yml file .. will keep trying things .. somehow we got it working last time <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 426215000,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710278638
    },
    {
        "content": "<p>thanks for your help!</p>",
        "id": 426215084,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710278670
    },
    {
        "content": "<p>Is 10 the default? I saw 3 in your output before. The main thing for the change you make to have an effect.</p>",
        "id": 426221745,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710281812
    },
    {
        "content": "<p>yea i don't think my changes are having an effect .. I have tried changing the timeout for the dataverse container in compose.yml to 3m, 5m, and 10m but it doesn't seem to matter, the output error continues to reflect 10s .. I tried both adding the \"environment\" section with TIMEOUT=10m (above) and adding the values in \"array\" format as suggested in the previous thread but nothing seems to be reflected on the output error message and the site doesn't completely build .. it always shows \"Timeout exceeded while awaiting headers)\" timeout=3s\" ... will keep trying things ..<br>\n.. i restored the image that I took of my original instance and looked at the settings and made them exactly the same .. no win</p>",
        "id": 426223971,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710282968
    },
    {
        "content": "<p>Bah. If you feel like it, you could create an issue saying we should document this better in that demo.rst file above.</p>",
        "id": 426232265,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1710287926
    },
    {
        "content": "<p>Oh man I can‚Äôt imagine this being better/easier <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span>  .. I just need to figure out what‚Äôs happening in my instance .. sorry if it sounded otherwise haha</p>",
        "id": 426237386,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710291082
    },
    {
        "content": "<p>What happens if you run this without compose? It should look like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>‚ùØ docker run -e TIMEOUT=10m gdcc/configbaker:unstable bootstrap.sh\nWaiting for http://dataverse:8080 to become ready in max 10m.\n2024-03-13T08:42:48Z INF [HTTP] Checking the http://dataverse:8080/api/info/version ...\n</code></pre></div>",
        "id": 426284896,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1710319437
    },
    {
        "content": "<p>ah .. i thought there was a way to put the timeout in the command line! (Would help if I knew any docker commands) <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>\n<p>ran that and just getting this error over and over:<br>\n2024-03-13T14:59:19Z INF [HTTP] Checking the <a href=\"http://dataverse:8080/api/info/version\">http://dataverse:8080/api/info/version</a> ...<br>\n2024-03-13T14:59:19Z ERR Expectation failed error=\"the status code doesn't expect\" actual=403 expect=200</p>\n<p>.. it creates a container called \"recursing_kilby\" .. will let it run and see what happens</p>",
        "id": 426361219,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710342343
    },
    {
        "content": "<p>yea, just fails with \"Error: context deadline exceeded\" error</p>",
        "id": 426364457,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710343155
    },
    {
        "content": "<p>What is the first line of output there?</p>",
        "id": 426371765,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1710345097
    },
    {
        "content": "<p>You might notice in my snippet there is the timeout properly set to 10m and not to 10s.</p>",
        "id": 426371918,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1710345136
    },
    {
        "content": "<p>yes i copied your command exactly as it is .. the first line of output says \"Waiting for <a href=\"http://dataverse:8080\">http://dataverse:8080</a> to become ready in max 10m.\"</p>",
        "id": 426385088,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710348772
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/A9ytGVF3sSTcaso0i36Y9mOJ/docker-command-line-timeout.jpg\">docker-command-line-timeout.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/A9ytGVF3sSTcaso0i36Y9mOJ/docker-command-line-timeout.jpg\" title=\"docker-command-line-timeout.jpg\"><img src=\"/user_uploads/53090/A9ytGVF3sSTcaso0i36Y9mOJ/docker-command-line-timeout.jpg\"></a></div>",
        "id": 426385104,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1710348779
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> I just made a pull request after doing a little testing. Please check it out: clarify how to increase timeout in docker demo <a href=\"https://github.com/IQSS/dataverse/issues/10410\">#10410</a></p>",
        "id": 428208745,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711051832
    },
    {
        "content": "<p>Looks great! I do have that set in my compose.yml .. but in the bootstrap log the first line of output shows the \"waiting to become ready in max 10m\" whereas further down there is an error \"context deadline exceeded timeout=3s\" so somewhere that setting is getting lost ..</p>\n<p>..and the result is this.. <a href=\"http://dataverse-docker-qa.lib.asu.edu:8080/\">http://dataverse-docker-qa.lib.asu.edu:8080/</a></p>\n<p>Also, I have to remove the containers and images each time I reload because otherwise the site doesn't load at all ...</p>\n<p>..haven't had time to work on this much the last few days, but will continue to troubleshoot as I can <span aria-label=\"woman shrugging\" class=\"emoji emoji-1f937-200d-2640\" role=\"img\" title=\"woman shrugging\">:woman_shrugging:</span></p>\n<p>.. sorry for jumping in/out of the container WG meeting this morning .. too many super smart people in one place! <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 428222504,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711057210
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/Ox0uazlCXDCK8XtHkePMSpZR/timeout-set.JPG\">timeout-set.JPG</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/Ox0uazlCXDCK8XtHkePMSpZR/timeout-set.JPG\" title=\"timeout-set.JPG\"><img src=\"/user_uploads/53090/Ox0uazlCXDCK8XtHkePMSpZR/timeout-set.JPG\"></a></div>",
        "id": 428222530,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711057228
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/qBqkzD47nvEzjmtiLOWAL82p/bootstrap.log.txt\">bootstrap.log.txt</a></p>",
        "id": 428222896,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711057372
    },
    {
        "content": "<p>i did try installing on virtualbox and my mac and get the same issue .. i restored my image of the instance of the docker version that I had working a few months ago and it is doing the same thing now too .. weird</p>",
        "id": 428223113,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711057478
    },
    {
        "content": "<p>Ok, so it sounds like you're seeing \"10m\" in the output. The change is in place. But all the time in the world isn't going to help! It's something else, right?</p>",
        "id": 428223512,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711057670
    },
    {
        "content": "<p>well there is another error farther down indicating a 3s timeout .. I thought you had said that was related and may be affecting the bootstrap process .. not sure what is happening <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 428224152,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711057951
    },
    {
        "content": "<p>but yea, seems something else is likely going on .. this is an instance on a public subnet (ie: not behind a LB) .. i tried adding a security group rule allowing all traffic in case it was a port issue (not a good idea i know) .. but it is weird that my container instance that worked a couple months ago (ie: the site came up and I was able to login) now gives the same errors ..</p>",
        "id": 428224580,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711058147
    },
    {
        "content": "<p>Is this maybe a similar error as in <a class=\"stream-topic\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers/topic/curl.20DNS.20broken\">#containers &gt; curl DNS broken</a> ?</p>",
        "id": 428270244,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711090549
    },
    {
        "content": "<p>Maybe <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 428307101,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711105606
    },
    {
        "content": "<p>yes, seems the same .. my instance is an ubuntu 22.04 with 8G RAM and 2 CPUs .. the behavior is the same, as I get the repeating message in the bootstrap log with 404 error .. I am using an instance that is on a public subnet with our DNS server pointing to the instance public URL .. going to the <a href=\"http://dataverse-docker-qa.lib.asu.edu:8080/\">site</a> shows the main dataverse landing with a \"page not found\" error</p>",
        "id": 428341629,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711117677
    },
    {
        "content": "<p>\"I did a bootstrap manually now by circumventing the DNS lookup (provided the Dataverse URL as command argument)\"</p>",
        "id": 428342018,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711117779
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> are you interested in creating an issue for this problem? It sounds like we could use some more docs, at least.</p>",
        "id": 428342254,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711117835
    },
    {
        "content": "<p>okay, sure will do</p>",
        "id": 428342392,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711117870
    },
    {
        "content": "<p>how would i \"do the bootstrap manually\" to see if that works?</p>",
        "id": 428342510,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711117913
    },
    {
        "content": "<p>If you run <code>docker run -it --rm gdcc/configbaker:unstable bootstrap.sh -h</code> you should see help output like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>Usage: bootstrap.sh [-h] [-u instanceUrl] [-t timeout] [-e targetEnvFile] [&lt;persona&gt;]\n\nExecute initial configuration (bootstrapping) of an empty Dataverse instance.\nKnown personas: dev base demo\n\nParameters:\n  instanceUrl - Location on container network where to reach your instance. Default: &#39;http://dataverse:8080&#39;\n      timeout - Provide how long to wait for the instance to become available (using wait4x). Default: &#39;2m&#39;\ntargetEnvFile - Path to a file where the bootstrap process can expose information as env vars (e.g. dataverseAdmin&#39;s API token)\n      persona - Configure persona to execute. Calls /scripts/bootstrap/&lt;persona&gt;/init.sh. Default: &#39;base&#39;\n\nNote: This script will wait for the Dataverse instance to be available before executing the bootstrapping.\n      It also checks if already bootstrapped before (availability of metadata blocks) and skip if true.\n</code></pre></div>",
        "id": 428343124,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711118063
    },
    {
        "content": "<p>... and I assume you'd use <code>-u instanceUrl</code></p>",
        "id": 428343271,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711118089
    },
    {
        "content": "<p>Not that I've ever done it! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 428343364,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711118106
    },
    {
        "content": "<p>ah okay .. was just trying to see if I could set it somewhere in compose.yml .. will try it</p>",
        "id": 428344685,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711118436
    },
    {
        "content": "<p>Good luck! <span aria-label=\"shamrock\" class=\"emoji emoji-2618\" role=\"img\" title=\"shamrock\">:shamrock:</span> Maybe <span class=\"user-mention\" data-user-id=\"675921\">@Jutta Schnabel</span> knows the magic. <span aria-label=\"magic wand\" class=\"emoji emoji-1fa84\" role=\"img\" title=\"magic wand\">:magic_wand:</span></p>",
        "id": 428345059,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711118537
    },
    {
        "content": "<p>Yes you can! But it's hard, because you will need to have the internal IP of the container.</p>",
        "id": 428345129,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711118553
    },
    {
        "content": "<p>So I'd advice doing the following:</p>",
        "id": 428345183,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711118568
    },
    {
        "content": "<p>Execute <code>docker run --rm -it --network &lt;network&gt; bash</code>. The <code>&lt;network&gt;</code> is the one that compose creates for you, name is visible in <code>docker network list</code></p>",
        "id": 428345659,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711118691
    },
    {
        "content": "<p>Once you have that shell, run the job, using <code>bootstrap.sh -u &lt;DV-container-IP&gt; dev</code> or whatever persona you want to use (which needs to be available to the container, so you might need to mount it into it before running when you want a custom one)</p>",
        "id": 428346174,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711118815
    },
    {
        "content": "<p>If you don't want to hop into the DV container to get the IP, you can get that information from <code>docker network inspect &lt;network name&gt;</code></p>",
        "id": 428346628,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711118920
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> I added notes and ideas in the other topic</p>",
        "id": 428348825,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711119474
    },
    {
        "content": "<p>I saw! Thanks for that and all of the above! <img alt=\":dataverse_man:\" class=\"emoji\" src=\"https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/44207.png\" title=\"dataverse man\"></p>",
        "id": 428351006,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711120074
    },
    {
        "content": "<p>^ working on this ..  i found the dataverse container IP using  \"docker network inspect &lt;network name&gt;\" .. and docker inspect dataverse gives me the same IP address (as long as the container is running) .. so then run \"docker run -e TIMEOUT=10m gdcc/configbaker:unstable <a href=\"http://bootstrap.sh\">bootstrap.sh</a> -u &lt;IP address&gt; dev\" ?</p>",
        "id": 428353697,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711120851
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> if you'd like to follow along: <a class=\"stream-topic\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers/topic/curl.20DNS.20broken\">#containers &gt; curl DNS broken</a></p>",
        "id": 428353734,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711120861
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> if you wait some more, I can give you a different image from <a href=\"http://GHCR.io\">GHCR.io</a> for you to test (basically we need to wait until we have the notification over at <a href=\"https://github.com/IQSS/dataverse/pull/10414\">https://github.com/IQSS/dataverse/pull/10414</a>)</p>",
        "id": 428354117,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711120962
    },
    {
        "content": "<p>okay, but if I were to manually do the bootstrap step (just for a learning experience <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span> ) should that command above work? It is giving me errors so I likely have it wrong.</p>",
        "id": 428354623,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711121116
    },
    {
        "content": "<p>Which one of those... I typed these from my head, so might have done a typo</p>",
        "id": 428354700,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711121143
    },
    {
        "content": "<p>Oh wait I see now</p>",
        "id": 428354940,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711121205
    },
    {
        "content": "<p>You're not following the instructions... <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span> <span aria-label=\"stuck out tongue\" class=\"emoji emoji-1f61b\" role=\"img\" title=\"stuck out tongue\">:stuck_out_tongue:</span> <span aria-label=\"man teacher\" class=\"emoji emoji-1f468-200d-1f3eb\" role=\"img\" title=\"man teacher\">:man_teacher:</span></p>",
        "id": 428355035,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711121228
    },
    {
        "content": "<p>typical</p>",
        "id": 428355116,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711121248
    },
    {
        "content": "<p>Please note that you must attach the container to the right network - otherwise Dataverse will not be reachable</p>",
        "id": 428355155,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711121259
    },
    {
        "content": "<p>You can go for your  <code>docker run</code> command, but you need to add the network bit then</p>",
        "id": 428355235,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711121282
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> can you try with this image plz? <code>ghcr.io/gdcc/configbaker:10413-configbaker-alpine-downgrade</code>  <span aria-label=\"fingers crossed\" class=\"emoji emoji-1f91e\" role=\"img\" title=\"fingers crossed\">:fingers_crossed:</span></p>",
        "id": 428356291,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711121550
    },
    {
        "content": "<p>trying now ..</p>",
        "id": 428357561,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711121889
    },
    {
        "content": "<p><span aria-label=\"fingers crossed\" class=\"emoji emoji-1f91e\" role=\"img\" title=\"fingers crossed\">:fingers_crossed:</span></p>",
        "id": 428357630,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711121909
    },
    {
        "content": "<p>i got the same results, although I likely did something wrong .. i am using the demo tutorial instructions, so i edited compose.yml and replaced with the alpine image URL above and re-ran \"docker compose up\" .. should I try the docker run command and/or clone the repo and run that way?</p>",
        "id": 428358783,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711122262
    },
    {
        "content": "<p>Can you please show us a diff?</p>",
        "id": 428358912,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711122300
    },
    {
        "content": "<p>OK we are getting to a point where it probably is much easier going for a Zoom call</p>",
        "id": 428358941,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711122308
    },
    {
        "content": "<p>Some live action on screen is probably making debugging easier</p>",
        "id": 428359042,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711122344
    },
    {
        "content": "<p>it would help, too, if I had any idea what i'm doing <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 428359114,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711122363
    },
    {
        "content": "<p>We're all here to learn</p>",
        "id": 428359209,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711122386
    },
    {
        "content": "<p>some more than others haha</p>",
        "id": 428359287,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711122412
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> do you want some live debugging action on Zoom?</p>",
        "id": 428359759,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711122560
    },
    {
        "content": "<p>sure, if you have time, but don't want to be a pain .. if it fixes an issue? <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 428360148,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711122684
    },
    {
        "content": "<p><a href=\"https://fz-juelich-de.zoom.us/j/63165889221?pwd=MlBvL0V0WGM3N2gvamlqcGJuZVF5Zz09\">https://fz-juelich-de.zoom.us/j/63165889221?pwd=MlBvL0V0WGM3N2gvamlqcGJuZVF5Zz09</a></p>",
        "id": 428360252,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711122715
    },
    {
        "content": "<p>turns out i just put the image name in the wrong spot <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>  .. it is working! thank you <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span></p>",
        "id": 428366244,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711124504
    },
    {
        "content": "<p>Alright we figured out:</p>\n<ol>\n<li><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> used the <code>alpha</code> tagged image (as we told her in the demo), which dates before Christmas and does not have the backport.</li>\n<li>We tried using <code>gdcc/configbaker:unstable</code>, which contains the fix indeed, BUT there is a gotcha here: the resolution used the <code>search</code> parameter we get from <code>resolv.conf</code> and thus made curl go for <code>dataverse.asu.edu</code> and an external IP, not the internal one.</li>\n<li>We tried out the GHCR image with the 3.18 downgrade and it worked like a breeze!</li>\n</ol>\n<p>Here's a screenshot of what happens at 2)<br>\n<a href=\"/user_uploads/53090/kYxu-EKogj0GnPrhDNmMdQIJ/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/kYxu-EKogj0GnPrhDNmMdQIJ/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/kYxu-EKogj0GnPrhDNmMdQIJ/image.png\"></a></div>",
        "id": 428366690,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711124613
    },
    {
        "content": "<p>Thanks for being my guinea pig today <span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> ! Much appreciated you took the time to dig through this!</p>",
        "id": 428367066,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1711124714
    },
    {
        "content": "<p>Happy to help any time! <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span> Thanks for teaching me some docker things!</p>",
        "id": 428368788,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1711125218
    },
    {
        "content": "<p>Good job, team! <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 428373571,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1711126688
    }
]