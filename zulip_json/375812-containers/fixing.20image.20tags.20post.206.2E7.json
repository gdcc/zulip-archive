[
    {
        "content": "<p>So! <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> and I have been talking <a href=\"https://iqss.slack.com/archives/C03R1E7T4KA/p1752860293134399\">in Slack</a> but for greater transparency, I'm kicking off this topic.</p>\n<p>We released 6.7 on Friday but as explained in <a href=\"https://github.com/IQSS/dataverse/issues/11659\">#11659</a> we don't have a 6.7 tag for the app image yet on Docker Hub: <a href=\"https://hub.docker.com/r/gdcc/dataverse/tags\">https://hub.docker.com/r/gdcc/dataverse/tags</a></p>\n<p>The fix is twofold:</p>\n<ul>\n<li>For the next release, Oliver created this fix: <a href=\"https://github.com/IQSS/dataverse/issues/11660\">#11660</a></li>\n<li>For 6.7, we are re-rerunning the <a href=\"https://github.com/IQSS/dataverse/actions/workflows/container_maintenance.yml\">https://github.com/IQSS/dataverse/actions/workflows/container_maintenance.yml</a> (long story)</li>\n</ul>",
        "id": 529888335,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753103566
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> I'm a little confused by what you wrote in the issue:</p>\n<p>\"Fun side fact: releasing today would have had us not hit this - there was a JDK image update over the weekend.\"</p>\n<p>On Thursday we <a href=\"https://github.com/IQSS/dataverse/pull/11641\">bumped</a> the version and on Friday we made the release.</p>\n<p>I think you're saying if we had bumped the version on Thursday and not released until today, we wouldn't have hit the bug. I'm just emphasizing the bumping part. If we hadn't bumped on Thursday, we wouldn't be building any 6.7 images at all.</p>\n<p>Anyway, yes, interesting fun fact. <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 529890125,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753104158
    },
    {
        "content": "<p>Yeah - new JVM image released 7/20, so it would have rebuilt anyway</p>",
        "id": 529890566,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753104318
    },
    {
        "content": "<p>Right but we needed the version bump in develop.</p>",
        "id": 529890677,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753104354
    },
    {
        "content": "<p>Under your guidance, I kicked off <a href=\"https://github.com/IQSS/dataverse/actions/workflows/container_maintenance.yml\">https://github.com/IQSS/dataverse/actions/workflows/container_maintenance.yml</a> and <a href=\"https://github.com/IQSS/dataverse/actions/runs/16416737515\">https://github.com/IQSS/dataverse/actions/runs/16416737515</a> yielded 6.7-noble at <a href=\"https://hub.docker.com/r/gdcc/dataverse/tags\">https://hub.docker.com/r/gdcc/dataverse/tags</a> <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>\n<p>But we didn't merge your fix at <a href=\"https://github.com/IQSS/dataverse/issues/11660\">#11660</a> yet. Are you saying that re-running that job only worked because a new JVM image happened to be released?</p>",
        "id": 529891340,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753104552
    },
    {
        "content": "<p>Big word time \"guidance\" <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 529891442,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753104578
    },
    {
        "content": "<p>Exactly - the JVM update was triggering releasing the gdcc/base:6.7-noble-r0 which was needed for the app image of 6.7 to build.</p>",
        "id": 529891493,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753104589
    },
    {
        "content": "<p>Ok, so we sort of got lucky and we have a 6.7 release! Great!</p>",
        "id": 529891568,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753104606
    },
    {
        "content": "<p>by hook or by crook</p>",
        "id": 529891606,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753104615
    },
    {
        "content": "<p>And for next time, we have <a href=\"https://github.com/IQSS/dataverse/issues/11660\">#11660</a>. Do you mind if I just merge it?</p>",
        "id": 529891834,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753104678
    },
    {
        "content": "<p>As said elsewhere: we can take our sweet time to merge <a href=\"https://github.com/IQSS/dataverse/issues/11660\">#11660</a> now, just in case someone wants to do this by the book. No need to do it hush hush</p>",
        "id": 529891891,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753104696
    },
    {
        "content": "<p>I'd leave that decision to <span class=\"user-mention\" data-user-id=\"760290\">@Omer M Fahim</span> - I tested this, but QA might not like us simply merging things... <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 529892015,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753104736
    },
    {
        "content": "<p>Sure. There are 21 things in \"ready for QA\" right now but I just gave your PR a milestone and put it at the very top.</p>",
        "id": 529892279,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753104815
    },
    {
        "content": "<p>I'd like to keep the focus on the release and follow up activities like this.</p>",
        "id": 529892379,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753104846
    },
    {
        "content": "<p>On a related note, there is no \"latest\" tag at <a href=\"https://hub.docker.com/r/gdcc/dataverse/tags\">https://hub.docker.com/r/gdcc/dataverse/tags</a></p>\n<p>This will be fixed by <a href=\"https://github.com/IQSS/dataverse/issues/11660\">#11660</a> for 6.8, right? And are you thinking we'll just live without a \"latest\" tag for 6.7?</p>",
        "id": 529892680,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753104928
    },
    {
        "content": "<p>6.7 should have been added - let me check. (latest is usually updated on regular maintenance anyway!)</p>",
        "id": 529893439,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753105179
    },
    {
        "content": "<p>Yes, 6.7-noble is now at <a href=\"https://hub.docker.com/r/gdcc/dataverse/tags\">https://hub.docker.com/r/gdcc/dataverse/tags</a> but no \"latest\".</p>",
        "id": 529893657,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753105240
    },
    {
        "content": "<p>Right, right, \"latest\" is rolling. That's good.</p>",
        "id": 529893822,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753105293
    },
    {
        "content": "<p>From the logs I see \"Determined these additional Maven tag options: -Dapp.image=gdcc/dataverse:6.7-noble -Ddocker.tags.revision=6.7-noble-r0 -Ddocker.tags.latest=latest\"</p>",
        "id": 529894089,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753105374
    },
    {
        "content": "<p>So the script worked up to that point</p>",
        "id": 529894170,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753105398
    },
    {
        "content": "<p>That's good. I'm happy to do a Zoom call if that helps.</p>",
        "id": 529894365,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753105449
    },
    {
        "content": "<p>This script worked before without flaws. Now it didn't take the tag arguments.</p>",
        "id": 529894749,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753105546
    },
    {
        "content": "<p>That's why there's now -r0 or latest on hub</p>",
        "id": 529894806,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753105561
    },
    {
        "content": "<p>odd</p>",
        "id": 529895021,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753105621
    },
    {
        "content": "<p>I'm looking at <a href=\"https://dmp.fabric8.io/#docker:tag\">https://dmp.fabric8.io/#docker:tag</a></p>\n<p>When we pass <code>-Ddocker.tags.latest=latest</code> is the idea that we upload one image to Docker Hub but tag it more than once? That is, the \"6.7-noble\" image should also be tagged with \"latest\"?</p>",
        "id": 529900038,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107035
    },
    {
        "content": "<p>Yeah exactly</p>",
        "id": 529900094,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107051
    },
    {
        "content": "<p>We use this as Maven argument to realize that: -Ddocker.imagePropertyConfiguration=override $TAG_OPTIONS</p>",
        "id": 529900164,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107071
    },
    {
        "content": "<p>But for some reason, that didn't work... <img alt=\":shrugdog:\" class=\"emoji\" src=\"https://avatars.zulip.com/53090/emoji/images/86c833ef.png\" title=\"shrugdog\"></p>",
        "id": 529900205,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107085
    },
    {
        "content": "<p>Do we want a separate issue and (future) PR for the lack of a \"latest\" tag? (And lack of a \"6.7-noble-r0\" tag, if I understand you correctly.)</p>",
        "id": 529900587,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107189
    },
    {
        "content": "<p>This already seems to be a problem for the base image.</p>",
        "id": 529901086,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107351
    },
    {
        "content": "<p>orly</p>",
        "id": 529901213,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107390
    },
    {
        "content": "<p>But at least there I see the two tag options for rolling and r0</p>",
        "id": 529901338,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107432
    },
    {
        "content": "<p>Latest for some reason wasn't added</p>",
        "id": 529901359,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107442
    },
    {
        "content": "<p>strange</p>",
        "id": 529901442,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107468
    },
    {
        "content": "<p>Very. As I said, all of this was working before!</p>",
        "id": 529901509,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107498
    },
    {
        "content": "<p>in the test repo, right?</p>",
        "id": 529901537,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107508
    },
    {
        "content": "<p>It should also have worked in the main repo while we had 6.6 out</p>",
        "id": 529901614,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107537
    },
    {
        "content": "<p>That's even weirder... if it was working and stopped working. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 529901709,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107563
    },
    {
        "content": "<p>See <a href=\"https://github.com/IQSS/dataverse/actions/runs/16245034059/job/45866723781\">https://github.com/IQSS/dataverse/actions/runs/16245034059/job/45866723781</a></p>",
        "id": 529901788,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107587
    },
    {
        "content": "<p>THere we have all base tags properly detected</p>",
        "id": 529901830,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107600
    },
    {
        "content": "<p>Determined these additional Maven tag options: -Dbase.image=gdcc/base:6.6-noble -Ddocker.tags.revision=6.6-noble-r9 -Ddocker.tags.latest=latest</p>",
        "id": 529901874,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107611
    },
    {
        "content": "<p>And now we get this: Determined these additional Maven tag options: -Dbase.image=gdcc/base:6.7-noble -Ddocker.tags.revision=6.7-noble-r0 from <a href=\"https://github.com/IQSS/dataverse/actions/runs/16416737515/job/46384426558\">https://github.com/IQSS/dataverse/actions/runs/16416737515/job/46384426558</a></p>",
        "id": 529901978,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107641
    },
    {
        "content": "<p>Wait a sec - I see a 403 for a curl in there!</p>",
        "id": 529902104,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107675
    },
    {
        "content": "<p>Yeah that worked flawless before</p>",
        "id": 529902201,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107701
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>  IS_CURRENT_RELEASE=0\n  if [[ &quot;$BRANCH&quot; = $( curl -f -sS &quot;https://api.github.com/repos/$GITHUB_REPOSITORY/releases&quot; | jq -r &#39;.[0].tag_name&#39; ) ]]; then\n    IS_CURRENT_RELEASE=1\n  fi\n</code></pre></div>",
        "id": 529902358,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107749
    },
    {
        "content": "<p>Did Github change their policies or maybe we can no longer reach out without a Token to the Github API from a runner?</p>",
        "id": 529902362,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107750
    },
    {
        "content": "<p>That explains very well why the latest tag was not added to the base image.</p>",
        "id": 529902419,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107770
    },
    {
        "content": "<p>It does not explain the bit with the app image not having extra tags</p>",
        "id": 529902439,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107778
    },
    {
        "content": "<p>not sure about the policies and runners</p>",
        "id": 529902750,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107883
    },
    {
        "content": "<p>Looks like we might need to use this: -H 'Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}' in the curl</p>",
        "id": 529902951,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107931
    },
    {
        "content": "<p>ok</p>",
        "id": 529902973,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107942
    },
    {
        "content": "<p>Even with a Token a rate limit applies, but it will at least be higher</p>",
        "id": 529903041,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753107965
    },
    {
        "content": "<p>sure</p>",
        "id": 529903087,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107977
    },
    {
        "content": "<p>Do you mind if I go ahead and create a separate issue about the lack of \"latest\"?</p>",
        "id": 529903116,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753107987
    },
    {
        "content": "<p>Yes please</p>",
        "id": 529903248,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108024
    },
    {
        "content": "<p>You might want to include that the main app image also is missing tags</p>",
        "id": 529903317,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108042
    },
    {
        "content": "<p>But these might be worth two different issues</p>",
        "id": 529903364,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108056
    },
    {
        "content": "<p>This one is for the app image:</p>\n<p>\"latest\" tag was not created on Docker Hub for 6.7 app imageÂ <a href=\"https://github.com/IQSS/dataverse/issues/11661\">#11661</a></p>\n<p>Do you want one for the base image as well?</p>",
        "id": 529903778,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753108193
    },
    {
        "content": "<p>It's not just \"latest\" missing - also the revision tag</p>",
        "id": 529903868,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108222
    },
    {
        "content": "<p>Right, right. Is this better?</p>\n<p>\"latest\" tag and revision tag (e.g. 6.7-noble-r0) were not created on Docker Hub for 6.7 app image</p>",
        "id": 529904054,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753108286
    },
    {
        "content": "<p>Great. Do you want a separate issue for the base image?</p>",
        "id": 529904165,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753108319
    },
    {
        "content": "<p>If you don't mind</p>",
        "id": 529904278,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108351
    },
    {
        "content": "<p>I'll probably not get to this today</p>",
        "id": 529904309,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108361
    },
    {
        "content": "<p>no worries!</p>",
        "id": 529904330,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753108369
    },
    {
        "content": "<p>Feel free to assign me on all of them</p>",
        "id": 529904332,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108370
    },
    {
        "content": "<p>Maybe we can keep all of it in the same PR</p>",
        "id": 529904650,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108481
    },
    {
        "content": "<p>Sure. For the base image only \"latest\" wasn't pushed, right? I see 6.7-noble-r0 <a href=\"https://hub.docker.com/r/gdcc/base/tags\">https://hub.docker.com/r/gdcc/base/tags</a></p>",
        "id": 529904720,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753108500
    },
    {
        "content": "<p>That's correct.</p>",
        "id": 529904768,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108514
    },
    {
        "content": "<p>Apparently I should make sure to cancel the build when I get a 403</p>",
        "id": 529904829,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108535
    },
    {
        "content": "<p>Really didn't expect this to happen <span aria-label=\"rolling eyes\" class=\"emoji emoji-1f644\" role=\"img\" title=\"rolling eyes\">:rolling_eyes:</span></p>",
        "id": 529904869,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108550
    },
    {
        "content": "<p>Maybe I should rewrite the whole shebang in a proper scripting language</p>",
        "id": 529904947,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108576
    },
    {
        "content": "<p>Could use jbang <span aria-label=\"smile cat\" class=\"emoji emoji-1f638\" role=\"img\" title=\"smile cat\">:smile_cat:</span></p>",
        "id": 529905021,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1753108600
    },
    {
        "content": "<p>Ha, or Dagger (<a class=\"stream-topic\" data-stream-id=\"379673\" href=\"/#narrow/channel/379673-dev/topic/From.20Jenkins.20to.20GHA.20to.20Dagger.3F/with/508564151\">#dev &gt; From Jenkins to GHA to Dagger?</a>) /me ducks</p>",
        "id": 529905475,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753108751
    },
    {
        "content": "<p>Ok, issue created:</p>\n<p>\"latest\" tag was not created on Docker Hub for 6.7 base imageÂ <a href=\"https://github.com/IQSS/dataverse/issues/11662\">#11662</a></p>",
        "id": 529905515,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753108764
    },
    {
        "content": "<p><a href=\"https://github.com/IQSS/dataverse/issues/11661\">#11661</a> (latest for app image) is the most user-facing. Do you think I should link to it from the release notes to say that we know \"docker compose up\" won't \"just work\" at the moment and that we're fixing it? And that they can use the 6.7-noble tag for now?</p>",
        "id": 529907086,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753109265
    },
    {
        "content": "<p>I just added \"Please note: We are aware that the \"latest\" tag does not (yet) appear on Docker Hub (<a href=\"https://github.com/IQSS/dataverse/issues/11661\">#11661</a>). In the meantime, you can use \"6.7-noble\" (see all <a href=\"https://hub.docker.com/r/gdcc/dataverse/tags\">available tags</a>), which is equivalent\" to <a href=\"https://github.com/IQSS/dataverse/releases/tag/v6.7\">https://github.com/IQSS/dataverse/releases/tag/v6.7</a> (under \"Tagged Docker images\").</p>",
        "id": 529909300,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753109933
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"770046\">@GermÃ¡n Saracca</span> this is the \"diff\" I mentioned at standup that worked for me: <a href=\"https://github.com/IQSS/dataverse/issues/11661#issuecomment-3114665869\">https://github.com/IQSS/dataverse/issues/11661#issuecomment-3114665869</a></p>",
        "id": 531397455,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1753716074
    },
    {
        "content": "<p>I have the explanation for why this doesn't work for gdcc/dataverse, but it does for gdcc/base and gdcc/configbaker. It's hard to spot! For the application image we have an <code>&lt;external&gt;</code> definition, pointing to our Docker Compose file. Using properties to override the tags settings usually requires to use such an <code>&lt;external&gt;</code> configuration, but with <code>&lt;type&gt;properties&lt;/type&gt;</code>. So we basically cannot combine both at the moment.</p>",
        "id": 532293541,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1754050390
    },
    {
        "content": "<p>I also found another oopsie: the description for configbaker is pushed to base...  Simple typo... <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 532293618,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1754050420
    },
    {
        "content": "<p>Thanks for investigating this!</p>",
        "id": 532293774,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1754050476
    },
    {
        "content": "<p>Feeling a bit dumb I didn't catch this before. The only excuse I have is that I did test thoroughly (and it worked for gdcc/base for a few releases), but couldn't push to the Hub to not mess up things. Maybe should have pushed to a throwaway org... <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 532293948,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1754050547
    },
    {
        "content": "<p>Meh, I made a couple mistakes in my PR for the 6.7.1 release yesterday (<a class=\"stream-topic\" data-stream-id=\"375707\" href=\"/#narrow/channel/375707-community/topic/Dataverse.206.2E7.2E1.20Release/with/532164812\">#community &gt; Dataverse 6.7.1 Release</a> ). One I fixed before merging thanks to Steve K's testing and for the other one I had to make another PR. All's well that ends well! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 532294711,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1754050841
    },
    {
        "content": "<p>I created an issue with the DMP folks: <a href=\"https://github.com/fabric8io/docker-maven-plugin/issues/1883\">https://github.com/fabric8io/docker-maven-plugin/issues/1883</a></p>",
        "id": 532295678,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1754051196
    },
    {
        "content": "<p>Looks great. I gave it a <span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span></p>",
        "id": 532297236,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1754051722
    },
    {
        "content": "<p>If this is a dead-end with the plugin, I could see us edit the compose yaml and add them tags manually using yq or similar. It's a fresh checkout for any of the application images per version anyway.</p>",
        "id": 532301103,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1754053011
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> <a href=\"https://github.com/IQSS/dataverse/issues/11660\">#11660</a> is a draft PR. Should we go ahead and bump the milestone to 6.9?</p>",
        "id": 537549393,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1756931194
    },
    {
        "content": "<p>I think we moved this back to a draft because we wanted to wait for feedback from the DMP project. There has been none. So we probably will need to either implement it ourselves (and add a PR to upstream) or hack the compose file to add the tags we want added.</p>",
        "id": 538219524,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757336437
    },
    {
        "content": "<p>It would  be good to have this in 6.8. As this is not touching any Java code, do you think I should prioritize this and see to get it done ASAP? (So we can merge it for 6.8)</p>",
        "id": 538219785,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757336493
    },
    {
        "content": "<p>Sounds right. Also, I think that first PR fixed the first issue but there ended up being two more issues... or something.</p>",
        "id": 538219787,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757336493
    },
    {
        "content": "<p>Per <a class=\"stream-topic\" data-stream-id=\"375707\" href=\"/#narrow/channel/375707-community/topic/Release.206.2E8.20Timeline/with/530425336\">#community &gt; Release 6.8 Timeline</a> code freeze is on Thursday. So it would need to be merged by then.</p>",
        "id": 538220032,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757336539
    },
    {
        "content": "<p>Right. I'll look into it and try my best.</p>",
        "id": 538220183,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757336570
    },
    {
        "content": "<p>I went through the DMP code. This is hard to implement, as is basically requires one to change how their architecture of \"external config\" works.</p>",
        "id": 538237051,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757340648
    },
    {
        "content": "<p>So the easiest way forward is probably by manipulating pom.xml and adding the <code>&lt;build&gt;&lt;tags&gt;</code> section.</p>",
        "id": 538237213,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757340688
    },
    {
        "content": "<p>I'll code up something tomorrow using <a href=\"https://github.com/mikefarah/yq\">https://github.com/mikefarah/yq</a> to edit the XML in place during build time. Shouldn't be too hard.</p>",
        "id": 538239988,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757341350
    },
    {
        "content": "<p>Does that mean even more pom.xml hacking at release time? <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 538240001,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757341354
    },
    {
        "content": "<p>No no, this will go into the maintenance build script</p>",
        "id": 538240086,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757341374
    },
    {
        "content": "<p>So done for you</p>",
        "id": 538240125,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757341382
    },
    {
        "content": "<p>phew!</p>",
        "id": 538240159,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757341391
    },
    {
        "content": "<p>Sry leaving this unclear in the first place</p>",
        "id": 538240319,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757341429
    },
    {
        "content": "<p>No worries! Thanks for continuing to work on this!</p>",
        "id": 538240429,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757341458
    },
    {
        "content": "<p>I just switched <a href=\"https://github.com/IQSS/dataverse/issues/11660\">#11660</a> from \"on hold\" to \"in progress\" to reflect that you're working on it. And I kept the 6.8 milestone on it.</p>",
        "id": 538247611,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757343190
    },
    {
        "content": "<p>I found an even easier workaround!</p>",
        "id": 538460252,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757430274
    },
    {
        "content": "<p><a href=\"https://github.com/fabric8io/docker-maven-plugin/issues/1883#issuecomment-3271138235\">https://github.com/fabric8io/docker-maven-plugin/issues/1883#issuecomment-3271138235</a></p>",
        "id": 538460272,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757430280
    },
    {
        "content": "<p>nice!</p>",
        "id": 538469032,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757432667
    },
    {
        "content": "<p>I pushed all the changes</p>",
        "id": 538470876,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757433154
    },
    {
        "content": "<p>Included backports for the last releases</p>",
        "id": 538470904,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757433163
    },
    {
        "content": "<p>Please review away! Thx!!!</p>",
        "id": 538470947,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757433173
    },
    {
        "content": "<p>I see new commits in <a href=\"https://github.com/IQSS/dataverse/issues/11660\">#11660</a>! Thanks!</p>",
        "id": 538471049,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757433202
    },
    {
        "content": "<p>Approved! <span class=\"user-mention\" data-user-id=\"760290\">@Omer M Fahim</span> please let us know if you have any questions.</p>",
        "id": 538475321,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757434259
    },
    {
        "content": "<p>will take it from here, thanks</p>",
        "id": 538502017,
        "sender_full_name": "Omer M Fahim",
        "timestamp": 1757441984
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"760290\">@Omer M Fahim</span> we're talking about the PR if you'd like to join: <a href=\"https://harvard.zoom.us/j/91061519853?pwd=U1lQR1ExMlo3Ty9XUVJIM2ZPNW1mdz09\">https://harvard.zoom.us/j/91061519853?pwd=U1lQR1ExMlo3Ty9XUVJIM2ZPNW1mdz09</a></p>",
        "id": 538861741,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757597930
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> how much do you want <a href=\"https://github.com/IQSS/dataverse/issues/11660\">#11660</a> to be included in 6.8? We're only a couple hours away from code freeze (<a class=\"stream-topic\" data-stream-id=\"375707\" href=\"/#narrow/channel/375707-community/topic/Release.206.2E8.20Timeline/with/530425336\">#community &gt; Release 6.8 Timeline</a>).</p>\n<p>I was thinking of offering to <span class=\"user-mention\" data-user-id=\"760290\">@Omer M Fahim</span> that I could click the merge button so the blood's on my hands, if you really want this for 6.8. <span aria-label=\"drop of blood\" class=\"emoji emoji-1fa78\" role=\"img\" title=\"drop of blood\">:drop_of_blood:</span></p>",
        "id": 538929380,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757618546
    },
    {
        "content": "<p>Well if we don't merge it, we don't have the proper release images from the get go of the release.</p>",
        "id": 538983974,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757654108
    },
    {
        "content": "<p>Not sure we'd want that story to continue <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 538983993,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757654121
    },
    {
        "content": "<p>And I'd need to add another backport for 6.8's pom.xml</p>",
        "id": 538984028,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757654156
    },
    {
        "content": "<p>Doable, but more work. Compared to the low risk it poses for the codebase... <img alt=\":shrugdog:\" class=\"emoji\" src=\"https://avatars.zulip.com/53090/emoji/images/86c833ef.png\" title=\"shrugdog\"></p>",
        "id": 538984074,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757654184
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin ðŸš€</span> <span class=\"user-mention\" data-user-id=\"760290\">@Omer M Fahim</span>  I can hit the merge button if it's easier to blame the guy in another timezone <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 538986025,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757655651
    },
    {
        "content": "<p>Go for it!</p>",
        "id": 538990402,
        "sender_full_name": "Omer M Fahim",
        "timestamp": 1757658404
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/Ar4W1YPMLx1-FQc2BxQxOXVA/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/Ar4W1YPMLx1-FQc2BxQxOXVA/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1414x874\" src=\"/user_uploads/thumbnail/53090/Ar4W1YPMLx1-FQc2BxQxOXVA/image.png/840x560.webp\"></a></div>",
        "id": 538995543,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757660755
    },
    {
        "content": "<p>Looking at the action logs for dry and damp runs, it looks like this should all pan out nicely!</p>",
        "id": 539013486,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757666987
    },
    {
        "content": "<p>Crossing fingers for the real thing <span aria-label=\"crossed\" class=\"emoji emoji-1faf0\" role=\"img\" title=\"crossed\">:crossed:</span></p>",
        "id": 539013561,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757667013
    },
    {
        "content": "<p>Merged! Great!</p>",
        "id": 539033468,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757673825
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> so did you run the maintenance script already? If not, can I push the button? <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 539063885,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757683294
    },
    {
        "content": "<p>I ran the action, yes. But only in dry and damp node. I did not check the force build option.</p>",
        "id": 539066448,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757683898
    },
    {
        "content": "<p>It might be good to check the force option in a second run if we find that the latest release branch wasn't built. Otherwise it's going to put unnecessary revision on the Hub</p>",
        "id": 539066882,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757684016
    },
    {
        "content": "<p>Alt way: we can check the damp output for what would happen. That way we can predict and decide now to force or not to force things.</p>",
        "id": 539067084,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757684070
    },
    {
        "content": "<p>I'll tell you what, this is sounding complicated. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> I'll let you handle it! <img alt=\":dataverse_man:\" class=\"emoji\" src=\"https://avatars.zulip.com/53090/emoji/images/c7b94a03.png\" title=\"dataverse man\"></p>",
        "id": 539071161,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757685129
    },
    {
        "content": "<p>Once things are squared away, let's update the <a href=\"https://github.com/IQSS/dataverse/releases/tag/v6.7\">6.7 release notes</a>, which currently say this:</p>\n<p>Please note: We are aware that the \"latest\" tag does not (yet) appear on Docker Hub (<a href=\"https://github.com/IQSS/dataverse/issues/11661\">#11661</a>). In the meantime, you can use \"6.7-noble\" (see all <a href=\"https://hub.docker.com/r/gdcc/dataverse/tags\">available tags</a>), which is equivalent.</p>",
        "id": 539071729,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757685299
    },
    {
        "content": "<p>Also, can we rename this topic? Maybe \"fixing tags for images post 6.7\"?</p>",
        "id": 539072981,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757685640
    },
    {
        "content": "<p>Have at it <span aria-label=\"smile cat\" class=\"emoji emoji-1f638\" role=\"img\" title=\"smile cat\">:smile_cat:</span> I already headed into the weekend. My carpenter soul is breaking through.</p>",
        "id": 539074700,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1757686102
    },
    {
        "content": "<p>Done!</p>",
        "id": 539074952,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1757686174
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> yesterday, before I even made a PR to bump the version to 6.8, <span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> and I noticed there's a 6.8-noble tag at <a href=\"https://hub.docker.com/r/gdcc/dataverse/tags\">https://hub.docker.com/r/gdcc/dataverse/tags</a></p>\n<p>That doesn't seem right, does it? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 541462273,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1758807873
    },
    {
        "content": "<p><a href=\"https://guides.dataverse.org/en/latest/container/app-image.html#tags-for-development-use\">https://guides.dataverse.org/en/latest/container/app-image.html#tags-for-development-use</a> <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 541500125,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1758817421
    },
    {
        "content": "<p>Upcoming! Ok!</p>",
        "id": 541501699,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1758817972
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599841\">@Jan Range</span> ^^</p>",
        "id": 541501732,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1758817984
    },
    {
        "content": "<p>Some potential for confusion, though. I'll have to think about it some more. <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 541501834,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1758818023
    },
    {
        "content": "<p>It requires people to be conscious of when the final release is made.</p>",
        "id": 541502011,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1758818085
    },
    {
        "content": "<p>People might \"shop\" for the tag with a number in it (if they want to try a fixed version) and go for the newest one, not knowing that in most cases, it will be unreleased code. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 541502123,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1758818124
    },
    {
        "content": "<p>The 6.8 version bump is in develop (and master) so I guess this means we'll be seeing 6.9 tags on Docker Hub soon.</p>\n<p>It's all good. I just forgot how this works. Forgot about the \"upcoming\" concept.</p>",
        "id": 541506859,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1758819837
    },
    {
        "content": "<p>Maybe we can document this \"gotcha\" somewhere. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 541524501,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1758826088
    },
    {
        "content": "<p>6.8 is out! How are the tags looking? <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 541544478,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1758834314
    },
    {
        "content": "<p>I think they're looking good! All these issues seem to be resolved:</p>\n<ul>\n<li><a href=\"https://github.com/IQSS/dataverse/issues/11659\">#11659</a></li>\n<li><a href=\"https://github.com/IQSS/dataverse/issues/11661\">#11661</a></li>\n<li><a href=\"https://github.com/IQSS/dataverse/issues/11662\">#11662</a></li>\n</ul>\n<p>Great work, <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span>! <img alt=\":dataverse_man:\" class=\"emoji\" src=\"https://avatars.zulip.com/53090/emoji/images/c7b94a03.png\" title=\"dataverse man\"></p>",
        "id": 541637915,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1758883616
    }
]