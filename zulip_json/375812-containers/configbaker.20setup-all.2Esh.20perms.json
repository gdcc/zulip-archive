[
    {
        "content": "<p>This report just came in: <a href=\"https://groups.google.com/g/dataverse-community/c/Bpbj2b3V74w/m/WljyMJlpAgAJ\">https://groups.google.com/g/dataverse-community/c/Bpbj2b3V74w/m/WljyMJlpAgAJ</a></p>",
        "id": 390222058,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694399784
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> thanks for replying and encouraging Juan Pablo to join us here!</p>",
        "id": 390287074,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694430723
    },
    {
        "content": "<p>It sounds like he might even be able to bring his laptop by my office, if necessary: <a href=\"https://github.com/IQSS/dataverse/pull/9895#issuecomment-1712271029\">https://github.com/IQSS/dataverse/pull/9895#issuecomment-1712271029</a></p>",
        "id": 390287284,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694430799
    },
    {
        "content": "<p>Anytime!</p>",
        "id": 390289750,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694431774
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"601920\">@Akio Sone</span> you're on Windows. Any thoughts on this?</p>",
        "id": 390308675,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694438234
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> would it be crazy to have <a href=\"https://github.com/gdcc/api-test-runner\">https://github.com/gdcc/api-test-runner</a> test Windows?</p>",
        "id": 390308775,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694438266
    },
    {
        "content": "<p>Hi everyone! Thanks for your help <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> I just posted more information and If I get any findings today, I will post them.</p>",
        "id": 390324033,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694442718
    },
    {
        "content": "<p>So if you chmod +x the first script, it executes? But there are a lot of scripts! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 390326050,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694443228
    },
    {
        "content": "<p>If you want to try rebuilding the configbaker images, please see <a href=\"https://github.com/IQSS/dataverse/issues/9885\">#9885</a>.</p>",
        "id": 390326202,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694443275
    },
    {
        "content": "<p>Just as a workaround until we figure this out.</p>",
        "id": 390326428,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694443322
    },
    {
        "content": "<p>I will try that briefly and let you know if I have any luck <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> ! thanks <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 390326548,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694443341
    },
    {
        "content": "<p>I can't remember if <span class=\"user-mention\" data-user-id=\"601920\">@Akio Sone</span> tested configbaker or just ran the equivalent scripts (back before we had configbaker) on Windows.</p>",
        "id": 390326816,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694443411
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> I am reading through <a href=\"https://github.com/IQSS/dataverse/issues/9885\">#9885</a> but when I click on the link \"<a href=\"#narrow/stream/375812-containers/topic/iterating.20on.20configbaker\">https://dataverse.zulipchat.com/#narrow/stream/375812-containers/topic/iterating.20on.20configbaker</a>\" It ends in a \"no search results\" page, Is this thread behind some credentials or expired maybe?</p>",
        "id": 390328795,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694443929
    },
    {
        "content": "<p>D'oh! I was afraid of that. Please try <a class=\"stream-topic\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers/topic/.E2.9C.94.20iterating.20on.20configbaker\">#containers &gt; âœ” iterating on configbaker</a></p>",
        "id": 390329120,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694444013
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 390329269,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694444045
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> !</p>",
        "id": 390346240,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694448867
    },
    {
        "content": "<p>Welcome!</p>",
        "id": 390346251,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694448870
    },
    {
        "content": "<p>You asked about how to get deets for B) and C)</p>\n<blockquote>\n<p>B) Can you verify that the scripts have the executable bit set inside the container?<br>\nC) Can you verify that the container is running as root? (It shouldn't matter, but lets see if there might be a problem)</p>\n</blockquote>",
        "id": 390346326,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694448896
    },
    {
        "content": "<p>If you run <code>docker run -it --rm gdcc/configbaker:unstable bash</code>, you can explore the filesystem.</p>",
        "id": 390346416,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694448928
    },
    {
        "content": "<p>You can look around and explore <code>/scripts</code>. When analyzing the content with <code>dive</code>, I see the following: <br>\n<a href=\"/user_uploads/53090/lvs3rVg8MyFSqvFKwJ9IeyTV/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/lvs3rVg8MyFSqvFKwJ9IeyTV/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/lvs3rVg8MyFSqvFKwJ9IeyTV/image.png\"></a></div>",
        "id": 390346781,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694449040
    },
    {
        "content": "<p>So all the permission bits set. Let's see if those prevail on a windows container host</p>",
        "id": 390346851,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694449062
    },
    {
        "content": "<p>(BTW I probably will have a Win CT host at my fingertips as of tomorrow and can test a few things, too)</p>",
        "id": 390346979,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694449096
    },
    {
        "content": "<p>I am going to try this later tonight and let you know my findings. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 390385027,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694464922
    },
    {
        "content": "<p>Let's see, I am not sure I am looking at the right thing, just downloaded dive for the first time and checked the gdcc/configbaker image and this is the content: <br>\n<a href=\"/user_uploads/53090/8FxR2e38qVftFgqfaVBnF2qg/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/8FxR2e38qVftFgqfaVBnF2qg/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/8FxR2e38qVftFgqfaVBnF2qg/image.png\"></a></div>",
        "id": 390404689,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694474028
    },
    {
        "content": "<p>Yeah, that looks right. A few scripts.</p>",
        "id": 390410526,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694476788
    },
    {
        "content": "<p>If it helps, here's how it looks as of 6.0: <a href=\"https://github.com/IQSS/dataverse/tree/v6.0/modules/container-configbaker\">https://github.com/IQSS/dataverse/tree/v6.0/modules/container-configbaker</a></p>",
        "id": 390410677,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694476834
    },
    {
        "content": "<p>Docs: <a href=\"https://guides.dataverse.org/en/6.0/container/configbaker-image.html\">https://guides.dataverse.org/en/6.0/container/configbaker-image.html</a></p>",
        "id": 390410710,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694476856
    },
    {
        "content": "<p>Please keep the questions coming! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 390410758,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694476872
    },
    {
        "content": "<p>Please note that after the copy, there is a run statement that should reveal the chmod +x I'm running on purpose there.</p>",
        "id": 390415054,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694478723
    },
    {
        "content": "<p>Would be good to check from a running container if it actually comes through though.</p>",
        "id": 390415133,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694478749
    },
    {
        "content": "<p>It does on my Linux box... <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 390415186,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694478770
    },
    {
        "content": "<p>It seems that I got it working or at least I made some progress, just a word of warning. If you modify a script with the docker UI on the container it will change the permissions, so the files are not able to run.</p>",
        "id": 390567800,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694540643
    },
    {
        "content": "<p>Ok it is working: <br>\n<a href=\"/user_uploads/53090/i2R_cKCavmHDbFd-3f8aN6_y/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/i2R_cKCavmHDbFd-3f8aN6_y/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/i2R_cKCavmHDbFd-3f8aN6_y/image.png\"></a></div>",
        "id": 390568067,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694540762
    },
    {
        "content": "<p>Nice! Would you like to make a pull request?</p>",
        "id": 390568244,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694540818
    },
    {
        "content": "<p>Sure! let me just share what the change is and let me know your thoughts:</p>\n<p>First after creating the docker image from a fresh installation, I checked the files with dive and all the scripts seem to have the right permissions: </p>\n<p><a href=\"/user_uploads/53090/vpxx1SZQYE1Y4PPEOy-peL6o/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/vpxx1SZQYE1Y4PPEOy-peL6o/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/vpxx1SZQYE1Y4PPEOy-peL6o/image.png\"></a></div><p>But there is another set of scripts that seems to me that are created in another point during the launch of the container, these files are the following: </p>\n<p><a href=\"/user_uploads/53090/icObjf3nI8Pk11FpwOVVMlOj/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/icObjf3nI8Pk11FpwOVVMlOj/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/icObjf3nI8Pk11FpwOVVMlOj/image.png\"></a></div><p>For what I see these are created by the dockerfile</p>\n<p>What I did to fix the permissions is add the following line to /dev/init.sh<br>\nchmod +x \"${BOOTSTRAP_DIR}\"/base/*.sh</p>\n<p>this fixed the permissions and let the execution to complete, now I think this may not be the right solution so I may do some testing today.</p>\n<p>For what I see on /modules/container-configbaker/dockerfile  at line 31 there is a RUN chmod to set the permissions on ${SCRIPT_DIR}/<em>.sh and ${BOOTSTRAP_DIR}/</em>/*.sh but is not until line 40 where these files are copied so they are left out of this.</p>\n<p>I am going to test this in a few and let you know.</p>",
        "id": 390570383,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694541658
    },
    {
        "content": "<p>Right, those scripts get included based on this config file from what I understand: <a href=\"https://github.com/IQSS/dataverse/blob/v6.0/modules/container-configbaker/assembly.xml#L19-L22\">https://github.com/IQSS/dataverse/blob/v6.0/modules/container-configbaker/assembly.xml#L19-L22</a></p>",
        "id": 390571153,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694541929
    },
    {
        "content": "<p>It's just a list. I don't know if we can specify in that XML file that certain files should be executable.</p>",
        "id": 390571229,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694541958
    },
    {
        "content": "<p>In the dockerfile there is this code: <br>\n<a href=\"/user_uploads/53090/gyRCfEaq-bkdNU4pzWPCJ0ed/image.png\">image.png</a><br>\n the red is when it set the permissions but is not up to blue when these files are copied</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/gyRCfEaq-bkdNU4pzWPCJ0ed/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/gyRCfEaq-bkdNU4pzWPCJ0ed/image.png\"></a></div>",
        "id": 390571569,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694542079
    },
    {
        "content": "<p>Gotcha.</p>",
        "id": 390571830,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694542163
    },
    {
        "content": "<p>Here I'm seeing something about Windows:</p>\n<p>\"keep to respect the assembly provided permissions, exec for setting the executable bit on all files (required for Windows when using an assembly mode dir)\"</p>\n<p><a href=\"https://dmp.fabric8.io/#build-assembly\">https://dmp.fabric8.io/#build-assembly</a></p>",
        "id": 390571880,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694542184
    },
    {
        "content": "<p>There's also <code>fileMode</code> at <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/assembly.html\">https://maven.apache.org/plugins/maven-assembly-plugin/assembly.html</a> and the example they give is 0644.</p>",
        "id": 390572106,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694542270
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> if your chmod is working, that's fine. A PR would be appreciated!</p>",
        "id": 390572215,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694542315
    },
    {
        "content": "<p>And an issue, please, like you did last time. <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 390572872,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694542580
    },
    {
        "content": "<p>Would this be a Bug report or a Feature request <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>  (It may not be a bug it is a feature? <span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span> )</p>",
        "id": 390573030,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694542653
    },
    {
        "content": "<p>It's a bug. \"Dockerized Dataverse doesn't work on Windows\" or whatever.</p>",
        "id": 390573294,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694542764
    },
    {
        "content": "<p><a href=\"https://github.com/IQSS/dataverse/issues/9904\">#9904</a> looks great. Thanks!</p>",
        "id": 390575821,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694543734
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> </p>\n<p>Could you offer me some guidance with the steps to create another PR? It seems that the previous one <a href=\"https://github.com/IQSS/dataverse/pull/9895\">https://github.com/IQSS/dataverse/pull/9895</a> is having an issue with \"continuous-integration/jenkins/pr-merge â€” This commit cannot be built\", when I click details, the page can't load. <br>\n<a href=\"/user_uploads/53090/C-Sr_d8Aj3gptoSk7J3uFOa-/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/C-Sr_d8Aj3gptoSk7J3uFOa-/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/C-Sr_d8Aj3gptoSk7J3uFOa-/image.png\"></a></div><p>Since I can't create a second fork should I delete this one ?</p>",
        "id": 390577376,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694544354
    },
    {
        "content": "<p>Two, things:</p>\n<p>Our CI is broken right now, sorry!</p>\n<p>Yes, I noticed you used the develop branch on your fork last time. Maybe you could close that PR, delete the fork, fork again, and create branches next time. Here's how we describe this: <a href=\"https://guides.dataverse.org/en/6.0/developers/version-control.html#how-to-make-a-pull-request\">https://guides.dataverse.org/en/6.0/developers/version-control.html#how-to-make-a-pull-request</a></p>\n<p>Sometimes a develop branch on a fork gives us trouble: <a href=\"https://github.com/IQSS/dataverse/issues/9508\">#9508</a>.</p>",
        "id": 390579310,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694545093
    },
    {
        "content": "<p>Ok going to grave something across the street and will look at this! Thanks.</p>",
        "id": 390580107,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694545448
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> I am not sure, but do I need to request access to create a branch? It seems that is the case because I get a message like this:</p>\n<p><a href=\"/user_uploads/53090/9-ydxSmhllJjAO4e-U53TiDm/image.png\">image.png</a><br>\n<a href=\"/user_uploads/53090/0oGN2xhFswn0wPL-Im35feMb/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/9-ydxSmhllJjAO4e-U53TiDm/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/9-ydxSmhllJjAO4e-U53TiDm/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/53090/0oGN2xhFswn0wPL-Im35feMb/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/0oGN2xhFswn0wPL-Im35feMb/image.png\"></a></div>",
        "id": 390584944,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694547685
    },
    {
        "content": "<p>Ah, are you using the GitHub UI, primarily? It should all be possible. You'll want to click that \"create a fork\" button, assuming you deleted your old fork.</p>\n<p>I'm happy to jump on Zoom if you like!</p>",
        "id": 390588085,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694549092
    },
    {
        "content": "<p>I normally use the CLI or the web interface but was testing this to avoid the same issue. It would be great if I can get you on zoom, let me know when is the best time for you <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 390589496,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694549651
    },
    {
        "content": "<p><a href=\"https://harvard.zoom.us/my/pdurbin?pwd=em1WNUZGbnY2YjhxNEdSbjJJMXNSUT09\">https://harvard.zoom.us/my/pdurbin?pwd=em1WNUZGbnY2YjhxNEdSbjJJMXNSUT09</a></p>",
        "id": 390590604,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694550150
    },
    {
        "content": "<p>(If you have time now. If not, no worries!)</p>",
        "id": 390590628,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694550163
    },
    {
        "content": "<p>The change on the \"dockerfile\" definitely works and seems a better solution. I will do a PR tonight after a little bit more of testing.</p>",
        "id": 390597535,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694553090
    },
    {
        "content": "<p>Much appreciated!</p>",
        "id": 390597604,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694553117
    },
    {
        "content": "<p>Thanks to you for walking me through the GIT process and to <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> for sharing dive and the bash command for docker, really useful. Let me know if you guys want to test on a windows machine it is just a bus (73) to get to the square. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 390601476,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694555023
    },
    {
        "content": "<p>So I was able to install Docker Desktop on a brand new Windows 11 machine yesterday. Using WSL2 instead of HyperV. Pulling the images and exploring around, I cannot see that the executable bit would be missing on any of these scripts. Now I'm wondering which way to setup Linux containers on Windows you choose, which version of the underlying distribution you're using etc.</p>",
        "id": 390651538,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694584101
    },
    {
        "content": "<p>OK I was able to kind of reproduce the problem.</p>",
        "id": 390656777,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694587010
    },
    {
        "content": "<p>Using IntelliJ on Windows, cloning the project to the windows host (NOT the WSL machine!), I tried to build the image from scratch</p>",
        "id": 390656852,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694587056
    },
    {
        "content": "<p>And, as you said, all of a sudden the executable bit was missing</p>",
        "id": 390656933,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694587087
    },
    {
        "content": "<p>However, when I pulled the images from Docker Hub, they were not missing.</p>",
        "id": 390656968,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694587113
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> if you run <code>docker</code> in a powershell (NOT in the WSL subsystem), can you remove the configbaker image and pull fresh from Docker Hub? (The image id should be c21429de3745) Using this command should directly reveal the details: <br>\n<a href=\"/user_uploads/53090/9G9qZJ0p9QPXnzm8vn8BORhn/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/9G9qZJ0p9QPXnzm8vn8BORhn/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/9G9qZJ0p9QPXnzm8vn8BORhn/image.png\"></a></div>",
        "id": 390657514,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694587413
    },
    {
        "content": "<p>Rebuilding the image as described on the Windows host (files were cloned to Windoze file system), the image ID changed:<br>\n<a href=\"/user_uploads/53090/njbhJVdrfqFDyoyjbygsegJO/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/njbhJVdrfqFDyoyjbygsegJO/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/njbhJVdrfqFDyoyjbygsegJO/image.png\"></a></div><p>Running the same command again, I now see the missing exec bits:<br>\n<a href=\"/user_uploads/53090/dAMVYhuitMMStqjTptDN_gbC/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/dAMVYhuitMMStqjTptDN_gbC/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/dAMVYhuitMMStqjTptDN_gbC/image.png\"></a></div>",
        "id": 390658093,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694587718
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> did you rebuild the images before using? Because when \"just\" pulling from the Hub, it <em>should</em> have worked. The reason the hub images have the exec bit is because CI runs on Linux, keeping the git tracked exec bit intact. Checking out on a Win host cannot keep that intact (so your PR is indeed correct - we should take care of that for people! Thank you! <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span> )</p>",
        "id": 390658333,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694587831
    },
    {
        "content": "<p>But still I would like to evaluate if it works from \"just pulling\" - otherwise we'd have a problem at our hands!</p>",
        "id": 390658387,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694587863
    },
    {
        "content": "<p>Oh and we could try to checkout a project in WSL instead of on the Windows host. IntelliJ is fine with that, should work with VSCode as well. Dunno if that would be a weird workflow, if there is such an easy fix.</p>",
        "id": 390659352,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694588345
    },
    {
        "content": "<p>So basically I tried to follow the documentation to the best of my abilities, so I started <a href=\"https://guides.dataverse.org/en/latest/developers/windows.html\">on the windows</a>  page and this is where I proposed the change to the .gitattributes, downloaded and installed jq and as mentioned on the documentation moved over <a href=\"https://guides.dataverse.org/en/latest/container/dev-usage.html\">Development Usage</a>.</p>\n<p>Jumped right into the building section and ran \"mvn -Pct clean package\" and this is where the odyssey started <span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span>. Is there a pre-built version of the configbaker container? It was under my impression that this was created on the target.</p>",
        "id": 390728008,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694613013
    },
    {
        "content": "<p>The path you took makes perfect sense to me. Yes, there is a pre-built image on Docker Hub but a new developer should run <code>clean package</code> like you did. In the quickstart we combine in into one command: <code>mvn -Pct clean package docker:run</code></p>",
        "id": 390730024,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694613587
    },
    {
        "content": "<p><a href=\"https://guides.dataverse.org/en/6.0/developers/dev-environment.html#quickstart\">https://guides.dataverse.org/en/6.0/developers/dev-environment.html#quickstart</a></p>",
        "id": 390730063,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694613601
    },
    {
        "content": "<blockquote>\n<p>and ran \"mvn -Pct clean package\"</p>\n</blockquote>\n<p>Aha! So that explains it - you built the images, images on the hub are fine. Phew! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 390730981,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694613833
    },
    {
        "content": "<p>WRT the PR: we probably should just merge the chmod actions into one at the end. Seems cleaner, less layers.</p>",
        "id": 390731630,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694614015
    },
    {
        "content": "<p>(Or move copying the bootstrap script to the top, before the first chmod)</p>",
        "id": 390732007,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694614107
    },
    {
        "content": "<p>Yeah, looking the configbaker dockerfile, that's probably the best option</p>",
        "id": 390732136,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694614137
    },
    {
        "content": "<p>That was my original idea but the only thing that stopped me from doing that it was the RUN on the managed-schema.xml I am not sure this need any permissions at this point<br>\n<a href=\"/user_uploads/53090/1EW2zhQuQdg-sCnk8sXSUqfM/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/1EW2zhQuQdg-sCnk8sXSUqfM/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/1EW2zhQuQdg-sCnk8sXSUqfM/image.png\"></a></div>",
        "id": 390732390,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694614199
    },
    {
        "content": "<p>So I didn't wanted to break something else on the way <span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span></p>",
        "id": 390732526,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694614233
    },
    {
        "content": "<p>No, that is completely unrelated</p>",
        "id": 390732731,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694614292
    },
    {
        "content": "<p>Then yes, I think running that at the end would make total sense <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 390733367,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694614469
    },
    {
        "content": "<p>I will make the changes to put it at the end later today and update the PR <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> I had some workshops today but I am done with the last one after 3:00 est <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 390759834,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694622408
    },
    {
        "content": "<p>I will try to give this some more thought - it is also touching on layer optimization. Might update the PR.</p>",
        "id": 390759985,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694622466
    },
    {
        "content": "<p>Thanks for working on this!</p>",
        "id": 390760007,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1694622472
    },
    {
        "content": "<p>Sure, just let me know. Thanks to both of you for all the help and being so responsive! <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 390760698,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1694622691
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598183\">Oliver Bertuch</span> <a href=\"#narrow/stream/375812-containers/topic/configbaker.20setup-all.2Esh.20perms/near/390760007\">said</a>:</p>\n<blockquote>\n<p>Thanks for working on this!</p>\n</blockquote>\n<p>Hi Oliver, good morning. You mentioned you wanted to give this some more thought. What do you think should be the best solution here. Should I move the permissions to the end and not having this logic duplicated?</p>",
        "id": 392532460,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1695393253
    },
    {
        "content": "<p>I believe he listened to yesterday's meeting (thanks for coming) and didn't object to how I summarized things, so I think you should try moving that copy up (and test it, of course). I can leave a ```suggestion in the PR if you'd like.</p>",
        "id": 392534866,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695393866
    },
    {
        "content": "<p>Ok It is up! :D Let me know your thoughts.</p>",
        "id": 392559084,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1695399901
    },
    {
        "content": "<p>/me looks at <a href=\"https://github.com/IQSS/dataverse/issues/9906\">#9906</a></p>",
        "id": 392571318,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695403993
    },
    {
        "content": "<p>I tested this on a fresh installation and it has the same effect than the previous change, the configbaker-1 will run successfully. </p>\n<p><a href=\"/user_uploads/53090/h75qPPyGrvh_KwKBfiqSo4z_/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/h75qPPyGrvh_KwKBfiqSo4z_/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/h75qPPyGrvh_KwKBfiqSo4z_/image.png\"></a></div><p>Previous comment moved to <a href=\"#narrow/stream/375812-containers/topic/Dataverse-1.20container.20missing.20deployment.20on.20first.20launch.2E\">https://dataverse.zulipchat.com/#narrow/stream/375812-containers/topic/Dataverse-1.20container.20missing.20deployment.20on.20first.20launch.2E</a></p>",
        "id": 392571333,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1695403998
    },
    {
        "content": "<p><a href=\"https://github.com/IQSS/dataverse/issues/9906\">#9906</a> looks good to me but Oliver's the one who wanted the copy moved so I'll let him weigh in. Thanks!</p>",
        "id": 392571613,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695404123
    },
    {
        "content": "<p>Hmm, you shouldn't need to restart containers... new topic, please! <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span> Or you can move that message to a new topic if that's easier.</p>",
        "id": 392571771,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695404194
    },
    {
        "content": "<p>I will open a new issue for the sake of clarity.</p>",
        "id": 392571920,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1695404259
    },
    {
        "content": "<p>I love clarity!</p>",
        "id": 392571965,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695404279
    },
    {
        "content": "<p>I kicked off a test run here: <a href=\"https://github.com/gdcc/api-test-runner/actions/runs/6277848900\">https://github.com/gdcc/api-test-runner/actions/runs/6277848900</a></p>",
        "id": 392579572,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695407470
    },
    {
        "content": "<p>But I haven't used that runner in a few days (and our API tests can be flaky) so let's not freak out if there are failures. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 392579658,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695407519
    },
    {
        "content": "<p>Ok <a href=\"https://github.com/IQSS/dataverse/issues/9949\">#9949</a> is open <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 392581004,
        "sender_full_name": "Juan Pablo Tosca Villanueva",
        "timestamp": 1695408084
    },
    {
        "content": "<p>Ok, but a new topic here in Zulip if we want to discuss. Thanks!</p>",
        "id": 392581498,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1695408289
    }
]