[
    {
        "content": "<p>Hi! Sorry for opening this up again, but I am again not sure where to put my question :) We have finally finished our evalution and want to deploy dataverse now in production - but ideally using containers. It there still a big \"don't use this in production\"-flag on it all? If yes, perhaps we can contribute to create a setup for production.</p>",
        "id": 434979159,
        "sender_full_name": "Jutta Schnabel",
        "timestamp": 1713877181
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"675921\">@Jutta Schnabel</span> hi! Great question. In our documentation, we are still being cautious about recommending containers for production but there are brave souls already using them!</p>",
        "id": 434979775,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1713877344
    },
    {
        "content": "<p>Security is top of mind for me. When working on the tutorial for using containers as a demo, I made sure to show how to run the <a href=\"http://setup-all.sh\">setup-all.sh</a> script WITHOUT the <code>--insecure</code>flag.</p>",
        "id": 434979967,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1713877407
    },
    {
        "content": "<p>Please see <a href=\"https://guides.dataverse.org/en/6.2/container/running/demo.html#creating-and-running-a-demo-persona\">https://guides.dataverse.org/en/6.2/container/running/demo.html#creating-and-running-a-demo-persona</a> for more on this.</p>",
        "id": 434980123,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1713877448
    },
    {
        "content": "<p>Expecially this:</p>\n<p>\"One of the main differences between the â€œdevâ€ persona and our new â€œdemoâ€ persona is that we are now running the setup-all script without the <code>--insecure</code> flag. This makes our installation more secure, though it does block â€œadminâ€ APIs that are useful for configuration.\"</p>",
        "id": 434980160,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1713877459
    },
    {
        "content": "<p>You could go to the equivalent of <a href=\"https://demo.dataverse.org/api/admin/index/solr/schema\">https://demo.dataverse.org/api/admin/index/solr/schema</a> on your server and make sure you can't reach it from outside. If you can, please see <a href=\"https://guides.dataverse.org/en/6.2/installation/config.html#blocking-api-endpoints\">https://guides.dataverse.org/en/6.2/installation/config.html#blocking-api-endpoints</a></p>",
        "id": 434980698,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1713877626
    },
    {
        "content": "<p>What do others think? What am I forgetting? What do we need for the images to be production-ready? More docs? More configurability?</p>",
        "id": 434981884,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1713877973
    },
    {
        "content": "<p>Stable images tags like 6.2/6.3 are needed for me. Besides that I'm happy with the current containers and they work great in production :)</p>",
        "id": 434985472,
        "sender_full_name": "Johannes D",
        "timestamp": 1713878947
    },
    {
        "content": "<p>That makes sense. Currently our tags are \"alpha\" and \"unstable\".</p>",
        "id": 434985772,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1713879027
    },
    {
        "content": "<p>We've definitely talked about tags in recent meetings (<a class=\"stream-topic\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers/topic/weekly.20meeting\">#containers &gt; weekly meeting</a> ). Probably the best issue to watch is <a href=\"https://github.com/IQSS/dataverse/issues/10478\">#10478</a>. Plus we have the following topics going:</p>\n<ul>\n<li><a class=\"stream-topic\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers/topic/change.20version.20scheme.20base.20image.3F\">#containers &gt; change version scheme base image?</a> </li>\n<li><a class=\"stream-topic\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers/topic/tagging.20images.20with.20versions\">#containers &gt; tagging images with versions</a></li>\n</ul>",
        "id": 434986798,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1713879304
    },
    {
        "content": "<p>Great, thanks, that sounds hopeful :) We will try that out and see that we manage.</p>",
        "id": 434986992,
        "sender_full_name": "Jutta Schnabel",
        "timestamp": 1713879362
    },
    {
        "content": "<p>Sounds good. Please keep the feedback coming!</p>",
        "id": 434987711,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1713879576
    },
    {
        "content": "<p>Besides that I assume the different projects and their means to create images <a href=\"https://github.com/gdcc/dataverse-kubernetes\">https://github.com/gdcc/dataverse-kubernetes</a> , <a href=\"https://github.com/EOSC-synergy/dataverse-kubernetes\">https://github.com/EOSC-synergy/dataverse-kubernetes</a> , <a href=\"https://github.com/IQSS/dataverse-docker\">https://github.com/IQSS/dataverse-docker</a> and <a href=\"https://github.com/IQSS/dataverse/blob/develop/docker-compose-dev.yml\">https://github.com/IQSS/dataverse/blob/develop/docker-compose-dev.yml</a> are a bit confusing for someone new to the community. Hence, my wish-list contains a clean-up, or more detailed documentation or clarification about the projects and their relationship (they all look like official GDCC/IQSS projects)...</p>",
        "id": 434988138,
        "sender_full_name": "Johannes D",
        "timestamp": 1713879693
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"617722\">@Johannes D</span> good idea. I just created this issue: Document competing containerization efforts and how to choose <a href=\"https://github.com/IQSS/dataverse/issues/10522\">#10522</a></p>",
        "id": 435000691,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1713883284
    },
    {
        "content": "<p>Not entirely a container issue, but it would be nice to rework the documentation so that it is independent of the installation method. In particular, the admin and installation guides are in some cases quite specific to a particular installation method. This makes both demo/eval and production use cases more complex than they need to be.</p>",
        "id": 435006720,
        "sender_full_name": "Johannes D",
        "timestamp": 1713884898
    },
    {
        "content": "<blockquote>\n<p><a href=\"https://github.com/IQSS/dataverse/issues/10478\">#10478</a></p>\n</blockquote>\n<p>Heads up I will be out all of May (as of next Monday) and will continue working on this in June</p>",
        "id": 435007345,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1713885088
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"617722\">Johannes D</span> <a href=\"#narrow/stream/375812-containers/topic/containers.20for.20production/near/434988138\">said</a>:</p>\n<blockquote>\n<p>are a bit confusing for someone new to the community</p>\n</blockquote>\n<p>I agree. I've been meaning to sunset gdcc/dataverse-kubernetes for some time now, but didn't have the time. A PR is welcome. (So don't delete but leave a hint in the README and archive it as read-only)</p>",
        "id": 435007656,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1713885182
    },
    {
        "content": "<p>And documentation of the features that do not work out of the box in a Docker environment would be nice. Like RServe, make data count, or multiple dataverse instances. ... They work, but need a bit of tweaking....</p>",
        "id": 435007773,
        "sender_full_name": "Johannes D",
        "timestamp": 1713885218
    },
    {
        "content": "<p>Heads up that <a href=\"https://github.com/IQSS/dataverse/issues/10672\">#10672</a> is ready for review! It will increase production usability <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 451508338,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721052398
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> are these container only things going trough the same process with sprint planning etc or can/should we fasttrack it?</p>",
        "id": 451508510,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721052447
    },
    {
        "content": "<p>My rule of thumb is to look at the files change and to put it on the fast track the changes on affect containers. This one can be fast-tracked, I'd say. Please feel free to put it in \"ready for review\" if you like.</p>",
        "id": 451509008,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721052594
    },
    {
        "content": "<p>Done!</p>",
        "id": 451509589,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721052740
    },
    {
        "content": "<p>It's good to have this in place - we can expect <a href=\"https://github.com/adoptium/containers/issues/532#issuecomment-2088494497\">Temurin images based on Ubuntu 24.04 to land within the next 4 to 5 weeks</a>. Always good to be prepared!</p>",
        "id": 451509766,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721052785
    },
    {
        "content": "<p>yeah</p>",
        "id": 451509891,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721052822
    },
    {
        "content": "<p>I don't think anyone here can easily do this:</p>\n<p><strong>Suggestions on how to test this</strong>:<br>\nRun the images on a K8s cluster</p>",
        "id": 451509933,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721052833
    },
    {
        "content": "<p>Ha! I'll edit it to say just run them in Docker <span aria-label=\"smiling\" class=\"emoji emoji-1f972\" role=\"img\" title=\"smiling\">:smiling:</span></p>",
        "id": 451510059,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721052862
    },
    {
        "content": "<p>Do you think you could help get <a href=\"https://github.com/gdcc/api-test-runner/blob/main/.github/workflows/manual.yml\">https://github.com/gdcc/api-test-runner/blob/main/.github/workflows/manual.yml</a> working again to test it?</p>",
        "id": 451510242,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721052915
    },
    {
        "content": "<p>Not sure - we're not talking Dataverse code here</p>",
        "id": 451510665,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721052997
    },
    {
        "content": "<p>The test is done once you successfully deploy - this is infrastructure, so the application doesn't matter</p>",
        "id": 451510834,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721053025
    },
    {
        "content": "<p>You could even try the base image with some other demo app</p>",
        "id": 451510904,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721053037
    },
    {
        "content": "<p>Oh, even if it were working the \"manual\" workflow wouldn't test it?</p>",
        "id": 451511067,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721053062
    },
    {
        "content": "<p>I dunno if we should at some point include a minimal testing app for automation of base image accpetance tests</p>",
        "id": 451511075,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721053065
    },
    {
        "content": "<p>Well it tests that it builds (that is done in CI already), the one thing left to do is run an actual application...</p>",
        "id": 451511311,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721053106
    },
    {
        "content": "<p>That doesn't need to be Dataverse, which is huge and clunky</p>",
        "id": 451511407,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721053127
    },
    {
        "content": "<p>Sure, sounds very useful.</p>",
        "id": 451511486,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721053143
    },
    {
        "content": "<p>Do you feel like it would be a good addition to this PR to have such smallscale tests around?</p>",
        "id": 451511558,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721053157
    },
    {
        "content": "<p>Hmm, maybe? I mean, we want more testing of images before we publish them, generally.</p>",
        "id": 451512065,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721053260
    },
    {
        "content": "<p>True!</p>",
        "id": 451512105,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721053271
    },
    {
        "content": "<p>Do you feel we need to do this <em>now</em> or should we keep that for another issue/PR?</p>",
        "id": 451512162,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721053290
    },
    {
        "content": "<p>Meh, I don't think we need it now.</p>",
        "id": 451512221,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721053307
    },
    {
        "content": "<p>Some day I'd like to retire that api-test-runner repo and have the testing done upstream.</p>",
        "id": 451512349,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721053336
    },
    {
        "content": "<p>It might be a nice thing to try out <a href=\"https://github.com/arquillian/arquillian-testcontainers\">https://github.com/arquillian/arquillian-testcontainers</a> for this <span aria-label=\"smile cat\" class=\"emoji emoji-1f638\" role=\"img\" title=\"smile cat\">:smile_cat:</span></p>",
        "id": 451512399,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721053351
    },
    {
        "content": "<p>Related: <a class=\"stream-topic\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers/topic/failing.20tests.20in.206.2E3.20from.20api-test-runner\">#containers &gt; failing tests in 6.3 from api-test-runner</a></p>",
        "id": 451513048,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721053514
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> I removed you as an assignee from <a href=\"https://github.com/IQSS/dataverse/issues/10672\">#10672</a>. Items in \"ready for review\" should't have assignees so it's clear that anyone can pick them up and review them.</p>",
        "id": 451611258,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1721072496
    },
    {
        "content": "<p>I just made this pull request:</p>\n<p>update docs to suggest using Docker in production <a href=\"https://github.com/IQSS/dataverse/issues/11862\">#11862</a></p>\n<p>You can preview the docs here: <a href=\"https://dataverse-guide--11862.org.readthedocs.build/en/11862/installation/prep.html#choose-your-own-installation-adventure\">https://dataverse-guide--11862.org.readthedocs.build/en/11862/installation/prep.html#choose-your-own-installation-adventure</a></p>\n<p>What do you think?</p>",
        "id": 542761006,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1759416335
    },
    {
        "content": "<p>Since we are using those containers for production for the last couple of years, those images are ready for production usage...and the guide reflects it. However, one could add the information that 'make data count' does not work that well and a section about backup &amp; restore in a docker environment is missing.</p>",
        "id": 543256132,
        "sender_full_name": "Johannes D",
        "timestamp": 1759741602
    },
    {
        "content": "<p>Hmm. I don't feel very qualified to write about backup and restore. What if we allow <a href=\"https://github.com/IQSS/dataverse/issues/11862\">#11862</a> to be reviewed and merged and make a PR in the future for that?</p>",
        "id": 545357027,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1760626420
    },
    {
        "content": "<p>I'm also not sure what I would write about Make Data Count. <span class=\"user-mention\" data-user-id=\"617722\">@Johannes D</span> if you want to make a PR into my PR, please go ahead! <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 545357549,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1760626474
    },
    {
        "content": "<p>Maybe I should try to address this as well:</p>\n<p>Document competing containerization efforts and how to chooseÂ <a href=\"https://github.com/IQSS/dataverse/issues/10522\">#10522</a></p>\n<p>I do feel pretty qualified to write about that. <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 545358113,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1760626537
    },
    {
        "content": "<p>I think this would be a good addition for a production scenario. Not just in containers... <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span>  <a href=\"https://github.com/IQSS/dataverse/issues/11948\">#11948</a>  CC <span class=\"user-mention\" data-user-id=\"637063\">@Leo Andreev</span></p>",
        "id": 553404527,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1762182368
    },
    {
        "content": "<p>yeah</p>",
        "id": 553418541,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1762185410
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> any feedback on the <a href=\"#narrow/channel/375812-containers/topic/containers.20for.20production/near/542761006\">docs</a> I wrote?</p>",
        "id": 553418608,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1762185424
    },
    {
        "content": "<p><a href=\"https://github.com/IQSS/dataverse/issues/11862\">#11862</a> has been merged! Docker in production! Thanks for reviewing and merging, <span class=\"user-mention\" data-user-id=\"980865\">@Steven Winship</span>!</p>",
        "id": 557936219,
        "sender_full_name": "Philip Durbin ğŸš€",
        "timestamp": 1763473138
    }
]