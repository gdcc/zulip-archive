[
    {
        "content": "<p>Hi I have been tryin with Trusted remote storage for a while and kind of in a situation what i could do further<br>\na) Testing with this file : <a href=\"https://svn.vsp.tu-berlin.de/repos/public-svn/matsim/scenarios/countries/de/berlin/berlin-v6.4/output/berlin-v6.4-10pct/berlin-v6.4.scorestats.png\">https://svn.vsp.tu-berlin.de/repos/public-svn/matsim/scenarios/countries/de/berlin/berlin-v6.4/output/berlin-v6.4-10pct/berlin-v6.4.scorestats.png</a><br>\nb) my config on domain.xml is </p>\n<div class=\"message_inline_image\"><a href=\"https://svn.vsp.tu-berlin.de/repos/public-svn/matsim/scenarios/countries/de/berlin/berlin-v6.4/output/berlin-v6.4-10pct/berlin-v6.4.scorestats.png\"><img src=\"https://uploads.zulipusercontent.net/6ada61be3c6bef304505584c98d3d46724668e2d/68747470733a2f2f73766e2e7673702e74752d6265726c696e2e64652f7265706f732f7075626c69632d73766e2f6d617473696d2f7363656e6172696f732f636f756e74726965732f64652f6265726c696e2f6265726c696e2d76362e342f6f75747075742f6265726c696e2d76362e342d31307063742f6265726c696e2d76362e342e73636f726573746174732e706e67\"></a></div><div class=\"codehilite\"><pre><span></span><code>&lt;jvm-options&gt;-Ddataverse.files.dl.type=remote&lt;/jvm-options&gt;\n       &lt;jvm-options&gt;-Ddataverse.files.dl.label=datalake&lt;/jvm-options&gt;\n       &lt;jvm-options&gt;-Ddataverse.files.dl.base-url=https://svn.vsp.tu-berlin.de/repos/public-svn&lt;/jvm-options&gt;\n       &lt;jvm-options&gt;-Ddataverse.files.dl.base-store=s3&lt;/jvm-options&gt;\n       &lt;jvm-options&gt;-Ddataverse.files.dl.download-redirect=true&lt;/jvm-options&gt;\n       &lt;jvm-options&gt;-Ddataverse.files.dl.public=true&lt;/jvm-options&gt;\n</code></pre></div>\n<p>c) and when i use the command i get this error</p>\n<div class=\"codehilite\"><pre><span></span><code>curl -H &quot;X-Dataverse-key: xxxxxxxxxx&quot;      -X POST      &quot;http://xxxxxxx:xxx/api/datasets/:persistentId\n/add?persistentId=doi:10.5072/FK2/ZQBLX7&quot;      -F &#39;jsonData={&quot;description&quot;:&quot;Berlin v6.4 10% score statistics plot&quot;,&quot;storageIdentifier&quot;:&quot;dl://matsim/scenarios/countri\nes/de/berlin/berlin-v6.4/output/berlin-v6.4-10pct/berlin-v6.4.scorestats.png&quot;,&quot;md5Hash&quot;:&quot;4f8299b5f5bb324b4e4a9f7a07c3d0b8&quot;,&quot;label&quot;:&quot;berlin-v6.4.scorestats.png&quot;,&quot;file\nName&quot;:&quot;berlin-v6.4.scorestats.png&quot;,&quot;mimeType&quot;:&quot;image/png&quot;, &quot;checksumType&quot;:&quot;MD5&quot;}&#39;\n</code></pre></div>\n<p>{\"status\":\"ERROR\",\"message\":\"Dataset store configuration does not allow provided storageIdentifier.\"}</p>\n<p>d) from payara serverlog there is nothing </p>\n<div class=\"codehilite\"><pre><span></span><code>jsonData: {&quot;description&quot;:&quot;Berlin v6.4 10% score statistics plot&quot;,&quot;storageIdentifier&quot;:&quot;https://svn.vsp.tu-berlin.de/repos/public-svn/matsim/scenarios/countries/de/\nberlin/berlin-v6.4/output/berlin-v6.4-10pct/berlin-v6.4.scorestats.png&quot;,&quot;md5Hash&quot;:&quot;4f8299b5f5bb324b4e4a9f7a07c3d0b8&quot;,&quot;label&quot;:&quot;berlin-v6.4.scorestats.png&quot;,&quot;fileName&quot;\n:&quot;berlin-v6.4.scorestats.png&quot;,&quot;mimeType&quot;:&quot;image/png&quot;}]]\n</code></pre></div>\n<p>5)’ve selected the “datalake” option as the trusted storage label in Dataverse (used 6.7.1)<br>\n.</p>\n<p>Would really appreciate any insights or suggestions from others who’ve worked with remote storage setups like this.</p>",
        "id": 545940662,
        "sender_full_name": "Lincoln",
        "timestamp": 1760957338
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"733633\">@Lincoln</span> could you please start a thread over at <a href=\"https://groups.google.com/g/dataverse-community\">https://groups.google.com/g/dataverse-community</a> ? Jim Myers knows the most about file stores and will probably see it there.</p>",
        "id": 545979339,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1760967049
    },
    {
        "content": "<p>Meanwhile, as a test perhaps you could try to configure a dataset to use that store: <a href=\"https://guides.dataverse.org/en/6.7.1/admin/dataverses-datasets.html#configure-a-dataset-to-store-all-new-files-in-a-specific-file-store\">https://guides.dataverse.org/en/6.7.1/admin/dataverses-datasets.html#configure-a-dataset-to-store-all-new-files-in-a-specific-file-store</a></p>",
        "id": 545979452,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1760967074
    },
    {
        "content": "<p>(This shouldn't be necessary since you've already configured the parent collection.)</p>",
        "id": 545979604,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1760967109
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin 🚀</span>  nice to hear from you.<br>\nI'll start a thread on google groups :)</p>",
        "id": 545979918,
        "sender_full_name": "Lincoln",
        "timestamp": 1760967184
    },
    {
        "content": "<p><a href=\"https://groups.google.com/g/dataverse-community/c/yMQ9rFZEs28/m/jaqKdpEtAQAJ\">https://groups.google.com/g/dataverse-community/c/yMQ9rFZEs28/m/jaqKdpEtAQAJ</a> looks great. Thanks!</p>",
        "id": 545981112,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1760967470
    },
    {
        "content": "<p>adding the two commands worked <br>\n-Ddataverse.files.dl.upload-out-of-band=true<br>\n-Ddataverse.files.dl.reference-endpoints-with-basepaths=https://svn.vsp.tu-berlin.de/repos/public-svn</p>\n<p>Thank you <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin 🚀</span></p>",
        "id": 546006171,
        "sender_full_name": "Lincoln",
        "timestamp": 1760972935
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"733633\">Lincoln</span> has marked this topic as resolved.</p>",
        "id": 546006193,
        "sender_full_name": "Notification Bot",
        "timestamp": 1760972943
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"733633\">@Lincoln</span> I'm glad it worked! Do you think we should add some documentation? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 546021709,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1760976153
    },
    {
        "content": "<p>Yes, I believe this could definitely benefit others</p>\n<p>PS: Just created a Github-issue as suggested by Jim</p>",
        "id": 546022323,
        "sender_full_name": "Lincoln",
        "timestamp": 1760976280
    },
    {
        "content": "<p>Ah, this, thanks!</p>\n<p>[Documentation] Direct-upload on Trusted Remote Storage <a href=\"https://github.com/IQSS/dataverse/issues/11911\">#11911</a></p>",
        "id": 546022435,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1760976304
    }
]