[
    {
        "content": "<p>here is the error message:[2024-07-20T14:21:52.974+0800] [Payara 6.2023.8] [WARNING] [] [jakarta.enterprise.web] [tid: _ThreadID=181 _ThreadName=http-thread-pool::http-listener-1(5)] [timeMillis: 1721456512974] [levelValue: 900] [[<br>\n  StandardWrapperValve[HomepageServlet]: Servlet.service() for servlet HomepageServlet threw exception<br>\njava.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key staticSearchFields.license<br>\n    at java.base/java.util.ResourceBundle.getObject(ResourceBundle.java:564)<br>\n    at java.base/java.util.ResourceBundle.getString(ResourceBundle.java:521)<br>\n    at edu.harvard.iq.dataverse.util.BundleUtil.getStringFromBundleNoMissingCheck(BundleUtil.java:70)<br>\n    at edu.harvard.iq.dataverse.util.BundleUtil.getStringFromPropertyFile(BundleUtil.java:91)<br>\n    at edu.harvard.iq.dataverse.util.BundleUtil.getStringFromPropertyFile(BundleUtil.java:83)<br>\n    at edu.harvard.iq.dataverse.search.SearchServiceBean.search(SearchServiceBean.java:837)<br>\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)<br>\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)<br>\n    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:588)<br>\n    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:408)<br>\n    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:4835)<br>\n    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:653)<br>\n    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:834)<br>\n    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:603)<br>\n    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doCall(SystemInterceptorProxy.java:163)<br>\n    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:140)<br>\n    at jdk.internal.reflect.GeneratedMethodAccessor230.invoke(Unknown Source)<br>\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)<br>\n    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:888)<br>\n    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:833)<br>\n    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:603)<br>\n    at org.jboss.weld.module.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:72)<br>\n    at org.jboss.weld.module.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:52)<br>\n    at jdk.internal.reflect.GeneratedMethodAccessor201.invoke(Unknown Source)<br>\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)<br>\n    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:888)<br>\n    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:833)<br>\n    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:375)<br>\n    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:4807)<br>\n    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:4795)<br>\n    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:212)<br>\n    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:90)<br>\n    at jdk.proxy74/jdk.proxy74.$Proxy310.search(Unknown Source)<br>\n    at edu.harvard.iq.dataverse.search.__EJB31_Generated__SearchServiceBean__Intf____Bean__.search(Unknown Source)<br>\n    at edu.harvard.iq.dataverse.search.SearchIncludeFragment.search(SearchIncludeFragment.java:362)<br>\n    at edu.harvard.iq.dataverse.search.SearchIncludeFragment.search(SearchIncludeFragment.java:222)<br>\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)<br>\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)<br>\n    at jakarta.el.ELUtil.invokeMethod(ELUtil.java:227)<br>\n    at jakarta.el.BeanELResolver.invoke(BeanELResolver.java:481)<br>\n    at jakarta.el.CompositeELResolver.invoke(CompositeELResolver.java:198)<br>\n    at org.glassfish.expressly.parser.AstValue.invoke(AstValue.java:245)<br>\n    at org.glassfish.expressly.MethodExpressionImpl.invoke(MethodExpressionImpl.java:248)<br>\n    at org.jboss.weld.module.web.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:40)<br>\n    at org.jboss.weld.module.web.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)<br>\n    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:70)<br>\n    at com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:74)<br>\n    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:62)<br>\n    at jakarta.faces.component.UIViewAction.broadcast(UIViewAction.java:506)<br>\n    at jakarta.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:858)<br>\n    at jakarta.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1332)<br>\n    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:56)<br>\n    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:72)<br>\n    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:159)<br>\n    at jakarta.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:691)<br>\n    at jakarta.faces.webapp.FacesServlet.service(FacesServlet.java:449)<br>\n    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1554)<br>\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:331)<br>\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:211)<br>\n    at org.ocpsoft.rewrite.servlet.RewriteFilter.doFilter(RewriteFilter.java:226)<br>\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:253)<br>\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:211)<br>\n    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:816)<br>\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:683)<br>\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:527)<br>\n    at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:497)<br>\n    at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:379)<br>\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)<br>\n    at edu.harvard.iq.dataverse.HomepageServlet.processRequest(HomepageServlet.java:45)<br>\n    at edu.harvard.iq.dataverse.HomepageServlet.doGet(HomepageServlet.java:61)<br>\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:527)<br>\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)<br>\n    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1554)<br>\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:331)<br>\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:211)<br>\n    at org.glassfish.tyrus.servlet.TyrusServletFilter.doFilter(TyrusServletFilter.java:83)<br>\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:253)<br>\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:211)<br>\n    at org.ocpsoft.rewrite.servlet.RewriteFilter.doFilter(RewriteFilter.java:226)<br>\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:253)<br>\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:211)<br>\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:257)<br>\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:166)<br>\n    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:757)<br>\n    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:577)<br>\n    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:99)<br>\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:158)<br>\n    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:372)<br>\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:239)<br>\n    at com.sun.enterprise.v3.services.impl.ContainerMapper$HttpHandlerCallable.call(ContainerMapper.java:520)<br>\n    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:217)<br>\n    at org.glassfish.grizzly.http.server.HttpHandler.runService(HttpHandler.java:174)<br>\n    at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:153)<br>\n    at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:196)<br>\n    at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:88)<br>\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:246)</p>\n<p>Any ideas on how to handle this?</p>",
        "id": 452726331,
        "sender_full_name": "shan",
        "timestamp": 1721456715
    },
    {
        "content": "<p>Which version of Dataverse is this?</p>",
        "id": 453182040,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1721656619
    },
    {
        "content": "<p>v6.2</p>",
        "id": 453306959,
        "sender_full_name": "shan",
        "timestamp": 1721699855
    },
    {
        "content": "<p>Hi, your log seems related to missing key language <code>staticSearchFields.license</code>.<br>\nMy guess is for whatever reason you cannot load a page without the key of the newly added language.<br>\nFor example, I add french language : <br>\n<code>curl http://localhost:8080/api/admin/settings/:Languages -X PUT -d '[{\"locale\":\"en\",\"title\":\"English\"},{\"locale\":\"fr\",\"title\":\"Français\"}]'</code><br>\nIt is expected to have the file <code>staticSearchFields_fr.properties</code> in the <a href=\"https://guides.dataverse.org/en/latest/installation/config.html#dataverse-lang-directory\">custom bundle path</a>, containing the translated equivalent of <a href=\"https://github.com/IQSS/dataverse/blob/v6.2/src/main/java/propertyFiles/staticSearchFields.properties\">staticSearchFields.properties</a></p>",
        "id": 453345499,
        "sender_full_name": "luddaniel",
        "timestamp": 1721719631
    },
    {
        "content": "<p>Sounds right. I'm sure <span class=\"user-mention\" data-user-id=\"649905\">@luddaniel</span> has more experience configuring multiple languages than I do. Thanks!</p>",
        "id": 453423135,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1721743300
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"649905\">@luddaniel</span> Thanks for your reply,  I have added <a href=\"http://staticSearchFields_cn.properties\">staticSearchFields_cn.properties</a> file<br>\n under the directory \"/home/dataverse/langBundles\", see below:<br>\n<a href=\"/user_uploads/53090/8tEswPF59f9FGEpMPJ-BKtQo/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/8tEswPF59f9FGEpMPJ-BKtQo/image.png\" title=\"image.png\"><img data-original-dimensions=\"1298x1730\" src=\"/user_uploads/thumbnail/53090/8tEswPF59f9FGEpMPJ-BKtQo/image.png/840x560.webp\"></a></div><p>and then I restart domain by running. \"./asadmin restart-domains /home/dataverse/dataverse-6.2/target/dataverse-6.2.war\", but when the 500 error messages still appears.</p>",
        "id": 453877554,
        "sender_full_name": "shan",
        "timestamp": 1721893229
    },
    {
        "content": "<p>here is the error log:<br>\n<a href=\"/user_uploads/53090/vxmjTgy7cJ9dGfpOkW26k4AD/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/vxmjTgy7cJ9dGfpOkW26k4AD/image.png\" title=\"image.png\"><img data-original-dimensions=\"2920x112\" src=\"/user_uploads/thumbnail/53090/vxmjTgy7cJ9dGfpOkW26k4AD/image.png/840x560.webp\"></a></div>",
        "id": 453877779,
        "sender_full_name": "shan",
        "timestamp": 1721893293
    },
    {
        "content": "<p>here is the output of \"curl <a href=\"http://localhost:8080/api/admin/settings/:Languages\">http://localhost:8080/api/admin/settings/:Languages</a>\"<br>\n<a href=\"/user_uploads/53090/CpqCejQB1WVmVJqzuvccBBAA/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/CpqCejQB1WVmVJqzuvccBBAA/image.png\" title=\"image.png\"><img data-original-dimensions=\"2158x86\" src=\"/user_uploads/thumbnail/53090/CpqCejQB1WVmVJqzuvccBBAA/image.png/840x560.webp\"></a></div>",
        "id": 453877958,
        "sender_full_name": "shan",
        "timestamp": 1721893344
    },
    {
        "content": "<p>I will be on vacation for 2 weeks, so I won't be able to answer after today.</p>\n<p>My feeling is that the the jvm option is not enabled; Can you <code>grep \"dataverse.lang.directory\" /usr/local/payara6/glassfish/domains/datainra/config/domain.xml</code> ?</p>\n<p>Also <code>./asadmin restart-domains /home/dataverse/dataverse-6.2/target/dataverse-6.2.war</code> is a reallllyy weird command for me, once <code>dataverse-6.2.war</code> deployed you should only need to start using <code>asadmin start-domain</code></p>",
        "id": 453905524,
        "sender_full_name": "luddaniel",
        "timestamp": 1721901672
    },
    {
        "content": "<p>Other points crossing my mind, but less relevant : </p>\n<ul>\n<li><code>/home/dataverse/langBundles</code> can be unreadeable by your payara user, check repo rights (seems OK from the screenshot)</li>\n<li>the warning log can be unrelated to the http code 500 (but there is a link to the new added language)</li>\n<li>test without the Chinese characters in <code>:Language</code> JSON (unlikely to be the reason)</li>\n</ul>",
        "id": 453907781,
        "sender_full_name": "luddaniel",
        "timestamp": 1721902151
    },
    {
        "content": "<p><a href=\"http://dataverse.lang.directory\">dataverse.lang.directory</a> is enabled in /usr/local/payara6/glassfish/domains/datainra/config/domain.xml<br>\n<a href=\"/user_uploads/53090/1PJEjDcgzyo0X4AjObJFYrhv/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/1PJEjDcgzyo0X4AjObJFYrhv/image.png\" title=\"image.png\"><img data-original-dimensions=\"1718x76\" src=\"/user_uploads/thumbnail/53090/1PJEjDcgzyo0X4AjObJFYrhv/image.png/840x560.webp\"></a></div>",
        "id": 454140266,
        "sender_full_name": "shan",
        "timestamp": 1721956940
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"734848\">@shan</span> with luddaniel going on vacation, you might want to try asking at <a href=\"https://groups.google.com/g/dataverse-community\">https://groups.google.com/g/dataverse-community</a> where there are more people than here in Zulip.</p>",
        "id": 454296373,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1721999594
    }
]