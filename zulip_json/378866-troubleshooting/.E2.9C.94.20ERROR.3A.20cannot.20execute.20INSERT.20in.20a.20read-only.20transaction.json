[
    {
        "content": "<p>We got those nice exceptions after an restart of our production server.  Has someone seen a similar error:</p>\n<div class=\"codehilite\"><pre><span></span><code>[#|2024-03-07T09:59:01.282+0000|INFO|Payara 6.2023.8|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=25;_ThreadName=RunLevelControllerThread-1709805498505;_TimeMillis=1709805541282;_LevelValue=800;|\n  &lt;== ... Timers Restored.|#]\n\n[#|2024-03-07T09:59:01.576+0000|SEVERE|Payara 6.2023.8||_ThreadID=25;_ThreadName=RunLevelControllerThread-1709805498505;_TimeMillis=1709805541576;_LevelValue=1000;|\n  ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...|#]\n\n[#|2024-03-07T09:59:01.987+0000|SEVERE|Payara 6.2023.8|javax.enterprise.system.tools.deployment.common|_ThreadID=25;_ThreadName=RunLevelControllerThread-1709805498505;_TimeMillis=1709805541987;_LevelValue=1000;|\n  Exception while invoking class org.glassfish.ejb.startup.EjbApplication start method\njakarta.ejb.EJBException: jakarta.ejb.CreateException: Initialization failed for Singleton StartupFlywayMigrator\n    at com.sun.ejb.containers.AbstractSingletonContainer$SingletonContextFactory.create(AbstractSingletonContainer.java:745)\n    at com.sun.ejb.containers.AbstractSingletonContainer.instantiateSingletonInstance(AbstractSingletonContainer.java:477)\n    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:219)\n    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:213)\n    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:180)\n    at org.glassfish.ejb.startup.SingletonLifeCycleManager.doStartup(SingletonLifeCycleManager.java:159)\n    at org.glassfish.ejb.startup.EjbApplication.start(EjbApplication.java:171)\n    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:123)\n    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:292)\n    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:361)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.initialize(ApplicationLifecycle.java:633)\n    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:574)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:556)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:552)\n    at java.base/java.security.AccessController.doPrivileged(Unknown Source)\n    at java.base/javax.security.auth.Subject.doAs(Unknown Source)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2.execute(CommandRunnerImpl.java:551)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:582)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:574)\n    at java.base/java.security.AccessController.doPrivileged(Unknown Source)\n    at java.base/javax.security.auth.Subject.doAs(Unknown Source)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:573)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1497)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1879)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1755)\n    at com.sun.enterprise.admin.cli.embeddable.CommandExecutorImpl.executeCommand(CommandExecutorImpl.java:183)\n    at com.sun.enterprise.admin.cli.embeddable.CommandExecutorImpl.run(CommandExecutorImpl.java:96)\n    at fish.payara.boot.runtime.BootCommand.execute(BootCommand.java:69)\n    at fish.payara.boot.runtime.BootCommands.executeCommands(BootCommands.java:166)\n    at fish.payara.boot.runtime.BootCommands.executeCommands(BootCommands.java:160)\n    at com.sun.enterprise.v3.bootstrap.BootCommandService.doBootCommands(BootCommandService.java:81)\n    at com.sun.enterprise.v3.bootstrap.BootCommandService.postConstruct(BootCommandService.java:91)\n    at org.jvnet.hk2.internal.ClazzCreator.postConstructMe(ClazzCreator.java:303)\n    at org.jvnet.hk2.internal.ClazzCreator.create(ClazzCreator.java:351)\n    at org.jvnet.hk2.internal.SystemDescriptor.create(SystemDescriptor.java:466)\n    at org.glassfish.hk2.runlevel.internal.AsyncRunLevelContext.findOrCreate(AsyncRunLevelContext.java:281)\n    at org.glassfish.hk2.runlevel.RunLevelContext.findOrCreate(RunLevelContext.java:65)\n    at org.jvnet.hk2.internal.Utilities.createService(Utilities.java:2103)\n    at org.jvnet.hk2.internal.ServiceHandleImpl.getService(ServiceHandleImpl.java:93)\n    at org.jvnet.hk2.internal.ServiceHandleImpl.getService(ServiceHandleImpl.java:67)\n    at org.glassfish.hk2.runlevel.internal.CurrentTaskFuture$QueueRunner.oneJob(CurrentTaskFuture.java:1213)\n    at org.glassfish.hk2.runlevel.internal.CurrentTaskFuture$QueueRunner.run(CurrentTaskFuture.java:1144)\n    at org.glassfish.hk2.runlevel.internal.CurrentTaskFuture$UpOneLevel.run(CurrentTaskFuture.java:762)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.base/java.lang.Thread.run(Unknown Source)\nCaused by: jakarta.ejb.CreateException: Initialization failed for Singleton StartupFlywayMigrator\n    at com.sun.ejb.containers.AbstractSingletonContainer.createSingletonEJB(AbstractSingletonContainer.java:598)\n    at com.sun.ejb.containers.AbstractSingletonContainer$SingletonContextFactory.create(AbstractSingletonContainer.java:743)\n    ... 45 more\nCaused by: org.flywaydb.core.api.FlywayException: Error while executing afterMigrate callback: Migration afterMigrate__1-7256-upsert-referenceData.sql failed\n--------------------------------------------------------------\nSQL State  : 25006\nError Code : 0\nMessage    : ERROR: cannot execute INSERT in a read-only transaction\nLocation   : db/migration/afterMigrate__1-7256-upsert-referenceData.sql (/opt/payara/deployments/dataverse/WEB-INF/classes/db/migration/afterMigrate__1-7256-upsert-referenceData.sql)\nLine       : 10\nStatement  : -- #5361 and #7256 is about faster deployments, especially during development, sitting on an empty database.\n--\n-- This script has been part of  scripts/database/reference_data.sql that had to be executed manually on every new\n-- deployment (manually in the sense of Flyway didn&#39;t, the outside installer or an admin took care of it).\n--\n-- This script will load some initial, common data if not present (so only once, when booting for the first time).\n\n-- using http://dublincore.org/schemas/xmls/qdc/dcterms.xsd because at http://dublincore.org/schemas/xmls/ it&#39;s the\n-- schema location for http://purl.org/dc/terms/ which is referenced in http://swordapp.github.io/SWORDv2-Profile/SWORDProfile.html\nINSERT INTO foreignmetadataformatmapping (id, name, startelement, displayName, schemalocation)\n       VALUES\n              (1, &#39;http://purl.org/dc/terms/&#39;, &#39;entry&#39;, &#39;dcterms: DCMI Metadata Terms&#39;, &#39;http://dublincore.org/schemas/xmls/qdc/dcterms.xsd&#39;)\n       ON CONFLICT DO NOTHING\n\n    at org.flywaydb.core.internal.callback.DefaultCallbackExecutor.handleEvent(DefaultCallbackExecutor.java:140)\n    at org.flywaydb.core.internal.callback.DefaultCallbackExecutor.execute(DefaultCallbackExecutor.java:133)\n    at org.flywaydb.core.internal.callback.DefaultCallbackExecutor.lambda$execute$1(DefaultCallbackExecutor.java:120)\n    at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)\n    at org.flywaydb.core.internal.callback.DefaultCallbackExecutor.execute(DefaultCallbackExecutor.java:118)\n    at org.flywaydb.core.internal.callback.DefaultCallbackExecutor.onMigrateOrUndoEvent(DefaultCallbackExecutor.java:72)\n    at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:112)\n    at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)\n    at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)\n    at org.flywaydb.core.Flyway.migrate(Flyway.java:140)\n    at edu.harvard.iq.dataverse.flyway.StartupFlywayMigrator.migrateDatabase(StartupFlywayMigrator.java:33)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n    at com.sun.ejb.containers.interceptors.BeanCallbackInterceptor.intercept(InterceptorManager.java:1022)\n    at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:72)\n    at com.sun.ejb.containers.interceptors.CallbackInvocationContext.proceed(CallbackInvocationContext.java:204)\n    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doCall(SystemInterceptorProxy.java:163)\n    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.init(SystemInterceptorProxy.java:125)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n    at com.sun.ejb.containers.interceptors.CallbackInterceptor.intercept(InterceptorManager.java:978)\n    at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:72)\n    at com.sun.ejb.containers.interceptors.CallbackInvocationContext.proceed(CallbackInvocationContext.java:204)\n    at ...\n</code></pre></div>",
        "id": 425267313,
        "sender_full_name": "Johannes D",
        "timestamp": 1709805819
    },
    {
        "content": "<p><a href=\"#narrow/stream/378866-troubleshooting/topic/ERROR.3A.20cannot.20execute.20INSERT.20in.20a.20read-only.20transaction/near/425267313\">A message</a> was moved here from <a class=\"stream-topic\" data-stream-id=\"378866\" href=\"/#narrow/stream/378866-troubleshooting/topic/Install.20Dataverse\">#troubleshooting &gt; Install Dataverse</a> by <span class=\"user-mention silent\" data-user-id=\"598112\">Philip Durbin</span>.</p>",
        "id": 425295251,
        "sender_full_name": "Notification Bot",
        "timestamp": 1709815603
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"617722\">Johannes D</span> has marked this topic as resolved.</p>",
        "id": 425471326,
        "sender_full_name": "Notification Bot",
        "timestamp": 1709887064
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"617722\">@Johannes D</span> resolved? Good! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 425524488,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1709906557
    }
]