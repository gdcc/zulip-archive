[
    {
        "content": "<p>Hello, we installed dataverse to version v. 6.3 build 1607-8c99a74, we configured the default.config file with the datacite fields for DOI consumption, but the fields were set to fake, we have modified most of the fields with ‘fake’, but at this moment the dataverse field. pid.datacite.type=FAKE, where we have tried to change the variable =FAKE by DATACITE or datacite, but when the setting is done, the dataverse URL remains in the \"your server is now runnig\" screen, how to solve this error.</p>\n<p>Translated with <a href=\"http://DeepL.com\">DeepL.com</a> (free version)</p>",
        "id": 497076937,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738352946
    },
    {
        "content": "<p>In <a href=\"https://guides.dataverse.org/en/6.3/admin/troubleshooting.html#finding-the-payara-log-file\">server.log</a> do you see messages about ConfigCheckService?</p>",
        "id": 497077304,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738353109
    },
    {
        "content": "<p>No, And verifying this file has not been modified since installation. /usr/local/payara6/glassfish/domains/domain1/logs</p>",
        "id": 497078169,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738353397
    },
    {
        "content": "<p>Interesting. I expected that you might see errors like this above the config check error:</p>\n<p>\"No PID providers configured\"</p>\n<p>\"No default PID provider configured\"</p>",
        "id": 497078564,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738353573
    },
    {
        "content": "<p>Can you please attach your server.log file?</p>",
        "id": 497078601,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738353588
    },
    {
        "content": "<p>Yes</p>",
        "id": 497079169,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738353781
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/J_PXydIKrMflq0mtAZ6a1Xuc/server.log\">server.log</a></p>",
        "id": 497079506,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738353910
    },
    {
        "content": "<p>Also, when a project is created, it is not being registered to Datacite, this error can be caused by FAKE?</p>",
        "id": 497079755,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738353984
    },
    {
        "content": "<p>Well, this is the error I see in your log: \"java.net.BindException: Address already in use\"</p>",
        "id": 497079856,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738354036
    },
    {
        "content": "<p>Are there multiple versions of Payara running?</p>",
        "id": 497079899,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738354055
    },
    {
        "content": "<p>I would stop payara and then do a <code>ps -efww | grep -i paraya</code></p>",
        "id": 497080020,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738354091
    },
    {
        "content": "<p>No, at this moment we only have payara in version 6.2024.6, previously we had version 5 in another server, but a new installation was made. In this installation the migration of a whole project was done.</p>",
        "id": 497080415,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738354228
    },
    {
        "content": "<p>Ok but that \"address already in use\" error suggests that something might already be running on a port that Payara wants to use, such as port 8080.</p>",
        "id": 497080530,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738354277
    },
    {
        "content": "<p>You could try rebooting the server, I guess. That will definitely stop anything that might be using port 8080.</p>",
        "id": 497080586,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738354302
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/qfEMOumBKmMsE_jIa4F80bBM/Captura-de-pantalla-2025-01-31-151038.png\">Captura de pantalla 2025-01-31 151038.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/qfEMOumBKmMsE_jIa4F80bBM/Captura-de-pantalla-2025-01-31-151038.png\" title=\"Captura de pantalla 2025-01-31 151038.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"665x43\" src=\"/user_uploads/thumbnail/53090/qfEMOumBKmMsE_jIa4F80bBM/Captura-de-pantalla-2025-01-31-151038.png/840x560.webp\"></a></div>",
        "id": 497080676,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738354324
    },
    {
        "content": "<p>Ok, good. Nothing payara-related running.</p>",
        "id": 497080734,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738354348
    },
    {
        "content": "<p>But when you start you get the \"Address already in use\" error? Is anything else running on port 8080?</p>",
        "id": 497080792,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738354370
    },
    {
        "content": "<p>I think the syntax is <code>lsof -i :8080</code> but please don't quote me.</p>",
        "id": 497080852,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738354394
    },
    {
        "content": "<p>And Payara does use a couple other ports as well.</p>",
        "id": 497080909,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738354423
    },
    {
        "content": "<p>This is what runs on port 8080</p>",
        "id": 497081673,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738354732
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/OxEBkMTEoklZQJ4cLHyIDKUU/Captura-de-pantalla-2025-01-31-151647.png\">Captura de pantalla 2025-01-31 151647.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/OxEBkMTEoklZQJ4cLHyIDKUU/Captura-de-pantalla-2025-01-31-151647.png\" title=\"Captura de pantalla 2025-01-31 151647.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"922x91\" src=\"/user_uploads/thumbnail/53090/OxEBkMTEoklZQJ4cLHyIDKUU/Captura-de-pantalla-2025-01-31-151647.png/840x560.webp\"></a></div>",
        "id": 497081692,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738354744
    },
    {
        "content": "<p>Huh. Some java process? What is it? Can you kill it?</p>",
        "id": 497081889,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738354812
    },
    {
        "content": "<p>Is payara</p>",
        "id": 497082095,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738354900
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/Ax9iZhKwdP4xTnlISF-IYwLk/Captura-de-pantalla-2025-01-31-152148.png\">Captura de pantalla 2025-01-31 152148.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/Ax9iZhKwdP4xTnlISF-IYwLk/Captura-de-pantalla-2025-01-31-152148.png\" title=\"Captura de pantalla 2025-01-31 152148.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1598x629\" src=\"/user_uploads/thumbnail/53090/Ax9iZhKwdP4xTnlISF-IYwLk/Captura-de-pantalla-2025-01-31-152148.png/840x560.webp\"></a></div>",
        "id": 497082234,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738354945
    },
    {
        "content": "<p>Ah ha! Multiple Payaras trying to run. So! Please try killing them all. Then try starting it up.</p>",
        "id": 497082628,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738355120
    },
    {
        "content": "<p>When I kill the process, solr automatically creates a new one</p>",
        "id": 497082900,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738355249
    },
    {
        "content": "<p>Hmm, is there a parent process you can kill?</p>",
        "id": 497083058,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738355317
    },
    {
        "content": "<p>No, only the process of solr.</p>",
        "id": 497083427,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738355476
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/025Wgh-nwLPCMTai_64kFLAC/Captura-de-pantalla-2025-01-31-153129.png\">Captura de pantalla 2025-01-31 153129.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/025Wgh-nwLPCMTai_64kFLAC/Captura-de-pantalla-2025-01-31-153129.png\" title=\"Captura de pantalla 2025-01-31 153129.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1595x149\" src=\"/user_uploads/thumbnail/53090/025Wgh-nwLPCMTai_64kFLAC/Captura-de-pantalla-2025-01-31-153129.png/840x560.webp\"></a></div>",
        "id": 497083491,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738355513
    },
    {
        "content": "<p>There should be a way to kill Solr and have it stay dead. <span aria-label=\"skull and crossbones\" class=\"emoji emoji-2620\" role=\"img\" title=\"skull and crossbones\">:skull_and_crossbones:</span></p>",
        "id": 497084342,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738355877
    },
    {
        "content": "<p>Do you have init scripts set up? Do your services when you reboot the server?</p>",
        "id": 497084490,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738355936
    },
    {
        "content": "<p>Done, I stopped solr with systemctl stop solr and uploaded payara with systemctl start payara</p>",
        "id": 497085840,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738356505
    },
    {
        "content": "<p>great!</p>",
        "id": 497085862,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738356520
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/wWXU_ZpVo0FhiMZ08-nGT_Ha/Captura-de-pantalla-2025-01-31-154923.png\">Captura de pantalla 2025-01-31 154923.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/wWXU_ZpVo0FhiMZ08-nGT_Ha/Captura-de-pantalla-2025-01-31-154923.png\" title=\"Captura de pantalla 2025-01-31 154923.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1310x795\" src=\"/user_uploads/thumbnail/53090/wWXU_ZpVo0FhiMZ08-nGT_Ha/Captura-de-pantalla-2025-01-31-154923.png/840x560.webp\"></a></div>",
        "id": 497085971,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738356582
    },
    {
        "content": "<p>Progress! But now you need to start Solr.</p>",
        "id": 497086269,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738356710
    },
    {
        "content": "<p>When I upload solr it creates the same java processes</p>",
        "id": 497086433,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738356777
    },
    {
        "content": "<p>Hmm, usually Solr and Payara play nicely together. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 497086519,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738356817
    },
    {
        "content": "<p>Usually they can run side-by-side.</p>",
        "id": 497086548,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738356830
    },
    {
        "content": "<p>ok</p>",
        "id": 497086563,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738356837
    },
    {
        "content": "<p>But this solves the problem?</p>",
        "id": 497086790,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738356936
    },
    {
        "content": "<p>Well, I'm still confused about how Solr can conflict with Payara. They run on different ports.</p>",
        "id": 497087525,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738357201
    },
    {
        "content": "<p>From the one screenshot you posted it looked like an old version of Payara was running (but I'm not sure why it didn't show up with <code>ps</code> <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span> ).</p>",
        "id": 497087754,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738357270
    },
    {
        "content": "<p>But there is an alternative to correct the error?</p>",
        "id": 497088078,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738357385
    },
    {
        "content": "<p>As I indicated it is a new installation on a different server than the previous one in use.</p>",
        "id": 497088179,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738357421
    },
    {
        "content": "<p>My theory is that you tried to stop Payara but it didn't fully stop. Then, when you went to try to start Payara, it couldn't start because of the port conflict. So the solution is to full stop the old Payara. This happens sometimes.</p>",
        "id": 497088369,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738357484
    },
    {
        "content": "<p>So restarting the server would be a better option, please remember that you only have one version of payara.</p>",
        "id": 497089093,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738357796
    },
    {
        "content": "<p>Restarting is one way to fix it, yes.</p>",
        "id": 497089258,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738357859
    },
    {
        "content": "<p>Ok I will do the process and I will be reporting back</p>",
        "id": 497089315,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738357892
    },
    {
        "content": "<p>Thaks for you help</p>",
        "id": 497089336,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738357903
    },
    {
        "content": "<p>Sure. Have a good weekend!</p>",
        "id": 497089358,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738357915
    },
    {
        "content": "<p>Sorry is it necessary to add this variable to the domain.xml file ./asadmin create-jvm-options “-Ddataverse.spi.pidproviders.directory=/path/”</p>",
        "id": 497090416,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738358407
    },
    {
        "content": "<p>Good Day. Is it necessary to add this variable to the domain.xml file ./asadmin create-jvm-options “-Ddataverse.spi.pidproviders.directory=/path/”?</p>",
        "id": 497448462,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738592524
    },
    {
        "content": "<p>Hmm. I'm pretty sure that setting is optional. Let me check the docs.</p>",
        "id": 497449082,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738592670
    },
    {
        "content": "<p>Above <a href=\"https://guides.dataverse.org/en/6.3/installation/config.html#dataverse-spi-pidproviders-directory\">https://guides.dataverse.org/en/6.3/installation/config.html#dataverse-spi-pidproviders-directory</a> it says \"The following three global settings are required to configure PID Providers in the Dataverse software\" but I don't think that's right. I think only the first two are required. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 497449403,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738592758
    },
    {
        "content": "<p>Ok, I understand, I am still working on solving the error, the server has been restarted but we continue with the same error.</p>",
        "id": 497452818,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738593567
    },
    {
        "content": "<p>Bummer. Meanwhile, I made this PR to clarify the docs: clarify which PID settings are required <a href=\"https://github.com/IQSS/dataverse/issues/11205\">#11205</a>. Thanks for catching that!</p>",
        "id": 497454789,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738594024
    },
    {
        "content": "<p>Same error? Can you please remind me what the error is?</p>",
        "id": 497455242,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738594123
    },
    {
        "content": "<p>There is a field 'Ddataverse.pid.*.type=FAKE' which we have tried to change to 'FAKE', but when the change is made it does not upload dataverse and remains in “your server is now runnig”, also when entering a dataset it is not registered in datacite. When the dataverse installation was done, the “default.config” file was configured with the data of our datacite in the “[doi]” fields, but when reviewing the “domain.xml” file in the path ‘/usr/local/payara6/glassfish/domains/domain1/config/’ everything was in “FAKE”.</p>",
        "id": 497460361,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738595278
    },
    {
        "content": "<p>I see. Lots of problems at once. <span aria-label=\"disappointed\" class=\"emoji emoji-1f61e\" role=\"img\" title=\"disappointed\">:disappointed:</span></p>",
        "id": 497460650,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738595341
    },
    {
        "content": "<p>You would like to use DataCite instead of FAKE. Is that right?</p>",
        "id": 497461091,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738595444
    },
    {
        "content": "<p>Yes, is right</p>",
        "id": 497461529,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738595540
    },
    {
        "content": "<p>I <a href=\"#narrow/channel/446770-docs/topic/domain.2Exml.20example.20for.20configuring.20DataCite.20PID.20provider/near/454946152\">struggled</a> with this config myself. Here's what worked for me:</p>\n<div class=\"codehilite\"><pre><span></span><code>dataverse.pid.providers=dc1\ndataverse.pid.default-provider=dc1\ndataverse.pid.dc1.type=datacite\ndataverse.pid.dc1.label=DataCite\ndataverse.pid.dc1.authority=10.70122\ndataverse.pid.dc1.shoulder=FK2/\ndataverse.pid.dc1.datacite.mds-api-url=https://mds.test.datacite.org\ndataverse.pid.dc1.datacite.rest-api-url=https://mds.test.datacite.org\ndataverse.pid.dc1.datacite.username=REDACTED\ndataverse.pid.dc1.datacite.password=REDACTED\n</code></pre></div>",
        "id": 497462740,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738595795
    },
    {
        "content": "<p>In the field ‘dataverse.pid.dc1.shoulder=FK2/’, Datacite must be informed about the field ‘FK2/’, for example one of the doi we have published is ‘https://doi.org/10.60790/EK61SN’ which is correctly registered in Datacite (This was migrated from our old version), but not <a href=\"https://doi.org/10.60790/FK2/EK61SN\">https://doi.org/10.60790/FK2/EK61SN</a>. Do I make myself understood?</p>",
        "id": 497465766,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738596434
    },
    {
        "content": "<p>The shoulder is optional.</p>",
        "id": 497466010,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738596488
    },
    {
        "content": "<p>We always use that <code>FK2/</code> shoulder in testing. I'm not sure why, to be honest. <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span></p>",
        "id": 497466276,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738596557
    },
    {
        "content": "<p>Ok, got it, I'll leave it ‘/’ for the moment, so as not to have a problem with Datacite. Anyway, I will check the fields in the domain.xml file.</p>",
        "id": 497466861,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738596689
    },
    {
        "content": "<p>Instead of <code>/</code> you should probably leave shoulder undefined.</p>",
        "id": 497468557,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738597073
    },
    {
        "content": "<p>How is this process done, to leave it undefined?</p>",
        "id": 497474041,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738598266
    },
    {
        "content": "<p>You're using domain.xml, right? To leave it undefined you would not include the line about shoulder in domain.xml.</p>",
        "id": 497474422,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738598343
    },
    {
        "content": "<p>That is, I remove the line ‘Ddataverse.pid.*.shoulder’, from the ‘domain.xml’ file?</p>",
        "id": 497474929,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738598450
    },
    {
        "content": "<p>Yes, please try that. And then restart Payara.</p>",
        "id": 497479464,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738599462
    },
    {
        "content": "<p>I had a session with a Datacite provider and the only configuration that worked in 'domain.xml' was:</p>\n<p>&lt;jvm-options&gt;-Ddataverse.pid.datacite.mds-api-url=https://mds.datacite.org&lt;/jvm-options&gt;<br>\n&lt;jvm-options&gt;-Ddataverse.pid.datacite. rest-api-url=https://api.datacite.org&lt;/jvm-options&gt;<br>\n&lt;jvm-options&gt;-Ddatataverse.pid.datacite.username=Test1234&lt;/jvm-options&gt;<br>\n&lt;jvm-options&gt;-Ddataverse.pid.datacite.password=Test1234&lt;/jvm-options&gt;<br>\n&lt;jvm-options&gt;-Ddataverse.pid.datacite.shoulder=&lt;/jvm-options&gt;</p>\n<p>If the shoulder is deleted, it takes a long time to generate the Dataset, for this reason the shoulder was left empty in domain.xml and the creation of the Dataset was instantaneous.</p>",
        "id": 497491527,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738602718
    },
    {
        "content": "<p>Oh! Interesting. Sorry to tell you wrong. This is news to me!</p>",
        "id": 497491849,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738602809
    },
    {
        "content": "<p>No problem, thank you for your help, and may this solution help other installations.</p>",
        "id": 497492314,
        "sender_full_name": "Andrés Díaz Hurtado",
        "timestamp": 1738602950
    },
    {
        "content": "<p>Yes!</p>",
        "id": 497492465,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1738602986
    }
]