[
    {
        "content": "<p>I am having some trouble with the visualization of (nested) compound metadata. Short version: I have a datasetField called \"Parent\" with type none and two related fields \"Child A\" and \"Child B\" that both allow multiple entries from controlled vocaularies and are nested under \"Parent\" (i.e. have \"Parent\" in the parent column).</p>",
        "id": 362990739,
        "sender_full_name": "Henning Timm",
        "timestamp": 1685699899
    },
    {
        "content": "<p>I can enter multiple values for the \"Child A\" and \"Child B\" fields but only the first entry is shown in the UI.</p>",
        "id": 362990947,
        "sender_full_name": "Henning Timm",
        "timestamp": 1685699946
    },
    {
        "content": "<p>E.g. if I enter \"Child A\": 1, 2, 3 , \"Child B\":  4, 5, 6 the metadata panel of the dataset will only show 1, 4.</p>",
        "id": 362991842,
        "sender_full_name": "Henning Timm",
        "timestamp": 1685700124
    },
    {
        "content": "<p>This is the problem discussed in <a href=\"https://github.com/IQSS/dataverse/issues/9200\">https://github.com/IQSS/dataverse/issues/9200</a> right?</p>",
        "id": 362992677,
        "sender_full_name": "Henning Timm",
        "timestamp": 1685700313
    },
    {
        "content": "<p>Since there seems to be the possibility of SOLR not playing nicely with this pattern, is it advisable to use a flattened metadata schema instead?</p>",
        "id": 362995209,
        "sender_full_name": "Henning Timm",
        "timestamp": 1685700916
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"601943\">@Henning Timm</span> are you trying to do something like \"Student's Program of Study\" in this screenshot?</p>\n<p><a href=\"/user_uploads/53090/o6SvAEFcqvn136pKoZJoHIW1/Screen-Shot-2023-06-02-at-10.10.30-AM.png\">Screen-Shot-2023-06-02-at-10.10.30-AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/o6SvAEFcqvn136pKoZJoHIW1/Screen-Shot-2023-06-02-at-10.10.30-AM.png\" title=\"Screen-Shot-2023-06-02-at-10.10.30-AM.png\"><img src=\"/user_uploads/53090/o6SvAEFcqvn136pKoZJoHIW1/Screen-Shot-2023-06-02-at-10.10.30-AM.png\"></a></div>",
        "id": 363063887,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1685715086
    },
    {
        "content": "<p>That block is here: <a href=\"https://github.com/IQSS/dataverse/blob/v5.13/scripts/api/data/metadatablocks/customGSD.tsv\">https://github.com/IQSS/dataverse/blob/v5.13/scripts/api/data/metadatablocks/customGSD.tsv</a></p>",
        "id": 363064114,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1685715128
    },
    {
        "content": "<p>Oh wait... you want a subfield. Hmm. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 363134012,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1685730385
    },
    {
        "content": "<p>I think I'm seeing the same thing. I adjusted one of the fields in the astronomy metadatablock so that it was a compound field with two subfields, where each subfield had a controlled vocabulary and allowed multiple values:</p>",
        "id": 363550878,
        "sender_full_name": "Julian Gautier",
        "timestamp": 1685903416
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/F-UZaPlVjSNAGfxH1AGP6XIE/Screenshot-2023-06-04-at-7.28.08-PM.png\">Screenshot-2023-06-04-at-7.28.08-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/F-UZaPlVjSNAGfxH1AGP6XIE/Screenshot-2023-06-04-at-7.28.08-PM.png\" title=\"Screenshot-2023-06-04-at-7.28.08-PM.png\"><img src=\"/user_uploads/53090/F-UZaPlVjSNAGfxH1AGP6XIE/Screenshot-2023-06-04-at-7.28.08-PM.png\"></a></div>",
        "id": 363550897,
        "sender_full_name": "Julian Gautier",
        "timestamp": 1685903424
    },
    {
        "content": "<p>But Dataverse gives me error messages when saving the dataset with this metadata:<br>\n<a href=\"/user_uploads/53090/z51D-HAYcFR0HqhmaTsRiJMs/Screenshot-2023-06-04-at-7.28.28-PM.png\">Screenshot-2023-06-04-at-7.28.28-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/z51D-HAYcFR0HqhmaTsRiJMs/Screenshot-2023-06-04-at-7.28.28-PM.png\" title=\"Screenshot-2023-06-04-at-7.28.28-PM.png\"><img src=\"/user_uploads/53090/z51D-HAYcFR0HqhmaTsRiJMs/Screenshot-2023-06-04-at-7.28.28-PM.png\"></a></div>",
        "id": 363550981,
        "sender_full_name": "Julian Gautier",
        "timestamp": 1685903461
    },
    {
        "content": "<p>And when I view the metadata, only two of the controlled vocabulary terms are shown: the first term I chose from the first child field and the first term I chose from the second child field:<br>\n<a href=\"/user_uploads/53090/WNTizgXGIZzVdi2eowf2p3AK/Screenshot-2023-06-04-at-7.28.36-PM.png\">Screenshot-2023-06-04-at-7.28.36-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/WNTizgXGIZzVdi2eowf2p3AK/Screenshot-2023-06-04-at-7.28.36-PM.png\" title=\"Screenshot-2023-06-04-at-7.28.36-PM.png\"><img src=\"/user_uploads/53090/WNTizgXGIZzVdi2eowf2p3AK/Screenshot-2023-06-04-at-7.28.36-PM.png\"></a></div>",
        "id": 363551154,
        "sender_full_name": "Julian Gautier",
        "timestamp": 1685903550
    },
    {
        "content": "<p>I don't think <a href=\"https://github.com/IQSS/dataverse/issues/9200\">https://github.com/IQSS/dataverse/issues/9200</a> is related.</p>\n<p>And I wonder if I would have this problem if I created a new metadatablock instead of editing the astronomy metadatablock that ships with Dataverse.</p>",
        "id": 363551703,
        "sender_full_name": "Julian Gautier",
        "timestamp": 1685903788
    },
    {
        "content": "<p>Thanks for the fast replies!<br>\nYes, my metadata block looks like what <span class=\"user-mention\" data-user-id=\"621770\">@Julian Gautier</span> has reproduced. I did not get an error when saving, but my metadatablock was new, so that probably was the difference there.</p>",
        "id": 363643670,
        "sender_full_name": "Henning Timm",
        "timestamp": 1685953324
    },
    {
        "content": "<p>As a workaround, I decided to \"flatten\" the entry for now.</p>",
        "id": 363643873,
        "sender_full_name": "Henning Timm",
        "timestamp": 1685953383
    },
    {
        "content": "<p>Thanks Henning. Channelling my inner-Phil here, would you like to open a GitHub issue to report this bug. Then I'm hoping folks can investigate the causes, such as if it's something to do with SOLR. Very recently I helped with a new metadatablock and we almost included fields like these, so we would have run into this bug, and others may run into the bug, too, where flattening wouldn't be a good workaround.</p>",
        "id": 363731348,
        "sender_full_name": "Julian Gautier",
        "timestamp": 1685972957
    },
    {
        "content": "<p>Sure thing :) Thanks for the help.</p>",
        "id": 364052184,
        "sender_full_name": "Henning Timm",
        "timestamp": 1686068266
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"601943\">@Henning Timm</span> hi, did you ever create an issue for this?</p>",
        "id": 389625893,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694083524
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> No, sorry, I did not get around to it. But my bad conscience is strong. I will try to get this done tomorrow.</p>",
        "id": 389630017,
        "sender_full_name": "Henning Timm",
        "timestamp": 1694084644
    },
    {
        "content": "<p>Ha! Thanks! No rush! <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 389632235,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1694085310
    },
    {
        "content": "<p>Finally <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> <a href=\"https://github.com/IQSS/dataverse/issues/9911\">https://github.com/IQSS/dataverse/issues/9911</a> Sorry for the delay.</p>",
        "id": 390811814,
        "sender_full_name": "Henning Timm",
        "timestamp": 1694643480
    }
]