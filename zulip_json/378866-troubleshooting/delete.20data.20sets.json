[
    {
        "content": "<p>Hi, we just set up the environments, and want to delete some data sets, but it seems that not all the data sets can be deleted, any ideas or guides on this?</p>",
        "id": 451428197,
        "sender_full_name": "shan",
        "timestamp": 1721028271
    },
    {
        "content": "<p><a href=\"https://guides.dataverse.org/en/latest/user/dataset-management.html#dataset-versions\">https://guides.dataverse.org/en/latest/user/dataset-management.html#dataset-versions</a><br>\n<a href=\"https://guides.dataverse.org/en/latest/user/dataset-management.html#dataset-deaccession\">https://guides.dataverse.org/en/latest/user/dataset-management.html#dataset-deaccession</a></p>",
        "id": 451433383,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721030032
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> can I delete the dataset from dashboard? I didn't find the delete action in the dashboard. see below:<br>\n<a href=\"/user_uploads/53090/usufs-kJnlHR7OQOVhxiHOl8/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/usufs-kJnlHR7OQOVhxiHOl8/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/usufs-kJnlHR7OQOVhxiHOl8/image.png\"></a></div>",
        "id": 451438276,
        "sender_full_name": "shan",
        "timestamp": 1721031365
    },
    {
        "content": "<p>Meanwhile, Is it possible to delete the deaccessioned datasets?</p>",
        "id": 451438873,
        "sender_full_name": "shan",
        "timestamp": 1721031555
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"734848\">shan</span> <a href=\"#narrow/stream/378866-troubleshooting/topic/delete.20data.20sets/near/451438873\">said</a>:</p>\n<blockquote>\n<p>Meanwhile, Is it possible to delete the deaccessioned datasets?</p>\n</blockquote>\n<p>Nope. Underlying reasons: <a href=\"https://support.datacite.org/docs/doi-persistence#deactivate-a-doi\">https://support.datacite.org/docs/doi-persistence#deactivate-a-doi</a></p>",
        "id": 451440641,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721032080
    },
    {
        "content": "<p>It is really complicated,  Can I clear up all the dataverses and datasets in the system?</p>",
        "id": 451444937,
        "sender_full_name": "shan",
        "timestamp": 1721033292
    },
    {
        "content": "<p>Sure. Just drop the database and start over. Keep in mind that any datasets already registered for real at DataCite will have cost you money and you really should deaccession those DOIs.</p>",
        "id": 451445327,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721033413
    },
    {
        "content": "<p>For experimental setups and learning, please use the <em>fake</em> PID provider. That way you don't spend money. Or, if you really need to test with DataCite, use their Test Fabrica (which is also for free and without risks)</p>",
        "id": 451445515,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1721033469
    },
    {
        "content": "<p>Thanks, right now, we use the fake DOI, so it will not cost money :)</p>",
        "id": 451446668,
        "sender_full_name": "shan",
        "timestamp": 1721033830
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"734848\">@shan</span> you can delete datasets via API: <a href=\"https://guides.dataverse.org/en/6.3/api/native-api.html#delete-published-dataset\">https://guides.dataverse.org/en/6.3/api/native-api.html#delete-published-dataset</a></p>",
        "id": 451507312,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1721052155
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> I drop the database through \"psqlÂ -UÂ dvnappÂ -cÂ 'DROPÂ DATABASEÂ \"dvndb\"'Â template1\", and restart domain, by \"java -jar /usr/local/payara6/glassfish/lib/client/appserver-cli.jar start-domain\", and when I open the webpage of <a href=\"http://datavserse.domain:8080\">http://datavserse.domain:8080</a>, it only shows that <br>\n<a href=\"/user_uploads/53090/gcv4YzyNZmaR_kwKE12IzhGA/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/gcv4YzyNZmaR_kwKE12IzhGA/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/gcv4YzyNZmaR_kwKE12IzhGA/image.png\"></a></div><p>Do I need to create the dvndb database and tables by hand? where can I download the create schema?</p>",
        "id": 452471051,
        "sender_full_name": "shan",
        "timestamp": 1721355066
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> I run the \"python3 install.py\", it did create the \"dvndb\" database, but no tables there, it is an empty database.<br>\n and still the webpage \"Â <a href=\"http://datavserse.domain:8080/\">http://datavserse.domain:8080</a>\" didn't show any login interface, it only shows payara is running, see blow:<br>\n<a href=\"/user_uploads/53090/JKlV6SjkKwf9jTtEHSwNdNIg/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/JKlV6SjkKwf9jTtEHSwNdNIg/image.png\" title=\"image.png\"><img src=\"/user_uploads/53090/JKlV6SjkKwf9jTtEHSwNdNIg/image.png\"></a></div>",
        "id": 452507170,
        "sender_full_name": "shan",
        "timestamp": 1721374302
    },
    {
        "content": "<p>It sounds like you're doing a refresh reinstall: <a href=\"https://guides.dataverse.org/en/6.3/installation/installation-main.html#fresh-reinstall\">https://guides.dataverse.org/en/6.3/installation/installation-main.html#fresh-reinstall</a></p>\n<p>You've re-run install.py but all database tables are empty.</p>\n<p>Perhaps the war file was not successfully deployed?</p>\n<p>Can you please upload your server.log file?</p>",
        "id": 452566015,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1721394264
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> <br>\n<a href=\"/user_uploads/53090/8g56UphZWvLpHX3BagT_4OgV/server.log\">server.log</a><br>\n here is the log</p>",
        "id": 452698930,
        "sender_full_name": "shan",
        "timestamp": 1721441631
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> The former log is based on \"./asadmin restart-domains /home/dataverse/dataverse-6.2/target/dataverse-6.2.war\", and the war file seems not deployed, I retried deploying the war file by \"./asadmin deploy /home/dataverse/dataverse-6.2/target/dataverse-6.2.war\", it seems the war file was deployed successfully, but the page is still not working properly when I go to Â \"Â <a href=\"http://datavserse.domain:8080/\">http://datavserse.domain:8080</a>\", here is the new server.log file<br>\n<a href=\"/user_uploads/53090/5epayW3uMgKFXllpLYvRV15e/server.log\">server.log</a></p>",
        "id": 452700557,
        "sender_full_name": "shan",
        "timestamp": 1721442621
    },
    {
        "content": "<p>and I found the following error message in the server.log file, whether  it is related to the issue?</p>",
        "id": 452701050,
        "sender_full_name": "shan",
        "timestamp": 1721442901
    },
    {
        "content": "<p>[2024-07-20T10:31:54.969+0800] [Payara 6.2023.8] [SEVERE] [] [] [tid: _ThreadID=74 _ThreadName=RunLevelControllerThread-1721442678838] [timeMillis: 1721442714969] [levelValue: 1000] [[<br>\n  ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...]]</p>",
        "id": 452701062,
        "sender_full_name": "shan",
        "timestamp": 1721442905
    },
    {
        "content": "<p>When I head toÂ <a href=\"http://datavserse.domain:8080/\">http://datavserse.domain:8080</a>Â I see \"Page Not Found - The page you are looking for was not found.\"</p>",
        "id": 452701564,
        "sender_full_name": "shan",
        "timestamp": 1721443241
    },
    {
        "content": "<p>BTW, The system installed on physical machine not on docker</p>",
        "id": 452701623,
        "sender_full_name": "shan",
        "timestamp": 1721443291
    },
    {
        "content": "<p>[2024-07-20T10:20:21.176+0800] [Payara 6.2023.8] [WARNING] [] [javax.org.glassfish.persistence.org.glassfish.persistence.common] [tid: _ThreadID=191 _ThreadName=admin-thread-pool::admin-listener(1)] [timeMillis: 1721442021176] [levelValue: 900] [[<br>\n  PER01000: Got SQLException executing statement \"ALTER TABLE fileaccessrequests ADD CONSTRAINT FK_fileaccessrequests_DATAFILE_ID FOREIGN KEY (DATAFILE_ID) REFERENCES DVOBJECT (ID)\": org.postgresql.util.PSQLException: ERROR: constraint \"fk_fileaccessrequests_datafile_id\" for relation \"fileaccessrequests\" already exists]]</p>\n<p>Here is another error message in server.log</p>",
        "id": 452702054,
        "sender_full_name": "shan",
        "timestamp": 1721443568
    },
    {
        "content": "<p>I reinstalled again, and it works now , but two error messages still appears:  PER01000: Got SQLException executing statement \"ALTER TABLE fileaccessrequests ADD CONSTRAINT FK_fileaccessrequests_DATAFILE_ID FOREIGN KEY (DATAFILE_ID) REFERENCES DVOBJECT (ID)\": org.postgresql.util.PSQLException: ERROR: constraint \"fk_fileaccessrequests_datafile_id\" for relation \"fileaccessrequests\" already exists]]<br>\n  ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...]]</p>\n<p>how can I handle this?</p>",
        "id": 452713910,
        "sender_full_name": "shan",
        "timestamp": 1721449407
    },
    {
        "content": "<p>I'm pretty sure that error about fileaccessrequests is always there. It's confusing. Please feel free to open an issue about it. I don't think it does any harm.</p>\n<p>I'm glad the reinstallation worked! Good job!</p>",
        "id": 453183326,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1721657004
    }
]