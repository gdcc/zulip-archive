[
    {
        "content": "<p>not sure this is the right stream .. does anyone know if there is a way to change the link to the dataverse guide that comes to the user in the email that is sent when a new dataset is created? Currently, it sends a link to the default dataverse guide, and if you add a :GuideBaseURL you can change the domain, but I believe that is only if you've made your own copy of that default guide .. we actually would like to send a completely different link in the email to our own custom guide .. is that possible?</p>",
        "id": 398166706,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1698101321
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> can you please copy and paste here what the new dataset email looks like? I can't seem to find one.</p>",
        "id": 398286690,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698153245
    },
    {
        "content": "<p>We have this setting :</p>\n<p>:GuidesBaseUrl  <a href=\"http://uvalib.github.io/dataverse-docs\">http://uvalib.github.io/dataverse-docs</a></p>",
        "id": 398321234,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1698163942
    },
    {
        "content": "<p>Nevermind, I found one:</p>\n<p>Hello,<br>\nYour new dataset named no files (view at <a href=\"https://demo.dataverse.org/dataset.xhtml?persistentId=doi:10.70122/FK2/7JAQ6R\">https://demo.dataverse.org/dataset.xhtml?persistentId=doi:10.70122/FK2/7JAQ6R</a> ) was created in Philip Durbin Dataverse (view at <a href=\"https://demo.dataverse.org/dataverse/pdurbin\">https://demo.dataverse.org/dataverse/pdurbin</a> ). To learn more about what you can do with a dataset, check out the Dataset Management - User Guide at <a href=\"https://guides.dataverse.org/en/6.0/user/dataset-management.html\">https://guides.dataverse.org/en/6.0/user/dataset-management.html</a> .</p>\n<p>You may contact us for support at <a href=\"mailto:support@dataverse.org\">support@dataverse.org</a>.</p>\n<p>Thank you,<br>\nDemo Dataverse Support</p>",
        "id": 398322124,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698164268
    },
    {
        "content": "<p>So the problem is the \"check out the guides\" link, I guess.</p>",
        "id": 398322232,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698164293
    },
    {
        "content": "<p><code>src/main/java/propertyFiles/Bundle.properties</code></p>\n<p><code>782:notification.email.createDataset=Your new dataset named {0} (view at {1} ) was created in {2} (view at {3} ). To learn more about what you can do with a dataset, check out the Dataset Management - User Guide at {4}/{5}/user/dataset-management.html .</code></p>",
        "id": 398322322,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698164335
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599826\">@Sherry Lake</span> it seems to be dynamic so I assume your users get emails linking to your custom guides.</p>",
        "id": 398322548,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698164424
    },
    {
        "content": "<p>Here is what UVA's email looks like:</p>\n<p>Hello, <br>\nYour new dataset named Need new dataset (view at <a href=\"https://dataverse.lib.virginia.edu/dataset.xhtml?persistentId=doi:10.18130/V3/RNY6XS\">https://dataverse.lib.virginia.edu/dataset.xhtml?persistentId=doi:10.18130/V3/RNY6XS</a> ) was created in LibraData: UVa's Scholarly Research (view at <a href=\"https://dataverse.lib.virginia.edu/dataverse/libradata\">https://dataverse.lib.virginia.edu/dataverse/libradata</a> ). To learn more about what you can do with a dataset, c<strong>heck out the Dataset Management - User Guide at <a href=\"http://uvalib.github.io/dataverse-docs/en/current/user/dataset-management.html\">http://uvalib.github.io/dataverse-docs/en/current/user/dataset-management.html</a> .</strong></p>",
        "id": 398325284,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1698165499
    },
    {
        "content": "<p>But.... you need to have the \"path\" at that \"GuideBaseURL\".... the path after the base URL cannot be changed, unless you modify the <a href=\"http://Bundle.properties\">Bundle.properties</a> file?.... So that is a problem. We have done some re-directing to get the UserGuide URL to go where we want to:</p>\n<p>So that link really is re-directed here: <a href=\"https://guides.lib.virginia.edu/LibraDataUserGuide/DatasetManagement\">https://guides.lib.virginia.edu/LibraDataUserGuide/DatasetManagement</a></p>",
        "id": 398325633,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1698165635
    },
    {
        "content": "<p>ah okay i see .. we need to add our domain in the GudeBaseURL and then redirect via DNS .. got it .. i think</p>",
        "id": 398517731,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1698249595
    },
    {
        "content": "<p>Should work. Let us know if it doesn't!</p>",
        "id": 398530169,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698254038
    },
    {
        "content": "<p>thanks so much!</p>",
        "id": 398532900,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1698255190
    },
    {
        "content": "<p>Oh, this isn’t the only guide link sent in emails or are in the notifications. Tomorrow I’ll get the list of URLs we have re-directing.</p>",
        "id": 398575331,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1698275084
    },
    {
        "content": "<p>We don’t redirect via DNS, since we are using “github”, I have a re-direct in the HTML files.  I’ll send the github link tomorrow too.</p>",
        "id": 398575505,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1698275213
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> here is out github pages site: <a href=\"https://github.com/uvalib/dataverse-docs/\">https://github.com/uvalib/dataverse-docs/</a></p>\n<p>I added a readme file that lists the files I re-directed and info on why and how.</p>",
        "id": 398688608,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1698326711
    },
    {
        "content": "<p>This is amazing .. thank you <span class=\"user-mention\" data-user-id=\"599826\">@Sherry Lake</span> !</p>",
        "id": 398693261,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1698328142
    },
    {
        "content": "<p>Sooooo helpful! <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span></p>",
        "id": 398693317,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1698328166
    },
    {
        "content": "<p>Really interesting. Thanks, Sherry.</p>",
        "id": 398704663,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698331338
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599826\">@Sherry Lake</span> do you have to make those edits every time you upgrade the code?</p>",
        "id": 398716400,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1698334606
    },
    {
        "content": "<p>[Edits, updates to the original comment....]</p>\n<p>No, the guideBaseURL is in the settings and as long as I don’t change our GuidesVersion setting <a href=\"https://guides.dataverse.org/en/latest/installation/config.html#guidesversion\">https://guides.dataverse.org/en/latest/installation/config.html#guidesversion</a></p>\n<p>This is what I have: :GuidesVersion = current</p>\n<p>The rest of the URL stays the same - UVa has set “current” as :GuidesVersion, so that is why that is in our guide path. I do not know what the default is.</p>\n<p><a href=\"http://uvalib.github.io/dataverse-docs/en/**current**/user/dataset-management.html\">http://uvalib.github.io/dataverse-docs/en/**current**/user/dataset-management.html</a></p>",
        "id": 398901180,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1698414054
    },
    {
        "content": "<p>I'm surprised it's \"current\" instead of \"latest\". We have \"latest\" at <a href=\"https://guides.dataverse.org/en/latest/\">https://guides.dataverse.org/en/latest/</a></p>",
        "id": 398904136,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698415113
    },
    {
        "content": "<p>OK.... looking back at our settings. I do have GuidesVersion set:</p>\n<p>:GuidesVersion  =  current</p>\n<p>So that is why \"current\" is after \"en/\" in our PATH.</p>\n<p>I see Harvard has the actual version # (this link from the e-mail). I wonder how that is set?<br>\n<a href=\"https://guides.dataverse.org/en/6.0/user/dataset-management.html\">https://guides.dataverse.org/en/6.0/user/dataset-management.html</a></p>",
        "id": 398920193,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1698420363
    },
    {
        "content": "<p>Here's the code:</p>\n<div class=\"codehilite\"><pre><span></span><code>String datasetCreatedMessage = BundleUtil.getStringFromBundle(&quot;notification.email.createDataset&quot;, Arrays.asList(\n        version.getDataset().getDisplayName(),\n        getDatasetLink(version.getDataset()),\n        version.getDataset().getOwner().getDisplayName(),\n        getDataverseLink(version.getDataset().getOwner()),\n        systemConfig.getGuidesBaseUrl(),\n        systemConfig.getGuidesVersion()\n));\n</code></pre></div>",
        "id": 398921302,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698420669
    },
    {
        "content": "<p>Long story short, it uses :GuidesVersion if it can. Otherwise it uses the version defined in pom.xml.</p>",
        "id": 398921571,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698420750
    },
    {
        "content": "<blockquote>\n<p>version defined in pom.xml</p>\n</blockquote>\n<p>I'm kinda sure it will pick up the version from the <code>dataverse.version</code> JVM option, which is by default originating from what is defined in pom.xml, but can be set to sth else</p>",
        "id": 398922079,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1698420933
    },
    {
        "content": "<p>Yes, a long, long story. <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 398923484,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1698421433
    },
    {
        "content": "<p>sorry  just now responding on this .. <span class=\"user-mention\" data-user-id=\"599826\">@Sherry Lake</span> does this actually change the text of the link appearing in the email as well, or just redirect to the correct link (and leave the email as is)? Our DNS redirection is working, but nothing changes in the email (of course) so it is confusing to the user.</p>",
        "id": 406160201,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1701810768
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span>  the link is auto generated by Dataverse (I leave that as is) as this:  <a href=\"http://uvalib.github.io/dataverse-docs/en/current/user/dataset-management.html\">http://uvalib.github.io/dataverse-docs/en/current/user/dataset-management.html</a> </p>\n<p>that URL (and others that appear in various emails) are redirected to our Libguides (which are versions of Dataverse User Guides).</p>",
        "id": 406162325,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1701811651
    },
    {
        "content": "<p>okay i see .. so the link in the email does not match the URL that the redirect points to .. that is our issue too with DNS redirection ..which i know is how redirection works <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span> .. but our research team wants the link text to show the actual guide link .. i think i might put a request in to allow the ability to add a completely different URL for guides so that the email link is the actual link to the guides</p>",
        "id": 406164809,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1701812787
    },
    {
        "content": "<p>maybe someday</p>",
        "id": 406164856,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1701812806
    },
    {
        "content": "<p>Sure, please go ahead.</p>",
        "id": 406207242,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1701831563
    }
]