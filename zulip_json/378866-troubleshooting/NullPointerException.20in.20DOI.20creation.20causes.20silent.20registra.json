[
    {
        "content": "<p>Good morning! </p>\n<p>We're experiencing intermittent DOI registration failures on Dataverse 6.5 (also confirmed on 6.8) in the BSC Dataverse deployments.</p>\n<p><strong>Issue</strong>: When users create datasets with ROR affiliations selected from the autocomplete dropdown, DOI assignment succeeds but DataCite registration fails silently (~10-50% failure rate).</p>\n<p><strong>Symptoms</strong>:</p>\n<ul>\n<li>Dataset saves successfully</li>\n<li>DOI assigned (e.g., doi:10.82201/XXXXXX)</li>\n<li><code>identifierregistered=false</code> in database</li>\n<li><code>globalidcreatetime=NULL</code></li>\n<li>\"DOI not reserved\" banner shown</li>\n<li>Logs: <code>NullPointerException</code> in <code>AbstractPidProvider.getTargetUrl()</code></li>\n</ul>\n<p><strong>Root cause</strong>: Race condition where <code>getGlobalId()</code> returns null during DOI creation transaction flow.</p>\n<p><strong>Workaround</strong>: Create dataset with minimal metadata first, then edit to add ROR affiliation (100% success rate).</p>\n<p><strong>GitHub issue</strong>: <a href=\"https://github.com/IQSS/dataverse/issues/11941\">https://github.com/IQSS/dataverse/issues/11941</a></p>\n<p>We're using external vocab scripts for ROR autocomplete. Has anyone seen PID registration issues related to external vocab scripts or similar timing-dependent DOI failures before?</p>\n<p>Thanks!</p>",
        "id": 547873265,
        "sender_full_name": "Simon Carroll",
        "timestamp": 1761812446
    },
    {
        "content": "<p>Thanks for all the details!</p>",
        "id": 547907638,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1761822877
    }
]