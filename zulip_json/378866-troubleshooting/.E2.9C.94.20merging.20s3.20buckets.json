[
    {
        "content": "<p>We still have some separate s3 buckets for direct upload and original buckets.  I'd like to get some of these merged to one bucket.  </p>\n<p>I didn't see bucket merging mentioned in documentation.  Is there anything I should be planning or doing for this?</p>\n<p>Thank you,</p>\n<p>Jamie</p>",
        "id": 473805562,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727717331
    },
    {
        "content": "<p>I should probably explain.  Earlier version of Dataverse required a separate s3 bucket for direct uploads.  SInce that is no longer the case I'm trying to clean that up now.</p>",
        "id": 473816435,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727720106
    },
    {
        "content": "<p>Yeah, it makes sense. I just don't have experience with doing such a clean up. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 473818493,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727720770
    },
    {
        "content": "<p>I'm going to try with a couple of buckets on the test system but was hoping to hear about anyone else's experience.</p>",
        "id": 473820642,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727721282
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"626369\">@Don Sizemore</span>  Have you run across this issue?</p>",
        "id": 473824479,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727721976
    },
    {
        "content": "<p>maybe <span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span> has <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span></p>",
        "id": 473830963,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727723828
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"598843\">@Deirdre Kirmis</span>   Have you ever run across this issue - merging s3 buckets.</p>",
        "id": 473832251,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727724140
    },
    {
        "content": "<p>We have always used only 1 bucket, but with separate 'stores' defined for direct upload. However, I think if you copy all of the folders/prefixes to one bucket, as long as you change the defined stores in your JVM options to point to the \"new\" bucket you should be okay. Or, if you just have the one store defined (ie: the merged store) .. you will just have to change the \"storageidentifier\" in the \"dvobject\" table to reflect the correct store that you have defined for each file.  Does that make sense?</p>",
        "id": 473841429,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1727726351
    },
    {
        "content": "<p>I think what i mean is, whatever is defined in the dvobject table as the storageidentier for the files should match the \"store\" that is defined in the domain.xml file. As long as that store points to the correct bucket it should work. Does that seem correct?</p>",
        "id": 473842798,
        "sender_full_name": "Deirdre Kirmis",
        "timestamp": 1727726587
    },
    {
        "content": "<p>Sounds correct to me.</p>",
        "id": 473844400,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727726856
    },
    {
        "content": "<p>Yes, makes perfect sense. Thank you!</p>",
        "id": 473847207,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727727555
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"653479\">@jamie jamison</span> Deirdre is correct - you just want the datafiles where the <code>storageidentifier</code> field in the dvobject table points. there is some migration SQL in the bottom of Julian's \"Helpful SQL queries\" Google document that may help you do what you need.</p>",
        "id": 474026948,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1727786408
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"653479\">@jamie jamison</span> see the \"storage migration\" queries at the bottom of <a href=\"https://docs.google.com/document/d/1-Y_iUduSxdDNeK1yiGUxe7t-Md7Fy965jp4o4m1XEoE/edit#heading=h.avuoo5kf0mdt\">https://docs.google.com/document/d/1-Y_iUduSxdDNeK1yiGUxe7t-Md7Fy965jp4o4m1XEoE/edit#heading=h.avuoo5kf0mdt</a> - once you copy the datafiles into place where you want them, you would use queries like these to update the storageidentifier field?</p>",
        "id": 474027614,
        "sender_full_name": "Don Sizemore",
        "timestamp": 1727786607
    },
    {
        "content": "<p>Have to deal with production being down and then will get back to this.  Thank you for all the info.</p>",
        "id": 474097479,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727806105
    },
    {
        "content": "<p>On the test system it looks like moving the buckets worked.  Thank you all for the input.</p>",
        "id": 474635136,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727973141
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"653479\">jamie jamison</span> has marked this topic as resolved.</p>",
        "id": 474635242,
        "sender_full_name": "Notification Bot",
        "timestamp": 1727973182
    }
]