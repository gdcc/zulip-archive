[
    {
        "content": "<p>Hi Team, <br>\nThis is probably the weirdest issue I have seen! <br>\nSeries of events :</p>\n<ul>\n<li>There was a Published dataset from 2021. </li>\n<li>It recently started showing \"Incomplete metadata tag\" warning. </li>\n<li>Our team was told to fix the metadata on a Draft version and republish by replacing current version so that it would not trigger a minor version change, this is superuser function</li>\n<li>\n<p>After Republishing the Dataset page return 500 error. I will attach the Exception but it doesn't really give you any trace of problem other that Dataset.init failed. <br>\n-<br>\nMy investigation in Database: </p>\n</li>\n<li>\n<p>Action log record table <br>\n<a href=\"/user_uploads/53090/l3ik1usW3Qz9UhDGptgrDGtu/action.png\">action.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/l3ik1usW3Qz9UhDGptgrDGtu/action.png\" title=\"action.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1625x209\" src=\"/user_uploads/thumbnail/53090/l3ik1usW3Qz9UhDGptgrDGtu/action.png/840x560.webp\"></a></div></li>\n<li>\n<p>Draftversion ID record is gone from datasetversion table</p>\n</li>\n<li>No record in Datasetfield table for any of datasetversion_id </li>\n<li>I restored DB from backup before this change and I can see Both versions in datasetversion table and see various Datasetfield records for both versions.</li>\n</ul>\n<p>Noticeable thing from actionlogrecord table is <code>CuratePublishedDatasetVersionCommand</code> started 11:20:55 and ended at 11:21:01 where <code>DeleteDatasetVersionCommand</code>started and finished at 11:20:55 and ended at 11:20:58<br>\nI am suspecting that the chnages were never saved and <code>DeleteDatasetVersionCommandstarted</code> was executed too quickly</p>",
        "id": 495420787,
        "sender_full_name": "Bikram",
        "timestamp": 1737605756
    },
    {
        "content": "<p>Wow, crazy. Do you think it's reproducible?</p>",
        "id": 495480719,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1737631806
    },
    {
        "content": "<p>Looks like this was a discovered bug and fixed in V6.4.</p>\n<p>See the email from Jim (James Myers) within the thread:</p>\n<blockquote>\n<p>There are two recently discovered significant bugs being fixed in v6.4. One, introduced in v6.3, can affect the layout/display of the main page. <strong>The other, while limited to functionality only available to superusers, can result in metadata loss and a broken dataset.</strong></p>\n</blockquote>",
        "id": 495517246,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1737643878
    },
    {
        "content": "<p>Hmm, but that bug was introduced in 6.3 and it looks like <span class=\"user-mention\" data-user-id=\"719882\">@Bikram</span> is running 6.2. Well, v6.2.8-SP specifically, according to <a href=\"https://borealisdata.ca/api/info/version\">https://borealisdata.ca/api/info/version</a></p>",
        "id": 495522589,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1737645294
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin ‚òÉÔ∏è</span>   Yes we are running 6.2.<br>\nLooks like this is the bug we are having exactly <br>\n<a href=\"https://github.com/IQSS/dataverse/issues/10880\">https://github.com/IQSS/dataverse/issues/10880</a><br>\n<a href=\"https://groups.google.com/g/dataverse-community/c/evn5C-pyrS8?pli=1\">https://groups.google.com/g/dataverse-community/c/evn5C-pyrS8?pli=1</a></p>\n<p>I will read the threads and get back.</p>",
        "id": 495532374,
        "sender_full_name": "Bikram",
        "timestamp": 1737647766
    },
    {
        "content": "<p>Great thanks. I'm especially interested to know if versions prior to 6.3 are affected.</p>",
        "id": 495532679,
        "sender_full_name": "Philip Durbin üöÄ",
        "timestamp": 1737647836
    },
    {
        "content": "<p>We had 13 datasets to update like this, first 3 got updated fine and this as the 4th one which got stuck. So I can say that its hard to reproduce but still exists in 6.2</p>",
        "id": 495533471,
        "sender_full_name": "Bikram",
        "timestamp": 1737648029
    }
]