[
    {
        "content": "<p>Does anyone have experience how matlab .fig figure files interact with Dataverse's full-text index? One of our scientists uploaded such files and the tika parser crashes with the following exception</p>\n<div class=\"codehilite\"><pre><span></span><code>  org.apache.tika.exception.TikaException: Unexpected RuntimeException from org.apache.tika.parser.mat.MatParser@4a18daf3\n</code></pre></div>\n<p>Unfortunately, I have no easy way to verify if the files themselves are corrupted and I would be fine to just exclude them from the full text index.</p>\n<p>Is there any way to exclude those files from indexing? They are not particularly large, so exclduing them via size is not an option.</p>",
        "id": 429482518,
        "sender_full_name": "Henning Timm",
        "timestamp": 1711390789
    },
    {
        "content": "<p>Hmm, as you say we have a setting called <a href=\"https://guides.dataverse.org/en/6.1/installation/config.html#solrmaxfilesizeforfulltextindexing\">:SolrMaxFileSizeForFullTextIndexing</a> but nothing about file types.</p>",
        "id": 429482786,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1711390889
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"601943\">@Henning Timm</span> please feel free to open an issue: <a href=\"https://github.com/IQSS/dataverse/issues\">https://github.com/IQSS/dataverse/issues</a></p>",
        "id": 429482922,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1711390938
    },
    {
        "content": "<p>Thanks for the reply Phil! In our case this error was probably responsible for gobbling up enough memory to make the Dataverse Server swap and then stay in HTTP 503 until we did a restart. We will try to reproduce the problem before opening an issue. Its still unclear if our users files were the problem (e.g. if they were corrupted somehow).</p>",
        "id": 429885221,
        "sender_full_name": "Henning Timm",
        "timestamp": 1711552783
    },
    {
        "content": "<p>Sounds good, thanks.</p>",
        "id": 429892543,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1711554724
    },
    {
        "content": "<p>Some small updates on this:</p>\n<ul>\n<li>Parsing the matlab files does not reproducibly cause the HTTP 503 error</li>\n<li>It is not a SOLR memory issues as with described <a href=\"#narrow/stream/378866-troubleshooting/topic/.E2.9C.94.20Draft.20version.20of.20published.20datasets.20stays.20around\">https://dataverse.zulipchat.com/#narrow/stream/378866-troubleshooting/topic/.E2.9C.94.20Draft.20version.20of.20published.20datasets.20stays.20around</a></li>\n<li>It is still unclear, if our matlab figure files are corrupted or if it is a problem of SOLR</li>\n</ul>\n<p>The MatParser crashes for (our) matlab figure files, but this does not seem cause any further problems. I will open an issue once I have a matlab .fig file that causes this problem and that I am allowed to pass on. Our affected files are under embargo.</p>",
        "id": 435593699,
        "sender_full_name": "Henning Timm",
        "timestamp": 1714140393
    }
]