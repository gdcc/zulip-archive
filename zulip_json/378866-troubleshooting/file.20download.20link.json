[
    {
        "content": "<p>I've been helping a user who found that restricting a fle caused the download linke to no longer be displayed.  Changing back to public did not  return the link to the display.   I can show her how to manually construct a link but is there a way to get this to display again.     Thanks.</p>",
        "id": 472939457,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727369941
    },
    {
        "content": "<p>Huh. Can you please link to the dataset?</p>",
        "id": 472948244,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727373477
    },
    {
        "content": "<p>And did you republish?</p>",
        "id": 472948299,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727373484
    },
    {
        "content": "<p>I did republish.  &lt;<a href=\"https://doi.org/10.25346/S6/7YBSJK\">https://doi.org/10.25346/S6/7YBSJK</a>&gt; is out test dataset.  </p>\n<p>I can show the user how to manually set up a download link for the  WashU Genome Browser but still wanted to see if it is possible to get the lank back in the file display.</p>\n<p>How this came up is I was helping her setup files (in Dataverse) to be displayed in theWashU Genome Browser. The PI wasn't sure if she wanted the files to be public on Dataverse but I'm not sure it's possible to be linked to the Genome Browser without being public.</p>",
        "id": 472950316,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727374233
    },
    {
        "content": "<p>Huh. Could I trouble you to try to reproduce this on <a href=\"https://demo.dataverse.org\">https://demo.dataverse.org</a> ?</p>",
        "id": 472953503,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727375515
    },
    {
        "content": "<p>Also, these files have a popup when you try to download. Terms. That's probably why the \"Download URL\" isn't shown.</p>",
        "id": 472953803,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727375627
    },
    {
        "content": "<p>\"Certain files do not provide Download URLs for technical reasons: those that are restricted, have terms of use associated with them, or are part of a Dataverse collection with a guestbook enabled.\" -- <a href=\"https://guides.dataverse.org/en/5.14/user/find-use-data.html#downloading-via-url\">https://guides.dataverse.org/en/5.14/user/find-use-data.html#downloading-via-url</a></p>",
        "id": 472954212,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727375772
    },
    {
        "content": "<p>I just published this on the demo: <a href=\"https://doi.org/10.70122/FK2/NCTOFS\">https://doi.org/10.70122/FK2/NCTOFS</a></p>\n<p>Looks like restricting the file removes the download link display but I do know how to manually make a download like.</p>",
        "id": 472957025,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727376954
    },
    {
        "content": "<p>Yes, the Download URL shows at <a href=\"https://demo.dataverse.org/file.xhtml?persistentId=doi:10.70122/FK2/NCTOFS/4L3UVL\">https://demo.dataverse.org/file.xhtml?persistentId=doi:10.70122/FK2/NCTOFS/4L3UVL</a></p>",
        "id": 472958745,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727377687
    },
    {
        "content": "<p>No popup when you try to download the file. That's the difference.</p>",
        "id": 472958778,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727377725
    },
    {
        "content": "<p>What if you get rid of this popup?</p>\n<p><a href=\"/user_uploads/53090/xbN7MB-v4dvzITrd-4v-ZVj-/Screenshot-2024-09-26-at-3.09.07PM.png\">Screenshot 2024-09-26 at 3.09.07PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/xbN7MB-v4dvzITrd-4v-ZVj-/Screenshot-2024-09-26-at-3.09.07PM.png\" title=\"Screenshot 2024-09-26 at 3.09.07PM.png\"><img data-original-dimensions=\"1308x561\" src=\"/user_uploads/thumbnail/53090/xbN7MB-v4dvzITrd-4v-ZVj-/Screenshot-2024-09-26-at-3.09.07PM.png/840x560.webp\"></a></div>",
        "id": 472958870,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727377771
    },
    {
        "content": "<p>yes, get a pop-up if restricted.</p>",
        "id": 472961847,
        "sender_full_name": "jamie jamison",
        "timestamp": 1727379237
    },
    {
        "content": "<p>Right, but you can also get a popup if there are terms of use to agree to before downloading.</p>",
        "id": 472963653,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727380095
    },
    {
        "content": "<p>Maybe a \"bug\" (but I like it....), but something that \"works\" for files that have different terms of use (not CC-0) but are not \"restricted\", if you know the fileID, you can download the file.</p>\n<p>This dataset in demo....  <br>\n<a href=\"https://demo.dataverse.org/dataset.xhtml?persistentId=doi:10.70122/FK2/92XEEU\">https://demo.dataverse.org/dataset.xhtml?persistentId=doi:10.70122/FK2/92XEEU</a></p>\n<p>I have the terms CC-BY. No file URL shows up in UI, but if I know the fileid, I can use that ID to download the file.</p>\n<p>Using this command:<br>\n<code>curl https://demo.dataverse.org/api/datasets/:persistentId/?persistentId=doi:10.70122/FK2/92XEEU</code></p>\n<p>and then getting a fileID from the above output - this command downloads the file.<br>\n<code>wget https://demo.dataverse.org/api/access/datafile/2357504</code></p>",
        "id": 473119229,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1727445822
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599826\">@Sherry Lake</span> yes, that's this bug: File API download bypasses terms of use and guestbook <a href=\"https://github.com/IQSS/dataverse/issues/2911\">#2911</a></p>\n<p><span class=\"user-mention\" data-user-id=\"702711\">@Alejandra Tenorio</span> has been trying to fix it (but needs a \"go ahead\" from the core team). Please see her <a href=\"https://groups.google.com/g/dataverse-community/c/pu6190IQwGo/m/8TC-DQQTBAAJ\">post</a> and <a class=\"stream-topic\" data-stream-id=\"375707\" href=\"/#narrow/stream/375707-community/topic/No.20Restricted.20Files.20.2F.20Access.20conditions\">#community &gt; No Restricted Files / Access conditions</a> .</p>",
        "id": 473121074,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727446308
    },
    {
        "content": "<p>But then these CC-By files will not be able to be downloaded via API? Only the UI?</p>\n<p>Then there must be another way - popup, or notice via command line? to download them via API?</p>",
        "id": 473121665,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1727446496
    },
    {
        "content": "<p>And... am now reading the issue... should have done that first.</p>",
        "id": 473121990,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1727446578
    },
    {
        "content": "<p>No worries. Please ask over in <a class=\"stream-topic\" data-stream-id=\"375707\" href=\"/#narrow/stream/375707-community/topic/No.20Restricted.20Files.20.2F.20Access.20conditions\">#community &gt; No Restricted Files / Access conditions</a></p>",
        "id": 473123578,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1727447103
    }
]