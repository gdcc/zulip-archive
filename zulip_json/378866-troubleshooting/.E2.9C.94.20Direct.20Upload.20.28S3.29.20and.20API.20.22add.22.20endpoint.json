[
    {
        "content": "<p>Just a question trying to figure things out.</p>\n<p>We have direct upload (to S3). If I have a \"small\" file ~ 300MB, can I still use the simple API \"add\" endpoint for the file, <br>\nOR<br>\ndo I have to do the 3 steps as described on this page?<br>\n<a href=\"https://guides.dataverse.org/en/latest/developers/s3-direct-upload-api.html\">https://guides.dataverse.org/en/latest/developers/s3-direct-upload-api.html</a></p>\n<p>Is there a size max, where the 3-step routine has to be used, or will the simple \"add\" use non-direct (can it do that)?</p>\n<p>I use \"dvuploader\" so I don't have to think about the steps, but was wondering if my researchers would discover the simple \"add\" API first?</p>",
        "id": 450203601,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1720539296
    },
    {
        "content": "<p>I'm pretty sure you have to use the three step API.</p>\n<p>Maybe the docs for the simple API should mention this.</p>",
        "id": 450208506,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1720540322
    },
    {
        "content": "<p>As you say, if you use the UI or DVUploader (and I believe dvwebloader), you don't have to think about it.</p>",
        "id": 450208555,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1720540331
    },
    {
        "content": "<p>What happens if you try the simply API? Does it tell you \"sorry, you can't use this because direct upload is enabled?\"</p>",
        "id": 450209079,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1720540459
    },
    {
        "content": "<p>Oh.... you want me to test.... <span aria-label=\"stuck out tongue wink\" class=\"emoji emoji-1f61c\" role=\"img\" title=\"stuck out tongue wink\">:stuck_out_tongue_wink:</span> <br>\nI can do that. <img alt=\":dataverse_woman:\" class=\"emoji\" src=\"https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/44206.png\" title=\"dataverse woman\"> </p>\n<p>Also the documentt does mention it, in the simple \"add\" section, it says:</p>\n<blockquote>\n<p>Note that when a Dataverse installation is configured to use S3 storage with direct upload enabled, there is API support to send a file directly to S3. This is more complex and is described in theÂ <a href=\"https://guides.dataverse.org/en/latest/developers/s3-direct-upload-api.html\">Direct DataFile Upload/Replace API</a>Â guide.</p>\n</blockquote>\n<p>but how will the uploader know that a particular installation is direct upload?</p>",
        "id": 450215329,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1720541703
    },
    {
        "content": "<p>Hmm, it must do some sort of check. I'm not sure.</p>",
        "id": 450226971,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1720543977
    },
    {
        "content": "<p>Tested.....<br>\nWhen direct upload is configured - IF the file size is less than this JVM setting:  <code>dataverse.files.&lt;id&gt;.min-part-size</code><br>\n<em>default is 1GB</em><br>\nTHEN the simple API command works.</p>\n<p>BUT if the file size is larger that the \"part\" JVM option, the simple command just hangs.... so MUST use the 3-part way described here: <a href=\"https://guides.dataverse.org/en/latest/developers/s3-direct-upload-api.html\">https://guides.dataverse.org/en/latest/developers/s3-direct-upload-api.html</a></p>\n<p><strong>OR better use dvuploader!!</strong></p>",
        "id": 450965654,
        "sender_full_name": "Sherry Lake",
        "timestamp": 1720788843
    },
    {
        "content": "<p>Interesting. It's especially interesting that the simple upload API works when direct upload is enabled (if the file is small enough).</p>",
        "id": 450972170,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1720790035
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599826\">Sherry Lake</span> has marked this topic as resolved.</p>",
        "id": 451060725,
        "sender_full_name": "Notification Bot",
        "timestamp": 1720813590
    },
    {
        "content": "<p>Related: Feature Request: Restrict API to require direct uploads <a href=\"https://github.com/IQSS/dataverse/issues/10828\">#10828</a></p>",
        "id": 468875827,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1725904863
    }
]