[
    {
        "content": "<p>Errors like this are normal on <code>mvn docker:run</code>, right?</p>\n<div class=\"codehilite\"><pre><span></span><code>ERROR:  relation &quot;externaltooltype&quot; already exists\nSTATEMENT:  CREATE TABLE EXTERNALTOOLTYPE (ID  SERIAL NOT NULL, TYPE VARCHAR(255) NOT NULL, EXTERNALTOOL_ID BIGINT NOT NULL, PRIMARY KEY (ID))\nERROR:  relation &quot;index_externaltooltype_externaltool_id&quot; already exists\nSTATEMENT:  CREATE INDEX INDEX_EXTERNALTOOLTYPE_externaltool_id ON EXTERNALTOOLTYPE (externaltool_id)\n</code></pre></div>\n<p><a href=\"/user_uploads/53090/ny8zDFoIlDqPVPBcTize1RjP/Screenshot-2024-01-24-at-10.02.58-AM.png\">Screenshot-2024-01-24-at-10.02.58-AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/ny8zDFoIlDqPVPBcTize1RjP/Screenshot-2024-01-24-at-10.02.58-AM.png\" title=\"Screenshot-2024-01-24-at-10.02.58-AM.png\"><img src=\"/user_uploads/53090/ny8zDFoIlDqPVPBcTize1RjP/Screenshot-2024-01-24-at-10.02.58-AM.png\"></a></div>",
        "id": 417664323,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1706108748
    },
    {
        "content": "<p>Here's me trying to reassure <span class=\"user-mention\" data-user-id=\"651855\">@Leonhard Maylein</span> in 2015 that similar errors are normal: <a href=\"https://groups.google.com/g/dataverse-community/c/-ITgVIkxdEY/m/oW1tIVe9CQAJ\">https://groups.google.com/g/dataverse-community/c/-ITgVIkxdEY/m/oW1tIVe9CQAJ</a></p>",
        "id": 417666353,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1706109318
    },
    {
        "content": "<p>'That is to say, those exceptions are expected. I believe the \"CREATE INDEX\" and \"INSERT INTO SEQUENCE\" exceptions are normal as well. I know they scary, but I think they all have to do with the fact that we let Glassfish create database tables when the war file is deployed. I'm not sure how we would avoid this.'  (but Payara instead of Glassfish these days)</p>",
        "id": 417666634,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1706109387
    },
    {
        "content": "<p>As discussed in the container meeting just now, this is unfortunately normal. I'll move this topic out of <a class=\"stream\" data-stream-id=\"375812\" href=\"/#narrow/stream/375812-containers\">#containers</a> since it isn't specific to them.</p>",
        "id": 418104624,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1706196516
    },
    {
        "content": "<p>I'm just mentioning create-tables so I can find this topic again. We just talked about it again in the container meeting: <a href=\"https://docs.google.com/document/d/1yiuwS9Ig4qXnQeN1utPt75MUko6M_wRLHIfrCWQM_ZQ/edit?usp=sharing\">https://docs.google.com/document/d/1yiuwS9Ig4qXnQeN1utPt75MUko6M_wRLHIfrCWQM_ZQ/edit?usp=sharing</a></p>",
        "id": 420480378,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1707405644
    },
    {
        "content": "<p>This topic was mentioned during the CT WG call today again. There might be an easier fix than we expected to create that baseline before we shut down the \"create-tables\" JPA setting: <a href=\"https://documentation.red-gate.com/fd/baseline-migrations-184127465.html\">https://documentation.red-gate.com/fd/baseline-migrations-184127465.html</a></p>",
        "id": 420481568,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707405980
    },
    {
        "content": "<p>Huh... baseline migrations. Yes, this sounds like what we need. Thanks!</p>",
        "id": 420482587,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1707406225
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"648750\">@Juan Pablo Tosca Villanueva</span> check this out ^^</p>",
        "id": 420482652,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1707406241
    },
    {
        "content": "<p>\"Over the lifetime of a project, many database objects may be created and destroyed across many migrations which leaves behind a lengthy history of migrations that need to be applied in order to bring a new environment up to speed.</p>\n<p>Instead, you might wish to add a single, cumulative migration that represents the state of your database after all of those migrations have been applied without disrupting existing environments.</p>\n<p>Flyway gives you a way to achieve this using Baseline Migrations.\"</p>",
        "id": 420482700,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1707406255
    },
    {
        "content": "<p>JIm thinks this is a Teams/Enterprise feature...</p>",
        "id": 420485001,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707406918
    },
    {
        "content": "<p>I'd say we should create a little test project and try if we can apply such migrations if we figure out how to create them</p>",
        "id": 420485104,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707406945
    },
    {
        "content": "<p>There might be a chance that the creation is simplified by using a Teams license</p>",
        "id": 420485172,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707406967
    },
    {
        "content": "<p>Sure, sounds like a good experiment. Bummer if it's truly a proprietary feature. I love open source.</p>",
        "id": 420485321,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1707407019
    },
    {
        "content": "<p>But maybe the community version can still apply them... These migrations only apply to new deployments anyway, so it is just a matter of if the community edition will pick up the latest Bx_.sql script</p>",
        "id": 420485340,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707407025
    },
    {
        "content": "<p>If all of that does not help: for our use case it might be fine to use the \"beforeMigrate\" callback!</p>",
        "id": 420485507,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707407069
    },
    {
        "content": "<p>All we want is create the tables etc. Our script can check if they are already available</p>",
        "id": 420485561,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707407090
    },
    {
        "content": "<p>IMHO this isn't that complicated to do!</p>",
        "id": 420485627,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707407106
    },
    {
        "content": "<p>I mean, the use case described above makes total sense. Hundreds of migrations? Time for a new baseline!</p>",
        "id": 420485735,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1707407143
    },
    {
        "content": "<p>Absolutely!</p>",
        "id": 420485873,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707407172
    },
    {
        "content": "<p>All of this is worth a try and shouldn't be too hard to do</p>",
        "id": 420485946,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707407194
    },
    {
        "content": "<p>Good tech hours fodder, I'd say.</p>",
        "id": 420485993,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1707407211
    },
    {
        "content": "<p>Maybe after creating a little sample project to try out what's possible</p>",
        "id": 420486063,
        "sender_full_name": "Oliver Bertuch",
        "timestamp": 1707407231
    },
    {
        "content": "<p>We could add a lil' database to <a href=\"https://github.com/IQSS/dataverse-people\">https://github.com/IQSS/dataverse-people</a></p>",
        "id": 420486148,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1707407257
    }
]