[
    {
        "content": "<p>Hi everyone, I've just installed my first Dataverse.  I'm trying to delete a dataset in Draft Status but it got stucked with the blue circule going round and round.  The server log at payara doesnt show any messages related... or maybe they do...</p>\n<p>[2024-09-09T08:56:10.603-0600] [Payara 6.2023.8] [WARNING] [] [edu.harvard.iq.dataverse.util.BundleUtil] [tid: _ThreadID=77 _ThreadName=http-thread-pool::http-listener-1(5)] [timeMillis: 1725893770603] [levelValue: 900] [[<br>\n  Could not find key \"notification.typeDescription.GLOBUSUPLOADCOMPLETEDWITHERRORS\" in bundle file: ]]</p>\n<p>[2024-09-09T08:56:10.603-0600] [Payara 6.2023.8] [WARNING] [] [edu.harvard.iq.dataverse.util.BundleUtil] [tid: _ThreadID=77 _ThreadName=http-thread-pool::http-listener-1(5)] [timeMillis: 1725893770603] [levelValue: 900] [[<br>\n  Could not find key \"notification.typeDescription.GLOBUSDOWNLOADCOMPLETED\" in bundle file: ]]</p>\n<p>[2024-09-09T08:56:10.603-0600] [Payara 6.2023.8] [WARNING] [] [edu.harvard.iq.dataverse.util.BundleUtil] [tid: _ThreadID=77 _ThreadName=http-thread-pool::http-listener-1(5)] [timeMillis: 1725893770603] [levelValue: 900] [[<br>\n  Could not find key \"notification.typeDescription.GLOBUSDOWNLOADCOMPLETEDWITHERRORS\" in bundle file: ]]</p>\n<p><a href=\"/user_uploads/53090/onYo48g-RMgAMjoI6zf7YnoV/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/onYo48g-RMgAMjoI6zf7YnoV/image.png\" title=\"image.png\"><img data-original-dimensions=\"1117x457\" src=\"/user_uploads/thumbnail/53090/onYo48g-RMgAMjoI6zf7YnoV/image.png/840x560.webp\"></a></div><p>Thanks for your help</p>",
        "id": 468831809,
        "sender_full_name": "Guillermo Esteban Murillo Goussen",
        "timestamp": 1725895084
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"752995\">@Guillermo Esteban Murillo Goussen</span> weird. Are you using Globus?</p>",
        "id": 468847669,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725898107
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin 🐢</span> I guess no, I honestly dont know what Globus is</p>",
        "id": 468851163,
        "sender_full_name": "Guillermo Esteban Murillo Goussen",
        "timestamp": 1725898794
    },
    {
        "content": "<p>Ha, ok, just checking! I saw it there in the log. Hmm. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 468852412,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725898988
    },
    {
        "content": "<p>What if you create a new draft and then delete it? Does that work?</p>",
        "id": 468852526,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725899017
    },
    {
        "content": "<p>I tried again but this came to the server log</p>\n<p>[2024-09-10T10:57:33.678-0600] [Payara 6.2023.8] [WARNING] [] [org.glassfish.grizzly.http2.Http2Session] [tid: _ThreadID=76 _ThreadName=http-thread-pool::http-listener-1(4)] [timeMillis: 1725987453678] [levelValue: 900] [[</p>\n<p>Unable to write GOAWAY.  Terminating session.</p>\n<p>java.io.IOException: Connection reset by peer<br>\n    at java.base/sun.nio.ch.FileDispatcherImpl.write0(Native Method)<br>\n    at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)<br>\n    at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:132)<br>\n    at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:76)<br>\n    at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:53)....</p>\n<p>[2024-09-10T11:03:24.266-0600] [Payara 6.2023.8] [INFO] [] [edu.harvard.iq.dataverse.dataset.DatasetUtil] [tid: _ThreadID=74 _ThreadName=http-thread-pool::http-listener-1(2)] [timeMillis: 1725987804266] [levelValue: 800] [[</p>\n<p>Failed to delete dataset logo: /usr/local/payara6/glassfish/domains/domain1/files/20.500.14500/FK2/RGZEUU/dataset_logo_original]]</p>\n<p>[2024-09-10T11:18:44.995-0600] [Payara 6.2023.8] [INFO] [] [edu.harvard.iq.dataverse.DataverseHeaderFragment] [tid: _ThreadID=75 _ThreadName=http-thread-pool::http-listener-1(3)] [timeMillis: 1725988724995] [levelValue: 800] [[</p>\n<p>Sending user to = /dataverse.xhtml]]</p>\n<p>[2024-09-10T11:21:39.695-0600] [Payara 6.2023.8] [INFO] [] [edu.harvard.iq.dataverse.dataset.DatasetUtil] [tid: _ThreadID=76 _ThreadName=http-thread-pool::http-listener-1(4)] [timeMillis: 1725988899695] [levelValue: 800] [[</p>\n<p>Failed to delete dataset logo: /usr/local/payara6/glassfish/domains/domain1/files/20.500.14500/FK2/RGZEUU/dataset_logo_original]]</p>\n<p>[2024-09-10T11:22:32.638-0600] [Payara 6.2023.8] [WARNING] [] [edu.harvard.iq.dataverse.HandlenetServiceBean] [tid: _ThreadID=77 _ThreadName=http-thread-pool::http-listener-1(5)] [timeMillis: 1725988952638] [levelValue: 900] [[</p>\n<p>Caught exception trying to process lookup request</p>\n<p>HandleException (CANNOT_CONNECT_TO_SERVER) 86.111.195.107: java.net.SocketTimeoutException: Connect timed out<br>\n    at net.handle.hdllib.HandleResolver.sendRequestToService(HandleResolver.java:1087)<br>\n    at net.handle.hdllib.HandleResolver.getServiceInfoForNA(HandleResolver.java:693)<br>\n    at net.handle.hdllib.HandleResolver.getServiceInfo(HandleResolver.java:869)<br>\n    at net.handle.hdllib.HandleResolver.findLocalSites(HandleResolver.java:910)<br>\n    at net.handle.hdllib.HandleResolver.processRequestGlobally(HandleResolver.java:617)<br>\n    at net.handle.hdllib.HandleResolver.processRequest(HandleResolver.java:587)<br>\n    at net.handle.hdllib.HandleResolver.processRequest(HandleResolver.java:595)</p>\n<p>Caused by: HandleException (CANNOT_CONNECT_TO_SERVER) 86.111.195.107: java.net.SocketTimeoutException: Connect timed out<br>\n    at net.handle.hdllib.HandleResolver.sendHttpOrHttpsRequest(HandleResolver.java:2783)<br>\n    at net.handle.hdllib.HandleResolver.sendHttpRequest(HandleResolver.java:2702)<br>\n    at net.handle.hdllib.HandleResolver.sendRequestToInterface(HandleResolver.java:2163)<br>\n    at net.handle.hdllib.HandleResolver.sendRequestToServerByProtocol(HandleResolver.java:1847)<br>\n    at net.handle.hdllib.HandleResolver.sendRequestToServerByProtocol(HandleResolver.java:1712)<br>\n    at net.handle.hdllib.HandleResolver.sendRequestToServerInSiteByProtocol(HandleResolver.java:1447)<br>\n    at net.handle.hdllib.HandleResolver.sendRequestToSite(HandleResolver.java:1425)<br>\n    at net.handle.hdllib.HappyEyeballsResolver.sendRequestToSiteViaProtocol(HappyEyeballsResolver.java:209)<br>\n    at net.handle.hdllib.HappyEyeballsResolver.sendRequestToSites(HappyEyeballsResolver.java:176)<br>\n    at net.handle.hdllib.HappyEyeballsResolver.sendRequestAndSetResponseOrPublicException(HappyEyeballsResolver.java:152)<br>\n    at net.handle.hdllib.HappyEyeballsResolver.run(HappyEyeballsResolver.java:93)<br>\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)<br>\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)<br>\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)<br>\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)<br>\n    ... 1 more</p>\n<p>Caused by: java.net.SocketTimeoutException: Connect timed out</p>",
        "id": 469162121,
        "sender_full_name": "Guillermo Esteban Murillo Goussen",
        "timestamp": 1725989193
    },
    {
        "content": "<p>Are you using Handles? What version of Dataverse is this, please? And in server.log to do you see any line numbers for Dataverse code? (I don't see any yet.) Maybe you could post more of server.log.</p>",
        "id": 469171371,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725991061
    },
    {
        "content": "<p>I am trying also to configure dataverse to use handles yes.</p>\n<p>It is the latest version of Dataverse 6.3</p>",
        "id": 469174371,
        "sender_full_name": "Guillermo Esteban Murillo Goussen",
        "timestamp": 1725991796
    },
    {
        "content": "<p>Do you want to go ahead and open an issue about this?</p>",
        "id": 469174771,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725991923
    },
    {
        "content": "<p>(I'm still interested in seeing a line number from Dataverse, though, if possible.)</p>",
        "id": 469174923,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725991986
    },
    {
        "content": "<p><a href=\"/user_uploads/53090/o9EyVwX1p-EoWewPakvtItqH/server.log\">server.log</a></p>",
        "id": 469178801,
        "sender_full_name": "Guillermo Esteban Murillo Goussen",
        "timestamp": 1725993160
    },
    {
        "content": "<p><code>at edu.harvard.iq.dataverse.DatasetPage.deleteDataset(DatasetPage.java:2922)</code> Thanks!</p>",
        "id": 469179141,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725993282
    },
    {
        "content": "<p>Huh, but <a href=\"https://github.com/IQSS/dataverse/blob/v6.3/src/main/java/edu/harvard/iq/dataverse/DatasetPage.java#L2922\">https://github.com/IQSS/dataverse/blob/v6.3/src/main/java/edu/harvard/iq/dataverse/DatasetPage.java#L2922</a> doesn't make sense. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 469179682,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725993394
    },
    {
        "content": "<p>OptimisticLockException. Interesting.</p>",
        "id": 469180066,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725993510
    },
    {
        "content": "<p>I really don't now whats the problem because it happens wether Im creating a dataset or deleting it.  It always got stuck with the blue will spinning and then several minutes after... one of the datasets appears in draft status or the dataset desappears so the deleting worked but dont know when or how</p>",
        "id": 469180631,
        "sender_full_name": "Guillermo Esteban Murillo Goussen",
        "timestamp": 1725993639
    },
    {
        "content": "<p>So strange. I assume you started with a FAKE DOI provider. If you switch back to that, does the problem go away?</p>",
        "id": 469181221,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725993753
    },
    {
        "content": "<p>I didnt configured the fake doi identifier, I started whith the handle configuration from the very top of the installation<br>\nHow do I do that?<br>\n-Delete every jvm-option related to handle<br>\n-Delete the authority and the protocol<br>\n-Leave it like that or add jvm-optios for the fake id?</p>",
        "id": 469182083,
        "sender_full_name": "Guillermo Esteban Murillo Goussen",
        "timestamp": 1725993943
    },
    {
        "content": "<p>Something like that. It may have changed recently. This is how I do it in Docker: <a href=\"https://github.com/IQSS/dataverse/blob/v6.3/docker-compose-dev.yml#L54-L59\">https://github.com/IQSS/dataverse/blob/v6.3/docker-compose-dev.yml#L54-L59</a></p>",
        "id": 469184190,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725994377
    },
    {
        "content": "<p>Really I'm just wondering if this is related to handles or not. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 469184344,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725994404
    },
    {
        "content": "<p>I began with the handle configuration at the very begining.<br>\nWhen I tried to publish a dataset I got errors about the keys handle-passphrase or handle-dir not found.<br>\nI installed a handle server, followed the instructions, but then this errors appears I think they may be related</p>",
        "id": 469186863,
        "sender_full_name": "Guillermo Esteban Murillo Goussen",
        "timestamp": 1725994979
    },
    {
        "content": "<p>Yeah, it sounds like there's a good chance it's related. Please do feel free to create an issue. And if you do, please upload that server.log file.</p>",
        "id": 469195490,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1725997532
    }
]