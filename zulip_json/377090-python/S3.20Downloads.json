[
    {
        "content": "<p>A couple of months ago, <span class=\"user-mention\" data-user-id=\"598183\">@Oliver Bertuch</span> requested optimized S3 downloads that could be parallelized. Weâ€™ve identified potential libraries to achieve this, but Iâ€™m stuck figuring out the S3 URLs. I know these URLs are typically exposed through the redirect when using the DataAccess API, but Iâ€™m wondering if thereâ€™s a more efficient way to obtain them.</p>\n<p>My concern is that not all files will be stored in S3, so the download might fail on instances that use a different storage. Therefore, Iâ€™d like to differentiate cases and support S3 downloads whenever possible, and fall back to normal HTTP downloads using httpx in other cases.</p>\n<p>Or would you suggest using the redirect URL and checking if <code>s3</code> is in<code>storageIdentifier</code>is sufficient?</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Example DataFile Output</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"w\">        </span><span class=\"nt\">\"dataFile\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">          </span><span class=\"nt\">\"checksum\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"nt\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"MD5\"</span><span class=\"p\">,</span>\n<span class=\"w\">            </span><span class=\"nt\">\"value\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"7961fc2b94cc8cef2ae4d143021394e0\"</span>\n<span class=\"w\">          </span><span class=\"p\">},</span>\n<span class=\"w\">          </span><span class=\"nt\">\"contentType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"text/plain\"</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"creationDate\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"2022-01-30\"</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"fileAccessRequest\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"filename\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"DeactivationOfGlucoseOxidase_Host.omex\"</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"filesize\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">10743</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"friendlyType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Plain Text\"</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">90554</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"md5\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"7961fc2b94cc8cef2ae4d143021394e0\"</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"persistentId\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"doi:10.18419/DARUS-2469/1\"</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"rootDataFileId\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">-1</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"storageIdentifier\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"s3://fokus-dv-prod-1:17eac74da1d-96e7a66f41eb\"</span><span class=\"p\">,</span>\n<span class=\"w\">          </span><span class=\"nt\">\"tabularData\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span>\n<span class=\"w\">        </span><span class=\"p\">}</span>\n</code></pre></div>\n</div></div>",
        "id": 556851923,
        "sender_full_name": "Jan Range",
        "timestamp": 1763391302
    },
    {
        "content": "<p>Yeah, checking the storageIdentifier feels like the right way.</p>",
        "id": 556857762,
        "sender_full_name": "Philip Durbin ðŸš€",
        "timestamp": 1763392539
    }
]