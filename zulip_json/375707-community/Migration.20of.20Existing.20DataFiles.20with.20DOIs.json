[
    {
        "content": "<p>Hello Dataverse Community,</p>\n<p>Is there a way to migrate with the API (version 5.10) some DataFiles with an existing DOIs to a different existing installation ? (I means to a different Dataverse installation). I see in the API Documentation that is possible with the Datasets but the question remains for the DataFiles associated with it. <br>\nThks in advance for advices</p>",
        "id": 391904848,
        "sender_full_name": "Julien C",
        "timestamp": 1695127673
    },
    {
        "content": "<p>I would suggest digging into these migration scripts from Scholars Portal: <a href=\"https://groups.google.com/g/dataverse-community/c/PfKIZFxFZhE/m/2lC7QLzUBAAJ\">https://groups.google.com/g/dataverse-community/c/PfKIZFxFZhE/m/2lC7QLzUBAAJ</a></p>",
        "id": 391910486,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1695129407
    },
    {
        "content": "<p>Thanks for the link Philip, I will give it a try.</p>",
        "id": 391910992,
        "sender_full_name": "Julien C",
        "timestamp": 1695129554
    },
    {
        "content": "<p>I'm glad you asked on the list: <a href=\"https://groups.google.com/g/dataverse-community/c/NwIFODp4I0A/m/xrH422EuAAAJ\">https://groups.google.com/g/dataverse-community/c/NwIFODp4I0A/m/xrH422EuAAAJ</a> . Thanks!</p>",
        "id": 392525605,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1695391457
    },
    {
        "content": "<p>Still no answer, is anybody have a clue on that specific point ?</p>",
        "id": 395269910,
        "sender_full_name": "Julien C",
        "timestamp": 1696601974
    },
    {
        "content": "<p>I forget, did you also email <a href=\"mailto:support@dataverse.org\">support@dataverse.org</a> about this?</p>",
        "id": 395277018,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1696604173
    },
    {
        "content": "<p>Thank you Philip for your reply, i will do that too.</p>",
        "id": 395655493,
        "sender_full_name": "Julien C",
        "timestamp": 1696843518
    },
    {
        "content": "<p>I'm in a room with <span class=\"user-mention\" data-user-id=\"658065\">@Dimitri Szabo</span> talking about this. Jim Myers isn't sure if DOIs for files are supported or not.</p>",
        "id": 396340814,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1697134257
    },
    {
        "content": "<p>Thanks for your reply, Hello to everyone and to my french colleague.<br>\nIf you can give me confirmation or not on this crucial point it will help me.<br>\nRegards</p>",
        "id": 396513347,
        "sender_full_name": "Julien C",
        "timestamp": 1697206150
    },
    {
        "content": "<p>Sure. For now, would you be able to create an issue about this?</p>",
        "id": 396514063,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1697206370
    },
    {
        "content": "<p>Thanks for opening this: API Migration for DataFiles DOI how to do this ? (version 5.1x) <a href=\"https://github.com/IQSS/dataverse/issues/10008\">#10008</a></p>",
        "id": 396545739,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1697217728
    },
    {
        "content": "<p>This is not a necropost because I've not solved the \"issue\" with DataFiles DOIs.</p>\n<p>As an example for the community, maybe someone knows or had already done this.</p>\n<p>I can manage, between two same installations with same DOI authority, an update of DOI for a dataset.</p>\n<p>But it doesnt work for Datafiles because, when I'm trying to publish it fails: automatically it generates a lock on dataset in a dedicated database table. (I've try to delete the lock, it changes nothing, relocked automatically)</p>\n<p>And here its just for the same authority, I'm wondering if it will be different with the French RDG server who has a  different provider root authority.</p>\n<p>Please look at this simple SQL capture example where i'm trying to update manually a DataFile with ID 8232 it fails when trying to publish after reindexing. (Solr)</p>\n<p>Maybe i'm doing this the wrong way, if someone can tell me how to do that with the publication status to succeed it will helps a lot to configure out a scripted version with Datacite provider.</p>\n<p>Have a nice day,</p>\n<p>Regards<br>\n<a href=\"/user_uploads/53090/WGPXu7OrohSn3cDyjCwiBdrU/screenshot_db_provider_identifier_DOI_Datafiles.jpg\">screenshot_db_provider_identifier_DOI_Datafiles.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/53090/WGPXu7OrohSn3cDyjCwiBdrU/screenshot_db_provider_identifier_DOI_Datafiles.jpg\" title=\"screenshot_db_provider_identifier_DOI_Datafiles.jpg\"><img src=\"/user_uploads/53090/WGPXu7OrohSn3cDyjCwiBdrU/screenshot_db_provider_identifier_DOI_Datafiles.jpg\"></a></div>",
        "id": 400108985,
        "sender_full_name": "Julien C",
        "timestamp": 1699008655
    },
    {
        "content": "<p>Thanks I just linked from <a href=\"https://github.com/IQSS/dataverse/issues/10008\">#10008</a> to this update about locks.</p>",
        "id": 400123001,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1699014139
    },
    {
        "content": "<p>When i change into SQL the identifier for the dataset and publish without files it works (ok this an update to provider Datacite)<br>\nBut When I add Datafiles and try to do the same thing, the publication of the Dataset failed and a lock is generated into the DatasetLock table.<br>\nHow can I bypass this lock to \"force\" the update of the Datafiles DOIs too ?</p>\n<p><span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin</span> <br>\nCould it be possible to have more details on how the File Validation is performed when a dataset is published please ?</p>\n<p>In table Datasetlock I still have \"FileValidationFailed\" and I think i have tried almost all ideas ...<br>\nFor each Datafiles the fields: authority, identifier, identifierregistered have been updated and this is not working.<br>\nI have tried to change the status of DOI with Datacite: pass to 'findable' to 'registered'... change nothing.</p>\n<p>A little help please, i need a Dataverse SQL guru here :-)</p>",
        "id": 400542273,
        "sender_full_name": "Julien C",
        "timestamp": 1699280788
    },
    {
        "content": "<p>Hello there,</p>\n<p>Atm i'm running some tests in order to figure out to force the DOIs DataFiles to be migrated on target server.</p>\n<p>I have done some modifications on the target server in SQL but it doesnt work for DataFiles. When publishing the lock in table 'Datasetlock\" appears.<br>\nYou can remove the lock but nothing changed. The dataset with DOIs Datafiles cannot be published.</p>\n<p>2) Using the Migration API: I start migration, update informations with Datafiles but new DOIs are attributed when published. This is not what I want. Keep the existing DOIs is essential here.</p>\n<p>3) I have tried to initialize the migration of a Dataset and edit the SQL just for the DataFiles includes with DOIs, but when i try to use the 'releasemigrated' command from the Migration API, i got a similar response to my SQL Tests: </p>\n<p>\"status\":\"ERROR\",\"message\":\"Dataset Version Update failed. Changes are still in the DRAFT version. - edu.harvard.iq.dataverse.engine.command.exception.CommandException: This dataset may not be published due to an error when contacting the &lt;a href=http://status.datacite.org target=\\\"_blank\\\"/&gt; DataCite &lt;/a&gt; Service. Please try again.\"}</p>\n<p>My question is simple how can integrate the migration of Datafiles to keep the existing DOIs attributed on the target server ?</p>",
        "id": 400910186,
        "sender_full_name": "Julien C",
        "timestamp": 1699437631
    },
    {
        "content": "<p>It might take some development work. Someone probably needs to work on this issue you opened, I mean: API Migration for DataFiles DOI how to do this ? (version 5.1x) <a href=\"https://github.com/IQSS/dataverse/issues/10008\">#10008</a></p>",
        "id": 400944923,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1699450387
    },
    {
        "content": "<p>Hello Dataverse community,</p>\n<p>Just to give you an update on this.<br>\nI am still unable to publish/migrate to RDG installation a dataset with DataFiles with DOI attached.<br>\nThe migration API gives me this kind of response:</p>\n<blockquote>\n<p>(500, {'status': 'ERROR', 'message': 'Dataset Version Update failed. Changes are still in the DRAFT version. - edu.harvard.iq.dataverse.engine.command.exception.CommandException: This dataset may not be published due to an error when contacting the &lt;a href=\"<a href=\"http://status.datacite.org\">http://status.datacite.org</a>\" target=\"_blank\"/&gt; DataCite &lt;/a&gt; Service. Please try again.'})</p>\n</blockquote>\n<p>The RDG dataverse installation is a little bit more explicite with an email with detailed error:</p>\n<blockquote>\n<p>... could not be published due to a failure to register, or update the Global Identifier for the dataset or one <strong>of the files in it</strong>. Contact support if this continues to happen.</p>\n</blockquote>\n<p>If dataverse community or support can propose a workaround or valid process to migrate with DataFiles and publish on a target server (including SQL process), I'm listening !</p>\n<p>Thanks in advance for help or advice (need \"dataverse guru\" here please)<br>\nRegards</p>",
        "id": 406096055,
        "sender_full_name": "Julien C",
        "timestamp": 1701793251
    },
    {
        "content": "<p>Right, and way back in September you asked here: <a href=\"https://groups.google.com/g/dataverse-community/c/NwIFODp4I0A/m/xrH422EuAAAJ\">https://groups.google.com/g/dataverse-community/c/NwIFODp4I0A/m/xrH422EuAAAJ</a></p>",
        "id": 406099995,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1701794204
    },
    {
        "content": "<p>Perhaps you should post again to that thread? I'm not sure what to tell you.</p>",
        "id": 406100096,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1701794226
    },
    {
        "content": "<p>Hello everyone, hope you are well</p>\n<p>I would like to know if there is any way to migrate datafiles with the same DOI between different Dataverse instances. I have migrated the Datasets keeping the same DOI and I need to do the same with the datafiles. Is there any process, script or module I can use?</p>",
        "id": 481377056,
        "sender_full_name": "Santiago Florez",
        "timestamp": 1731095258
    },
    {
        "content": "<p>Hmm, that's a good question. I hope it works. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 481378276,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1731095867
    },
    {
        "content": "<p>I would suggest asking at <a href=\"https://groups.google.com/g/dataverse-community\">https://groups.google.com/g/dataverse-community</a></p>\n<p>There are about five times more people there.</p>",
        "id": 481378376,
        "sender_full_name": "Philip Durbin 🚀",
        "timestamp": 1731095898
    },
    {
        "content": "<p>Ok, <span class=\"user-mention\" data-user-id=\"598112\">@Philip Durbin 🐉</span>  thanks for answer <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span> . I'll do. Have a good day.</p>",
        "id": 481381003,
        "sender_full_name": "Santiago Florez",
        "timestamp": 1731097277
    }
]