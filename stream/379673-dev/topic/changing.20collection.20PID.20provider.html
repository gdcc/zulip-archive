<html>
<head><meta charset="utf-8"><title>changing collection PID provider Â· dev Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/index.html">dev</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html">changing collection PID provider</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="432850491"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432850491" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vera Clemens <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432850491">(Apr 12 2024 at 07:49)</a>:</h4>
<p>Hi! I am very happy to see the support for multiple PID providers in 6.2. Right now I am looking for a way to set the PID provider for a dataverse via API. Maybe I have looked in the wrong places, but I didn't find anything. Only for datasets/datafiles: <a href="https://guides.dataverse.org/en/latest/api/native-api.html#configure-the-pid-generator-a-dataset-uses-if-enabled">https://guides.dataverse.org/en/latest/api/native-api.html#configure-the-pid-generator-a-dataset-uses-if-enabled</a></p>
<p>Is it possible for dataverses as well? Thank you!</p>



<a name="432855742"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432855742" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432855742">(Apr 12 2024 at 08:23)</a>:</h4>
<p>It looks like setting the PID provider for a collection is only possible via UI for now. It seems to have been overlooked by us to add an Admin API endpoint like we have for the storage driver of a collection.</p>



<a name="432856091"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432856091" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432856091">(Apr 12 2024 at 08:24)</a>:</h4>
<p>I'll ping folks on Slack, but I fear this will be released with 6.3. Usually a patch release is only done when we find very critical bugs.</p>



<a name="432869366"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432869366" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vera Clemens <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432869366">(Apr 12 2024 at 09:50)</a>:</h4>
<p>Aw, I see. Thanks for checking.</p>



<a name="432869690"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432869690" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vera Clemens <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432869690">(Apr 12 2024 at 09:52)</a>:</h4>
<p>Another question regarding multiple PID providers, is it possible at all to change the PID provider of a dataset after it has been created? Example: I moved a dataset from a Permalink dataverse to a DOI dataverse, but the dataset still has a Permalink.  Is it possible for that dataset to lose the Permalink and receive a DOI, without re-creating it?</p>



<a name="432869943"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432869943" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432869943">(Apr 12 2024 at 09:54)</a>:</h4>
<p>I don't think that's possible.</p>



<a name="432870003"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432870003" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432870003">(Apr 12 2024 at 09:54)</a>:</h4>
<p>It kinda violates the principle that a PID is permanent...</p>



<a name="432870076"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432870076" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432870076">(Apr 12 2024 at 09:55)</a>:</h4>
<p>There might be an exception with the FAKE and PermaLink providers, but that has not been put into code</p>



<a name="432870103"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432870103" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432870103">(Apr 12 2024 at 09:55)</a>:</h4>
<p>As far as I know, that is</p>



<a name="432870688"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432870688" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vera Clemens <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432870688">(Apr 12 2024 at 09:59)</a>:</h4>
<p>Hmm. Yes. In our use case, we would like to optionally mint DOIs for datasets, otherwise only a Permalink. So the default would be to receive a Permalink, with the option to  receive a DOI instead or "upgrade" to a DOI later. (The Permalink would actually also continue to exist, but afaik Dataverse doesn't support multiple PIDs per dataset.)</p>



<a name="432871133"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432871133" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vera Clemens <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432871133">(Apr 12 2024 at 10:01)</a>:</h4>
<p>If it were possible to change the PID provider of a dataset from FAKE or Permalink to DOI, that would be very nice. Is this something that might be put into code, you think?</p>



<a name="432871233"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432871233" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432871233">(Apr 12 2024 at 10:02)</a>:</h4>
<p>No API for this? <img alt=":doh:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/48103.png" title="doh"></p>



<a name="432871234"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432871234" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432871234">(Apr 12 2024 at 10:02)</a>:</h4>
<blockquote>
<p>In our use case, we would like to optionally mint DOIs for datasets, otherwise only a Permalink.</p>
</blockquote>
<p>That is possible: everything that needs a real DOI goes into a DOI-PID-provider enabled collection and permalink stays the default provider for the instance.</p>



<a name="432871367"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432871367" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432871367">(Apr 12 2024 at 10:03)</a>:</h4>
<blockquote>
<p>with the option to receive a DOI instead or "upgrade" to a DOI later</p>
</blockquote>
<p>Feel free to open an issue for this feature request</p>



<a name="432871632"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432871632" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432871632">(Apr 12 2024 at 10:04)</a>:</h4>
<blockquote>
<p>afaik Dataverse doesn't support multiple PIDs per dataset</p>
</blockquote>
<p>We kind of do. We allow "alternative identifiers", but obviously these are unmanaged. On the other hand: a permalink thing is not necessary to manage, as the metadata is not going anywhere outside the instance.</p>



<a name="432872037"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432872037" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432872037">(Apr 12 2024 at 10:06)</a>:</h4>
<blockquote>
<p>something that might be put into code, you think?</p>
</blockquote>
<p>I don't see why not. It will require extending the DOI provider interface with sth like "allowMigration" so no one moves real stuff to other real stuff and trips over. Migrating datasets from FAKE to a real provider after some initial demo phase etc sounds very reasonable to me, so I don't see why it shouldn't happen.</p>



<a name="432872292"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432872292" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432872292">(Apr 12 2024 at 10:07)</a>:</h4>
<p>Obviously: if you want such a feature and you can contribute a PR it speeds up things. Please let us know in the issue description.</p>



<a name="432880829"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432880829" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432880829">(Apr 12 2024 at 11:09)</a>:</h4>
<p><span class="user-mention" data-user-id="616555">@Vera Clemens</span> Jims says this about migrating PIDs on the internal Slack:</p>
<blockquote>
<p>As for migrating PIDs, there is no support for changing the PID of a dataset, aside from editing in the db, but that's probably not the only model (presumably people are referencing the existing PID). What is supported now is migrating a dataset into Dataverse with a PID that doesn't match the local protocol/authority/shoulder, and either 1) adding a new provider that matches the protocol/authority/shoulder to allow that dataset to be managed, or 2) asking DataCite to move that specific PID(s) to the existing account and adding those additional PIDs to the managed list for the existing provider (which would then work for the original protocol/authority/shoulder plus only the specific PIDs listed that don't match the pattern.</p>
</blockquote>



<a name="432880991"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432880991" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432880991">(Apr 12 2024 at 11:10)</a>:</h4>
<p>Again, please feel free to create more feature requests and discuss possible code contributions! <span aria-label="smiley cat" class="emoji emoji-1f63a" role="img" title="smiley cat">:smiley_cat:</span></p>



<a name="432906556"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/432906556" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#432906556">(Apr 12 2024 at 13:42)</a>:</h4>
<p><span class="user-mention" data-user-id="616555">@Vera Clemens</span> I see Oliver already encouraged you to open an issue. I'll just echo that. We've been talking about it <a href="https://iqss.slack.com/archives/C010LA04BCG/p1712910371351689">in Slack</a> and we all agree we need this.</p>



<a name="433312076"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433312076" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vera Clemens <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433312076">(Apr 15 2024 at 14:51)</a>:</h4>
<p>I have opened two issues for what we have discussed here: <a href="https://github.com/IQSS/dataverse/issues/10497">https://github.com/IQSS/dataverse/issues/10497</a> and <a href="https://github.com/IQSS/dataverse/issues/10496">https://github.com/IQSS/dataverse/issues/10496</a></p>



<a name="433466887"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433466887" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433466887">(Apr 16 2024 at 08:17)</a>:</h4>
<p><span class="user-mention" data-user-id="598112">@Philip Durbin</span> <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span>  I believe the current implementation of multiple PID provider has an inconvenient bug.<br>
There is an API to move an unpublished dataset from one dataverse to another. Assuming both dataverses have different PID providers configured. Which PID provider do we expect to mint the DOI? IMHO it shall be the <code>new</code> parent, i.e. the one it was moved to.  Hence, the PID properties must be altered during the move operation, right?</p>



<a name="433469595"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433469595" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433469595">(Apr 16 2024 at 08:33)</a>:</h4>
<p>Nope, the PID will stay consistent.</p>



<a name="433469669"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433469669" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433469669">(Apr 16 2024 at 08:33)</a>:</h4>
<p>Anything already minted will not be changed</p>



<a name="433470157"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433470157" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433470157">(Apr 16 2024 at 08:36)</a>:</h4>
<p>An unpublished dataset does not have a minted DOI, does it?</p>



<a name="433470207"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433470207" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433470207">(Apr 16 2024 at 08:36)</a>:</h4>
<p>Oh well yeah that is a corner case</p>



<a name="433470237"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433470237" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433470237">(Apr 16 2024 at 08:37)</a>:</h4>
<p>From the data model perspective it has though...</p>



<a name="433470279"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433470279" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433470279">(Apr 16 2024 at 08:37)</a>:</h4>
<p>I'm looking through the code to learn what would happen</p>



<a name="433470592"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433470592" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433470592">(Apr 16 2024 at 08:39)</a>:</h4>
<p>So we are talking about this case: the dataset has not published, the create time for the PID is null. <a href="https://github.com/poikilotherm/dataverse/blob/222b326aab6be19be9d7bc8907504801bc362343/src/main/java/edu/harvard/iq/dataverse/engine/command/impl/FinalizeDatasetPublicationCommand.java#L101-L101">https://github.com/poikilotherm/dataverse/blob/222b326aab6be19be9d7bc8907504801bc362343/src/main/java/edu/harvard/iq/dataverse/engine/command/impl/FinalizeDatasetPublicationCommand.java#L101-L101</a></p>



<a name="433470654"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433470654" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433470654">(Apr 16 2024 at 08:39)</a>:</h4>
<p>So we're now looking at this: <a href="https://github.com/poikilotherm/dataverse/blob/222b326aab6be19be9d7bc8907504801bc362343/src/main/java/edu/harvard/iq/dataverse/engine/command/impl/AbstractDatasetCommand.java#L156-L156">https://github.com/poikilotherm/dataverse/blob/222b326aab6be19be9d7bc8907504801bc362343/src/main/java/edu/harvard/iq/dataverse/engine/command/impl/AbstractDatasetCommand.java#L156-L156</a></p>



<a name="433470824"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433470824" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433470824">(Apr 16 2024 at 08:40)</a>:</h4>
<p>So the provider will be looked up from the PID that has been assigned when the dataset was created</p>



<a name="433470859"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433470859" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433470859">(Apr 16 2024 at 08:40)</a>:</h4>
<p>So it will still use the provider that was selected on creation</p>



<a name="433471004"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433471004" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433471004">(Apr 16 2024 at 08:41)</a>:</h4>
<p>So this definitely is a corner case. Let's see what's in MoveDatasetCommand about this</p>



<a name="433471208"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433471208" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433471208">(Apr 16 2024 at 08:42)</a>:</h4>
<p>I agree with you that things that once minted shall not be altered! However, tracing minting issues and configuration management of moved datasets will be a mess...but thats another story. This is possible a special case of a previous configured provider is no longer available...</p>
<p><span class="user-mention" data-user-id="616555">@Vera Clemens</span> is currently hacking some unit/integration tests to see whats happening.</p>



<a name="433471243"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433471243" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433471243">(Apr 16 2024 at 08:42)</a>:</h4>
<p>Jupp, nothing in that command dealing with migrating the PID provider.</p>



<a name="433471494"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433471494" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433471494">(Apr 16 2024 at 08:43)</a>:</h4>
<p><span class="user-mention" data-user-id="616555">@Vera Clemens</span> go go go! I would love to see some tests for this! It would be great to see some BDD testing here. Describing the scenario and forming it into a test...</p>



<a name="433472119"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433472119" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433472119">(Apr 16 2024 at 08:47)</a>:</h4>
<p>It would be really great to see some <a href="https://cucumber.io/docs/installation/java/">Cucumber</a> around!</p>



<a name="433472213"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433472213" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433472213">(Apr 16 2024 at 08:47)</a>:</h4>
<p>We have so many tests, but they would benefit a lot from story driven testing</p>



<a name="433473005"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433473005" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433473005">(Apr 16 2024 at 08:52)</a>:</h4>
<p>Is it a bug or a feature? IMHO we need to thing about some edge scenarios and at least document the expected behaviour.  I have those cases in mind:  a) removed PID provider, thats was used to mint resources - what happens during publication of an update? b) moved minted PIDs  to other dataverse - what happen if I publish an updated version 1) provider still present and 2) provider no longer present (analog to a)  and 3) moved non-minted datasets to other dataverse - which PID provider is used?</p>



<a name="433473490"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433473490" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433473490">(Apr 16 2024 at 08:55)</a>:</h4>
<p>You're right, this should be documented somewhere.</p>



<a name="433473526"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433473526" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433473526">(Apr 16 2024 at 08:55)</a>:</h4>
<p>I'm not sure if there is a design document somewhere, I might have lost the link</p>



<a name="433473633"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433473633" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433473633">(Apr 16 2024 at 08:56)</a>:</h4>
<p><span class="user-mention" data-user-id="598112">@Philip Durbin</span> <span class="user-mention" data-user-id="690603">@Gustavo Durand</span> another reason to make those open, at least after the implementation is done...</p>



<a name="433473701"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433473701" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433473701">(Apr 16 2024 at 08:56)</a>:</h4>
<p>(Maybe even shape them into Architecture Decision Records?)</p>



<a name="433473753"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433473753" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433473753">(Apr 16 2024 at 08:56)</a>:</h4>
<p>The US is not awake yet, lets pester them once they are around</p>



<a name="433473971"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433473971" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433473971">(Apr 16 2024 at 08:58)</a>:</h4>
<p>Maybe we can create a PID FAQ somewhere in the docs? Assuming lay/ non-technical users have the same questions and are  overwhelmed with technical details in the design documents.</p>



<a name="433474048"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433474048" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433474048">(Apr 16 2024 at 08:58)</a>:</h4>
<p>Sounds like a great addition to the Admin Guide. Usually moving datasets is admin only</p>



<a name="433526709"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433526709" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433526709">(Apr 16 2024 at 13:48)</a>:</h4>
<p>With DataCite anyway, the DOI is "registered" (reserved) on the DataCite side when a draft dataset is created in Dataverse.</p>
<p>Researchers might put this DOI in their publication. So I think it would be potentially surprising to them if the DOI/PID changes.</p>
<p>Once the DOI is published, it changes state from "registered" to "findable". Please see also <a href="https://support.datacite.org/docs/doi-states">https://support.datacite.org/docs/doi-states</a></p>



<a name="433532553"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433532553" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433532553">(Apr 16 2024 at 14:14)</a>:</h4>
<p>Further up in this discussion I said this might be a feature depending on the provider</p>



<a name="433696814"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433696814" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433696814">(Apr 17 2024 at 08:05)</a>:</h4>
<p>So DRAFTS in dataverse are <code>registered</code> with datacite and thus are already present via the handle system and subsequently cannot be deleted anymore?  I assumed they are just draft records  with in datacite, and are deleted if the dataset is deleted in dataverse. What happens with the DOI when a draft is deleted?</p>



<a name="433698582"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433698582" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433698582">(Apr 17 2024 at 08:14)</a>:</h4>
<p>Registered != published. A DataCite DOI in registered mode is not discoverable and still deletable</p>



<a name="433698636"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433698636" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433698636">(Apr 17 2024 at 08:14)</a>:</h4>
<p><a href="https://github.com/IQSS/dataverse/blob/d9a79228ef6776aff155f8d8a03349eb4f06751d/src/main/java/edu/harvard/iq/dataverse/pidproviders/doi/datacite/DataCiteDOIProvider.java#L89">https://github.com/IQSS/dataverse/blob/d9a79228ef6776aff155f8d8a03349eb4f06751d/src/main/java/edu/harvard/iq/dataverse/pidproviders/doi/datacite/DataCiteDOIProvider.java#L89</a></p>



<a name="433698664"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433698664" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433698664">(Apr 17 2024 at 08:14)</a>:</h4>
<p>Honestly I'm not sure what happens <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span></p>



<a name="433698678"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433698678" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433698678">(Apr 17 2024 at 08:15)</a>:</h4>
<p><a href="https://github.com/IQSS/dataverse/blob/d9a79228ef6776aff155f8d8a03349eb4f06751d/src/main/java/edu/harvard/iq/dataverse/pidproviders/doi/datacite/DataCiteDOIProvider.java#L140">https://github.com/IQSS/dataverse/blob/d9a79228ef6776aff155f8d8a03349eb4f06751d/src/main/java/edu/harvard/iq/dataverse/pidproviders/doi/datacite/DataCiteDOIProvider.java#L140</a></p>



<a name="433698761"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433698761" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433698761">(Apr 17 2024 at 08:15)</a>:</h4>
<p>registered != publihsed but also registered != draft</p>



<a name="433698959"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433698959" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433698959">(Apr 17 2024 at 08:16)</a>:</h4>
<p>From this code snippet it assume its a DRAFT record and not a REGISTERED record. This means it can be deleted...</p>



<a name="433699233"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433699233" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433699233">(Apr 17 2024 at 08:17)</a>:</h4>
<p>And if its only a DRAFT, it shall not be used in any publication or published content. Thus, we can delete and create a new DOI according to another DOI-Provider configuration.</p>



<a name="433699268"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433699268" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433699268">(Apr 17 2024 at 08:18)</a>:</h4>
<p><a href="https://support.datacite.org/docs/doi-states">https://support.datacite.org/docs/doi-states</a></p>



<a name="433699397"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433699397" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433699397">(Apr 17 2024 at 08:18)</a>:</h4>
<p>Reserving in Dataverse means draft state at DataCite</p>



<a name="433699435"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433699435" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433699435">(Apr 17 2024 at 08:18)</a>:</h4>
<p>IIRC</p>



<a name="433699453"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433699453" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433699453">(Apr 17 2024 at 08:18)</a>:</h4>
<p>Let me check</p>



<a name="433699525"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433699525" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433699525">(Apr 17 2024 at 08:19)</a>:</h4>
<p>Yes. <a href="https://github.com/IQSS/dataverse/blob/d9a79228ef6776aff155f8d8a03349eb4f06751d/src/main/java/edu/harvard/iq/dataverse/pidproviders/doi/datacite/DataCiteDOIProvider.java#L89">https://github.com/IQSS/dataverse/blob/d9a79228ef6776aff155f8d8a03349eb4f06751d/src/main/java/edu/harvard/iq/dataverse/pidproviders/doi/datacite/DataCiteDOIProvider.java#L89</a></p>



<a name="433699628"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433699628" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433699628">(Apr 17 2024 at 08:19)</a>:</h4>
<p>That is a good thing, yet a bit confusing.</p>



<a name="433699710"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433699710" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433699710">(Apr 17 2024 at 08:20)</a>:</h4>
<p><a href="https://github.com/IQSS/dataverse/blob/d9a79228ef6776aff155f8d8a03349eb4f06751d/src/main/java/edu/harvard/iq/dataverse/pidproviders/doi/datacite/DataCiteDOIProvider.java#L195"><code>publicizeIdentifier()</code></a> is used to switch from draft to findable.</p>



<a name="433700200"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433700200" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433700200">(Apr 17 2024 at 08:23)</a>:</h4>
<p>This means, we could alter the moveDatasetCommand to delete the DRAFT DOI of one provider and create a new draft with another provider, such that configured PID provider of the target dataverse is used.</p>



<a name="433700892"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433700892" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433700892">(Apr 17 2024 at 08:26)</a>:</h4>
<p>Please create a feature request if not yet existing <span aria-label="smile cat" class="emoji emoji-1f638" role="img" title="smile cat">:smile_cat:</span></p>



<a name="433703380"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433703380" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433703380">(Apr 17 2024 at 08:40)</a>:</h4>
<p>Already created I assume, but as said Vera is on the issue and will create some tests for it. This is not the only edge case we need to think of.</p>



<a name="433703493"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433703493" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433703493">(Apr 17 2024 at 08:41)</a>:</h4>
<p>It might be good to talk about this at a future tech hour discussion <span class="user-mention" data-user-id="690603">@Gustavo Durand</span> <span class="user-mention" data-user-id="598112">@Philip Durbin</span></p>



<a name="433722531"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433722531" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433722531">(Apr 17 2024 at 10:27)</a>:</h4>
<p>Sure, but again, please warn the user:</p>
<p>"Are you sure you want to change the PID of this dataset? If you put the dataset's original PID in your unpublished paper, please update it!"</p>



<a name="433750752"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433750752" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433750752">(Apr 17 2024 at 13:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin</span> <a href="#narrow/stream/379673-dev/topic/changing.20dataverse.20PID.20provider.20via.20API/near/433722531">said</a>:</p>
<blockquote>
<p>Sure, but again, please warn the user:</p>
<p>"Are you sure you want to change the PID of this dataset? If you put the dataset's original PID in your unpublished paper, please update it!"</p>
</blockquote>
<p>Is there an UI feature to move a dataset?</p>



<a name="433752911"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433752911" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433752911">(Apr 17 2024 at 13:11)</a>:</h4>
<p>Yes. It's superuser-only right now. Screenshots:</p>
<p><a href="/user_uploads/53090/R6VAAyAJKi3sqSit4Z8Kx69V/dashboard.png">dashboard.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/R6VAAyAJKi3sqSit4Z8Kx69V/dashboard.png" title="dashboard.png"><img src="/user_uploads/53090/R6VAAyAJKi3sqSit4Z8Kx69V/dashboard.png"></a></div><p><a href="/user_uploads/53090/ykXotOp65N0JFKK5hrFTUMTd/move-dataset.png">move-dataset.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/ykXotOp65N0JFKK5hrFTUMTd/move-dataset.png" title="move-dataset.png"><img src="/user_uploads/53090/ykXotOp65N0JFKK5hrFTUMTd/move-dataset.png"></a></div><p>Docs: <a href="https://guides.dataverse.org/en/6.2/admin/dashboard.html#move-data">https://guides.dataverse.org/en/6.2/admin/dashboard.html#move-data</a></p>



<a name="433753183"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433753183" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433753183">(Apr 17 2024 at 13:12)</a>:</h4>
<p>Thanks, I've never noticed this button</p>



<a name="433755289"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433755289" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433755289">(Apr 17 2024 at 13:21)</a>:</h4>
<p>Would this call-out/documentation be sufficient and describe the intended behaviour of the system?  "This function can be used to transfer a dataset from one dataverse to another. The PID settings of the target dataverse become active when an unpublished (i.e. draft) dataset is moved to another dataverse. This invalidates the existing PID and creates a new one. If the PID has already been in use outside the system, it will have to be adjusted. The PID configuration is not adjusted for dataset that have already been published."</p>



<a name="433755991"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433755991" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433755991">(Apr 17 2024 at 13:24)</a>:</h4>
<p>It certainly helps! My concern is... is the dataset author in the loop? Do they know what the superuser is up to?</p>



<a name="433756675"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433756675" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433756675">(Apr 17 2024 at 13:27)</a>:</h4>
<p>Fair enough, but I imagine this function is performed as part of a service request on behalf of a user.  We could add a notification to inform the user about the performed change.</p>



<a name="433756851"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433756851" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433756851">(Apr 17 2024 at 13:28)</a>:</h4>
<p>Sure, that makes sense.</p>



<a name="433757013"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433757013" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433757013">(Apr 17 2024 at 13:28)</a>:</h4>
<p>At some point we should summarize in <a href="https://github.com/IQSS/dataverse/issues/10497">#10497</a></p>



<a name="433757175"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433757175" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433757175">(Apr 17 2024 at 13:29)</a>:</h4>
<p>This could something like: <code>The dataset [] was moved from [] to []. Since it wasn't published the planned PID changed to []. Â If the former PID has already been in use outside the system, it will have to be adjusted.</code></p>



<a name="433757339"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433757339" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433757339">(Apr 17 2024 at 13:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin</span> <a href="#narrow/stream/379673-dev/topic/changing.20dataverse.20PID.20provider.20via.20API/near/433757013">said</a>:</p>
<blockquote>
<p>At some point we should summarize in <a href="https://github.com/IQSS/dataverse/issues/10497">#10497</a></p>
</blockquote>
<p>This is another feature request.</p>



<a name="433757344"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433757344" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433757344">(Apr 17 2024 at 13:30)</a>:</h4>
<p>Sure, I would show the old PID as well.</p>



<a name="433757422"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433757422" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433757422">(Apr 17 2024 at 13:30)</a>:</h4>
<p>Oh, well, maybe we need a new issue?</p>



<a name="433757506"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433757506" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433757506">(Apr 17 2024 at 13:31)</a>:</h4>
<p>It different than this one: set dataverse PID provider via API <a href="https://github.com/IQSS/dataverse/issues/10496">#10496</a></p>



<a name="433758333"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433758333" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433758333">(Apr 17 2024 at 13:34)</a>:</h4>
<p>This thread talks about moved datasets, they should pick up the new PID configuration if not already published. Â <a href="https://github.com/IQSS/dataverse/issues/10497">#10497</a> is about upgrading published datasets from a suboptimal PID system to a "better" one. (e.g. started with internal PermaLinks and later upgrade to nice DOI PIDs.)  Â <a href="https://github.com/IQSS/dataverse/issues/10496">#10496</a> is just about configure a dataverse PID provider via API.</p>



<a name="433758827"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433758827" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433758827">(Apr 17 2024 at 13:37)</a>:</h4>
<p>Originally, this Zulip topic was about changing dataverse PID provider via API. <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span> </p>
<p>Now it's about much more. <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span> </p>
<p>We could start new topics and move messages around.</p>



<a name="433759083"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433759083" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433759083">(Apr 17 2024 at 13:38)</a>:</h4>
<p>Or maybe re-title this thread? We're trying to say "collection" instead of "dataverse" these days. Maybe "changing collection PID provider"? Broad enough?</p>



<a name="433759559"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433759559" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433759559">(Apr 17 2024 at 13:40)</a>:</h4>
<p>Thats nice, we also use collection in our project and renamed dataverse.</p>



<a name="433760375"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433760375" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433760375">(Apr 17 2024 at 13:44)</a>:</h4>
<p>Great, I renamed this topic.</p>



<a name="433760486"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433760486" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433760486">(Apr 17 2024 at 13:44)</a>:</h4>
<p>But do we have the right number of issues? We still need one more, right? "moved datasets, they should pick up the new PID configuration if not already published"</p>



<a name="433760610"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433760610" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433760610">(Apr 17 2024 at 13:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin</span> <a href="#narrow/stream/379673-dev/topic/changing.20collection.20PID.20provider/near/433760486">said</a>:</p>
<blockquote>
<p>But do we have the right number of issues? We still need one more, right? "moved datasets, they should pick up the new PID configuration if not already published"</p>
</blockquote>
<p>I going to create one and most likely implement it. Hopefully this feature can be part of the next release.</p>



<a name="433775346"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433775346" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433775346">(Apr 17 2024 at 14:13)</a>:</h4>
<p>Here is the issue <a href="https://github.com/IQSS/dataverse/issues/10501">https://github.com/IQSS/dataverse/issues/10501</a></p>



<a name="433775727"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433775727" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433775727">(Apr 17 2024 at 14:13)</a>:</h4>
<p>Looks great. Could you please add a link back to this topic on Zulip?</p>



<a name="433775998"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433775998" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433775998">(Apr 17 2024 at 14:14)</a>:</h4>
<p>I wanted to but I cannot find the option to create a link in zulip.</p>



<a name="433776247"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433776247" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433776247">(Apr 17 2024 at 14:14)</a>:</h4>
<p>Nevermind, got it now!</p>



<a name="433787640"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433787640" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433787640">(Apr 17 2024 at 14:36)</a>:</h4>
<p>I usually use the sidebar</p>



<a name="433788005"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433788005" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433788005">(Apr 17 2024 at 14:37)</a>:</h4>
<p>Ah, you linked to where you brought this up. Perfect.</p>



<a name="433791912"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433791912" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vera Clemens <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433791912">(Apr 17 2024 at 14:44)</a>:</h4>
<p>I have been working on the tests to illustrate this issue. I played around with Cucumber <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span>  thank you for the pointer. It has been a while since I used Cucumber for testing.</p>
<p>I think it makes the most sense to implement the tests as API tests, so that is what I started with. I have now run into the following issue: how can we best test the cases involving a DOI provider? I can configure the tested dataverse with a DOI provider, however we don't want the tests to cause actual requests to be sent to the DataCite APIs. We also don't want the tests to fail because we have configured a fake DataCite API URL that doesn't respond in the expected way. Is mocking the DataCite API endpoints the right way to go? How would I go about this?</p>
<p>Or do you envision some other way for the tests to be implemented?</p>
<p>I've pushed my current state here <a href="https://github.com/vera/dataverse/tree/moving-datasets-between-pid-providers">https://github.com/vera/dataverse/tree/moving-datasets-between-pid-providers</a> it's very WIP, happy to receive feedback on it (run tests with <code>mvn test -Dtest=RunCucumberTest</code>)</p>



<a name="433795001"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/433795001" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#433795001">(Apr 17 2024 at 14:50)</a>:</h4>
<p>Hmm, mocking sounds fine to me.</p>



<a name="434032306"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/434032306" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#434032306">(Apr 18 2024 at 12:12)</a>:</h4>
<p>We discussed this issue with DataCite sometime ago on Slack as well</p>



<a name="434032387"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/changing%20collection%20PID%20provider/near/434032387" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/changing.20collection.20PID.20provider.html#434032387">(Apr 18 2024 at 12:13)</a>:</h4>
<p>One idea to avoid real calls to the DataCite (Test) Fabrica was to use sth like WireMock</p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>