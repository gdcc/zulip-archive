<html>
<head><meta charset="utf-8"><title>Solr 9 upgrade #9260 Â· dev Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/index.html">dev</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html">Solr 9 upgrade #9260</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="385238420"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385238420" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385238420">(Aug 15 2023 at 15:57)</a>:</h4>
<p>I'm having trouble with the Solr 9 upgrade (<a href="https://github.com/IQSS/dataverse/issues/9260">#9260</a>). As I mentioned in standup. Some of our custom Dataverse fields (45 of them) are showing up in <a href="http://localhost:8983/solr/collection1/schema/fields">http://localhost:8983/solr/collection1/schema/fields</a> but some aren't such as <code>fileTypeGroupFacet</code>.</p>



<a name="385238700"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385238700" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385238700">(Aug 15 2023 at 15:58)</a>:</h4>
<p>If I push what I have so far, would someone else like to try? I asked in standup but no one had heard of this problem.</p>



<a name="385238833"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385238833" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385238833">(Aug 15 2023 at 15:59)</a>:</h4>
<p>Yes please push. Can't look right now, but maybe later</p>



<a name="385241913"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385241913" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385241913">(Aug 15 2023 at 16:08)</a>:</h4>
<p>Ok, I just pushed to <a href="https://github.com/IQSS/dataverse/tree/9260-solr9">https://github.com/IQSS/dataverse/tree/9260-solr9</a></p>



<a name="385244898"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385244898" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385244898">(Aug 15 2023 at 16:18)</a>:</h4>
<p>I also set up a test runner at <a href="https://github.com/pdurbin/dataverse-api-test-runner/actions/workflows/solr9.yml">https://github.com/pdurbin/dataverse-api-test-runner/actions/workflows/solr9.yml</a></p>



<a name="385245028"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385245028" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385245028">(Aug 15 2023 at 16:18)</a>:</h4>
<p>I kicked off a run but it's the first one so it might not get very far: <a href="https://github.com/pdurbin/dataverse-api-test-runner/actions/runs/5869283955">https://github.com/pdurbin/dataverse-api-test-runner/actions/runs/5869283955</a></p>



<a name="385246972"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385246972" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385246972">(Aug 15 2023 at 16:25)</a>:</h4>
<p>We probably need to push the develop image once... An update ye olde branches</p>



<a name="385258909"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385258909" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385258909">(Aug 15 2023 at 17:40)</a>:</h4>
<p>Never fear, in that solr9 workflow I'm building the base and app images.</p>



<a name="385259150"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385259150" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385259150">(Aug 15 2023 at 17:42)</a>:</h4>
<p>It's showing the same errors I'm seeing on my laptop. I guess that's somewhat reassuring, in a weird way.</p>



<a name="385259202"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385259202" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385259202">(Aug 15 2023 at 17:42)</a>:</h4>
<p>Lots of SearchIT failures, for example.</p>



<a name="385283850"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385283850" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385283850">(Aug 15 2023 at 20:50)</a>:</h4>
<p>Less blocked. Making progress.</p>



<a name="385283896"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385283896" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385283896">(Aug 15 2023 at 20:51)</a>:</h4>
<p>Adding this was key: <code>&lt;schemaFactory class="ClassicIndexSchemaFactory"/&gt;</code></p>



<a name="385294367"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385294367" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385294367">(Aug 15 2023 at 22:27)</a>:</h4>
<p>I should mention (again) that I do have XSLTs for solrconfig.xml.</p>



<a name="385296390"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385296390" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385296390">(Aug 15 2023 at 22:41)</a>:</h4>
<p>The current error is "possible analysis error" <a href="https://github.com/IQSS/dataverse/commit/df0046961851ef8a1d0a511382f9c01a4703b41e">https://github.com/IQSS/dataverse/commit/df0046961851ef8a1d0a511382f9c01a4703b41e</a></p>



<a name="385484873"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385484873" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385484873">(Aug 16 2023 at 15:12)</a>:</h4>
<p>Ok, I gave up the approach I was taking in <a href="https://github.com/IQSS/dataverse/tree/9260-solr9">https://github.com/IQSS/dataverse/tree/9260-solr9</a> where I tried to start from vanilla config files from Solr 9.3.0. All sort of problems.</p>



<a name="385484985"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385484985" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385484985">(Aug 16 2023 at 15:13)</a>:</h4>
<p>I just created a new branch and <a href="https://github.com/IQSS/dataverse/pull/9787">https://github.com/IQSS/dataverse/pull/9787</a> with a different approach: simply copy over our 8.11.1 config files as is.</p>



<a name="385485058"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385485058" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385485058">(Aug 16 2023 at 15:13)</a>:</h4>
<p>The main change that was needed was here: <a href="https://github.com/IQSS/dataverse/pull/9787/commits/10cb29440f52a19d745e9bae300580d7b6bf6402">https://github.com/IQSS/dataverse/pull/9787/commits/10cb29440f52a19d745e9bae300580d7b6bf6402</a></p>



<a name="385485106"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385485106" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385485106">(Aug 16 2023 at 15:13)</a>:</h4>
<p>"fix XSLTResponseWriter namespace and enable scripting module"</p>



<a name="385485244"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/379673-dev/topic/Solr%209%20upgrade%20%239260/near/385485244" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/379673-dev/topic/Solr.209.20upgrade.20.239260.html#385485244">(Aug 16 2023 at 15:14)</a>:</h4>
<p>SearchIT passed for me locally. I just switched the branch on my runner and fired off the full API test suite: <a href="https://github.com/pdurbin/dataverse-api-test-runner/actions/runs/5880587423">https://github.com/pdurbin/dataverse-api-test-runner/actions/runs/5880587423</a></p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>