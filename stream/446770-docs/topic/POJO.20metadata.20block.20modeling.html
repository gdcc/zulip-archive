<html>
<head><meta charset="utf-8"><title>POJO metadata block modeling ¬∑ docs ¬∑ Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/index.html">docs</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html">POJO metadata block modeling</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="568481093"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568481093" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568481093">(Jan 16 2026 at 17:00)</a>:</h4>
<p>In the current "specification" of our metadata fields, we express in the TSV format whether a field is "required", where it displays in relation to others and if it will be displayed on creation of a dataset as attributes of a field. </p>
<p>But is that truely an "attribute"? From my point of view it is something the surrounding block imposes on the field! The field doesn't care about being required, where it is and if it's important to be displayed during creation. <br>
It must care about how it is displayed (format), if it has a CV, who it's parent or children are, or if it can be used in facets/advances searches, as this influences how the field itself must behave. (Indexing in Solr, etc).</p>
<p>So in a future data model of these things (so <em>not</em> some file format, just as in-memory Java class model), these things should rather be defined on the block, not the field, right?<br>
Change my mind <span class="user-mention" data-user-id="621770">@Julian Gautier</span> <span class="user-mention" data-user-id="598112">@Philip Durbin üöÄ</span> <span class="user-mention" data-user-id="637063">@Leo Andreev</span></p>
<p>(This is docs related as the current docs page is a mix of specification and file format. A future specification of a data model should be format agnostic and define a reliable data contract.)</p>



<a name="568482862"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568482862" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568482862">(Jan 16 2026 at 17:09)</a>:</h4>
<p>For the logic around displayOnCreate, the TSV only tells part of the story. There's a good amount of logic and configuration available in the backend. See my review of display on create starting on slide 12 of this talk I gave at <a class="stream-topic" data-stream-id="375707" href="/#narrow/channel/375707-community/topic/.23Dataverse2025/with/566743905">#community &gt; #Dataverse2025</a> - <a href="https://docs.google.com/presentation/d/18tPj-t_v-5amXiaGoxFm-3LTm-reBKL3d303oydLURY/edit?usp=sharing">https://docs.google.com/presentation/d/18tPj-t_v-5amXiaGoxFm-3LTm-reBKL3d303oydLURY/edit?usp=sharing</a></p>



<a name="568483161"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568483161" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568483161">(Jan 16 2026 at 17:11)</a>:</h4>
<p>Yeah I thought of that - you can do boatloads of stuff these days with the fields, so this is not really part of what a field "is", just what you "do" with it, right?</p>



<a name="568483550"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568483550" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Gautier <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568483550">(Jan 16 2026 at 17:13)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> this far from my expertise so I'll defer to you and others. It sounded from other conversations like <span class="user-mention" data-user-id="602497">@Bal√°zs Pataki</span> would be helpful too <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="568483601"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568483601" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568483601">(Jan 16 2026 at 17:13)</a>:</h4>
<p>But you're the IQSS metadata expert, right?</p>



<a name="568483692"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568483692" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568483692">(Jan 16 2026 at 17:13)</a>:</h4>
<p>Technically, this POJO model in Java is as simple as it can be</p>



<a name="568483785"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568483785" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568483785">(Jan 16 2026 at 17:14)</a>:</h4>
<p>It should be the simplest and cleanest transformation between a written spec and the technical implementation</p>



<a name="568483920"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568483920" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568483920">(Jan 16 2026 at 17:15)</a>:</h4>
<p>Oh I see! <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span> I always thought of you like that as others seemed to refer to you that way... <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span> My bad!</p>



<a name="568484039"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568484039" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568484039">(Jan 16 2026 at 17:15)</a>:</h4>
<p>Who'd be the right person to ask? I'd prefer human experience over any LLM <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="568484431"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568484431" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Gautier <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568484431">(Jan 16 2026 at 17:17)</a>:</h4>
<p>No worries <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span> I think input from Phil, Leonid and maybe Bal√°zs would help</p>



<a name="568484831"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568484831" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Gautier <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568484831">(Jan 16 2026 at 17:19)</a>:</h4>
<p>And maybe Jim? Outside of Zulip of course</p>



<a name="568484918"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568484918" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568484918">(Jan 16 2026 at 17:19)</a>:</h4>
<p>Do we have any domain modelling experts around? <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="568484984"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568484984" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568484984">(Jan 16 2026 at 17:20)</a>:</h4>
<p>Where are they when you need 'em? <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="568485539"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568485539" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568485539">(Jan 16 2026 at 17:22)</a>:</h4>
<p>Are you thinking along these lines?</p>
<div class="codehilite"><pre><span></span><code>Attributes:
- name
- title
- description
- watermark
- fieldType
- advancedSearchField
- allowControlledVocabulary
- allowmultiples
- facetable
- parent
- metadatablock_id

Non-attributes:
- displayOrder
- displayFormat
- displayoncreate
- required
</code></pre></div>



<a name="568489015"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568489015" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568489015">(Jan 16 2026 at 17:40)</a>:</h4>
<p>Maybe even more radical:</p>
<p>Links, provided by model building:</p>
<ul>
<li>metadata block (no more metadatablock_id field in the format - let containment define what's what)</li>
<li>parent</li>
<li>children</li>
</ul>
<p>Attributes:</p>
<ul>
<li>name</li>
<li>title</li>
<li>description</li>
<li>watermark</li>
<li>fieldType</li>
<li>advancedSearchField</li>
<li>allowControlledVocabulary</li>
<li>allowmultiples (_cardinality influences storage, so important as attribute_)</li>
<li>facetable</li>
</ul>
<p>DataTypes / Schema Context (part of Metadata Block):</p>
<ul>
<li>required</li>
</ul>
<p>UI Context (Metadata Block):</p>
<ul>
<li>displayOrder</li>
<li>displayoncreate</li>
<li>displayFormat</li>
</ul>



<a name="568489227"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568489227" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568489227">(Jan 16 2026 at 17:41)</a>:</h4>
<p>I think that makes sense.</p>



<a name="568489238"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568489238" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568489238">(Jan 16 2026 at 17:41)</a>:</h4>
<p>Again, we must shake off the mental model the TSV format has burned into us (and in part also in how the database entities look like)</p>



<a name="568489705"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568489705" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568489705">(Jan 16 2026 at 17:44)</a>:</h4>
<p>Separating UI-related constraints from data constraints would be ideal.</p>
<p>Regarding "required", JSON Schema handles this in a similar way: it‚Äôs defined at the object level, rather than as an inherent attribute of each property.</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;type&quot;: &quot;object&quot;,
  &quot;properties&quot;: {
    &quot;name&quot;: { &quot;type&quot;: &quot;string&quot; },
    &quot;age&quot;: { &quot;type&quot;: &quot;integer&quot; }
  },
  &quot;required&quot;: [&quot;name&quot;]
}
</code></pre></div>



<a name="568489814"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568489814" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568489814">(Jan 16 2026 at 17:44)</a>:</h4>
<p>Oooh, I like that. Let's start with a JSON Schema and backward-engineer it. <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="568489874"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568489874" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568489874">(Jan 16 2026 at 17:45)</a>:</h4>
<p>Actually, this is my mental model :-D</p>



<a name="568491228"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568491228" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568491228">(Jan 16 2026 at 17:52)</a>:</h4>
<p>Another thing we did during the CEDAR integration is that we made it possible that a field can be part of multiple MDB-s. This maybe worth considering as well if we want to remodel MDB-s.</p>
<p>For example, there's the field Frequency in "Social Science and Humanities Metadata". Assume its name is "frequency" and it is a number. What if a collection doesn't use this MDB, but wants to have its own custom MDB with a numeric "frequency" field. In the stock DV it is not possible, one field can belong to only one MDB and you cannot redefine it.</p>
<p>Of course this is also tightly coupled with Solr indexing and Solr field names, so it is tricky thing both at the current data model and at the Solr end. We worked around it, but it is not nice. <span aria-label="face with peeking eye" class="emoji emoji-1fae3" role="img" title="face with peeking eye">:face_with_peeking_eye:</span></p>



<a name="568492806"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568492806" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Gautier <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568492806">(Jan 16 2026 at 18:00)</a>:</h4>
<blockquote>
<p>a field can be part of multiple MDB-s</p>
</blockquote>
<p>Any change that would improve support for including a metadata field in any grouping of metadata fields (or what we've called a metadata block) seems very worthwhile!</p>



<a name="568492864"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568492864" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568492864">(Jan 16 2026 at 18:00)</a>:</h4>
<p>Just out of curiosity, here‚Äôs how CEDAR structures its model.</p>
<p>It has 3 types of objects:</p>
<ol>
<li>Field: a single data field</li>
<li>Element:  a reusable collection of Fields and/or other Elements.</li>
<li>Template: a top-level structure made up of Fields and Elements.</li>
</ol>
<p>Fields and Elements are fully reusable: a Field can appear in multiple Elements, and an Element can be nested in multiple other Elements. Templates, however, act as ‚Äúroot‚Äù objects and cannot be nested within other objects.</p>
<p>Each Field, Element, and Template includes metadata, data constraints, and UI specification. Much like what you‚Äôd expect from JSON Schema. Because it is JSON Schema. <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="568493198"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568493198" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568493198">(Jan 16 2026 at 18:02)</a>:</h4>
<p>Requirement and multiplicity are defined at the point where an object is used. For example, when a Field is included in an Element, the Element determines whether that Field is required and what its multiplicity is.</p>



<a name="568498598"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568498598" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568498598">(Jan 16 2026 at 18:31)</a>:</h4>
<p>In Dataverse at the moment a field (or field type) identity is effectively determined by its <strong>name</strong>. For example, <code>title</code>, <code>author</code>, <code>subject</code>, etc. Although fields have internal database identifiers, they are mapped one-to-one to Solr fields, which means the field name already functions as a unique identifier in practice.</p>
<p>This approach has an important implication: there can be only one field named <code>frequency</code>. Even if multiple MDBs share the same field definition, they must also share the same semantics. However, this is often too restrictive. One MDB might want <code>frequency</code> to be an enumerated list (e.g., <em>Day, Week, Month</em>), while another might want it to be a numeric value.</p>
<p>To address this limitation, our implementation binds fields to the <strong>URIs</strong> that are already associated with field and uses those URIs as their effective identifiers. We assume that if two fields share the same URI, they are semantically and syntactically the same. These URIs are also used as the corresponding field names in Solr (after some transformation, of course, because field names cannot include "/", etc.).</p>
<p>At the same time, we decouple <strong>field names</strong> from <strong>field identity</strong>. This allows:</p>
<ul>
<li>
<p>different field names to point to the same URI (same semantics), and</p>
</li>
<li>
<p>the same field name to point to different URIs (different semantics).</p>
</li>
</ul>
<p>This makes the system more flexible while preserving semantic clarity.</p>
<p>For example:<br>
<strong>MDB1</strong> (where <code>frequency</code> is first defined)</p>
<ul>
<li>
<p>Name: <code>frequency</code></p>
</li>
<li>
<p>URI: <code>http://dataverse.org/fields/frequency</code></p>
</li>
</ul>
<p><strong>MDB2</strong> (<code>frequency</code> reused with the same meaning)</p>
<ul>
<li>
<p>Name: <code>frequency</code></p>
</li>
<li>
<p>URI: <code>http://dataverse.org/fields/frequency</code></p>
</li>
</ul>
<p><strong>MDB3</strong> (<code>frequency</code> with different semantics)</p>
<ul>
<li>
<p>Name: <code>frequency</code></p>
</li>
<li>
<p>URI: <code>http://dataverse.org/fields/frequencyByDayWeekMonth</code></p>
</li>
</ul>
<p><strong>MDB4</strong> (different name, same semantics as MDB3)</p>
<ul>
<li>
<p>Name: <code>frequencyInterval</code></p>
</li>
<li>
<p>URI: <code>http://dataverse.org/fields/frequencyByDayWeekMonth</code></p>
</li>
</ul>
<p>Making URIs (or, to be irritatingly precise, IRIs) the effective identifiers also improves interoperability with other linked-data oriented representations like RO-Crate.</p>



<a name="568500705"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568500705" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568500705">(Jan 16 2026 at 18:43)</a>:</h4>
<p>The mental model that starts forming in my head is at this current state:</p>
<ul>
<li>For now, the database in the core is hardcoded to a 1:1 relation between MDB and DF as well as DF and CV. The data model we create now should not stray to far from this, as we can wish for more all we want... But: it must keep a future refactoring of the core to support  this in mind without breaking the data model and starting over!</li>
<li>Let's start treating the MDB more like a "UI group of fields", not the representation of a metadata schema. It never really was and we're constantly hitting the ceiling with it now.</li>
<li>Let's keep in mind that for the future, we want to be able to have a 1:n relation between these UI groups to a DF and CV to DF, as multiple fields may have the same vocabulary and appear in multiple groups.</li>
<li>Also, we probably want the data model be open to lift the UI restriction of only one level of parent/childs. (This is AFAIK not even a DB restriction!)</li>
<li>Let's keep formatting out of the field data model and put it elsewhere during the domain modeling process. We're already having a hard time as it is mostly about HTML UI, but for the future we might want more than that!</li>
</ul>
<p>Gotchas:</p>
<ul>
<li>I'm not sure yet what to do with the current metadata block URL which is used for JSON-LD exports. Maybe shape into a binding of group to a context? (So multiple MDBs can have the same context but be different groups in the UI)</li>
<li>Keep the limitation of unique names. Yes, this is unfortunate and has drawbacks. But changing that properly will require changing the DB model and index to become a tuple store. We simply don't have the concept of context available in Sole without a complete refactoring of that whole subsystem. That's a major change and seems unreasonable at this time. The POJO model is not necessarily broken if we ever change that - a DF is associated to a group/MDB, so we could keep using that as a context to it.</li>
</ul>



<a name="568500951"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568500951" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568500951">(Jan 16 2026 at 18:45)</a>:</h4>
<p>I agree <span class="user-mention" data-user-id="602497">@Bal√°zs Pataki</span> that the same field name may have different semantic meanings, depending on context. As outlined above, having this context embedded is hard in how the core works at the moment.</p>



<a name="568501169"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568501169" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568501169">(Jan 16 2026 at 18:46)</a>:</h4>
<p>Especially as people use the search function and use field names in there, they would also have to add the context there... That's not an easy thing to figure out, especially from the UX side.</p>



<a name="568501277"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568501277" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568501277">(Jan 16 2026 at 18:47)</a>:</h4>
<p>So maybe for the time being, we have to live with this shortcoming <span aria-label="relieved" class="emoji emoji-1f60c" role="img" title="relieved">:relieved:</span></p>



<a name="568501611"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568501611" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568501611">(Jan 16 2026 at 18:49)</a>:</h4>
<p>yes, I know changes that deep have many implications. I‚Äôm not pushing for them, just explaining our approach. It isn‚Äôt in use today, but we built it to support future use cases.</p>



<a name="568501741"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568501741" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568501741">(Jan 16 2026 at 18:50)</a>:</h4>
<p>Or actually, we had one use case already with the "keyword" field.</p>



<a name="568501879"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568501879" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568501879">(Jan 16 2026 at 18:50)</a>:</h4>
<p>Also <span class="user-mention" data-user-id="602497">@Bal√°zs Pataki</span> I'm not sure that the currwnt database SQL model is the limitation here. IIRC the name of a dataset is not part of the DB keys. AFAIK the technical  limitation is in the search index! (That's good news...)</p>



<a name="568502182"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568502182" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568502182">(Jan 16 2026 at 18:52)</a>:</h4>
<p>No, actucally I think datasetfieldtype has a metadatablock_id relation which is unique.</p>



<a name="568502312"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568502312" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568502312">(Jan 16 2026 at 18:53)</a>:</h4>
<p>We definitely could not add the same field to multiple MDB-s. Maybe this changed since 6.1?</p>



<a name="568502832"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568502832" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568502832">(Jan 16 2026 at 18:55)</a>:</h4>
<p>Or maybe you can add but it won't appear in all of those MDB-s? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span>  Anyway, there were some issues with them I cannot remember now without looking at the code.</p>



<a name="568502998"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568502998" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568502998">(Jan 16 2026 at 18:56)</a>:</h4>
<p>Oh. Yeah. True, there is still the implication of 1:1 MDB-DF. (see above) But that's not the same as making the name a part of it!</p>



<a name="568503135"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568503135" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568503135">(Jan 16 2026 at 18:57)</a>:</h4>
<p>The name limitation mostly comes from the Sold schema... We can't have cardinal fields there. And unless we work around that somehow (multiple cores per context / field naming policy) might be hard to overcome without switching tech. Both ways: big fat project...</p>



<a name="568508168"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568508168" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568508168">(Jan 16 2026 at 19:26)</a>:</h4>
<p>We're talking about metadata field at the dataset level, but what about the file and variable level? See <a href="https://github.com/IQSS/dataverse-pm/issues/112">https://github.com/IQSS/dataverse-pm/issues/112</a> and its <a href="https://docs.google.com/document/d/1xvmOHfRxYRD-u2EA16VbVfI4Ge_klp7h24FkW3GRnPs/edit?usp=sharing">design doc</a>.</p>
<p>Rather than using our existing dataset-level model, perhaps we could design something better for datasets, files, and variables. And eventually migrate the current dataset-level stuff to the new and improved model.</p>
<p>That is to say, we could design something new without disturbing the existing infrastructure.</p>



<a name="568508454"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568508454" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568508454">(Jan 16 2026 at 19:28)</a>:</h4>
<p>Oh, yeah, file metadata! At the ‚Äúmental model‚Äù level, it should be the same, isn‚Äôt it? Even at implementation level. That would be ideal.</p>



<a name="568508784"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568508784" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568508784">(Jan 16 2026 at 19:30)</a>:</h4>
<p>I mean, 10 years ago our thought was to just use the same model, the dataset model, for file metadata. But we never got around to it. Probably we should build something better, given what we've learned with our TSV adventure. <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="568513396"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568513396" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bal√°zs Pataki <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568513396">(Jan 16 2026 at 19:59)</a>:</h4>
<p>As you know, this is exactly why we moved fully to RO-Crate: it gives us a single, consistent model for describing Dataset and File metadata while remaining compatible with Dataverse‚Äôs existing metadata storage. With RO-Crate we can even use existing Dataverse MDBs to describe files. So, for example, you can simply drop the Geospatial MDB onto a file and instantly add location metadata to it.</p>
<hr>
<p>Now, the rest is just a far-fetched thought experiment for fun.</p>
<p>Imagine a Dataverse where MDBs are represented purely as JSON Schemas (or similar), and all dataset metadata lives in a single ro-crate-metadata.json file. No separate database representation, just one JSON file per dataset, which can describe the Dataset and Files. That JSON could still be stored in a PG jsonb field for indexing and full-text search, or fed into Elasticsearch/OpenSearch for more advanced discovery. But otherwise, most metadata and schema interactions would become straightforward JSON editing and parsing operations that require no backend roundtrips or database logic and could be handled entirely within the SPA.</p>



<a name="568513737"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568513737" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568513737">(Jan 16 2026 at 20:01)</a>:</h4>
<p>Interesting. We definitely considered MongoDB a decade ago when we came up with the custom metadata blocks system.</p>



<a name="568513937"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568513937" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568513937">(Jan 16 2026 at 20:02)</a>:</h4>
<p>But I like your idea of a Postgres jsonb field. Fewer moving parts. <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="568810860"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/568810860" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#568810860">(Jan 19 2026 at 14:11)</a>:</h4>
<p>I started writing a doc: <a href="https://docs.google.com/document/d/16qxyUejjkcSPb37d9lJlsLnuhLNLTpu5lAsJglugmbw/edit?usp=sharing">https://docs.google.com/document/d/16qxyUejjkcSPb37d9lJlsLnuhLNLTpu5lAsJglugmbw/edit?usp=sharing</a></p>



<a name="569344706"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/446770-docs/topic/POJO%20metadata%20block%20modeling/near/569344706" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/446770-docs/topic/POJO.20metadata.20block.20modeling.html#569344706">(Jan 21 2026 at 20:03)</a>:</h4>
<p>As I do have a hard time writing all of this, I wanted to ease my mind by doing some coding work on this. Looks like as I probably will get my hands dirty with exporters for citations and stuff, a better way to transfer the information about which fields actually exist etc would be VERY handy. Here's a start: <a href="https://github.com/gdcc/dataverse-spi/blob/core/core/src/main/java/io/gdcc/spi/core/metadata/description/Field.java">https://github.com/gdcc/dataverse-spi/blob/core/core/src/main/java/io/gdcc/spi/core/metadata/description/Field.java</a></p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>