<html>
<head><meta charset="utf-8"><title>Migration of Existing DataFiles with DOIs · community · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/index.html">community</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html">Migration of Existing DataFiles with DOIs</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="391904848"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/391904848" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julien C <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#391904848">(Sep 19 2023 at 12:47)</a>:</h4>
<p>Hello Dataverse Community,</p>
<p>Is there a way to migrate with the API (version 5.10) some DataFiles with an existing DOIs to a different existing installation ? (I means to a different Dataverse installation). I see in the API Documentation that is possible with the Datasets but the question remains for the DataFiles associated with it. <br>
Thks in advance for advices</p>



<a name="391910486"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/391910486" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#391910486">(Sep 19 2023 at 13:16)</a>:</h4>
<p>I would suggest digging into these migration scripts from Scholars Portal: <a href="https://groups.google.com/g/dataverse-community/c/PfKIZFxFZhE/m/2lC7QLzUBAAJ">https://groups.google.com/g/dataverse-community/c/PfKIZFxFZhE/m/2lC7QLzUBAAJ</a></p>



<a name="391910992"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/391910992" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julien C <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#391910992">(Sep 19 2023 at 13:19)</a>:</h4>
<p>Thanks for the link Philip, I will give it a try.</p>



<a name="392525605"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/392525605" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#392525605">(Sep 22 2023 at 14:04)</a>:</h4>
<p>I'm glad you asked on the list: <a href="https://groups.google.com/g/dataverse-community/c/NwIFODp4I0A/m/xrH422EuAAAJ">https://groups.google.com/g/dataverse-community/c/NwIFODp4I0A/m/xrH422EuAAAJ</a> . Thanks!</p>



<a name="395269910"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/395269910" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julien C <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#395269910">(Oct 06 2023 at 14:19)</a>:</h4>
<p>Still no answer, is anybody have a clue on that specific point ?</p>



<a name="395277018"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/395277018" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#395277018">(Oct 06 2023 at 14:56)</a>:</h4>
<p>I forget, did you also email <a href="mailto:support@dataverse.org">support@dataverse.org</a> about this?</p>



<a name="395655493"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/395655493" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julien C <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#395655493">(Oct 09 2023 at 09:25)</a>:</h4>
<p>Thank you Philip for your reply, i will do that too.</p>



<a name="396340814"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/396340814" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#396340814">(Oct 12 2023 at 18:10)</a>:</h4>
<p>I'm in a room with <span class="user-mention" data-user-id="658065">@Dimitri Szabo</span> talking about this. Jim Myers isn't sure if DOIs for files are supported or not.</p>



<a name="396513347"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/396513347" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julien C <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#396513347">(Oct 13 2023 at 14:09)</a>:</h4>
<p>Thanks for your reply, Hello to everyone and to my french colleague.<br>
If you can give me confirmation or not on this crucial point it will help me.<br>
Regards</p>



<a name="396514063"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/396514063" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#396514063">(Oct 13 2023 at 14:12)</a>:</h4>
<p>Sure. For now, would you be able to create an issue about this?</p>



<a name="396545739"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/396545739" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#396545739">(Oct 13 2023 at 17:22)</a>:</h4>
<p>Thanks for opening this: API Migration for DataFiles DOI how to do this ? (version 5.1x) <a href="https://github.com/IQSS/dataverse/issues/10008">#10008</a></p>



<a name="400108985"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/400108985" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julien C <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#400108985">(Nov 03 2023 at 10:50)</a>:</h4>
<p>This is not a necropost because I've not solved the "issue" with DataFiles DOIs.</p>
<p>As an example for the community, maybe someone knows or had already done this.</p>
<p>I can manage, between two same installations with same DOI authority, an update of DOI for a dataset.</p>
<p>But it doesnt work for Datafiles because, when I'm trying to publish it fails: automatically it generates a lock on dataset in a dedicated database table. (I've try to delete the lock, it changes nothing, relocked automatically)</p>
<p>And here its just for the same authority, I'm wondering if it will be different with the French RDG server who has a  different provider root authority.</p>
<p>Please look at this simple SQL capture example where i'm trying to update manually a DataFile with ID 8232 it fails when trying to publish after reindexing. (Solr)</p>
<p>Maybe i'm doing this the wrong way, if someone can tell me how to do that with the publication status to succeed it will helps a lot to configure out a scripted version with Datacite provider.</p>
<p>Have a nice day,</p>
<p>Regards<br>
<a href="/user_uploads/53090/WGPXu7OrohSn3cDyjCwiBdrU/screenshot_db_provider_identifier_DOI_Datafiles.jpg">screenshot_db_provider_identifier_DOI_Datafiles.jpg</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/WGPXu7OrohSn3cDyjCwiBdrU/screenshot_db_provider_identifier_DOI_Datafiles.jpg" title="screenshot_db_provider_identifier_DOI_Datafiles.jpg"><img src="/user_uploads/53090/WGPXu7OrohSn3cDyjCwiBdrU/screenshot_db_provider_identifier_DOI_Datafiles.jpg"></a></div>



<a name="400123001"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/400123001" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#400123001">(Nov 03 2023 at 12:22)</a>:</h4>
<p>Thanks I just linked from <a href="https://github.com/IQSS/dataverse/issues/10008">#10008</a> to this update about locks.</p>



<a name="400542273"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/400542273" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julien C <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#400542273">(Nov 06 2023 at 14:26)</a>:</h4>
<p>When i change into SQL the identifier for the dataset and publish without files it works (ok this an update to provider Datacite)<br>
But When I add Datafiles and try to do the same thing, the publication of the Dataset failed and a lock is generated into the DatasetLock table.<br>
How can I bypass this lock to "force" the update of the Datafiles DOIs too ?</p>
<p><span class="user-mention" data-user-id="598112">@Philip Durbin</span> <br>
Could it be possible to have more details on how the File Validation is performed when a dataset is published please ?</p>
<p>In table Datasetlock I still have "FileValidationFailed" and I think i have tried almost all ideas ...<br>
For each Datafiles the fields: authority, identifier, identifierregistered have been updated and this is not working.<br>
I have tried to change the status of DOI with Datacite: pass to 'findable' to 'registered'... change nothing.</p>
<p>A little help please, i need a Dataverse SQL guru here :-)</p>



<a name="400910186"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/400910186" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julien C <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#400910186">(Nov 08 2023 at 10:00)</a>:</h4>
<p>Hello there,</p>
<p>Atm i'm running some tests in order to figure out to force the DOIs DataFiles to be migrated on target server.</p>
<p>I have done some modifications on the target server in SQL but it doesnt work for DataFiles. When publishing the lock in table 'Datasetlock" appears.<br>
You can remove the lock but nothing changed. The dataset with DOIs Datafiles cannot be published.</p>
<p>2) Using the Migration API: I start migration, update informations with Datafiles but new DOIs are attributed when published. This is not what I want. Keep the existing DOIs is essential here.</p>
<p>3) I have tried to initialize the migration of a Dataset and edit the SQL just for the DataFiles includes with DOIs, but when i try to use the 'releasemigrated' command from the Migration API, i got a similar response to my SQL Tests: </p>
<p>"status":"ERROR","message":"Dataset Version Update failed. Changes are still in the DRAFT version. - edu.harvard.iq.dataverse.engine.command.exception.CommandException: This dataset may not be published due to an error when contacting the &lt;a href=http://status.datacite.org target=\"_blank\"/&gt; DataCite &lt;/a&gt; Service. Please try again."}</p>
<p>My question is simple how can integrate the migration of Datafiles to keep the existing DOIs attributed on the target server ?</p>



<a name="400944923"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/400944923" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#400944923">(Nov 08 2023 at 13:33)</a>:</h4>
<p>It might take some development work. Someone probably needs to work on this issue you opened, I mean: API Migration for DataFiles DOI how to do this ? (version 5.1x) <a href="https://github.com/IQSS/dataverse/issues/10008">#10008</a></p>



<a name="406096055"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/406096055" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julien C <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#406096055">(Dec 05 2023 at 16:20)</a>:</h4>
<p>Hello Dataverse community,</p>
<p>Just to give you an update on this.<br>
I am still unable to publish/migrate to RDG installation a dataset with DataFiles with DOI attached.<br>
The migration API gives me this kind of response:</p>
<blockquote>
<p>(500, {'status': 'ERROR', 'message': 'Dataset Version Update failed. Changes are still in the DRAFT version. - edu.harvard.iq.dataverse.engine.command.exception.CommandException: This dataset may not be published due to an error when contacting the &lt;a href="<a href="http://status.datacite.org">http://status.datacite.org</a>" target="_blank"/&gt; DataCite &lt;/a&gt; Service. Please try again.'})</p>
</blockquote>
<p>The RDG dataverse installation is a little bit more explicite with an email with detailed error:</p>
<blockquote>
<p>... could not be published due to a failure to register, or update the Global Identifier for the dataset or one <strong>of the files in it</strong>. Contact support if this continues to happen.</p>
</blockquote>
<p>If dataverse community or support can propose a workaround or valid process to migrate with DataFiles and publish on a target server (including SQL process), I'm listening !</p>
<p>Thanks in advance for help or advice (need "dataverse guru" here please)<br>
Regards</p>



<a name="406099995"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/406099995" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#406099995">(Dec 05 2023 at 16:36)</a>:</h4>
<p>Right, and way back in September you asked here: <a href="https://groups.google.com/g/dataverse-community/c/NwIFODp4I0A/m/xrH422EuAAAJ">https://groups.google.com/g/dataverse-community/c/NwIFODp4I0A/m/xrH422EuAAAJ</a></p>



<a name="406100096"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/406100096" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#406100096">(Dec 05 2023 at 16:37)</a>:</h4>
<p>Perhaps you should post again to that thread? I'm not sure what to tell you.</p>



<a name="481377056"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/481377056" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Florez <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#481377056">(Nov 08 2024 at 19:47)</a>:</h4>
<p>Hello everyone, hope you are well</p>
<p>I would like to know if there is any way to migrate datafiles with the same DOI between different Dataverse instances. I have migrated the Datasets keeping the same DOI and I need to do the same with the datafiles. Is there any process, script or module I can use?</p>



<a name="481378276"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/481378276" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#481378276">(Nov 08 2024 at 19:57)</a>:</h4>
<p>Hmm, that's a good question. I hope it works. <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="481378376"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/481378376" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#481378376">(Nov 08 2024 at 19:58)</a>:</h4>
<p>I would suggest asking at <a href="https://groups.google.com/g/dataverse-community">https://groups.google.com/g/dataverse-community</a></p>
<p>There are about five times more people there.</p>



<a name="481381003"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375707-community/topic/Migration%20of%20Existing%20DataFiles%20with%20DOIs/near/481381003" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Florez <a href="https://gdcc.github.io/zulip-archive/stream/375707-community/topic/Migration.20of.20Existing.20DataFiles.20with.20DOIs.html#481381003">(Nov 08 2024 at 20:21)</a>:</h4>
<p>Ok, <span class="user-mention" data-user-id="598112">@Philip Durbin 🐉</span>  thanks for answer <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span> . I'll do. Have a good day.</p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>