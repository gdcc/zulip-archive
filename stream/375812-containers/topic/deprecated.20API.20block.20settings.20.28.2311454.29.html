<html>
<head><meta charset="utf-8"><title>deprecated API block settings (#11454) Â· containers Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/index.html">containers</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/deprecated.20API.20block.20settings.20.28.2311454.29.html">deprecated API block settings (#11454)</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="522132505"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/deprecated%20API%20block%20settings%20%28%2311454%29/near/522132505" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/deprecated.20API.20block.20settings.20.28.2311454.29.html#522132505">(Jun 03 2025 at 14:01)</a>:</h4>
<p>I just added a commit at <a href="https://github.com/IQSS/dataverse/pull/11454/commits/ecb1b6be392c81cb99b15207a4a63752c36367d2">https://github.com/IQSS/dataverse/pull/11454/commits/ecb1b6be392c81cb99b15207a4a63752c36367d2</a> to say we should revisit how we secure the "demo" persona. This is for <a href="https://github.com/IQSS/dataverse/issues/11454">#11454</a>.</p>



<a name="522132758"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/deprecated%20API%20block%20settings%20%28%2311454%29/near/522132758" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/deprecated.20API.20block.20settings.20.28.2311454.29.html#522132758">(Jun 03 2025 at 14:02)</a>:</h4>
<p>I'm not sure how important it is to do this right now. The deprecated way seems to still work. I get this error, which is good:</p>
<p>{"status":"error","message":"Endpoint requires an unblock key for access."}</p>



<a name="522133778"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/deprecated%20API%20block%20settings%20%28%2311454%29/near/522133778" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/deprecated.20API.20block.20settings.20.28.2311454.29.html#522133778">(Jun 03 2025 at 14:06)</a>:</h4>
<p>The thing is, we need access to the admin API to do the setup.</p>



<a name="522133873"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/deprecated%20API%20block%20settings%20%28%2311454%29/near/522133873" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/deprecated.20API.20block.20settings.20.28.2311454.29.html#522133873">(Jun 03 2025 at 14:06)</a>:</h4>
<p>There's a reason we have this comment:</p>
<div class="codehilite"><pre><span></span><code># --insecure is used so we can configure a few things but
# later in this script we&#39;ll apply the changes as if we had
# run the script without --insecure.
echo &quot;Running base setup-all.sh...&quot;
&quot;${BOOTSTRAP_DIR}&quot;/base/setup-all.sh --insecure -p=admin1 | tee /tmp/setup-all.sh.out
</code></pre></div>



<a name="522134088"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/deprecated%20API%20block%20settings%20%28%2311454%29/near/522134088" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/deprecated.20API.20block.20settings.20.28.2311454.29.html#522134088">(Jun 03 2025 at 14:07)</a>:</h4>
<p>Here's the script: <a href="https://github.com/IQSS/dataverse/blob/v6.6/modules/container-configbaker/scripts/bootstrap/demo/init.sh">https://github.com/IQSS/dataverse/blob/v6.6/modules/container-configbaker/scripts/bootstrap/demo/init.sh</a></p>



<a name="522142210"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/deprecated%20API%20block%20settings%20%28%2311454%29/near/522142210" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/deprecated.20API.20block.20settings.20.28.2311454.29.html#522142210">(Jun 03 2025 at 14:36)</a>:</h4>
<p>If I want to run <code>asadmin create-jvm-options '-Ddataverse.api.blocked.endpoints=api/admin,api/builtin-users'</code> (the new way), where would I do this? In <a href="https://github.com/IQSS/dataverse/blob/v6.6/modules/container-base/src/main/docker/Dockerfile">modules/container-base/src/main/docker/Dockerfile</a>, right? But then it's baked into the image. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> Don't we want something more dynamic?</p>



<a name="522169083"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/deprecated%20API%20block%20settings%20%28%2311454%29/near/522169083" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/deprecated.20API.20block.20settings.20.28.2311454.29.html#522169083">(Jun 03 2025 at 16:29)</a>:</h4>
<p>Actually, since these are MPConfig settings, we should be able to just stick them in the compose file.</p>



<a name="522213938"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/deprecated%20API%20block%20settings%20%28%2311454%29/near/522213938" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/deprecated.20API.20block.20settings.20.28.2311454.29.html#522213938">(Jun 03 2025 at 20:57)</a>:</h4>
<p>I'm having a little trouble with this but I put it on the agenda for Thursday. <a class="stream-topic" data-stream-id="375812" href="/#narrow/channel/375812-containers/topic/meetings/with/396277871">#containers &gt; meetings</a></p>



<a name="522438225"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/deprecated%20API%20block%20settings%20%28%2311454%29/near/522438225" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/deprecated.20API.20block.20settings.20.28.2311454.29.html#522438225">(Jun 04 2025 at 19:45)</a>:</h4>
<p>Related is this new issue:</p>
<p>New non-Docker installations still use deprecated BlockedApi* database settingsÂ <a href="https://github.com/IQSS/dataverse/issues/11553">#11553</a></p>
<p>(It's true of Docker installations as well.)</p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>