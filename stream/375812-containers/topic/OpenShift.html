<html>
<head><meta charset="utf-8"><title>OpenShift · containers · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/index.html">containers</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html">OpenShift</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="408633083"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/408633083" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#408633083">(Dec 18 2023 at 15:21)</a>:</h4>
<p>"The MOC team wants to test a containerized Dataverse installation on the MOC infrastructure to support large data and computing." -- <a href="https://github.com/IQSS/dataverse-pm/issues/105">https://github.com/IQSS/dataverse-pm/issues/105</a></p>



<a name="419854249"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/419854249" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#419854249">(Feb 05 2024 at 14:40)</a>:</h4>
<p>A nice update posted to Slack just now. The containers are working!</p>



<a name="420467655"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420467655" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420467655">(Feb 08 2024 at 14:19)</a>:</h4>
<p>I'm hacking on OpenShift support. Having some progress, but really slow</p>



<a name="420467721"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420467721" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420467721">(Feb 08 2024 at 14:19)</a>:</h4>
<p>Currently customizing the base image to be more OpenShift security policy friendly</p>



<a name="420469130"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420469130" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420469130">(Feb 08 2024 at 14:26)</a>:</h4>
<p>Great news!</p>



<a name="420700080"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420700080" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420700080">(Feb 09 2024 at 17:35)</a>:</h4>
<p>PROGRESS!<br>
<a href="/user_uploads/53090/ejKNFgf5EQ6wEd9Hjiy2Sf4v/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/ejKNFgf5EQ6wEd9Hjiy2Sf4v/image.png" title="image.png"><img src="/user_uploads/53090/ejKNFgf5EQ6wEd9Hjiy2Sf4v/image.png"></a></div>



<a name="420700361"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420700361" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420700361">(Feb 09 2024 at 17:37)</a>:</h4>
<p>go go go! <img alt=":dataverse_man:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/44207.png" title="dataverse man"></p>



<a name="420704075"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420704075" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420704075">(Feb 09 2024 at 18:01)</a>:</h4>
<p><a href="https://github.com/IQSS/dataverse/pull/10314">https://github.com/IQSS/dataverse/pull/10314</a></p>



<a name="420704097"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420704097" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420704097">(Feb 09 2024 at 18:01)</a>:</h4>
<p>Here's what I have so far</p>



<a name="420704236"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420704236" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420704236">(Feb 09 2024 at 18:02)</a>:</h4>
<p>Not much yet, but a start. Next up: adding Solr dependency</p>



<a name="420704307"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420704307" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420704307">(Feb 09 2024 at 18:02)</a>:</h4>
<p>At least I can start Dataverse and get to a successful deploy and bootstrap <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="420704960"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420704960" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420704960">(Feb 09 2024 at 18:06)</a>:</h4>
<p>Ah, you even link to CRC. Great. Doing a million things but I'll try to get it installed after lunch. This looks great! Thanks, <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> ! <img alt=":dataverse_man:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/44207.png" title="dataverse man"></p>



<a name="420705358"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420705358" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420705358">(Feb 09 2024 at 18:09)</a>:</h4>
<p>Technically, it _should_ also work with the K8s cluster in Docker Desktop</p>



<a name="420705433"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420705433" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420705433">(Feb 09 2024 at 18:10)</a>:</h4>
<p>There even is an extension for it: <a href="https://developers.redhat.com/articles/2022/05/10/introducing-red-hat-openshift-extension-docker-desktop">https://developers.redhat.com/articles/2022/05/10/introducing-red-hat-openshift-extension-docker-desktop</a></p>



<a name="420705518"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420705518" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420705518">(Feb 09 2024 at 18:10)</a>:</h4>
<p>Your mileage may vary!</p>



<a name="420716057"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420716057" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420716057">(Feb 09 2024 at 19:19)</a>:</h4>
<p>Yes, I believe Leonid played around with that extension.</p>



<a name="420716095"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420716095" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420716095">(Feb 09 2024 at 19:19)</a>:</h4>
<p>Looks kinda abandoned...</p>



<a name="420716113"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420716113" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420716113">(Feb 09 2024 at 19:19)</a>:</h4>
<p>No commit for 2 years</p>



<a name="420716493"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420716493" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420716493">(Feb 09 2024 at 19:22)</a>:</h4>
<p>There're the docs for the normal k8s cluster in docker desktop: <a href="https://docs.docker.com/desktop/kubernetes/">https://docs.docker.com/desktop/kubernetes/</a></p>



<a name="420812544"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420812544" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420812544">(Feb 10 2024 at 16:19)</a>:</h4>
<p>I'm getting an error when I try to use PR <a href="https://github.com/IQSS/dataverse/issues/10314">#10314</a>:</p>
<div class="codehilite"><pre><span></span><code>pdurbin@air dataverse % mvn -Pct k8s:resource k8s:deploy
[INFO] Scanning for projects...
Downloading from central: https://repo.maven.apache.org/maven2/org/codehaus/mojo/maven-metadata.xml
Downloading from central: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-metadata.xml
Downloaded from central: https://repo.maven.apache.org/maven2/org/codehaus/mojo/maven-metadata.xml (21 kB at 108 kB/s)
Downloaded from central: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-metadata.xml (14 kB at 75 kB/s)
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  0.879 s
[INFO] Finished at: 2024-02-10T11:18:08-05:00
[INFO] ------------------------------------------------------------------------
[ERROR] No plugin found for prefix &#39;k8s&#39; in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/Users/pdurbin/.m2/repository), central (https://repo.maven.apache.org/maven2)] -&gt; [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/NoPluginFoundForPrefixException
</code></pre></div>



<a name="420812693"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420812693" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420812693">(Feb 10 2024 at 16:21)</a>:</h4>
<p>My money <span aria-label="money" class="emoji emoji-1f4b0" role="img" title="money">:money:</span> is on you forgot to <code>cd</code> into <code>modules/container-k8s</code></p>



<a name="420840965"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420840965" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420840965">(Feb 10 2024 at 23:26)</a>:</h4>
<p><img alt=":doh:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/48103.png" title="doh"></p>



<a name="420840973"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420840973" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420840973">(Feb 10 2024 at 23:26)</a>:</h4>
<p>Thanks, something is happening!</p>
<div class="codehilite"><pre><span></span><code>pdurbin@air container-k8s % eval $(crc oc-env)
pdurbin@air container-k8s % oc get pods -w
NAME                        READY   STATUS    RESTARTS   AGE
dataverse-894d594c7-xdr2x   0/2     Pending   0          45s
postgres-6c788b5588-2gvn4   1/1     Running   0          45s
</code></pre></div>



<a name="420841188"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420841188" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420841188">(Feb 10 2024 at 23:30)</a>:</h4>
<p>I had to do just <code>crc start</code> though because <code>crc start -c 8 -d 64 -m 16384</code> (and lower amounts of memory and cpu) keeps failing on my laptop at home. <span aria-label="disappointed" class="emoji emoji-1f61e" role="img" title="disappointed">:disappointed:</span></p>



<a name="420841351"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420841351" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420841351">(Feb 10 2024 at 23:33)</a>:</h4>
<p>Nothing seems to be happening. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="420842368"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420842368" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420842368">(Feb 10 2024 at 23:52)</a>:</h4>
<p>I did <code>crc stop</code> and <code>crc delete</code> and tried again with more memory <code>crc start -m 12288</code> (12 GB instead of 9). I have 16 GB on this laptop.</p>



<a name="420842469"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420842469" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420842469">(Feb 10 2024 at 23:52)</a>:</h4>
<p>Hmm, some kind of error, I guess:</p>
<div class="codehilite"><pre><span></span><code>pdurbin@air container-k8s % oc get pods -w
NAME                        READY   STATUS              RESTARTS   AGE
dataverse-894d594c7-xm8tw   0/2     ContainerCreating   0          6s
postgres-6c788b5588-8vh2s   0/1     ContainerCreating   0          6s
postgres-6c788b5588-8vh2s   0/1     Running             0          14s
postgres-6c788b5588-8vh2s   1/1     Running             0          21s
dataverse-894d594c7-xm8tw   1/2     Running             0          39s
dataverse-894d594c7-xm8tw   0/2     Error               0          3m39s
dataverse-894d594c7-xm8tw   1/2     Running             1 (2s ago)   3m40s
</code></pre></div>



<a name="420842499"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420842499" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420842499">(Feb 10 2024 at 23:53)</a>:</h4>
<p><code>Caused by: edu.harvard.iq.dataverse.settings.ConfigCheckService$ConfigurationError: Not all configuration checks passed successfully. See logs above.</code></p>



<a name="420842632"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/420842632" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#420842632">(Feb 10 2024 at 23:56)</a>:</h4>
<p><code>Directory /dv/docroot for docroot space (see dataverse.files.docroot) exists, but is not writeable|#]</code></p>



<a name="421098589"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421098589" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421098589">(Feb 12 2024 at 18:16)</a>:</h4>
<p>At work, where I have double the RAM (32 GB), <code>crc start -c 8 -d 64 -m 16384</code> from <a href="https://github.com/IQSS/dataverse/pull/10314">the PR</a> works, but I get the same "directory not writeable" error:</p>
<p><a href="/user_uploads/53090/RIazioquCpf_cgd4ZhMyF-Gh/Screenshot-2024-02-12-at-1.13.59-PM.png">Screenshot-2024-02-12-at-1.13.59-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/RIazioquCpf_cgd4ZhMyF-Gh/Screenshot-2024-02-12-at-1.13.59-PM.png" title="Screenshot-2024-02-12-at-1.13.59-PM.png"><img src="/user_uploads/53090/RIazioquCpf_cgd4ZhMyF-Gh/Screenshot-2024-02-12-at-1.13.59-PM.png"></a></div>



<a name="421684755"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421684755" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421684755">(Feb 15 2024 at 15:52)</a>:</h4>
<p>Great meeting, thanks all. I'll post the video as soon as I get it. For now here are the notes: <a href="https://docs.google.com/document/d/1eKZANop8IXgM2s6h_UQ14bAO2R0Xn_xo0wEE-WdfKVg/edit?usp=sharing">https://docs.google.com/document/d/1eKZANop8IXgM2s6h_UQ14bAO2R0Xn_xo0wEE-WdfKVg/edit?usp=sharing</a></p>



<a name="421685057"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421685057" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421685057">(Feb 15 2024 at 15:53)</a>:</h4>
<p>One thing that was bothering me was that while we did see the <code>ERROR StatusLogger</code> message on my machine too, we determined it was non-fatal, but then we didn't go on to see what the next fatal error is.</p>



<a name="421685345"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421685345" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421685345">(Feb 15 2024 at 15:54)</a>:</h4>
<p>It turns out I can get a version from the API at least:</p>
<p><a href="/user_uploads/53090/RMctXWuxoi6iUpom5TkAafac/Screenshot-2024-02-15-at-10.50.58-AM.png">Screenshot-2024-02-15-at-10.50.58-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/RMctXWuxoi6iUpom5TkAafac/Screenshot-2024-02-15-at-10.50.58-AM.png" title="Screenshot-2024-02-15-at-10.50.58-AM.png"><img src="/user_uploads/53090/RMctXWuxoi6iUpom5TkAafac/Screenshot-2024-02-15-at-10.50.58-AM.png"></a></div>



<a name="421685840"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421685840" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421685840">(Feb 15 2024 at 15:56)</a>:</h4>
<p>One thing I'm confused about is how to access Dataverse from the host, from my Mac. Under "details" I can see a Pod IP of 10.217.0.63 and a Host IP of 192.168.126.11 but they both timeout when I try to reach them.</p>



<a name="421686432"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421686432" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421686432">(Feb 15 2024 at 15:59)</a>:</h4>
<p>Oh, I should point out that this is with the suggestion from Danni that I showed in the meeting, a change to <code>modules/container-k8s/src/main/jkube/dataverse-deployment.yaml</code>:</p>
<div class="codehilite"><pre><span></span><code>   replicas: 1
   template:
     spec:
+      securityContext:
+        runAsUser: 1000
+        fsGroup: 1000
       containers:
         - name: dataverse
           image: ghcr.io/gdcc/dataverse:openshift-poc
</code></pre></div>



<a name="421725928"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421725928" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421725928">(Feb 15 2024 at 19:31)</a>:</h4>
<p>It looks like the root collection was created, great.</p>
<div class="codehilite"><pre><span></span><code>$ kubectl exec --stdin --tty dataverse-5f6bb9f895-lrfvb -- bash
Defaulted container &quot;dataverse&quot; out of: dataverse, bootstrap
payara@dataverse-5f6bb9f895-lrfvb:~$ curl -s localhost:8080/api/dataverses/:root | jq .
{
  &quot;status&quot;: &quot;OK&quot;,
  &quot;data&quot;: {
    &quot;id&quot;: 1,
    &quot;alias&quot;: &quot;root&quot;,
    &quot;name&quot;: &quot;Root&quot;,
    &quot;dataverseContacts&quot;: [
      {
        &quot;displayOrder&quot;: 0,
        &quot;contactEmail&quot;: &quot;root@mailinator.com&quot;
      }
    ],
    &quot;permissionRoot&quot;: true,
    &quot;description&quot;: &quot;The root dataverse.&quot;,
    &quot;dataverseType&quot;: &quot;UNCATEGORIZED&quot;,
    &quot;creationDate&quot;: &quot;2024-02-15T14:29:34Z&quot;
  }
}
</code></pre></div>



<a name="421726324"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421726324" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421726324">(Feb 15 2024 at 19:33)</a>:</h4>
<p>I'm exec'ing into the container because I'm not sure how to access these API endpoints from the host, my Mac. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="421726567"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421726567" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421726567">(Feb 15 2024 at 19:35)</a>:</h4>
<p><span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> or <span class="user-mention" data-user-id="692013">@Danni Shi</span> do you know?</p>



<a name="421728401"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421728401" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421728401">(Feb 15 2024 at 19:46)</a>:</h4>
<p>Oh, my bad, it's right in the description of <a href="https://github.com/IQSS/dataverse/issues/10314">#10314</a>:</p>
<div class="codehilite"><pre><span></span><code>$ oc port-forward pods/dataverse-5f6bb9f895-lrfvb 8080
Forwarding from 127.0.0.1:8080 -&gt; 8080
Forwarding from [::1]:8080 -&gt; 8080
</code></pre></div>



<a name="421728456"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421728456" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421728456">(Feb 15 2024 at 19:46)</a>:</h4>
<p>It works!</p>
<p><a href="/user_uploads/53090/2dykNty-6-FhQd8fMSMc_-uH/Screenshot-2024-02-15-at-2.45.45-PM.png">Screenshot-2024-02-15-at-2.45.45-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/2dykNty-6-FhQd8fMSMc_-uH/Screenshot-2024-02-15-at-2.45.45-PM.png" title="Screenshot-2024-02-15-at-2.45.45-PM.png"><img src="/user_uploads/53090/2dykNty-6-FhQd8fMSMc_-uH/Screenshot-2024-02-15-at-2.45.45-PM.png"></a></div>



<a name="421728538"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421728538" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421728538">(Feb 15 2024 at 19:47)</a>:</h4>
<p>Like Oliver said during the meeting, there's Solr work to do but this is great progress!</p>



<a name="421741609"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421741609" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421741609">(Feb 15 2024 at 21:11)</a>:</h4>
<p>Shouldn't this go in a YAML file? I'd rather not run this command every time.</p>



<a name="421847115"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/421847115" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#421847115">(Feb 16 2024 at 12:14)</a>:</h4>
<p><span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> should we go ahead and add the commit above about securityContext/runAsUser to <a href="https://github.com/IQSS/dataverse/issues/10314">#10314</a>? Maybe with a TODO to remove it some day?</p>



<a name="423093484"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/423093484" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#423093484">(Feb 23 2024 at 20:57)</a>:</h4>
<p>Ok, I just merged <a href="https://github.com/IQSS/dataverse/issues/10314">#10314</a> BUT before I did, I narrowed the scope, as discussed with Oliver earlier today. We need the various fixes to get our images running under OpenShift. However, I removed the other stuff we don't need yet, the config files, etc.</p>



<a name="423093646"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/423093646" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#423093646">(Feb 23 2024 at 20:58)</a>:</h4>
<p>That's why I changed the title of the PR to "OpenShift prep work". I think this better reflects what I merged.</p>



<a name="423093820"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/423093820" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#423093820">(Feb 23 2024 at 20:59)</a>:</h4>
<p>Anyway, onwards with <a href="https://github.com/IQSS/dataverse/issues/10337">#10337</a> and an operator! Oliver already pushed some code for us to look at! <a href="https://github.com/IQSS/dataverse/compare/develop...10337-k8s-operator">https://github.com/IQSS/dataverse/compare/develop...10337-k8s-operator</a></p>



<a name="423095518"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/423095518" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#423095518">(Feb 23 2024 at 21:11)</a>:</h4>
<p>And there's a dedicated topic: <a class="stream-topic" data-stream-id="375812" href="/#narrow/stream/375812-containers/topic/dvopa.20K8s.20Operator.20.2310337">#containers &gt; dvopa K8s Operator #10337</a></p>



<a name="502581840"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502581840" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502581840">(Feb 28 2025 at 13:44)</a>:</h4>
<p>I successfully followed the demo at <a href="https://guides.dataverse.org/en/latest/container/index.html">Dataverse Guide</a> and was able to run it on my local WSL Docker for testing.</p>
<p>Now, I am attempting to replicate this setup on OpenShift within my organization. However, I am encountering issues with Solr not functioning as expected. I am currently using the GDCC image of Dataverse along with Solr 9, but I am uncertain if this configuration is compatible.</p>
<p>Additionally, I have come across the IQSS images for Dataverse and Solr. Would these be a better alternative?</p>
<p>Are there any specific guides or images available for deploying Dataverse on OpenShift? I would appreciate any guidance you can provide.</p>
<p>Thank you.</p>



<a name="502587841"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502587841" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502587841">(Feb 28 2025 at 14:13)</a>:</h4>
<p>Hi! The <a href="https://hub.docker.com/u/iqss">IQSS images</a> on Docker Hub are old. You shouldn't use them. I'm glad the <a href="https://hub.docker.com/u/gdcc">GDCC images</a> are working for you, the demo version at least.</p>



<a name="502588126"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502588126" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502588126">(Feb 28 2025 at 14:14)</a>:</h4>
<p>We have a topic going at <a class="stream-topic" data-stream-id="375812" href="/#narrow/channel/375812-containers/topic/OpenShift/with/408633083">#containers &gt; OpenShift</a> but it's been a while since anyone has posted anything.</p>



<a name="502588219"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502588219" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502588219">(Feb 28 2025 at 14:15)</a>:</h4>
<p>Actually, I think I'll just merge this topic into that one.</p>



<a name="502588487"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502588487" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502588487">(Feb 28 2025 at 14:16)</a>:</h4>
<p><span class="user-mention" data-user-id="882006">@Gursahib</span> can you please say more about what's not working?</p>



<a name="502592000"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502592000" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502592000">(Feb 28 2025 at 14:32)</a>:</h4>
<p>Hi Philip,</p>
<p>Thank you for your response.</p>
<p>I am encountering an issue where the <code>dvinitializer</code> job requires root privileges, causing it to fail. However, even without it, I was able to deploy Dataverse to the UI level and log in as an admin.</p>
<p>In this deployment, I can create datasets and upload files, but Solr is unable to perform searches or create a Dataverse. I suspect that certain Solr actions require root privileges.</p>
<p>Below is the current pod log:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>chown:<span class="w"> </span>/var/solr/data:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/data:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/logs/solr_gc.log:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/logs/solr.log:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/logs/solr_slow_requests.log:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/logs/2025_02_25.request.log:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/logs/2025_02_26.request.log:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/logs/2025_02_27.request.log:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/logs/2025_02_28.request.log:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/logs:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/logs:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr/log4j2.xml:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
chown:<span class="w"> </span>/var/solr:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>permitted
</code></pre></div>
<p>Would you happen to have any Solr images that do not require root privileges? Any guidance on resolving this issue would be greatly appreciated.</p>



<a name="502594378"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502594378" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502594378">(Feb 28 2025 at 14:43)</a>:</h4>
<p>Huh. I'm surprised Solr requires root. <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> you've been messing around with Kubernetes lately. Any insight on this?</p>



<a name="502595574"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502595574" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502595574">(Feb 28 2025 at 14:48)</a>:</h4>
<p><span class="user-mention" data-user-id="662399">@zbenta</span> you use Kubernetes, right?</p>



<a name="502596234"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502596234" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502596234">(Feb 28 2025 at 14:51)</a>:</h4>
<p>Oh, wait. I think <span class="user-mention" data-user-id="662399">@zbenta</span> is (or was?) using OpenStack, not OpenShift, based on these slides: <a href="https://osf.io/fjw9t">https://osf.io/fjw9t</a></p>



<a name="502596642"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502596642" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502596642">(Feb 28 2025 at 14:53)</a>:</h4>
<p><span class="user-mention" data-user-id="882006">@Gursahib</span> I would suggest asking at <a href="https://groups.google.com/g/dataverse-community">https://groups.google.com/g/dataverse-community</a> if anyone is using OpenShift and has seen this problem with Solr. You'll reach more people there.</p>



<a name="502597000"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502597000" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502597000">(Feb 28 2025 at 14:55)</a>:</h4>
<p>Technically, I am using RKE2, another distribution of K8s.</p>



<a name="502597110"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502597110" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502597110">(Feb 28 2025 at 14:55)</a>:</h4>
<p>Ah, less strict about root?</p>



<a name="502597315"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502597315" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502597315">(Feb 28 2025 at 14:56)</a>:</h4>
<p>Alright, Thank you Philip.<br>
it seems the dv_initializer running script <a href="http://fix-fs-perm.sh">fix-fs-perm.sh</a> in image gdcc/configbacker:alpha needs root.</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>8a7400b16cbd:/scripts#<span class="w"> </span>cat<span class="w"> </span>fix-fs-perms.sh
<span class="c1">#!/bin/bash</span>

<span class="c1"># [INFO]: Fix folder permissions using 'chown' to be writeable by containers not running as root.</span>

<span class="nb">set</span><span class="w"> </span>-euo<span class="w"> </span>pipefail

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">"</span><span class="k">$(</span>id<span class="w"> </span>-un<span class="k">)</span><span class="s2">"</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="s2">"root"</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"This script must be run as user root (not </span><span class="k">$(</span>id<span class="w"> </span>-un<span class="k">)</span><span class="s2">), otherwise no fix is possible."</span>
<span class="k">fi</span>

<span class="nv">DEF_DV_PATH</span><span class="o">=</span><span class="s2">"/dv"</span>
<span class="nv">DEF_SOLR_PATH</span><span class="o">=</span><span class="s2">"/var/solr"</span>
<span class="nv">DEF_DV_UID</span><span class="o">=</span><span class="s2">"1000"</span>
<span class="nv">DEF_SOLR_UID</span><span class="o">=</span><span class="s2">"8983"</span>

<span class="k">function</span><span class="w"> </span>usage<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Usage: </span><span class="k">$(</span>basename<span class="w"> </span><span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span><span class="k">)</span><span class="s2"> (dv|solr|[1-9][0-9]{3,4}) [PATH [PATH [...]]]"</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">""</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"You may omit a path when using 'dv' or 'solr' as first argument:"</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"  - 'dv' will default to user </span><span class="nv">$DEF_DV_UID</span><span class="s2"> and </span><span class="nv">$DEF_DV_PATH</span><span class="s2">"</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"  - 'solr' will default to user </span><span class="nv">$DEF_SOLR_UID</span><span class="s2"> and </span><span class="nv">$DEF_SOLR_PATH</span><span class="s2">"</span>
<span class="w">  </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="o">}</span>

<span class="c1"># Get a target name or id</span>
<span class="nv">TARGET</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">help</span><span class="si">}</span>
<span class="c1"># Get the rest of the arguments as paths to apply the fix to</span>
<span class="nv">PATHS</span><span class="o">=(</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="p">@:</span><span class="nv">2</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">)</span>

<span class="nv">ID</span><span class="o">=</span><span class="m">0</span>
<span class="k">case</span><span class="w"> </span><span class="s2">"</span><span class="nv">$TARGET</span><span class="s2">"</span><span class="w"> </span><span class="k">in</span>
<span class="w">  </span>dv<span class="o">)</span>
<span class="w">    </span><span class="nv">ID</span><span class="o">=</span><span class="s2">"</span><span class="nv">$DEF_DV_UID</span><span class="s2">"</span>
<span class="w">    </span><span class="c1"># If there is no path, add the default for our app image</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="si">${#</span><span class="nv">PATHS</span><span class="p">[@]</span><span class="si">}</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nv">PATHS</span><span class="o">=(</span><span class="w"> </span><span class="s2">"</span><span class="nv">$DEF_DV_PATH</span><span class="s2">"</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span><span class="p">;;</span>
<span class="w">  </span>solr<span class="o">)</span>
<span class="w">    </span><span class="nv">ID</span><span class="o">=</span><span class="s2">"</span><span class="nv">$DEF_SOLR_UID</span><span class="s2">"</span>
<span class="w">    </span><span class="c1"># In case there is no path, add the default path for Solr images</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="si">${#</span><span class="nv">PATHS</span><span class="p">[@]</span><span class="si">}</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nv">PATHS</span><span class="o">=(</span><span class="w"> </span><span class="s2">"</span><span class="nv">$DEF_SOLR_PATH</span><span class="s2">"</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span><span class="p">;;</span>
<span class="w">  </span><span class="c1"># If there is a digit in the argument, check if this is a valid UID (&gt;= 1000, ...)</span>
<span class="w">  </span>*<span class="o">[[</span>:digit:<span class="o">]]</span>*<span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="nv">$TARGET</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-q<span class="w"> </span><span class="s2">"^[1-9][0-9]\{3,4\}</span>$<span class="s2">"</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>usage
<span class="w">    </span><span class="nv">ID</span><span class="o">=</span><span class="s2">"</span><span class="nv">$TARGET</span><span class="s2">"</span>
<span class="w">    </span><span class="p">;;</span>
<span class="w">  </span>*<span class="o">)</span>
<span class="w">    </span>usage
<span class="w">    </span><span class="p">;;</span>
<span class="k">esac</span>

<span class="c1"># Check that we actually have at least 1 path</span>
<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="si">${#</span><span class="nv">PATHS</span><span class="p">[@]</span><span class="si">}</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span>usage
<span class="k">fi</span>

<span class="c1"># Do what we came for</span>
chown<span class="w"> </span>-R<span class="w"> </span><span class="s2">"</span><span class="nv">$ID</span><span class="s2">:</span><span class="nv">$ID</span><span class="s2">"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">PATHS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">"</span>
</code></pre></div>
<p>But i'll check with the datverse community group as well</p>



<a name="502597784"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502597784" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502597784">(Feb 28 2025 at 14:58)</a>:</h4>
<p>And i think solr intializer also uses same image to runsame script.</p>



<a name="502597918"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502597918" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502597918">(Feb 28 2025 at 14:58)</a>:</h4>
<p>I suppose you will be running into problems because of copying the Docker Compose stuff 1:1 onto K8s. Depending on your OpenShift environment, you probably are enforced to use a Pod Security Admission of "restricted" or "baseline". (<a href="https://kubernetes.io/docs/concepts/security/pod-security-admission/">K8s docs</a>, <a href="https://docs.openshift.com/container-platform/4.18//authentication/understanding-and-managing-pod-security-admission.html">OS docs</a>)</p>



<a name="502598058"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502598058" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502598058">(Feb 28 2025 at 14:59)</a>:</h4>
<p>You should not use these scripts in init containers on K8s, they are meant for Docker Compose usage.</p>



<a name="502598211"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502598211" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502598211">(Feb 28 2025 at 15:00)</a>:</h4>
<p><span class="user-mention" data-user-id="882006">@Gursahib</span> that fix perms script was written by <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> so please listen to any advice he has! <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="502598218"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502598218" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502598218">(Feb 28 2025 at 15:00)</a>:</h4>
<p>Are you backing the storage locations with PVCs?</p>



<a name="502598409"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502598409" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502598409">(Feb 28 2025 at 15:01)</a>:</h4>
<p>And are you (as you should if someone is already impossing baseline or restricted on you) setting all the necessary security bits for your <code>Deployment</code>'s <code>.spec.template.spec.securityContext</code> and <code>.spec.template.containers[].securityContext</code> ?</p>



<a name="502598554"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502598554" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502598554">(Feb 28 2025 at 15:01)</a>:</h4>
<p>Another thought is that we had a call with a Red Hat engineer almost a year ago. He's really into Solr so I assume he has it working well on OpenShift. You can see the <a href="https://docs.google.com/document/d/1X69Xig8vgFAMWIS0xw1FIYLT2BgrwImUOWfCt0mwYTw/edit?usp=sharing">notes</a> from the call, watch the <a href="https://harvard.zoom.us/rec/share/zBqcRUfqUOJYPLXd_orU4rY2oqmIXv8mOnNRAyS-rIBJuV6Vqep6N3O3hRHSRuen.IyVubl9breyMGi8R">recording</a>, and check out his <a href="https://github.com/smartabyar-smartvillage/smartvillage-operator">https://github.com/smartabyar-smartvillage/smartvillage-operator</a> project, which uses Solr. Maybe we can even pull him in and ask questions.</p>



<a name="502599137"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502599137" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502599137">(Feb 28 2025 at 15:04)</a>:</h4>
<p>First of all i would like to clear, I am just a Technical designer exploring this for next solution <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> <br>
and this openshift stuff is new to me.</p>
<p><span class="user-mention silent" data-user-id="598183">Oliver Bertuch</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/502598218">said</a>:</p>
<blockquote>
<p>Are you backing the storage locations with PVCs?</p>
</blockquote>
<p>Yes i have PVC's defined as well and yes the Pod security is restricted.</p>



<a name="502599301"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502599301" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502599301">(Feb 28 2025 at 15:05)</a>:</h4>
<p><span class="user-mention" data-user-id="882006">@Gursahib</span> are you using a <a href="https://artifacthub.io/packages/helm/bitnami/solr">Helm Chart to deploy your Solr</a> or the <a href="https://solr.apache.org/operator/">Solr Operator</a>?</p>



<a name="502599626"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502599626" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502599626">(Feb 28 2025 at 15:06)</a>:</h4>
<p>Well for exploration and evaluation I strongly suggest going for Docker Compose first. In the foreseeable future I will be working on better K8s support via Helmcharts and/or Operators for Dataverse, but there are other problems to address first.</p>



<a name="502600381"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502600381" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502600381">(Feb 28 2025 at 15:09)</a>:</h4>
<p>If you want, you can post your K8s objects here and we can try to take a look.</p>



<a name="502600661"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502600661" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502600661">(Feb 28 2025 at 15:11)</a>:</h4>
<p>Well I have already explored dataverse on Docker and of course it works flawlessly there. Now i am tasked to replicate the same in our openshift, its a big learning experience. <br>
I believe I am using neither as I am defining my service myself. <br>
here is the way I create yaml:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>apiVersion:<span class="w"> </span>apps/v1
kind:<span class="w"> </span>StatefulSet
<span class="c1"># kind: Deployment</span>
metadata:
<span class="w">  </span>name:<span class="w"> </span>solr
<span class="w">  </span>labels:
<span class="w">    </span>app:<span class="w"> </span>solr
spec:
<span class="w">  </span>serviceName:<span class="w"> </span>solr
<span class="w">  </span>replicas:<span class="w"> </span><span class="m">1</span>
<span class="w">  </span>selector:
<span class="w">    </span>matchLabels:
<span class="w">      </span>app:<span class="w"> </span>solr
<span class="w">  </span>template:
<span class="w">    </span>metadata:
<span class="w">      </span>labels:
<span class="w">        </span>app:<span class="w"> </span>solr
<span class="w">    </span>spec:
<span class="w">      </span>securityContext:
<span class="w">        </span>fsGroup:<span class="w"> </span><span class="m">1000810000</span>
<span class="w">      </span>containers:
<span class="w">      </span>-<span class="w"> </span>name:<span class="w"> </span>solr
<span class="w">        </span>image:<span class="w"> </span>solr:9.4.1
<span class="w">        </span>ports:
<span class="w">        </span>-<span class="w"> </span>containerPort:<span class="w"> </span><span class="m">8983</span>
<span class="w">        </span>command:<span class="w"> </span><span class="o">[</span><span class="s2">"solr-precreate"</span>,<span class="w"> </span><span class="s2">"collection1"</span>,<span class="w"> </span><span class="s2">"/template"</span><span class="o">]</span>
<span class="w">        </span>volumeMounts:
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>solr-data
<span class="w">            </span>mountPath:<span class="w"> </span>/var/solr
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>solr-template
<span class="w">            </span>mountPath:<span class="w"> </span>/template
<span class="w">        </span>securityContext:
<span class="w">          </span>runAsUser:<span class="w"> </span><span class="m">1000810000</span>
<span class="w">          </span>runAsGroup:<span class="w"> </span><span class="m">1000810000</span>
<span class="w">          </span>allowPrivilegeEscalation:<span class="w"> </span><span class="nb">false</span>
<span class="w">      </span>volumes:
<span class="w">        </span>-<span class="w"> </span>name:<span class="w"> </span>solr-data
<span class="w">          </span>persistentVolumeClaim:
<span class="w">            </span>claimName:<span class="w"> </span>solr-data-pvc
<span class="w">        </span>-<span class="w"> </span>name:<span class="w"> </span>solr-template
<span class="w">          </span>persistentVolumeClaim:
<span class="w">            </span>claimName:<span class="w"> </span>solr-template-pvc
---
apiVersion:<span class="w"> </span>v1
kind:<span class="w"> </span>Service
metadata:
<span class="w">  </span>name:<span class="w"> </span>solr
<span class="w">  </span>labels:
<span class="w">    </span>app:<span class="w"> </span>solr
spec:
<span class="w">  </span>type:<span class="w"> </span>ClusterIP
<span class="w">  </span>ports:
<span class="w">    </span>-<span class="w"> </span>name:<span class="w"> </span>solr
<span class="w">      </span>port:<span class="w"> </span><span class="m">8983</span>
<span class="w">      </span>targetPort:<span class="w"> </span><span class="m">8983</span>
<span class="w">  </span>selector:
<span class="w">    </span>app:<span class="w"> </span>solr
</code></pre></div>



<a name="502602627"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502602627" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502602627">(Feb 28 2025 at 15:20)</a>:</h4>
<p>Have you tried to verify in a running container if the fsGroups are properly applied to the volumes and the user is in that group?</p>



<a name="502603089"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502603089" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502603089">(Feb 28 2025 at 15:22)</a>:</h4>
<p>Yes, I have verified</p>



<a name="502603379"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502603379" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502603379">(Feb 28 2025 at 15:24)</a>:</h4>
<p>Alright, let's see some logs. Can you share the error messages Solr gives you?</p>



<a name="502603838"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502603838" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502603838">(Feb 28 2025 at 15:25)</a>:</h4>
<p>(I don't see the configbaker image anymore here as init container, as it should be :-) )</p>



<a name="502603942"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502603942" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502603942">(Feb 28 2025 at 15:26)</a>:</h4>
<p>BTW - how do you propagate the <code>/template</code> PV? Solr will be having a hard time if there is no template in that folder...</p>



<a name="502605754"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502605754" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502605754">(Feb 28 2025 at 15:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598183">Oliver Bertuch</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/502603942">said</a>:</p>
<blockquote>
<p>BTW - how do you propagate the <code>/template</code> PV? Solr will be having a hard time if there is no template in that folder...</p>
</blockquote>
<p>there is a solr initializer which runs this command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>command:<span class="w"> </span><span class="o">[</span><span class="s2">"sh"</span>,<span class="w"> </span><span class="s2">"-c"</span>,<span class="w"> </span><span class="s2">"fix-fs-perms.sh solr &amp;&amp; cp -a /template/* /solr-template"</span><span class="o">]</span>
</code></pre></div>
<p>which fails again due to root issues on <a href="http://fix-fs-perms.sh">fix-fs-perms.sh</a> script</p>
<hr>
<p><span class="user-mention silent" data-user-id="598183">Oliver Bertuch</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/502603838">said</a>:</p>
<blockquote>
<p>(I don't see the configbaker image anymore here as init container, as it should be :-) )</p>
</blockquote>
<p>its used by solr initializer which is a deployment in itself as:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>apiVersion:<span class="w"> </span>batch/v1
kind:<span class="w"> </span>Job
metadata:
<span class="w">  </span>name:<span class="w"> </span>solr-initializer
spec:
<span class="w">  </span>template:
<span class="w">    </span>metadata:
<span class="w">      </span>name:<span class="w"> </span>solr-initializer
<span class="w">    </span>spec:
<span class="w">      </span>securityContext:
<span class="w">        </span>fsGroup:<span class="w"> </span><span class="m">1000810000</span>
<span class="w">      </span>containers:
<span class="w">      </span>-<span class="w"> </span>name:<span class="w"> </span>solr-initializer
<span class="w">        </span>image:<span class="w"> </span>gdcc/configbaker:alpha
<span class="w">        </span><span class="c1"># command: ["sh", "-c", "mkdir -p /var/solr/data &amp;&amp; chown -R 8983:8983 /var/solr &amp;&amp; fix-fs-perms.sh solr &amp;&amp; cp -a /template/* /solr-template"]</span>
<span class="w">        </span>command:<span class="w"> </span><span class="o">[</span><span class="s2">"sh"</span>,<span class="w"> </span><span class="s2">"-c"</span>,<span class="w"> </span><span class="s2">"fix-fs-perms.sh solr &amp;&amp; cp -a /template/* /solr-template"</span><span class="o">]</span>
<span class="w">        </span>volumeMounts:
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>solr-data
<span class="w">            </span>mountPath:<span class="w"> </span>/var/solr
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>solr-template
<span class="w">            </span>mountPath:<span class="w"> </span>/solr-template
<span class="w">        </span>securityContext:
<span class="w">          </span>runAsUser:<span class="w"> </span><span class="m">1000810000</span>
<span class="w">          </span>runAsGroup:<span class="w"> </span><span class="m">1000810000</span>
<span class="w">          </span>allowPrivilegeEscalation:<span class="w"> </span><span class="nb">false</span>
<span class="w">      </span>restartPolicy:<span class="w"> </span>Never
<span class="w">      </span>volumes:
<span class="w">        </span>-<span class="w"> </span>name:<span class="w"> </span>solr-data
<span class="w">          </span>persistentVolumeClaim:
<span class="w">            </span>claimName:<span class="w"> </span>solr-data-pvc
<span class="w">        </span>-<span class="w"> </span>name:<span class="w"> </span>solr-template
<span class="w">          </span>persistentVolumeClaim:
<span class="w">            </span>claimName:<span class="w"> </span>solr-template-pvc
</code></pre></div>



<a name="502605841"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502605841" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502605841">(Feb 28 2025 at 15:34)</a>:</h4>
<p>Yikes! That sounds like we found the culprit!</p>



<a name="502605941"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502605941" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502605941">(Feb 28 2025 at 15:35)</a>:</h4>
<p>is it a big yikes or a small one <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="502606114"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502606114" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502606114">(Feb 28 2025 at 15:36)</a>:</h4>
<p>A) Please use a proper init container within the <code>solr</code> <code>Deployment</code> object, not a separate deployment. The piece in the docker-compose is also only used as an init container. <a href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/">https://kubernetes.io/docs/concepts/workloads/pods/init-containers/</a></p>



<a name="502606273"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502606273" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502606273">(Feb 28 2025 at 15:36)</a>:</h4>
<p>B) As you are on K8s, you don't need to fix the permissions. This is taken care of by K8s for you, using the <code>fsGroup</code> trick that will ensure the volume is ready to go for you. So you won't need the first part of the shell command.</p>



<a name="502606343"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502606343" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502606343">(Feb 28 2025 at 15:37)</a>:</h4>
<p>C) I suggest you use an <code>emptyDir</code> type volume for the template volume.</p>



<a name="502607020"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502607020" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502607020">(Feb 28 2025 at 15:40)</a>:</h4>
<p>D) I also suggest moving the <code>runAsUser</code> and <code>runAsGroup</code> bits to <code>.spec.template.spec.securityContext</code>, so you only need to set it once for all containers in the pod.</p>



<a name="502607200"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502607200" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502607200">(Feb 28 2025 at 15:41)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span>  for your insights. As I mentioned earlier, this is a new area (we are shifting to DevOps) for both myself and most of our team, so we are continuously learning these concepts over time.<br>
I appreciate your suggestions and will incorporate them accordingly.</p>



<a name="502607233"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502607233" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502607233">(Feb 28 2025 at 15:41)</a>:</h4>
<p>Also, it is a common (but not good/best) practice to set <code>fsGroup</code> to sth. else than <code>runAsGroup</code>. But that's just a minor thing, you can probably ignore it.</p>



<a name="502608711"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502608711" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502608711">(Feb 28 2025 at 15:48)</a>:</h4>
<p><span class="user-mention" data-user-id="882006">@Gursahib</span> once you have this working, would you want to add a page about OpenShift to the Container Guide? I'm happy to help.</p>



<a name="502608751"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502608751" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502608751">(Feb 28 2025 at 15:48)</a>:</h4>
<p><span class="user-mention" data-user-id="882006">@Gursahib</span>  I also <em>VERY STRONGLY</em> suggest to set limits for CPU, memory, and storage, drop the capabilities, set liveness and readiness probes, try to use read-only root fs, set a pull image policy. </p>
<p>Also, you seem to be running in <code>default</code> namespace, which is a bad idea for production but might be OK for testing.</p>
<p>Also, the most common labels are missing, you are using very old standards here...</p>
<p>Here are some helpful tools: <a href="https://learnk8s.io/validating-kubernetes-yaml">https://learnk8s.io/validating-kubernetes-yaml</a></p>



<a name="502609112"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502609112" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502609112">(Feb 28 2025 at 15:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin ☃️</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/502608711">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="882006">Gursahib</span> once you have this working, would you want to add a page about OpenShift to the Container Guide? I'm happy to help.</p>
</blockquote>
<p>Sure <span class="user-mention" data-user-id="598112">@Philip Durbin ☃️</span> , Once I have this running would share what I learned and can help in documenting it as well.</p>



<a name="502609595"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/502609595" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#502609595">(Feb 28 2025 at 15:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598183">Oliver Bertuch</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/502608751">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="882006">Gursahib</span>  I also <em>VERY STRONGLY</em> suggest to set limits for CPU, memory, and storage, drop the capabilities, set liveness and readiness probes, try to use read-only root fs, set a pull image policy. </p>
<p>Also, you seem to be running in <code>default</code> namespace, which is a bad idea for production but might be OK for testing.</p>
<p>Also, the most common labels are missing, you are using very old standards here...</p>
</blockquote>
<p>The environment i am working in is kind of a playground for testing so nothing to worry about here</p>



<a name="507768627"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507768627" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507768627">(Mar 24 2025 at 13:46)</a>:</h4>
<p>Hey guys I am back and good news, after following Oliver's guidance the Dataverse is running on openshift environment. Last thing left is the previewers not working properly. I have tried everything but can't seem to find any solutions. The preview register is working fine. I am not sure what I am missing, if this works then I think we can have a complete documentation of deploying in Openshift.</p>
<p>Here Is the error i get from the logs of previewers pod:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/docker-entrypoint.sh:<span class="w"> </span>/docker-entrypoint.d/<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>empty,<span class="w"> </span>will<span class="w"> </span>attempt<span class="w"> </span>to<span class="w"> </span>perform<span class="w"> </span>configuration
/docker-entrypoint.sh:<span class="w"> </span>Looking<span class="w"> </span><span class="k">for</span><span class="w"> </span>shell<span class="w"> </span>scripts<span class="w"> </span><span class="k">in</span><span class="w"> </span>/docker-entrypoint.d/
/docker-entrypoint.sh:<span class="w"> </span>Launching<span class="w"> </span>/docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
<span class="m">10</span>-listen-on-ipv6-by-default.sh:<span class="w"> </span>info:<span class="w"> </span>can<span class="w"> </span>not<span class="w"> </span>modify<span class="w"> </span>/etc/nginx/conf.d/default.conf<span class="w"> </span><span class="o">(</span>read-only<span class="w"> </span>file<span class="w"> </span>system?<span class="o">)</span>
/docker-entrypoint.sh:<span class="w"> </span>Sourcing<span class="w"> </span>/docker-entrypoint.d/15-local-resolvers.envsh
/docker-entrypoint.sh:<span class="w"> </span>Launching<span class="w"> </span>/docker-entrypoint.d/20-envsubst-on-templates.sh
<span class="m">20</span>-envsubst-on-templates.sh:<span class="w"> </span>ERROR:<span class="w"> </span>/etc/nginx/templates<span class="w"> </span>exists,<span class="w"> </span>but<span class="w"> </span>/etc/nginx/conf.d<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>writable
/docker-entrypoint.sh:<span class="w"> </span>Launching<span class="w"> </span>/docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh:<span class="w"> </span>Launching<span class="w"> </span>/docker-entrypoint.d/init.sh
Using<span class="w"> </span>Provider<span class="w"> </span><span class="nv">Url</span><span class="o">=</span>http://previewers-provider:9000<span class="w"> </span><span class="k">for</span><span class="w"> </span>versions<span class="w"> </span>v1.4,betatest
Downloading<span class="w"> </span><span class="nb">local</span><span class="w"> </span>copies<span class="w"> </span>of<span class="w"> </span>remote<span class="w"> </span>JavaScript<span class="w"> </span>libraries:
./localinstall.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">22</span>:<span class="w"> </span>replace_js.sh:<span class="w"> </span>Permission<span class="w"> </span>denied
./localinstall.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">23</span>:<span class="w"> </span>urls_js.txt:<span class="w"> </span>Permission<span class="w"> </span>denied
./localinstall.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">24</span>:<span class="w"> </span>replace_js.sh:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
cat:<span class="w"> </span>urls_js.txt:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
Downloading<span class="w"> </span><span class="nb">local</span><span class="w"> </span>copies<span class="w"> </span>of<span class="w"> </span>remote<span class="w"> </span>CSS<span class="w"> </span>files:
./localinstall.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">28</span>:<span class="w"> </span>replace_css.sh:<span class="w"> </span>Permission<span class="w"> </span>denied
./localinstall.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">29</span>:<span class="w"> </span>urls_css.txt:<span class="w"> </span>Permission<span class="w"> </span>denied
./localinstall.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">30</span>:<span class="w"> </span>replace_css.sh:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
cat:<span class="w"> </span>urls_css.txt:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
./localinstall.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">39</span>:<span class="w"> </span>../urls_js.txt:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
./localinstall.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">49</span>:<span class="w"> </span>../urls_css.txt:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
Changing<span class="w"> </span>example<span class="w"> </span>curl<span class="w"> </span>commands<span class="w"> </span>to<span class="w"> </span>use<span class="w"> </span><span class="nb">local</span><span class="w"> </span>URLs
sed:<span class="w"> </span>couldn<span class="s1">'t open temporary file ./sedl9f3ws: Permission denied</span>
<span class="s1">Done changing example curl commands to use local URLs</span>
<span class="s1">Cleaning Up...</span>
<span class="s1">rm: cannot remove '</span>urls_js.txt<span class="s1">': No such file or directory</span>
<span class="s1">rm: cannot remove '</span>urls_css.txt<span class="s1">': No such file or directory</span>
<span class="s1">rm: cannot remove '</span>replace_js.sh<span class="s1">': No such file or directory</span>
<span class="s1">rm: cannot remove '</span>replace_css.sh<span class="s1">': No such file or directory</span>
<span class="s1">Done</span>
<span class="s1">cp: cannot create regular file '</span>previewers/v1.4/5.2curlcommands.md<span class="s1">': Permission denied</span>
<span class="s1">cp: cannot create regular file '</span>previewers/v1.4/6.1curlcommands.md<span class="s1">': Permission denied</span>
<span class="s1">cp: cannot create regular file '</span>previewers/v1.4/CONTRIBUTING.md<span class="s1">': Permission denied</span>
<span class="s1">cp: cannot create regular file '</span>previewers/v1.4/README.md<span class="s1">': Permission denied</span>
<span class="s1">cp: cannot create regular file '</span>previewers/v1.4/pre5.2curlcommands.md<span class="s1">': Permission denied</span>
<span class="s1">Downloading local copies of remote JavaScript libraries:</span>
<span class="s1">./localinstall.sh: line 22: replace_js.sh: Permission denied</span>
<span class="s1">./localinstall.sh: line 23: urls_js.txt: Permission denied</span>
<span class="s1">./localinstall.sh: line 24: replace_js.sh: No such file or directory</span>
<span class="s1">cat: urls_js.txt: No such file or directory</span>
<span class="s1">Downloading local copies of remote CSS files:</span>
<span class="s1">./localinstall.sh: line 28: replace_css.sh: Permission denied</span>
<span class="s1">./localinstall.sh: line 29: urls_css.txt: Permission denied</span>
<span class="s1">./localinstall.sh: line 30: replace_css.sh: No such file or directory</span>
<span class="s1">cat: urls_css.txt: No such file or directory</span>
<span class="s1">./localinstall.sh: line 39: ../urls_js.txt: No such file or directory</span>
<span class="s1">./localinstall.sh: line 49: ../urls_css.txt: No such file or directory</span>
<span class="s1">Changing example curl commands to use local URLs</span>
<span class="s1">sed: couldn'</span>t<span class="w"> </span>open<span class="w"> </span>temporary<span class="w"> </span>file<span class="w"> </span>./sedPdDuuk:<span class="w"> </span>Permission<span class="w"> </span>denied
Done<span class="w"> </span>changing<span class="w"> </span>example<span class="w"> </span>curl<span class="w"> </span>commands<span class="w"> </span>to<span class="w"> </span>use<span class="w"> </span><span class="nb">local</span><span class="w"> </span>URLs
Cleaning<span class="w"> </span>Up...
rm:<span class="w"> </span>cannot<span class="w"> </span>remove<span class="w"> </span><span class="s1">'urls_js.txt'</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
rm:<span class="w"> </span>cannot<span class="w"> </span>remove<span class="w"> </span><span class="s1">'urls_css.txt'</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
rm:<span class="w"> </span>cannot<span class="w"> </span>remove<span class="w"> </span><span class="s1">'replace_js.sh'</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
Done
rm:<span class="w"> </span>cannot<span class="w"> </span>remove<span class="w"> </span><span class="s1">'replace_css.sh'</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
cp:<span class="w"> </span>cannot<span class="w"> </span>create<span class="w"> </span>regular<span class="w"> </span>file<span class="w"> </span><span class="s1">'previewers/betatest/5.2curlcommands.md'</span>:<span class="w"> </span>Permission<span class="w"> </span>denied
cp:<span class="w"> </span>cannot<span class="w"> </span>create<span class="w"> </span>regular<span class="w"> </span>file<span class="w"> </span><span class="s1">'previewers/betatest/6.1curlcommands.md'</span>:<span class="w"> </span>Permission<span class="w"> </span>denied
cp:<span class="w"> </span>cannot<span class="w"> </span>create<span class="w"> </span>regular<span class="w"> </span>file<span class="w"> </span><span class="s1">'previewers/betatest/CONTRIBUTING.md'</span>:<span class="w"> </span>Permission<span class="w"> </span>denied
cp:<span class="w"> </span>cannot<span class="w"> </span>create<span class="w"> </span>regular<span class="w"> </span>file<span class="w"> </span><span class="s1">'previewers/betatest/README.md'</span>:<span class="w"> </span>Permission<span class="w"> </span>denied
cp:<span class="w"> </span>cannot<span class="w"> </span>create<span class="w"> </span>regular<span class="w"> </span>file<span class="w"> </span><span class="s1">'previewers/betatest/pre5.2curlcommands.md'</span>:<span class="w"> </span>Permission<span class="w"> </span>denied
/docker-entrypoint.sh:<span class="w"> </span>Configuration<span class="w"> </span>complete<span class="p">;</span><span class="w"> </span>ready<span class="w"> </span><span class="k">for</span><span class="w"> </span>start<span class="w"> </span>up
<span class="m">2025</span>/03/24<span class="w"> </span><span class="m">13</span>:38:43<span class="w"> </span><span class="o">[</span>warn<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="c1">#1: the "user" directive makes sense only if the master process runs with super-user privileges, ignored in /etc/nginx/nginx.conf:2</span>
nginx:<span class="w"> </span><span class="o">[</span>warn<span class="o">]</span><span class="w"> </span>the<span class="w"> </span><span class="s2">"user"</span><span class="w"> </span>directive<span class="w"> </span>makes<span class="w"> </span>sense<span class="w"> </span>only<span class="w"> </span><span class="k">if</span><span class="w"> </span>the<span class="w"> </span>master<span class="w"> </span>process<span class="w"> </span>runs<span class="w"> </span>with<span class="w"> </span>super-user<span class="w"> </span>privileges,<span class="w"> </span>ignored<span class="w"> </span><span class="k">in</span><span class="w"> </span>/etc/nginx/nginx.conf:2
<span class="m">2025</span>/03/24<span class="w"> </span><span class="m">13</span>:38:43<span class="w"> </span><span class="o">[</span>notice<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="c1">#1: using the "epoll" event method</span>
<span class="m">2025</span>/03/24<span class="w"> </span><span class="m">13</span>:38:43<span class="w"> </span><span class="o">[</span>notice<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="c1">#1: nginx/1.27.2</span>
<span class="m">2025</span>/03/24<span class="w"> </span><span class="m">13</span>:38:43<span class="w"> </span><span class="o">[</span>notice<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="c1">#1: built by gcc 12.2.0 (Debian 12.2.0-14)</span>
<span class="m">2025</span>/03/24<span class="w"> </span><span class="m">13</span>:38:43<span class="w"> </span><span class="o">[</span>notice<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="c1">#1: OS: Linux 4.18.0-372.131.1.el8_6.x86_64</span>
<span class="m">2025</span>/03/24<span class="w"> </span><span class="m">13</span>:38:43<span class="w"> </span><span class="o">[</span>notice<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="c1">#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576</span>
<span class="m">2025</span>/03/24<span class="w"> </span><span class="m">13</span>:38:43<span class="w"> </span><span class="o">[</span>notice<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="c1">#1: start worker processes</span>
</code></pre></div>
<p>And here is the Yaml config:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="c1"># kustomize/base/register-previewers.yaml</span>
apiVersion:<span class="w"> </span>apps/v1
kind:<span class="w"> </span>Deployment
metadata:
<span class="w">  </span>name:<span class="w"> </span>previewers-provider
<span class="w">  </span>labels:
<span class="w">    </span>app:<span class="w"> </span>previewers-provider
spec:
<span class="w">  </span>replicas:<span class="w"> </span><span class="m">1</span>
<span class="w">  </span>selector:
<span class="w">    </span>matchLabels:
<span class="w">      </span>app:<span class="w"> </span>previewers-provider
<span class="w">  </span>template:
<span class="w">    </span>metadata:
<span class="w">      </span>labels:
<span class="w">        </span>app:<span class="w"> </span>previewers-provider
<span class="w">    </span>spec:
<span class="w">      </span>securityContext:
<span class="w">        </span>fsGroup:<span class="w"> </span><span class="m">1000810000</span>
<span class="w">      </span>containers:
<span class="w">      </span>-<span class="w"> </span>name:<span class="w"> </span>previewers-provider
<span class="w">        </span>image:<span class="w"> </span>dockerhub/trivadis/dataverse-previewers-provider:latest
<span class="w">        </span>securityContext:
<span class="w">          </span>runAsUser:<span class="w"> </span><span class="m">1000810000</span>
<span class="w">          </span>runAsGroup:<span class="w"> </span><span class="m">1000810000</span>
<span class="w">          </span>allowPrivilegeEscalation:<span class="w"> </span><span class="nb">false</span>
<span class="w">          </span>readOnlyRootFilesystem:<span class="w"> </span><span class="nb">false</span><span class="w">  </span><span class="c1"># Allow writing to mounted dirs</span>
<span class="w">        </span>ports:
<span class="w">          </span>-<span class="w"> </span>containerPort:<span class="w"> </span><span class="m">9000</span>
<span class="w">        </span>env:
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>NGINX_HTTP_PORT
<span class="w">            </span>value:<span class="w"> </span><span class="s2">"9000"</span>
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>PREVIEWERS_PROVIDER_URL
<span class="w">            </span>value:<span class="w"> </span><span class="s2">"http://previewers-provider:9000"</span>
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>VERSIONS
<span class="w">            </span>value:<span class="w"> </span><span class="s2">"v1.4,betatest"</span>
<span class="w">        </span>volumeMounts:
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>nginx-config
<span class="w">            </span>mountPath:<span class="w"> </span>/etc/nginx/conf.d/default.conf
<span class="w">            </span>subPath:<span class="w"> </span>default.conf
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>previewers-storage
<span class="w">            </span>mountPath:<span class="w"> </span>/usr/share/nginx/html/previewers
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>cache-volume
<span class="w">            </span>mountPath:<span class="w"> </span>/var/cache/nginx
<span class="w">          </span>-<span class="w"> </span>name:<span class="w"> </span>run-volume
<span class="w">            </span>mountPath:<span class="w"> </span>/var/run
<span class="w">      </span>volumes:
<span class="w">        </span>-<span class="w"> </span>name:<span class="w"> </span>nginx-config
<span class="w">          </span>configMap:
<span class="w">            </span>name:<span class="w"> </span>nginx-config<span class="w">  </span><span class="c1"># Using subPath for correct mount</span>
<span class="w">        </span>-<span class="w"> </span>name:<span class="w"> </span>previewers-storage
<span class="w">          </span>emptyDir:<span class="w"> </span><span class="o">{}</span><span class="w">  </span><span class="c1"># Allowing writing</span>
<span class="w">        </span>-<span class="w"> </span>name:<span class="w"> </span>cache-volume
<span class="w">          </span>emptyDir:<span class="w"> </span><span class="o">{}</span>
<span class="w">        </span>-<span class="w"> </span>name:<span class="w"> </span>run-volume
<span class="w">          </span>emptyDir:<span class="w"> </span><span class="o">{}</span>

---
apiVersion:<span class="w"> </span>v1
kind:<span class="w"> </span>Service
metadata:
<span class="w">  </span>name:<span class="w"> </span>previewers-provider
<span class="w">  </span>labels:
<span class="w">    </span>app:<span class="w"> </span>previewers-provider
spec:
<span class="w">  </span>type:<span class="w"> </span>ClusterIP
<span class="w">  </span>ports:
<span class="w">    </span>-<span class="w"> </span>port:<span class="w"> </span><span class="m">9000</span>
<span class="w">      </span>targetPort:<span class="w"> </span><span class="m">9000</span>
<span class="w">  </span>selector:
<span class="w">    </span>app:<span class="w"> </span>previewers-provider

---
apiVersion:<span class="w"> </span>v1
kind:<span class="w"> </span>ConfigMap
metadata:
<span class="w">  </span>name:<span class="w"> </span>nginx-config
data:
<span class="w">  </span>default.conf:<span class="w"> </span><span class="p">|</span>
<span class="w">    </span>server<span class="w"> </span><span class="o">{</span>
<span class="w">      </span>listen<span class="w"> </span><span class="m">9000</span><span class="p">;</span>
<span class="w">      </span>server_name<span class="w"> </span>localhost<span class="p">;</span>

<span class="w">      </span><span class="c1"># NGINX configuration to handle the requests</span>
<span class="w">      </span>location<span class="w"> </span>/previewers/<span class="w"> </span><span class="o">{</span>
<span class="w">        </span>root<span class="w"> </span>/usr/share/nginx/html<span class="p">;</span>
<span class="w">        </span>try_files<span class="w"> </span><span class="nv">$uri</span><span class="w"> </span><span class="nv">$uri</span>/<span class="w"> </span><span class="o">=</span><span class="m">404</span><span class="p">;</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
</code></pre></div>



<a name="507771743"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507771743" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507771743">(Mar 24 2025 at 13:56)</a>:</h4>
<p>That's amazing that Dataverse itself is working fine on OpenShift. <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
<p><span class="user-mention" data-user-id="882006">@Gursahib</span> do you want to <a href="https://guides.dataverse.org/en/6.6/contributor/documentation.html">add something</a> about the Container Guide about this? <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="507772065"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507772065" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507772065">(Mar 24 2025 at 13:57)</a>:</h4>
<p>As for the previewers, I'm not sure how to test this. Maybe using <a href="https://developers.redhat.com/products/openshift-local/getting-started">OpenShift Local</a>? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="507772725"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507772725" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507772725">(Mar 24 2025 at 13:59)</a>:</h4>
<p>It looks like there's also something called MicroShift: <a href="https://developers.redhat.com/articles/2025/02/20/why-developers-should-use-microshift">https://developers.redhat.com/articles/2025/02/20/why-developers-should-use-microshift</a></p>



<a name="507773702"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507773702" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507773702">(Mar 24 2025 at 14:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin ☀️</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/507771743">said</a>:</p>
<blockquote>
<p>That's amazing that Dataverse itself is working fine on OpenShift. <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
<p><span class="user-mention silent" data-user-id="882006">Gursahib</span> do you want to <a href="https://guides.dataverse.org/en/6.6/contributor/documentation.html">add something</a> about the Container Guide about this? <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>
</blockquote>
<p>Sure <span class="user-mention" data-user-id="598112">@Philip Durbin ☀️</span>  I can contribute to the whole section on Openshift, but right now I want to deliver this to researchers I am working with. And I want it to be working 100%. I promise you I'll add a full featured document of OpenShift installation.</p>



<a name="507774060"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507774060" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507774060">(Mar 24 2025 at 14:03)</a>:</h4>
<p>Fantastic! No rush!</p>



<a name="507774142"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507774142" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507774142">(Mar 24 2025 at 14:03)</a>:</h4>
<p>Yes, let's get this delivered to your researchers first. <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="507774146"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507774146" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507774146">(Mar 24 2025 at 14:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin ☀️</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/507772725">said</a>:</p>
<blockquote>
<p>It looks like there's also something called MicroShift: <a href="https://developers.redhat.com/articles/2025/02/20/why-developers-should-use-microshift">https://developers.redhat.com/articles/2025/02/20/why-developers-should-use-microshift</a></p>
</blockquote>
<p>I have heard of both systems but I am pretty sure these local deployments will work without a doubt, as there will be less security constraints. Still I would give it a try if nothing works.</p>



<a name="507774525"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507774525" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507774525">(Mar 24 2025 at 14:04)</a>:</h4>
<p><span class="user-mention" data-user-id="882006">@Gursahib</span> as a starting point, could you please add an issue to <a href="https://github.com/IQSS/dataverse/issues">https://github.com/IQSS/dataverse/issues</a> about the trouble you're having with previewers in OpenShift?</p>



<a name="507777161"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507777161" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507777161">(Mar 24 2025 at 14:13)</a>:</h4>
<p><span class="user-mention" data-user-id="882006">@Gursahib</span> these Trivadis Previewer Containers are not supported by the community. I would neither call them production ready nor well documented. Also, I wouldn't endorse using them at this point.</p>
<p>That said, judging from looking at the <code>localinstall.sh</code> script inside the container (the sources are nowhere to be found), the scripts wants to write to <code>/app</code>, which isn't backed by a volume in your <code>Deployment</code>.</p>



<a name="507778364"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507778364" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507778364">(Mar 24 2025 at 14:17)</a>:</h4>
<p>Then what image do you suggest <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> ?</p>



<a name="507778935"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507778935" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507778935">(Mar 24 2025 at 14:18)</a>:</h4>
<p>I picked the Trivadis from the <a href="https://guides.dataverse.org/en/6.6/container/running/demo.html">demo docker yaml</a></p>



<a name="507782701"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507782701" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507782701">(Mar 24 2025 at 14:30)</a>:</h4>
<p>Right, we did recently add those Trivadis images to the "demo or eval" use case in <a href="https://github.com/IQSS/dataverse/issues/11181">#11181</a>.</p>



<a name="507782851"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507782851" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507782851">(Mar 24 2025 at 14:31)</a>:</h4>
<p>We've talked about building our own images but for now the Trivadis images are what we have.</p>



<a name="507783648"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507783648" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507783648">(Mar 24 2025 at 14:33)</a>:</h4>
<p><span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> you're looking for the Dockerfile? It's here: <a href="https://github.com/gdcc/dataverse-previewers/compare/develop...gschmutz:dataverse-previewers:develop">https://github.com/gdcc/dataverse-previewers/compare/develop...gschmutz:dataverse-previewers:develop</a></p>



<a name="507788706"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507788706" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507788706">(Mar 24 2025 at 14:49)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="598112">@Philip Durbin ☀️</span> for the link! I searched under the Trivadis repos (there is a preview register container) and tried searching, but did come up empty handed.</p>



<a name="507789109"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507789109" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507789109">(Mar 24 2025 at 14:50)</a>:</h4>
<p>Indeed, the Trivadis Preview containers are currently the only thing that's out there <span class="user-mention" data-user-id="882006">@Gursahib</span>, so it's probably fine that they are not production ready for your use case.</p>



<a name="507791150"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507791150" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507791150">(Mar 24 2025 at 14:57)</a>:</h4>
<p>Its Alright, I will see what I can do. If it doesnt work then that's how it is <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span>.<br>
Thank you for the help <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span>  and <span class="user-mention" data-user-id="598112">@Philip Durbin ☀️</span> <br>
I'll see when i can contribute for OpenShift deployment. Probably from next week.</p>



<a name="507791583"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507791583" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507791583">(Mar 24 2025 at 14:58)</a>:</h4>
<p>Fantastic! <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="507791873"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507791873" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507791873">(Mar 24 2025 at 14:59)</a>:</h4>
<p>btw I added a volume for /app as well, and as you mentioned indeed seems to be empty:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>docker-entrypoint.sh:<span class="w"> </span>/docker-entrypoint.d/<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>empty,<span class="w"> </span>will<span class="w"> </span>attempt<span class="w"> </span>to<span class="w"> </span>perform<span class="w"> </span>configuration
/docker-entrypoint.sh:<span class="w"> </span>Looking<span class="w"> </span><span class="k">for</span><span class="w"> </span>shell<span class="w"> </span>scripts<span class="w"> </span><span class="k">in</span><span class="w"> </span>/docker-entrypoint.d/
/docker-entrypoint.sh:<span class="w"> </span>Launching<span class="w"> </span>/docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
<span class="m">10</span>-listen-on-ipv6-by-default.sh:<span class="w"> </span>info:<span class="w"> </span>can<span class="w"> </span>not<span class="w"> </span>modify<span class="w"> </span>/etc/nginx/conf.d/default.conf<span class="w"> </span><span class="o">(</span>read-only<span class="w"> </span>file<span class="w"> </span>system?<span class="o">)</span>
/docker-entrypoint.sh:<span class="w"> </span>Sourcing<span class="w"> </span>/docker-entrypoint.d/15-local-resolvers.envsh
/docker-entrypoint.sh:<span class="w"> </span>Launching<span class="w"> </span>/docker-entrypoint.d/20-envsubst-on-templates.sh
<span class="m">20</span>-envsubst-on-templates.sh:<span class="w"> </span>ERROR:<span class="w"> </span>/etc/nginx/templates<span class="w"> </span>exists,<span class="w"> </span>but<span class="w"> </span>/etc/nginx/conf.d<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>writable
/docker-entrypoint.sh:<span class="w"> </span>Launching<span class="w"> </span>/docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh:<span class="w"> </span>Launching<span class="w"> </span>/docker-entrypoint.d/init.sh
Using<span class="w"> </span>Provider<span class="w"> </span><span class="nv">Url</span><span class="o">=</span>http://previewers-provider:9000<span class="w"> </span><span class="k">for</span><span class="w"> </span>versions<span class="w"> </span>v1.4,betatest
/docker-entrypoint.d/init.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">15</span>:<span class="w"> </span>./localinstall.sh:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
cp:<span class="w"> </span>cannot<span class="w"> </span>stat<span class="w"> </span><span class="s1">'*.md'</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
/docker-entrypoint.d/init.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">19</span>:<span class="w"> </span>./localinstall.sh:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
cp:<span class="w"> </span>cannot<span class="w"> </span>stat<span class="w"> </span><span class="s1">'*.md'</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
cp:<span class="w"> </span>cannot<span class="w"> </span>stat<span class="w"> </span><span class="s1">'./previewers'</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</code></pre></div>
<p>ther error's are now limited till this</p>



<a name="507792250"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507792250" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507792250">(Mar 24 2025 at 15:00)</a>:</h4>
<p>Ooops, yeah obviously mounting it there will make the directory empty...</p>



<a name="507792414"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507792414" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507792414">(Mar 24 2025 at 15:01)</a>:</h4>
<p>Let me take a look if we can trick the script into cooperating or if it needs to be extended</p>



<a name="507793463"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507793463" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507793463">(Mar 24 2025 at 15:04)</a>:</h4>
<p>Urgh this is hard to do... The entrypoint changes the folder to the one where the previewers are located within the container.</p>



<a name="507793517"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507793517" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507793517">(Mar 24 2025 at 15:04)</a>:</h4>
<p>And executes commands there</p>



<a name="507793889"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507793889" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507793889">(Mar 24 2025 at 15:05)</a>:</h4>
<p>That's not gonna be easy to work around. You'd have to make a fork and create your own image based on what's there...</p>



<a name="507794102"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507794102" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507794102">(Mar 24 2025 at 15:06)</a>:</h4>
<p>Would you be able to do a code contribution?</p>



<a name="507794251"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507794251" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507794251">(Mar 24 2025 at 15:06)</a>:</h4>
<p>At some point I will look into this, but don't have the bandwidth at the moment.</p>



<a name="507794666"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507794666" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507794666">(Mar 24 2025 at 15:08)</a>:</h4>
<p>exactly, this is quite challenging. </p>
<p><span class="user-mention silent" data-user-id="598183">Oliver Bertuch</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/507794102">said</a>:</p>
<blockquote>
<p>Would you be able to do a code contribution?</p>
</blockquote>
<p>I will see if I achieve it on my side then sure, will take time though.</p>



<a name="507794940"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507794940" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507794940">(Mar 24 2025 at 15:09)</a>:</h4>
<p>Don't worry its not breaking the Dataverse, its just one feature which need some polishing.<br>
Anyways thank you for your help <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span></p>



<a name="507795095"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507795095" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507795095">(Mar 24 2025 at 15:09)</a>:</h4>
<p>Yeah well there's so many things that still require tweaking for a smooth container / K8s experience...</p>



<a name="507795355"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507795355" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507795355">(Mar 24 2025 at 15:10)</a>:</h4>
<p>I'd be happy to receive feedback here what your pain points are</p>



<a name="507795564"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507795564" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507795564">(Mar 24 2025 at 15:11)</a>:</h4>
<p>I assume to start working on our migration from Dataverse 4.20 on K8s to the latest and want to get some stuff done in a fork and upstream the changes later. Maybe some of these pain points align <span aria-label="smile cat" class="emoji emoji-1f638" role="img" title="smile cat">:smile_cat:</span></p>



<a name="507795954"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507795954" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507795954">(Mar 24 2025 at 15:12)</a>:</h4>
<p>Where should the code contribution go? In <a href="https://github.com/gdcc/dataverse-previewers">https://github.com/gdcc/dataverse-previewers</a> ? We'll want the Dockerfile to live there, eventually?</p>



<a name="507796042"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507796042" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507796042">(Mar 24 2025 at 15:13)</a>:</h4>
<p>Yeah, that would be my guess (for both questions).</p>



<a name="507796380"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507796380" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507796380">(Mar 24 2025 at 15:14)</a>:</h4>
<p><span class="user-mention" data-user-id="882006">@Gursahib</span> do you want to make a PR against that repo?</p>



<a name="507799871"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507799871" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507799871">(Mar 24 2025 at 15:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598183">Oliver Bertuch</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/507795564">said</a>:</p>
<blockquote>
<p>I assume to start working on our migration from Dataverse 4.20 on K8s to the latest and want to get some stuff done in a fork and upstream the changes later. Maybe some of these pain points align <span aria-label="smile cat" class="emoji emoji-1f638" role="img" title="smile cat">:smile_cat:</span></p>
</blockquote>
<p>Haha, sure. I had to do lot of changes in the components along with Dataverse, but here are few Major ones:</p>
<ol>
<li>In docker You can control the deployment order but here in OpenShift, even after adding delays to wait for PostgreSQL(in my case)/storage to be up, Dataverse fails trying to connect to the storage. Resolving this would be nice. I have added few JVM_Args but didn't do much. </li>
<li>In OpneShift ports need to be above 100, as below that are not allowed due to security reasons (or was it below 1000, don't remember now but yeah you got the Idea)</li>
</ol>
<p>The classic example for point 2 is smtp on port 25, and due to its failure, as port 25 is not allowed, there was connection request timeout period on whenever an Admin mail is created. And during this time out Dataverse freezes in operations like, creating new dataverse, dataset; publishing the dataset/ dataverse. Basically anything which needed to send an email notification. </p>
<p>I had used 2525 for port but default script uses 25, so I had to add a variable for that to. <br>
These are few pain points I can think of and the major one is previewer functionality</p>



<a name="507800616"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507800616" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507800616">(Mar 24 2025 at 15:27)</a>:</h4>
<p>Ad 1) I've been using init containers for that reason and it's also why the base image contains wait4x</p>



<a name="507800821"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507800821" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507800821">(Mar 24 2025 at 15:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598183">Oliver Bertuch</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/507800616">said</a>:</p>
<blockquote>
<p>Ad 1) I've been using init containers for that reason and it's also why the base image contains wait4x</p>
</blockquote>
<p>Guess I have lot to learn</p>



<a name="507800993"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507800993" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507800993">(Mar 24 2025 at 15:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin ☀️</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/507796380">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="882006">Gursahib</span> do you want to make a PR against that repo?</p>
</blockquote>
<p>If i Succeed sure.</p>



<a name="507801176"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507801176" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507801176">(Mar 24 2025 at 15:29)</a>:</h4>
<p>Here's an example how this worked in my old K8s stuff: <a href="https://github.com/gdcc/dataverse-kubernetes/blob/413cd89cc51ce4768dea831f0eb3280da60635f8/k8s/dataverse/deployment.yaml#L85">https://github.com/gdcc/dataverse-kubernetes/blob/413cd89cc51ce4768dea831f0eb3280da60635f8/k8s/dataverse/deployment.yaml#L85</a></p>



<a name="507801201"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507801201" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507801201">(Mar 24 2025 at 15:29)</a>:</h4>
<p>(Needs to be adapted)</p>



<a name="507801943"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507801943" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507801943">(Mar 24 2025 at 15:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="882006">Gursahib</span> <a href="#narrow/channel/375812-containers/topic/OpenShift/near/507799871">said</a>:</p>
<blockquote>
<p>These are few pain points I can think of and the major one is previewer functionality</p>
</blockquote>
<p>It sounds like we're on the right track by focusing on previewers. <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span> </p>
<p>There's a dedicated topic for it, by the way: <a class="stream-topic" data-stream-id="375812" href="/#narrow/channel/375812-containers/topic/enable.20previewers/with/434165029">#containers &gt; enable previewers</a></p>



<a name="507802066"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507802066" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507802066">(Mar 24 2025 at 15:32)</a>:</h4>
<p>Bah. No one likes dedicated topics. &lt;/sarcasm&gt;</p>



<a name="507802116"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507802116" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507802116">(Mar 24 2025 at 15:32)</a>:</h4>
<p>ha</p>



<a name="507802242"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507802242" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507802242">(Mar 24 2025 at 15:32)</a>:</h4>
<p>we all miss IRC <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="507802422"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507802422" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507802422">(Mar 24 2025 at 15:33)</a>:</h4>
<p>I don't. But yes please let's rope in a discussion around IRC into this thread... The good ol' days <span aria-label="smiling devil" class="emoji emoji-1f608" role="img" title="smiling devil">:smiling_devil:</span> <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span> <span aria-label="crazy" class="emoji emoji-1f61c" role="img" title="crazy">:crazy:</span></p>



<a name="507802589"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507802589" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gursahib <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507802589">(Mar 24 2025 at 15:34)</a>:</h4>
<p>Alright guys its getting late on my side of the world, I'll come back with news soon either good or bad idk. Enjoy your day.</p>



<a name="507802664"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507802664" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507802664">(Mar 24 2025 at 15:34)</a>:</h4>
<p>Have fun!</p>



<a name="507802711"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/OpenShift/near/507802711" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/OpenShift.html#507802711">(Mar 24 2025 at 15:34)</a>:</h4>
<p>bye!</p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>