<html>
<head><meta charset="utf-8"><title>âœ” configbaker to update solr schema Â· containers Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/index.html">containers</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html">âœ” configbaker to update solr schema</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="374241211"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20configbaker%20to%20update%20solr%20schema/near/374241211" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html#374241211">(Jul 11 2023 at 12:04)</a>:</h4>
<p>has someone used the new configbaker image to update the solr schema? I get the following error:</p>
<div class="codehilite"><pre><span></span><code># curl &quot;http://${DATAVERSE_HOSTNAME}:8080/api/admin/index/solr/schema&quot; | /scripts/update-fields.sh /template/conf/schema.xml
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 23010    0 23010    0     0   313k      0 --:--:-- --:--:-- --:--:--  316k
ed: unimplemented command
ed: can&#39;t find string &quot;SCHEMA-FIELDS::BEGIN&quot;
ed: can&#39;t find string &quot;SCHEMA-FIELDS::END&quot;
ed: bad line range for delete
ed: unimplemented command
ed: can&#39;t find string &quot;SCHEMA-COPY-FIELDS::BEGIN&quot;
ed: can&#39;t find string &quot;SCHEMA-COPY-FIELDS::END&quot;
ed: bad line range for delete
</code></pre></div>



<a name="374252589"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20configbaker%20to%20update%20solr%20schema/near/374252589" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html#374252589">(Jul 11 2023 at 12:42)</a>:</h4>
<p>The script within the container is identical with the one in <code>develop</code> and works if executed on the local machine but fails within the container.</p>



<a name="374256546"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20configbaker%20to%20update%20solr%20schema/near/374256546" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html#374256546">(Jul 11 2023 at 12:55)</a>:</h4>
<p>Can you please say a bit more about what you're doing? You have a custom metadata block you're trying to add?</p>



<a name="374256726"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20configbaker%20to%20update%20solr%20schema/near/374256726" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html#374256726">(Jul 11 2023 at 12:56)</a>:</h4>
<p>Resvoled by adding<code>apk add ed</code>. Here is the PR: <a href="https://github.com/IQSS/dataverse/pull/9699">https://github.com/IQSS/dataverse/pull/9699</a></p>



<a name="374257427"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20configbaker%20to%20update%20solr%20schema/near/374257427" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html#374257427">(Jul 11 2023 at 12:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin</span> <a href="#narrow/stream/375812-containers/topic/configbaker.20to.20update.20solr.20schema/near/374256546">said</a>:</p>
<blockquote>
<p>Can you please say a bit more about what you're doing? You have a custom metadata block you're trying to add?</p>
</blockquote>
<p>Yep, I've added a custom metadata block and wanted to use the new configbaker image to update the <code>schema.xml</code> for SOLR. Sadly it wasn't working out of the box.</p>



<a name="374258004"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20configbaker%20to%20update%20solr%20schema/near/374258004" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html#374258004">(Jul 11 2023 at 13:00)</a>:</h4>
<p>Wow, thanks! How would I reproduce the bug on the develop branch? Do you think it would fail with <code>scripts/api/data/metadatablocks/customARCS.tsv</code> for example?</p>



<a name="374258241"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20configbaker%20to%20update%20solr%20schema/near/374258241" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html#374258241">(Jul 11 2023 at 13:01)</a>:</h4>
<p>handy link: <a href="https://github.com/IQSS/dataverse/blob/v5.13/scripts/api/data/metadatablocks/customARCS.tsv">https://github.com/IQSS/dataverse/blob/v5.13/scripts/api/data/metadatablocks/customARCS.tsv</a></p>



<a name="374259806"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20configbaker%20to%20update%20solr%20schema/near/374259806" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html#374259806">(Jul 11 2023 at 13:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin</span> <a href="#narrow/stream/375812-containers/topic/configbaker.20to.20update.20solr.20schema/near/374258004">said</a>:</p>
<blockquote>
<p>Wow, thanks! How would I reproduce the bug on the develop branch? Do you think it would fail with <code>scripts/api/data/metadatablocks/customARCS.tsv</code> for example?</p>
</blockquote>
<p>Yes, it already fails in a clean <code>dev</code> env without any custom metdata.</p>



<a name="383890003"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20configbaker%20to%20update%20solr%20schema/near/383890003" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html#383890003">(Aug 11 2023 at 09:45)</a>:</h4>
<p>Thanks again for the PR!</p>



<a name="383890023"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20configbaker%20to%20update%20solr%20schema/near/383890023" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20configbaker.20to.20update.20solr.20schema.html#383890023">(Aug 11 2023 at 09:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>