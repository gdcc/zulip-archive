<html>
<head><meta charset="utf-8"><title>âœ” collection logos, AccessDeniedException Â· containers Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/index.html">containers</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html">âœ” collection logos, AccessDeniedException</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="366606399"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/366606399" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#366606399">(Jun 15 2023 at 19:34)</a>:</h4>
<p>If you try to upload a logo to a collection you get this error: java.nio.file.AccessDeniedException: /opt/payara/../docroot</p>



<a name="366606452"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/366606452" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#366606452">(Jun 15 2023 at 19:34)</a>:</h4>
<p>Originally reported here: <a href="https://github.com/IQSS/dataverse-docker/issues/85#issuecomment-1590391145">https://github.com/IQSS/dataverse-docker/issues/85#issuecomment-1590391145</a></p>



<a name="366606753"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/366606753" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#366606753">(Jun 15 2023 at 19:35)</a>:</h4>
<p>[#|2023-06-15T19:31:50.220+0000|WARNING|Payara 5.2022.5|javax.enterprise.resource.webcontainer.jsf.lifecycle|_ThreadID=99;_ThreadName=http-thread-pool::http-listener-1(4);_TimeMillis=1686857510220;_LevelValue=900;|<br>
  /themeAndWidgetsFragment.xhtml @58,239 listener="#{themeWidgetFragment.handleImageFileUpload}": java.lang.RuntimeException: Error creating temp directory<br>
javax.el.ELException: /themeAndWidgetsFragment.xhtml @58,239 listener="#{themeWidgetFragment.handleImageFileUpload}": java.lang.RuntimeException: Error creating temp directory<br>
...<br>
Caused by: java.lang.RuntimeException: Error creating temp directory<br>
    at edu.harvard.iq.dataverse.ThemeWidgetFragment.createTempDir(ThemeWidgetFragment.java:96)<br>
    at edu.harvard.iq.dataverse.ThemeWidgetFragment.handleImageFileUpload(ThemeWidgetFragment.java:249)<br>
...<br>
Caused by: java.nio.file.AccessDeniedException: /opt/payara/../docroot</p>



<a name="366607169"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/366607169" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#366607169">(Jun 15 2023 at 19:37)</a>:</h4>
<p>Here's line 96 above: <a href="https://github.com/IQSS/dataverse/blob/9feb865e9fc67ea6ba027cc36e7dbafef1301085/src/main/java/edu/harvard/iq/dataverse/ThemeWidgetFragment.java#L96">https://github.com/IQSS/dataverse/blob/9feb865e9fc67ea6ba027cc36e7dbafef1301085/src/main/java/edu/harvard/iq/dataverse/ThemeWidgetFragment.java#L96</a></p>



<a name="366607346"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/366607346" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#366607346">(Jun 15 2023 at 19:38)</a>:</h4>
<p>Related is the note about collection logos at <a href="https://guides.dataverse.org/en/5.13/installation/advanced.html#multiple-app-servers">https://guides.dataverse.org/en/5.13/installation/advanced.html#multiple-app-servers</a></p>



<a name="367844566"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/367844566" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#367844566">(Jun 20 2023 at 08:39)</a>:</h4>
<p>I created <a href="https://github.com/IQSS/dataverse/issues/9662">https://github.com/IQSS/dataverse/issues/9662</a> for this.</p>



<a name="367844662"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/367844662" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#367844662">(Jun 20 2023 at 08:39)</a>:</h4>
<p>Some poor hardcoded design choices in there...</p>



<a name="367844885"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/367844885" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#367844885">(Jun 20 2023 at 08:40)</a>:</h4>
<p>Starting hacking on a PR to resolve the tech debt</p>



<a name="367872556"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/367872556" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#367872556">(Jun 20 2023 at 10:19)</a>:</h4>
<p>Perfect! Thanks for taking a look!</p>



<a name="367872670"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/367872670" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#367872670">(Jun 20 2023 at 10:19)</a>:</h4>
<p>Course!</p>



<a name="367875316"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/367875316" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#367875316">(Jun 20 2023 at 10:28)</a>:</h4>
<p><span class="user-mention" data-user-id="598112">@Philip Durbin</span> <span class="user-mention" data-user-id="598186">@Don Sizemore</span> I'm tempted to add the idea expressed in <a href="https://github.com/IQSS/dataverse/issues/9572">https://github.com/IQSS/dataverse/issues/9572</a> to the scope of this, as we need to check for these configured folders... Would it make sense to combine this?</p>



<a name="367895322"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/367895322" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Don Sizemore <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#367895322">(Jun 20 2023 at 11:40)</a>:</h4>
<p><span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> I think checking for the existence (and ownership/mode) of necessary directories on service launch is a good thing to add.</p>



<a name="367919950"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/367919950" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#367919950">(Jun 20 2023 at 13:05)</a>:</h4>
<p>At the very least log an error about missing directories, I'd say</p>



<a name="368263901"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368263901" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368263901">(Jun 21 2023 at 14:46)</a>:</h4>
<p><span class="user-mention" data-user-id="598186">@Don Sizemore</span> <span class="user-mention" data-user-id="598112">@Philip Durbin</span> here's the first version of this config checking: <a href="https://github.com/poikilotherm/dataverse/commit/a4ec3a66e76aa1559aea0c05cedc2da2b38d7b03">https://github.com/poikilotherm/dataverse/commit/a4ec3a66e76aa1559aea0c05cedc2da2b38d7b03</a></p>



<a name="368264102"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368264102" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368264102">(Jun 21 2023 at 14:47)</a>:</h4>
<p>It does fail deployment on startup if some check is not successful</p>



<a name="368264891"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368264891" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368264891">(Jun 21 2023 at 14:50)</a>:</h4>
<p>Looks good! I bet the error messages are informative.</p>
<p><code>@DependsOn("StartupFlywayMigrator")</code> means it gets run after flyway, I assume.</p>



<a name="368265301"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368265301" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368265301">(Jun 21 2023 at 14:51)</a>:</h4>
<p>I tried to make it as decriptive as possible, even add hints about the JVM setting names</p>



<a name="368265380"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368265380" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368265380">(Jun 21 2023 at 14:51)</a>:</h4>
<p>Yeah, it happens after Flyway</p>



<a name="368265614"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368265614" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368265614">(Jun 21 2023 at 14:52)</a>:</h4>
<p>Which also means you will see all those Flyway messages... So you need to scroll up up up up to see the log messages...</p>



<a name="368265879"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368265879" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368265879">(Jun 21 2023 at 14:53)</a>:</h4>
<p>There's not really a way around that - I'd prefer to have the checking run after flyway if we use it later for DB settings that might need a migration some day.</p>



<a name="368267128"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368267128" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368267128">(Jun 21 2023 at 14:56)</a>:</h4>
<p>I guess I'm used to scrolling up. No big deal. <span aria-label="happy" class="emoji emoji-1f600" role="img" title="happy">:happy:</span></p>



<a name="368267673"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368267673" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368267673">(Jun 21 2023 at 14:58)</a>:</h4>
<p>Green light from me. Wanna run it by #dv-tech?</p>



<a name="368267803"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368267803" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368267803">(Jun 21 2023 at 14:58)</a>:</h4>
<p>Gimme a sec. Still need to hack the docroot bit</p>



<a name="368268038"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368268038" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368268038">(Jun 21 2023 at 14:59)</a>:</h4>
<p>At least now we can verify things are present and we don't fall over strange configs.</p>



<a name="368272712"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368272712" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368272712">(Jun 21 2023 at 15:13)</a>:</h4>
<p>Who knows, maybe we can add additional pre-flight checks in the future <span aria-label="airplane" class="emoji emoji-2708" role="img" title="airplane">:airplane:</span></p>



<a name="368278471"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368278471" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368278471">(Jun 21 2023 at 15:30)</a>:</h4>
<p>Yeah I'd love this!</p>



<a name="368283115"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368283115" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368283115">(Jun 21 2023 at 15:43)</a>:</h4>
<p>There's got to be a flotation/float dad joke here.</p>



<a name="368299052"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368299052" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368299052">(Jun 21 2023 at 16:33)</a>:</h4>
<p>I'm getting there... Lots of places in the code where things are hardcoded where the docroot shall be. Good to change all of them...</p>



<a name="368474247"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368474247" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368474247">(Jun 22 2023 at 08:56)</a>:</h4>
<p>Oh isn't it just great... <span aria-label="angry" class="emoji emoji-1f620" role="img" title="angry">:angry:</span></p>



<a name="368474288"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368474288" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368474288">(Jun 22 2023 at 08:56)</a>:</h4>
<p>Now I found just another bug in Payara</p>



<a name="368474355"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368474355" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368474355">(Jun 22 2023 at 08:57)</a>:</h4>
<p>But this time it's failing big time</p>



<a name="368474568"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368474568" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368474568">(Jun 22 2023 at 08:57)</a>:</h4>
<p>They are using a regex approach for variable substitution in web.xml and other files...</p>



<a name="368474687"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368474687" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368474687">(Jun 22 2023 at 08:58)</a>:</h4>
<p>(<a href="https://github.com/payara/Payara/blob/payara-server-5.2022.5/nucleus/admin/config-api/src/main/java/org/glassfish/config/support/TranslatedConfigView.java">https://github.com/payara/Payara/blob/payara-server-5.2022.5/nucleus/admin/config-api/src/main/java/org/glassfish/config/support/TranslatedConfigView.java</a> for the curious ones)</p>



<a name="368475153"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368475153" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368475153">(Jun 22 2023 at 08:59)</a>:</h4>
<p>Which means <code>${MPCONFIG=dataverse.files.docroot:${ENV=STORAGE_DIR:.}/docroot}</code> is taken apart with their regexes by cutting of <code>/docroot</code> after the second last bracket.</p>



<a name="368475204"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368475204" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368475204">(Jun 22 2023 at 08:59)</a>:</h4>
<p>Gnaaaah</p>



<a name="368475270"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368475270" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368475270">(Jun 22 2023 at 08:59)</a>:</h4>
<p>I can't <em>believe</em> nobody actually tested this</p>



<a name="368476276"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368476276" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368476276">(Jun 22 2023 at 09:02)</a>:</h4>
<p>Yeah well... Their tests don't cover recursive usage. <span aria-label="rolling eyes" class="emoji emoji-1f644" role="img" title="rolling eyes">:rolling_eyes:</span>  <a href="https://github.com/payara/Payara/blob/payara-server-5.2022.5/nucleus/admin/config-api/src/test/java/org/glassfish/config/support/TranslatedValueTest.java">https://github.com/payara/Payara/blob/payara-server-5.2022.5/nucleus/admin/config-api/src/test/java/org/glassfish/config/support/TranslatedValueTest.java</a></p>



<a name="368477285"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368477285" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368477285">(Jun 22 2023 at 09:05)</a>:</h4>
<p>But maybe they just forgot to add "no deep nesting allowed" in their docs... <a href="https://docs.payara.fish/community/docs/Technical%20Documentation/Payara%20Server%20Documentation/Server%20Configuration%20And%20Management/Configuration%20Options/Variable%20Substitution/Types%20of%20Variables.html">https://docs.payara.fish/community/docs/Technical%20Documentation/Payara%20Server%20Documentation/Server%20Configuration%20And%20Management/Configuration%20Options/Variable%20Substitution/Types%20of%20Variables.html</a></p>



<a name="368477428"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368477428" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368477428">(Jun 22 2023 at 09:06)</a>:</h4>
<p>So this would be a new feature then...</p>



<a name="368490141"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368490141" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368490141">(Jun 22 2023 at 09:46)</a>:</h4>
<p>Good times</p>



<a name="368490411"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368490411" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368490411">(Jun 22 2023 at 09:47)</a>:</h4>
<p>Crazy idea: store collection logos in the database</p>



<a name="368926432"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368926432" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Don Sizemore <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368926432">(Jun 23 2023 at 14:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin</span> <a href="#narrow/stream/375812-containers/topic/collection.20logos.2C.20AccessDeniedException/near/368490411">said</a>:</p>
<blockquote>
<p>Crazy idea: store collection logos in the database</p>
</blockquote>
<p>I support this!</p>



<a name="368929311"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368929311" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368929311">(Jun 23 2023 at 15:07)</a>:</h4>
<p>I don't - storing binary blobs in databases has never been a good idea.</p>



<a name="368980744"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/368980744" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#368980744">(Jun 23 2023 at 17:56)</a>:</h4>
<p>Ok ok. We'll figure it out. <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>



<a name="373862358"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/373862358" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas van Erven <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#373862358">(Jul 10 2023 at 08:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598183">Oliver Bertuch</span> <a href="#narrow/stream/375812-containers/topic/collection.20logos.2C.20AccessDeniedException/near/368475153">said</a>:</p>
<blockquote>
<p>Which means <code>${MPCONFIG=dataverse.files.docroot:${ENV=STORAGE_DIR:.}/docroot}</code> is taken apart with their regexes by cutting of <code>/docroot</code> after the second last bracket.</p>
</blockquote>
<p>I think I might have run into this one with dataverse-docker setup; we have a couple of logo's because logo's make management happy (c); I always, always end up copying them in the right spot with right permissions after upload and then it "magically" works.</p>



<a name="373911643"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/373911643" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#373911643">(Jul 10 2023 at 10:44)</a>:</h4>
<p>Yeah it's just great. I still didn't have the time to come around and file a bug report.</p>



<a name="373911908"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/373911908" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#373911908">(Jul 10 2023 at 10:44)</a>:</h4>
<p>Could add an env var to the image instead,  but it feels kind of dirty to me</p>



<a name="373912204"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/373912204" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#373912204">(Jul 10 2023 at 10:45)</a>:</h4>
<p>But probably the easiest workaround for now...</p>



<a name="373912405"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/373912405" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#373912405">(Jul 10 2023 at 10:46)</a>:</h4>
<p>Make it work, file a bug report, create a todo issue to get back to this in our image when resolved upstream</p>



<a name="386805046"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/386805046" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#386805046">(Aug 23 2023 at 09:54)</a>:</h4>
<p>So I created this: <a href="https://github.com/IQSS/dataverse/pull/9819">https://github.com/IQSS/dataverse/pull/9819</a> But it will not be merged for 6.0. Will fight to get it merged for 6.1 as it is a blocker on containers. <span class="user-mention" data-user-id="601950">@Thomas van Erven</span></p>



<a name="389341286"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/389341286" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas van Erven <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#389341286">(Sep 06 2023 at 05:34)</a>:</h4>
<p>Much obliged, I'll owe you a beer once it's solved (though it's honestly a minor amount of work to do so - the main amount of work is in debugging why logo's aren't showing in the first place)</p>



<a name="389343058"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/389343058" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#389343058">(Sep 06 2023 at 05:53)</a>:</h4>
<p><span aria-label="beer" class="emoji emoji-1f37a" role="img" title="beer">:beer:</span> <span aria-label="dissolve" class="emoji emoji-1fae0" role="img" title="dissolve">:dissolve:</span> - I'll be in for a coke <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="389343156"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/389343156" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#389343156">(Sep 06 2023 at 05:54)</a>:</h4>
<p>Yeah, I made the solution harder for myself by adding all the checks on startup... <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span></p>



<a name="389626542"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/389626542" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#389626542">(Sep 07 2023 at 10:48)</a>:</h4>
<p>Really we're just waiting for 6.0 to ship before we turn around attention to PRs like this. Thanks for your patience! I think we're close!</p>



<a name="396561023"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/396561023" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#396561023">(Oct 13 2023 at 19:28)</a>:</h4>
<p>Merged! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> Configurable docroot via MicroProfile Config <a href="https://github.com/IQSS/dataverse/issues/9819">#9819</a></p>



<a name="396561593"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/396561593" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#396561593">(Oct 13 2023 at 19:33)</a>:</h4>
<p>Works great!<br>
<a href="/user_uploads/53090/okvCy7eh0fCgHI_0SZMmGcxb/Screenshot-2023-10-13-at-3.33.34-PM.png">Screenshot-2023-10-13-at-3.33.34-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/okvCy7eh0fCgHI_0SZMmGcxb/Screenshot-2023-10-13-at-3.33.34-PM.png" title="Screenshot-2023-10-13-at-3.33.34-PM.png"><img src="/user_uploads/53090/okvCy7eh0fCgHI_0SZMmGcxb/Screenshot-2023-10-13-at-3.33.34-PM.png"></a></div>



<a name="396561674"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/396561674" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#396561674">(Oct 13 2023 at 19:34)</a>:</h4>
<p>Thanks, <img alt=":dataverse_man:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/44207.png" title="dataverse man"> <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> <img alt=":dataverse_man:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/44207.png" title="dataverse man"> !</p>



<a name="396827741"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/396827741" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#396827741">(Oct 16 2023 at 05:51)</a>:</h4>
<p>I _think_ this is solved now. Marking as such <span aria-label="smile cat" class="emoji emoji-1f638" role="img" title="smile cat">:smile_cat:</span></p>



<a name="396827753"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/%E2%9C%94%20collection%20logos%2C%20AccessDeniedException/near/396827753" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/.E2.9C.94.20collection.20logos.2C.20AccessDeniedException.html#396827753">(Oct 16 2023 at 05:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598183">Oliver Bertuch</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>