<html>
<head><meta charset="utf-8"><title>add psql bin to base Â· containers Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/index.html">containers</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html">add psql bin to base</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="432869945"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432869945" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432869945">(Apr 12 2024 at 09:54)</a>:</h4>
<p>I just thought I'd kick off a topic to discuss and issued <span class="user-mention" data-user-id="616555">@Vera Clemens</span> opened: Feature Request/Idea: Add psql to the configbaker image <a href="https://github.com/IQSS/dataverse/issues/10487">#10487</a></p>



<a name="432870520"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432870520" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432870520">(Apr 12 2024 at 09:58)</a>:</h4>
<p>Sure, go ahead and create a PR</p>



<a name="432870616"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432870616" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432870616">(Apr 12 2024 at 09:58)</a>:</h4>
<p>I would like to point out though that a cleaner and more testable solution would be to make Dataverse pick up the procedures via Flyway</p>



<a name="432870648"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432870648" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432870648">(Apr 12 2024 at 09:59)</a>:</h4>
<p>Obviously that is a lot more effort...</p>



<a name="432870768"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432870768" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432870768">(Apr 12 2024 at 09:59)</a>:</h4>
<p>Yeah, that sounds like a new topic <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="432870920"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432870920" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432870920">(Apr 12 2024 at 10:00)</a>:</h4>
<p>Adding psql should be straighforward, right? Just add to an existing list of <code>apt-get install</code> packages or something?</p>



<a name="432872460"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432872460" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432872460">(Apr 12 2024 at 10:08)</a>:</h4>
<p>It's Alpine so it will be "apk", but yes, more or less straightforward</p>



<a name="432872578"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432872578" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432872578">(Apr 12 2024 at 10:09)</a>:</h4>
<p>Might be nice to have a little helper script that adds the connection options for you to sane defaults so you don't have to deal with that in simple cases</p>



<a name="432884161"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432884161" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432884161">(Apr 12 2024 at 11:33)</a>:</h4>
<p>ARG APK_PACKAGES="curl bind-tools netcat-openbsd jq bash dumb-init wait4x ed" at <a href="https://github.com/IQSS/dataverse/blob/v6.2/modules/container-configbaker/Dockerfile#L24">https://github.com/IQSS/dataverse/blob/v6.2/modules/container-configbaker/Dockerfile#L24</a></p>



<a name="432884177"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432884177" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432884177">(Apr 12 2024 at 11:33)</a>:</h4>
<p>thanks!</p>



<a name="432885617"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432885617" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432885617">(Apr 12 2024 at 11:40)</a>:</h4>
<p>If people feel like we should add another ARG to include custom packages during build time, that's doable</p>



<a name="432885662"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432885662" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432885662">(Apr 12 2024 at 11:41)</a>:</h4>
<p>(So you would use a Maven property in your build pipeline to add more packages)</p>



<a name="432885978"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432885978" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432885978">(Apr 12 2024 at 11:43)</a>:</h4>
<p>Sure, but what do you think? Separate issue and PR?</p>



<a name="432887218"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/432887218" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#432887218">(Apr 12 2024 at 11:51)</a>:</h4>
<p>Don't look now, <span class="user-mention" data-user-id="617722">@Johannes D</span> made a PR: Added postgresql-client to the list of installed apk packages <a href="https://github.com/IQSS/dataverse/issues/10488">#10488</a></p>



<a name="437600539"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/437600539" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benedikt <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#437600539">(May 08 2024 at 08:13)</a>:</h4>
<p>Is it also possible to get the package in Dataverse image? This allows you to run certain custom scripts. </p>
<p><a href="https://github.com/IQSS/dataverse/blob/ae149dec1d319c2b383de32e8af01a47fcaaccdf/modules/container-base/src/main/docker/Dockerfile#L97">https://github.com/IQSS/dataverse/blob/ae149dec1d319c2b383de32e8af01a47fcaaccdf/modules/container-base/src/main/docker/Dockerfile#L97</a></p>
<p>"postgresql-client"</p>
<p>or is there something against it?</p>



<a name="437620834"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/437620834" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#437620834">(May 08 2024 at 10:23)</a>:</h4>
<p><span class="user-mention" data-user-id="699150">@Benedikt</span> sounds fine to me. Please feel free to create an issue and a pull request.</p>



<a name="437622907"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/437622907" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benedikt <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#437622907">(May 08 2024 at 10:38)</a>:</h4>
<p><a href="https://github.com/IQSS/dataverse/pull/10546">https://github.com/IQSS/dataverse/pull/10546</a></p>



<a name="437627621"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/437627621" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#437627621">(May 08 2024 at 11:09)</a>:</h4>
<p>Thanks!</p>



<a name="443064386"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/443064386" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#443064386">(Jun 06 2024 at 13:45)</a>:</h4>
<p><span class="user-mention" data-user-id="699150">@Benedikt</span> hi! <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> <span class="user-mention" data-user-id="720428">@Thomas van Erven</span> and I are discussing this during the weekly call and we're wondering if adding psql to the base image is necessary. It adds more exposure, possible security risks, and psql could be run from configbaker or the postgres image. Can you please say some more about your use cases? Thanks!</p>



<a name="443075383"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/443075383" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#443075383">(Jun 06 2024 at 14:34)</a>:</h4>
<p>Thanks for talking this out just now on the call.</p>



<a name="443075597"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/443075597" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benedikt <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#443075597">(Jun 06 2024 at 14:35)</a>:</h4>
<p>I have closed it, and I understand why it should not be intrgated. My question is why do you have wget and curl in there? <br>
If you want to keep it small and clean, then you can do a bit more. Or is there a reason for this?</p>



<a name="443075803"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/443075803" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#443075803">(Jun 06 2024 at 14:36)</a>:</h4>
<p>Hmm, good question, where to draw the line.</p>



<a name="443076519"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/443076519" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#443076519">(Jun 06 2024 at 14:39)</a>:</h4>
<p>Should we add a comment above the <code>ARG PKGS</code> line? To provide some guidance?</p>



<a name="443078312"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/add%20psql%20bin%20to%20base/near/443078312" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas van Erven <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/add.20psql.20bin.20to.20base.html#443078312">(Jun 06 2024 at 14:47)</a>:</h4>
<p>I think what's relevant (as well) is what's the dependency chain for those packages and how much of that is provided by the base image? Are we going out of our way to include them (hence unnecessarily increasing exposure) or is it a really minor detour?</p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>