<html>
<head><meta charset="utf-8"><title>curl DNS broken Â· containers Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/index.html">containers</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html">curl DNS broken</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="409374546"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/409374546" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#409374546">(Dec 21 2023 at 12:09)</a>:</h4>
<p>Hi! Sorry if I am wrong here (Newbie) and feel free to push me to the right chat channel, but this seemed the most fitting: </p>
<p>I am trying to test dataverse with the docker installation on a test server. On starting the containers I get the Payara standard screen displayed, after entering the admin interface at :4848 and clicking "reload" I get The Dataverse Project displayed, but with a 404-page not found, and no menues etc. I am using v6.0 of dataverse and put the endpoint to 8081 from 8080 due to that port not being available on my server.</p>
<p>Any suggestions where to start debugging?</p>



<a name="409578940"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/409578940" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#409578940">(Dec 22 2023 at 13:00)</a>:</h4>
<p>Hmm, it should be possible to run on a port other than 8080 but I haven't tested it recently. Would it be possible to try again on 8080? I would suggest deleting the docker-dev-volumes directory first for a clean start (that's where the database, etc. is kept).</p>



<a name="410114559"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/410114559" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#410114559">(Dec 27 2023 at 07:34)</a>:</h4>
<p>Thanks for creating the new chat! Sorry, it took me a while to realize. I tried launching the containers on 8080 now (after deleting dev-volumes), but got the same result - Payara page on startup, and 404 Dataverse page after relaunch in the admin interface. Am I too impatient?</p>



<a name="411174334"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411174334" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411174334">(Jan 04 2024 at 11:42)</a>:</h4>
<p><span class="user-mention" data-user-id="675921">@Jutta Schnabel</span> hi! It's my first day back after a long break. Did you get it working? Are you interested in joining our weekly meeting? (Please see <a class="stream-topic" data-stream-id="375812" href="/#narrow/stream/375812-containers/topic/weekly.20meeting">#containers &gt; weekly meeting</a> .)</p>



<a name="411187307"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411187307" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411187307">(Jan 04 2024 at 13:14)</a>:</h4>
<p>Hi and thanks for the hints. Unfortunately, moving to 8080 and deleting the dev-volumes did not solve the problem, the behaviour is as observed before, so I went back to the other port. Thanks for the hint to the meeting, I would drop in and listen in to your activities, perhaps that helps me getting a better idea :)</p>



<a name="411188766"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411188766" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411188766">(Jan 04 2024 at 13:25)</a>:</h4>
<p>Great! We'd love for you to join!</p>



<a name="411209268"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411209268" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411209268">(Jan 04 2024 at 15:26)</a>:</h4>
<div class="codehilite"><pre><span></span><code>dev_dataverse           |   Context path from ServletContext:  differs from path from bundle: /|#]
dev_dataverse           |
dev_dataverse           | [#|2024-01-04T15:25:31.315+0000|INFO|Payara 6.2023.8||_ThreadID=81;_ThreadName=http-thread-pool::http-listener-1(4);_TimeMillis=1704381931315;_LevelValue=800;|
dev_dataverse           |   Loaded [1] org.ocpsoft.rewrite.spi.GlobalParameterProvider [org.ocpsoft.rewrite.instance.WildcardParameterProvider&lt;0&gt;]|#]
dev_dataverse           |
dev_bootstrap           | curl: (6) Could not resolve host: dataverse
dev_bootstrap exited with code 6
``
</code></pre></div>



<a name="411209553"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411209553" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411209553">(Jan 04 2024 at 15:27)</a>:</h4>
<p>Docker version: Docker version 24.0.7</p>



<a name="411210591"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411210591" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411210591">(Jan 04 2024 at 15:33)</a>:</h4>
<p>Thanks. As I mentioned, it works in Ubuntu when spun up by GitHub Actions. For example: <a href="https://github.com/gdcc/api-test-runner/actions/runs/7185003205/job/19567333935">https://github.com/gdcc/api-test-runner/actions/runs/7185003205/job/19567333935</a></p>
<p>I'm not sure what the difference is. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="411680390"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411680390" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411680390">(Jan 08 2024 at 06:57)</a>:</h4>
<p>Morning! <span class="user-mention" data-user-id="675921">@Jutta Schnabel</span> have you figured out what the problem is? I am a lot closer (timezone-wise) to you than <span class="user-mention" data-user-id="598112">@Philip Durbin</span>, happy to help.</p>



<a name="411722026"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411722026" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411722026">(Jan 08 2024 at 11:42)</a>:</h4>
<p>Hi! Thanks <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> for the offer! I just tried the installation now locally on my machine but interestingly I ended up with exactly the same error. So it might actually not be the server setup which is the problem.</p>
<p>I used the current repo version, Docker 24.0.7 on ubuntu 22.04 (the server runs 20.04)<br>
<a href="/user_uploads/53090/AWOPLmY-0xhl17-CYj4e7GDv/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/AWOPLmY-0xhl17-CYj4e7GDv/image.png" title="image.png"><img src="/user_uploads/53090/AWOPLmY-0xhl17-CYj4e7GDv/image.png"></a></div>



<a name="411722188"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411722188" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411722188">(Jan 08 2024 at 11:43)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="675921">@Jutta Schnabel</span> ! At least it looks like you can access Dataverse now and not just see the Payara default domain page!</p>



<a name="411722203"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411722203" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411722203">(Jan 08 2024 at 11:43)</a>:</h4>
<p>When opening localhost, the docker output is the following: <br>
<a href="/user_uploads/53090/zQQikKYNfxApV3_XUSrwP_3i/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/zQQikKYNfxApV3_XUSrwP_3i/image.png" title="image.png"><img src="/user_uploads/53090/zQQikKYNfxApV3_XUSrwP_3i/image.png"></a></div>



<a name="411722341"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411722341" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411722341">(Jan 08 2024 at 11:44)</a>:</h4>
<p>Oh yeah that one is not to worry about - this is normal during the first bootstrap. Could you share the output of conigbaker?</p>



<a name="411722356"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411722356" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411722356">(Jan 08 2024 at 11:44)</a>:</h4>
<p>I see the default 404, but this was also the case before when doing a relaunch from the admin interface on the server</p>



<a name="411722420"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411722420" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411722420">(Jan 08 2024 at 11:45)</a>:</h4>
<p>How can I get that output?</p>



<a name="411722425"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411722425" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411722425">(Jan 08 2024 at 11:45)</a>:</h4>
<p>But you see a 404 in the layout of Dataverse - not just Payara. Which means the app at least deployed succesfully</p>



<a name="411722603"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411722603" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411722603">(Jan 08 2024 at 11:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="675921">Jutta Schnabel</span> <a href="#narrow/stream/375812-containers/topic/docker.20on.20test.20server/near/411722420">said</a>:</p>
<blockquote>
<p>How can I get that output?</p>
</blockquote>
<p>Depending on how you started your container, use <code>docker logs</code>. You can find out the container name using <code>docker container ls -a</code>, because it will probably be stopped already.</p>



<a name="411723355"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411723355" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411723355">(Jan 08 2024 at 11:50)</a>:</h4>
<p>Interestingly I have three instances of that container, but only the first one has log content. In a repetitive fashon it contains</p>
<div class="codehilite"><pre><span></span><code>2024-01-08T11:30:40Z ERR Expectation failed error=&quot;failed to establish an http connection, caused by: Get \&quot;http://dataverse:8080/api/info/version\&quot;: dial tcp 172.21.0.10:8080: connect: connection refused&quot; address=http://dataverse:8080/api/info/version
2024-01-08T11:30:48Z INF [HTTP] Checking the http://dataverse:8080/api/info/version ...
2024-01-08T11:30:51Z ERR Expectation failed error=&quot;timed out while making an http call, caused by: Get \&quot;http://dataverse:8080/api/info/version\&quot;: context deadline exceeded (Client.Timeout exceeded while awaiting headers)&quot; timeout=3s
2024-01-08T11:30:59Z INF [HTTP] Checking the http://dataverse:8080/api/info/version ...
2024-01-08T11:30:59Z ERR Expectation failed error=&quot;the status code doesn&#39;t expect&quot; actual=404 expect=200
2024-01-08T11:31:07Z INF [HTTP] Checking the http://dataverse:8080/api/info/version ...
2024-01-08T11:31:10Z ERR Expectation failed error=&quot;timed out while making an http call, caused by: Get \&quot;http://dataverse:8080/api/info/version\&quot;: context deadline exceeded (Client.Timeout exceeded while awaiting headers)&quot; timeout=3s
2024-01-08T11:31:18Z INF [HTTP] Checking the http://dataverse:8080/api/info/version ...
2024-01-08T11:31:21Z ERR Expectation failed error=&quot;timed out while making an http call, caused by: Get \&quot;http://dataverse:8080/api/info/version\&quot;: context deadline exceeded (Client.Timeout exceeded while awaiting headers)&quot; timeout=3s
2024-01-08T11:31:29Z INF [HTTP] Checking the http://dataverse:8080/api/info/version ...
2024-01-08T11:31:29Z ERR Expectation failed error=&quot;the status code doesn&#39;t expect&quot; actual=404 expect=200
</code></pre></div>



<a name="411723538"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411723538" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411723538">(Jan 08 2024 at 11:52)</a>:</h4>
<p>Yeah, that is expected - it waits in the background for Dataverse to deploy, so it can reach out and do it's magic to bootstrap the instance (add a superuser, add metadata blocks and create root collection)</p>



<a name="411723558"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411723558" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411723558">(Jan 08 2024 at 11:52)</a>:</h4>
<p>What I don't see is that it actually comes around to doing sth</p>



<a name="411723589"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411723589" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411723589">(Jan 08 2024 at 11:52)</a>:</h4>
<p>No timeout, too...</p>



<a name="411723704"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411723704" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411723704">(Jan 08 2024 at 11:53)</a>:</h4>
<p>I assume you have at least &gt;8 GB of RAM in your box, aye?</p>



<a name="411724003"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411724003" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411724003">(Jan 08 2024 at 11:55)</a>:</h4>
<p>Not in a box, but total RAM is 8GB</p>



<a name="411724260"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411724260" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411724260">(Jan 08 2024 at 11:57)</a>:</h4>
<p>That <em>should</em> be enough.</p>



<a name="411724325"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411724325" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411724325">(Jan 08 2024 at 11:58)</a>:</h4>
<p><span class="user-mention" data-user-id="675921">@Jutta Schnabel</span>  Do you want to do a quick Zoom chat and let me take a look at live logs?</p>



<a name="411724522"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411724522" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411724522">(Jan 08 2024 at 11:59)</a>:</h4>
<p>yes, thanks: <a href="https://fau.zoom-x.de/j/65435375286">https://fau.zoom-x.de/j/65435375286</a></p>



<a name="411736037"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736037" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736037">(Jan 08 2024 at 13:15)</a>:</h4>
<p>OK the problem with no bootstrapping happening is REALLY tricky</p>



<a name="411736087"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736087" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736087">(Jan 08 2024 at 13:15)</a>:</h4>
<p>We dug into this and turns out: <code>curl</code> doesn't like the way DNS was set up in her environment</p>



<a name="411736093"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736093" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736093">(Jan 08 2024 at 13:15)</a>:</h4>
<p>Thanks a lot for the great help! Whatever the problem was is yours to report ;)</p>



<a name="411736229"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736229" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736229">(Jan 08 2024 at 13:16)</a>:</h4>
<p>I did a bootstrap manually now by circumventing the DNS lookup (provided the Dataverse URL as command argument)</p>



<a name="411736364"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736364" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736364">(Jan 08 2024 at 13:17)</a>:</h4>
<p>When I find some time (but happy for someone else to pick up the task), I would like to have some vanilla Ubuntu 22.04 installed on a VM, get Docker on top and see if we can reproduce the problem</p>



<a name="411736457"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736457" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736457">(Jan 08 2024 at 13:17)</a>:</h4>
<p>Is it ok if I take the containers down and restart with endpoint 8081? It clashes with one of the other services now ...</p>



<a name="411736598"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736598" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736598">(Jan 08 2024 at 13:18)</a>:</h4>
<p>We exec'ed into configbaker and <code>nslookup</code>, <code>ping</code>, etc all were fine, just <code>curl</code> didn't want to cooperate. We saw it reaching out to the DNS server. Maybe a <code>tcpdump</code> would have helped, too, to analyze what goes over the wire.</p>



<a name="411736626"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736626" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736626">(Jan 08 2024 at 13:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="675921">Jutta Schnabel</span> <a href="#narrow/stream/375812-containers/topic/docker.20on.20test.20server/near/411736457">said</a>:</p>
<blockquote>
<p>Is it ok if I take the containers down and restart with endpoint 8081? It clashes with one of the other services now ...</p>
</blockquote>
<p>Yes, that should be fine</p>



<a name="411736727"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736727" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736727">(Jan 08 2024 at 13:19)</a>:</h4>
<p>I just renamed the topic so we can dig more into it later</p>



<a name="411736809"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736809" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736809">(Jan 08 2024 at 13:20)</a>:</h4>
<p>Please create a new topic for more questions that might arise, thx <span class="user-mention" data-user-id="675921">@Jutta Schnabel</span></p>



<a name="411736878"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736878" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736878">(Jan 08 2024 at 13:20)</a>:</h4>
<p>Will do, and thanks again for the deep dive!</p>



<a name="411736995"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411736995" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411736995">(Jan 08 2024 at 13:21)</a>:</h4>
<p>We were not in Texas but still deep into the heart of configbaker... <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span></p>



<a name="411738068"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411738068" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jutta Schnabel <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411738068">(Jan 08 2024 at 13:28)</a>:</h4>
<p>btw., the restart now again only displayed the payara screen, but relaunch gave the working application</p>



<a name="411758875"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/411758875" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#411758875">(Jan 08 2024 at 15:18)</a>:</h4>
<p>Would it be premature to create an issue to track this problem? We'd like to reproduce it first?</p>



<a name="428348715"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428348715" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428348715">(Mar 22 2024 at 14:57)</a>:</h4>
<p>It looks like this is related to this PR, that has been merged recently. <a href="https://github.com/c-ares/c-ares/pull/685">https://github.com/c-ares/c-ares/pull/685</a>. See this issue: <a href="https://github.com/c-ares/c-ares/issues/683">https://github.com/c-ares/c-ares/issues/683</a></p>
<p>cURL on Alpine uses c-ares for DNS resolution as of alpine 3.19. As we are using <code>alpine:3</code> as our base image, we are on 3.19. The fixed version of c-ares has been released, but the last build of curl dates back to 12.2023 (<a href="https://pkgs.alpinelinux.org/packages?name=curl&amp;branch=v3.19">https://pkgs.alpinelinux.org/packages?name=curl&amp;branch=v3.19</a>)</p>
<p>So probably two options: we tag our base with 3.18 or we wait for a new release. I wouldn't go for the "edge" package.</p>



<a name="428350936"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428350936" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428350936">(Mar 22 2024 at 15:07)</a>:</h4>
<p>Interesting. So downgrade to Alpine 3.18 and leave a comment saying "don't upgrade to 3.19 or beyond until the version of curl is built with a version of c-ares that has a fix for <a href="https://github.com/c-ares/c-ares/issues/683">https://github.com/c-ares/c-ares/issues/683</a> "</p>
<p>Something like that? I can't easily tell which version of curl has the fix.</p>



<a name="428351389"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428351389" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428351389">(Mar 22 2024 at 15:09)</a>:</h4>
<p>3.19 still is on c-ares 1.24. See <a href="https://pkgs.alpinelinux.org/package/v3.19/main/x86_64/c-ares">https://pkgs.alpinelinux.org/package/v3.19/main/x86_64/c-ares</a></p>



<a name="428351532"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428351532" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428351532">(Mar 22 2024 at 15:10)</a>:</h4>
<p>Edge has c-ares 1.26.0, containing the fix <a href="https://pkgs.alpinelinux.org/package/edge/main/x86/c-ares">https://pkgs.alpinelinux.org/package/edge/main/x86/c-ares</a></p>



<a name="428351673"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428351673" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428351673">(Mar 22 2024 at 15:11)</a>:</h4>
<p>Curl in Alpine 3.18 does not have the c-ares dependency, see <a href="https://pkgs.alpinelinux.org/package/v3.18/main/x86_64/libcurl">https://pkgs.alpinelinux.org/package/v3.18/main/x86_64/libcurl</a></p>



<a name="428352711"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428352711" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428352711">(Mar 22 2024 at 15:16)</a>:</h4>
<p><a href="https://github.com/IQSS/dataverse/issues/10413">https://github.com/IQSS/dataverse/issues/10413</a></p>



<a name="428353353"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428353353" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428353353">(Mar 22 2024 at 15:19)</a>:</h4>
<p>Ok, bottom line for the issue you opened is to downgrade to Alpine 3.18. Sounds good.</p>



<a name="428353570"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428353570" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428353570">(Mar 22 2024 at 15:20)</a>:</h4>
<p>I'm way ahead</p>



<a name="428353580"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428353580" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428353580">(Mar 22 2024 at 15:20)</a>:</h4>
<p>Do we know which version of curl has the fix?</p>



<a name="428353599"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428353599" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428353599">(Mar 22 2024 at 15:20)</a>:</h4>
<p>PR in 3 ...</p>



<a name="428353619"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428353619" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428353619">(Mar 22 2024 at 15:20)</a>:</h4>
<p>ha</p>



<a name="428354006"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428354006" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428354006">(Mar 22 2024 at 15:22)</a>:</h4>
<p><a href="https://github.com/IQSS/dataverse/pull/10414">https://github.com/IQSS/dataverse/pull/10414</a></p>



<a name="428354840"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428354840" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428354840">(Mar 22 2024 at 15:26)</a>:</h4>
<p>just left a review, thanks!</p>



<a name="428356979"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428356979" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428356979">(Mar 22 2024 at 15:35)</a>:</h4>
<p>I just saw that they did a backport for 3.19... See <a href="https://git.alpinelinux.org/aports/commit/?id=6edd0d6d61c7f8b8a37e84333b37aa02e6507bfb">https://git.alpinelinux.org/aports/commit/?id=6edd0d6d61c7f8b8a37e84333b37aa02e6507bfb</a></p>



<a name="428357195"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428357195" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428357195">(Mar 22 2024 at 15:36)</a>:</h4>
<p>Suggestions: if 3.18 works, lets see if we can make <span class="user-mention" data-user-id="598843">@Deirdre Kirmis</span> look how old her local image pull is. (<code>docker image ls "gdcc/*"</code>)</p>



<a name="428357802"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428357802" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428357802">(Mar 22 2024 at 15:39)</a>:</h4>
<p>That commit is two months from what I can tell.</p>



<a name="428358112"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428358112" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428358112">(Mar 22 2024 at 15:41)</a>:</h4>
<p>Yeah, it's from 2024-01-23</p>



<a name="428358905"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428358905" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deirdre Kirmis <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428358905">(Mar 22 2024 at 15:44)</a>:</h4>
<p>yes ^</p>



<a name="428359162"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428359162" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428359162">(Mar 22 2024 at 15:46)</a>:</h4>
<p>Yes? As in "my image is that old"?</p>



<a name="428359587"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428359587" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428359587">(Mar 22 2024 at 15:48)</a>:</h4>
<p>At least I can tell that the problems <span class="user-mention" data-user-id="675921">@Jutta Schnabel</span> experienced were from <em>before</em> that backport happened</p>



<a name="428367248"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428367248" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428367248">(Mar 22 2024 at 16:26)</a>:</h4>
<p>From the debugging I did with <span class="user-mention" data-user-id="598843">@Deirdre Kirmis</span> at <a class="stream-topic" data-stream-id="375812" href="/#narrow/stream/375812-containers/topic/demo.20tutorial.20issues">#containers &gt; demo tutorial issues</a> I learned that the "fix" they made in c-ares does not really fix it. Will report there.</p>



<a name="428369149"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/375812-containers/topic/curl%20DNS%20broken/near/428369149" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/375812-containers/topic/curl.20DNS.20broken.html#428369149">(Mar 22 2024 at 16:35)</a>:</h4>
<p><a href="https://github.com/c-ares/c-ares/issues/683#issuecomment-2015471931">https://github.com/c-ares/c-ares/issues/683#issuecomment-2015471931</a></p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>