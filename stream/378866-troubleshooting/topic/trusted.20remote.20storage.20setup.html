<html>
<head><meta charset="utf-8"><title>trusted remote storage setup ¬∑ troubleshooting ¬∑ Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html">trusted remote storage setup</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="407306937"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407306937" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407306937">(Dec 11 2023 at 19:34)</a>:</h4>
<p>This my continuing issues setting up trusted remote storage.  Originally I tried a test on google drive (which I couldn't get working) but have had to switch to trying on either/both box and an S3 bucket.<br>
The problem I have seems to be setting up the identifier.     <br>
box example:<br>
-Ddataverse.files.lariac-remote.label=LARIAC-remote<br>
-Ddataverse.files.lariac-remote.download-redirect=true<br>
-Ddataverse.files.lariac-remote.public=true<br>
-Ddataverse.files.lariac-remote.type=remote<br>
-Ddataverse.files.lariac-remote.base-url=https://ucla.box.com<br>
-Ddataverse.files.lariac-remote.base-store=file<br>
-Ddataverse.files.lariac-remote.upload-redirect=true</p>
<p>The JSON_Data file:<br>
export API_TOKEN=<strong>*</strong><strong>*</strong>**<br>
export SERVER_URL=https://dataverse.ucla.edu<br>
export PERSISTENT_ID=doi:10.25346/S6/UEPJMA<br>
export JSON_DATA="{"description":"Remote LARIAC image test", "storageIdentifier": "LARIAC-remote://s/xv53zxxsovt3mmicae9fshnk3ljycvcp","label": "nlcd_la.tif", "fileName": "nlcd_la.tif", "mimeType": "image/tiff", "checksum": {"@type": "MD5",  "@value": "<strong>*</strong>****" }}"</p>
<p>Thank you,   Jamie</p>



<a name="407307443"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407307443" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407307443">(Dec 11 2023 at 19:37)</a>:</h4>
<p>Hmm, does removing the dash help? And what error do you get?</p>



<a name="407308225"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407308225" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407308225">(Dec 11 2023 at 19:43)</a>:</h4>
<p>Sorry, should have added that.<br>
-bash: export: `test, storageIdentifier: LARIAC-remote://s/xv53zxxsovt3mmicae9fshnk3ljycvcp,label: nlcd_la.tif, fileName: nlcd_la.tif, mimeType: image/tiff, checksum: {@type: MD5,  @value: 8d0e37b3d0cb048c2ba4ae68c31e0c1b }}': not a valid identifier</p>



<a name="407308867"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407308867" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407308867">(Dec 11 2023 at 19:47)</a>:</h4>
<p>That "not a valid identifer" is coming from bash.</p>



<a name="407308908"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407308908" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407308908">(Dec 11 2023 at 19:47)</a>:</h4>
<p>I doesn't like what you've tried to assign to JSON_DATA (I think).</p>



<a name="407308941"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407308941" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407308941">(Dec 11 2023 at 19:47)</a>:</h4>
<p>what if you do this?</p>
<div class="codehilite"><pre><span></span><code>echo $JSON_DATA
</code></pre></div>



<a name="407309172"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407309172" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407309172">(Dec 11 2023 at 19:49)</a>:</h4>
<p>echo $JSON_DATA<br>
{description:Remote  </p>
<p>So I guess my json still isn't correct.   <br>
 I've tried to follow the Dataverse documentation example but obviously I'm getting something wrong.</p>



<a name="407309346"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407309346" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407309346">(Dec 11 2023 at 19:50)</a>:</h4>
<p>I've been typeing my code on the wndows site and pasting over to linux.  Maybe need to actually type everything on the linux side.</p>



<a name="407309637"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407309637" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407309637">(Dec 11 2023 at 19:52)</a>:</h4>
<p>Well, the example in the guides might be wrong. You're welcome to create an issue if it is.</p>
<p>Stuffing JSON in a bash variable can be tricky. For starters I would surround the JSON with single quotes instead of double quotes.</p>



<a name="407309748"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407309748" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407309748">(Dec 11 2023 at 19:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code>export FOO=&#39;{&quot;foo&quot;:&quot;bar&quot;}&#39;
</code></pre></div>



<a name="407310779"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407310779" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407310779">(Dec 11 2023 at 20:00)</a>:</h4>
<p>Still not working - maybe I should set the variables individually instead of a json file<br>
export JSON_DATA="{'description':'Remote LARIAC image test', 'storageIdentifier': 'lariac-remote-test://s/xv53zxxsovt3mmicae9fshnk3ljycvcp','label': 'nlcd_la.tif', 'fileName': 'nlcd_la.tif', 'mimeType': 'image/tiff', 'checksum': {'@type': 'MD5',  '@value': '<strong>*</strong>' }}‚Äù</p>
<blockquote>
<p>"<br>
[ec2-user@ip-172-31-17-169 ~]$ echo $JSON_DATA<br>
{'description':'Remote LARIAC image test', 'storageIdentifier': 'lariac-remote-test://s/xv53zxxsovt3mmicae9fshnk3ljycvcp','label': 'nlcd_la.tif', 'fileName': 'nlcd_la.tif', 'mimeType': 'image/tiff', 'checksum': {'@type': 'MD5', '@value': '<strong>*</strong>***' }}‚Äù<br>
[ec2-user@ip-172-31-17-169 ~]$ curl -H "X-Dataverse-key: $API_TOKEN" -X POST "$SERVER_URL/api/datasets/:persistentId/add?persistentId=$PERSISTENT_ID" -F "jsonData=$JSON_DATA"<br>
{"status":"ERROR","message":"Error in parsing provided json"}[ec2-user@ip-172-31-17-169 ~]$</p>
</blockquote>



<a name="407311013"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407311013" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407311013">(Dec 11 2023 at 20:01)</a>:</h4>
<p>Can you please link me to the place in the guides you're looking at?</p>



<a name="407311309"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407311309" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407311309">(Dec 11 2023 at 20:03)</a>:</h4>
<p>Here is the link:    <a href="https://guides.dataverse.org/en/latest/developers/big-data-support.html?highlight=trusted%20remote#trusted-remote-storage-with-the-remote-store-type">https://guides.dataverse.org/en/latest/developers/big-data-support.html?highlight=trusted%20remote#trusted-remote-storage-with-the-remote-store-type</a></p>



<a name="407311623"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407311623" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407311623">(Dec 11 2023 at 20:05)</a>:</h4>
<p>Bleh, that example JSON will never work:</p>
<p><code>export JSON_DATA="{'description':'My description.','directoryLabel':'data/subdir1','categories':['Data'], 'restrict':'false', 'storageIdentifier':'trs://images/dataverse_project_logo.svg', 'fileName':'dataverse_logo.svg', 'mimeType':'image/svg+xml', 'checksum': {'@type': 'SHA-1', '@value': '123456'}}"</code></p>
<p>JSON uses double quotes, not single quotes. Do you want to open an issue for this?</p>



<a name="407311805"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407311805" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407311805">(Dec 11 2023 at 20:06)</a>:</h4>
<p>Ok, will open an issue  but should everything have double quotes?</p>



<a name="407311856"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407311856" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407311856">(Dec 11 2023 at 20:06)</a>:</h4>
<p>Here, this version passes through <code>jq</code> at least:</p>
<p><code>export JSON_DATA='{"description":"My description.","directoryLabel":"data/subdir1","categories":["Data"], "restrict":"false", "storageIdentifier":"trs://images/dataverse_project_logo.svg", "fileName":"dataverse_logo.svg", "mimeType":"image/svg+xml", "checksum": {"@type": "SHA-1", "@value": "123456"}}'</code></p>



<a name="407311875"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407311875" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407311875">(Dec 11 2023 at 20:06)</a>:</h4>
<p>Maybe you can use that as a starting point.</p>



<a name="407312117"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407312117" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407312117">(Dec 11 2023 at 20:08)</a>:</h4>
<p>and I'll test that out now and open the issue</p>



<a name="407314164"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407314164" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407314164">(Dec 11 2023 at 20:22)</a>:</h4>
<p>I have a new error but I think the json is now correct though I probably have to correct the jvm options.<br>
 echo $JSON_DATA<br>
{"description":"Remote LARIAC image test", "storageIdentifier": "lariac-remote-test://s/xv53zxxsovt3mmicae9fshnk3ljycvcp","label": "nlcd_la.tif", "fileName": "nlcd_la.tif", "mimeType": "image/tiff", "checksum": {"@type": "MD5", "@value": "8d0e37b3d0cb048c2ba4ae68c31e0c1b" }}<br>
[ec2-user@ip-172-31-17-169 ~]$ export JSON_DATA='{"description":"Remote LARIAC image test", "storageIdentifier":  "lariac-remote-test://s/xv53zxxsovt3mmicae9fshnk3ljycvcp","label": "nlcd_la.tif", "fileName": "nlcd_la.tif", "mimeType": "image/tiff", "checksum": {"@type": "MD5",  "@value": "****" }}'<br>
[ec2-user@ip-172-31-17-169 ~]$ curl -H "X-Dataverse-key: $API_TOKEN" -X POST "$SERVER_URL/api/datasets/:persistentId/add?persistentId=$PERSISTENT_ID" -F "jsonData=$JSON_DATA"<br>
{"status":"ERROR","message":"Dataset store configuration does not allow provided storageIdentifier."}[ec2-user@ip-172-31-17-169 ~]$</p>



<a name="407314396"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407314396" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407314396">(Dec 11 2023 at 20:24)</a>:</h4>
<p>You're on 5.14, right? That error gets printed in three different places (unfortunately):</p>
<div class="codehilite"><pre><span></span><code>src/main/java/edu/harvard/iq/dataverse/datasetutility/AddReplaceFileHelper.java
2066:                                addErrorSevere(&quot;Dataset store configuration does not allow provided storageIdentifier.&quot;);
2230:                                addErrorSevere(&quot;Dataset store configuration does not allow provided storageIdentifier.&quot;);

src/main/java/edu/harvard/iq/dataverse/api/Datasets.java
2471:                            &quot;Dataset store configuration does not allow provided storageIdentifier.&quot;)
</code></pre></div>



<a name="407314639"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407314639" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407314639">(Dec 11 2023 at 20:26)</a>:</h4>
<p>Looks like the error is how I setup the datastore.   I'll go back over documentation.  The examples seems to assume the storage is on a web site.  I'm trying to see how that translates to departmental box.</p>



<a name="407314760"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407314760" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407314760">(Dec 11 2023 at 20:27)</a>:</h4>
<p>Ok, good luck! I'd probably add 1, 2, and 3 to each of the errors above to try to figure out which one is being triggered.</p>



<a name="407314954"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407314954" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407314954">(Dec 11 2023 at 20:28)</a>:</h4>
<p>will do,  thank you</p>



<a name="407359241"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407359241" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jamie jamison <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407359241">(Dec 12 2023 at 02:26)</a>:</h4>
<p>I am trying to figure out where the errors are coming from.  But, from a beginner perspective I'm not sure what the configuration should look like.  There is only the one example in the documentation.  Not sure what an S3 example would look like.   I should probably also get on slack and see if I can find someone who has successfully set this up.</p>



<a name="407458469"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407458469" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407458469">(Dec 12 2023 at 11:53)</a>:</h4>
<p>Or you could ask on <a href="https://groups.google.com/g/dataverse-community">https://groups.google.com/g/dataverse-community</a> of course.</p>



<a name="407458496"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/trusted%20remote%20storage%20setup/near/407458496" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin üöÄ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/trusted.20remote.20storage.20setup.html#407458496">(Dec 12 2023 at 11:53)</a>:</h4>
<p>It's been a while since I set it up.</p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>