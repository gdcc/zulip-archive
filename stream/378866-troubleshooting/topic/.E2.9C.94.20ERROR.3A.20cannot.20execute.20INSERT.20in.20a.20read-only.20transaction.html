<html>
<head><meta charset="utf-8"><title>✔ ERROR: cannot execute INSERT in a read-only transaction · troubleshooting · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20ERROR.3A.20cannot.20execute.20INSERT.20in.20a.20read-only.20transaction.html">✔ ERROR: cannot execute INSERT in a read-only transaction</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="425267313"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20ERROR%3A%20cannot%20execute%20INSERT%20in%20a%20read-only%20transaction/near/425267313" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes D <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20ERROR.3A.20cannot.20execute.20INSERT.20in.20a.20read-only.20transaction.html#425267313">(Mar 07 2024 at 10:03)</a>:</h4>
<p>We got those nice exceptions after an restart of our production server.  Has someone seen a similar error:</p>
<div class="codehilite"><pre><span></span><code>[#|2024-03-07T09:59:01.282+0000|INFO|Payara 6.2023.8|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=25;_ThreadName=RunLevelControllerThread-1709805498505;_TimeMillis=1709805541282;_LevelValue=800;|
  &lt;== ... Timers Restored.|#]

[#|2024-03-07T09:59:01.576+0000|SEVERE|Payara 6.2023.8||_ThreadID=25;_ThreadName=RunLevelControllerThread-1709805498505;_TimeMillis=1709805541576;_LevelValue=1000;|
  ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...|#]

[#|2024-03-07T09:59:01.987+0000|SEVERE|Payara 6.2023.8|javax.enterprise.system.tools.deployment.common|_ThreadID=25;_ThreadName=RunLevelControllerThread-1709805498505;_TimeMillis=1709805541987;_LevelValue=1000;|
  Exception while invoking class org.glassfish.ejb.startup.EjbApplication start method
jakarta.ejb.EJBException: jakarta.ejb.CreateException: Initialization failed for Singleton StartupFlywayMigrator
    at com.sun.ejb.containers.AbstractSingletonContainer$SingletonContextFactory.create(AbstractSingletonContainer.java:745)
    at com.sun.ejb.containers.AbstractSingletonContainer.instantiateSingletonInstance(AbstractSingletonContainer.java:477)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:219)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:213)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:180)
    at org.glassfish.ejb.startup.SingletonLifeCycleManager.doStartup(SingletonLifeCycleManager.java:159)
    at org.glassfish.ejb.startup.EjbApplication.start(EjbApplication.java:171)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:123)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:292)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:361)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.initialize(ApplicationLifecycle.java:633)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:574)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:556)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:552)
    at java.base/java.security.AccessController.doPrivileged(Unknown Source)
    at java.base/javax.security.auth.Subject.doAs(Unknown Source)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2.execute(CommandRunnerImpl.java:551)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:582)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:574)
    at java.base/java.security.AccessController.doPrivileged(Unknown Source)
    at java.base/javax.security.auth.Subject.doAs(Unknown Source)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:573)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1497)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1879)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1755)
    at com.sun.enterprise.admin.cli.embeddable.CommandExecutorImpl.executeCommand(CommandExecutorImpl.java:183)
    at com.sun.enterprise.admin.cli.embeddable.CommandExecutorImpl.run(CommandExecutorImpl.java:96)
    at fish.payara.boot.runtime.BootCommand.execute(BootCommand.java:69)
    at fish.payara.boot.runtime.BootCommands.executeCommands(BootCommands.java:166)
    at fish.payara.boot.runtime.BootCommands.executeCommands(BootCommands.java:160)
    at com.sun.enterprise.v3.bootstrap.BootCommandService.doBootCommands(BootCommandService.java:81)
    at com.sun.enterprise.v3.bootstrap.BootCommandService.postConstruct(BootCommandService.java:91)
    at org.jvnet.hk2.internal.ClazzCreator.postConstructMe(ClazzCreator.java:303)
    at org.jvnet.hk2.internal.ClazzCreator.create(ClazzCreator.java:351)
    at org.jvnet.hk2.internal.SystemDescriptor.create(SystemDescriptor.java:466)
    at org.glassfish.hk2.runlevel.internal.AsyncRunLevelContext.findOrCreate(AsyncRunLevelContext.java:281)
    at org.glassfish.hk2.runlevel.RunLevelContext.findOrCreate(RunLevelContext.java:65)
    at org.jvnet.hk2.internal.Utilities.createService(Utilities.java:2103)
    at org.jvnet.hk2.internal.ServiceHandleImpl.getService(ServiceHandleImpl.java:93)
    at org.jvnet.hk2.internal.ServiceHandleImpl.getService(ServiceHandleImpl.java:67)
    at org.glassfish.hk2.runlevel.internal.CurrentTaskFuture$QueueRunner.oneJob(CurrentTaskFuture.java:1213)
    at org.glassfish.hk2.runlevel.internal.CurrentTaskFuture$QueueRunner.run(CurrentTaskFuture.java:1144)
    at org.glassfish.hk2.runlevel.internal.CurrentTaskFuture$UpOneLevel.run(CurrentTaskFuture.java:762)
    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.base/java.lang.Thread.run(Unknown Source)
Caused by: jakarta.ejb.CreateException: Initialization failed for Singleton StartupFlywayMigrator
    at com.sun.ejb.containers.AbstractSingletonContainer.createSingletonEJB(AbstractSingletonContainer.java:598)
    at com.sun.ejb.containers.AbstractSingletonContainer$SingletonContextFactory.create(AbstractSingletonContainer.java:743)
    ... 45 more
Caused by: org.flywaydb.core.api.FlywayException: Error while executing afterMigrate callback: Migration afterMigrate__1-7256-upsert-referenceData.sql failed
--------------------------------------------------------------
SQL State  : 25006
Error Code : 0
Message    : ERROR: cannot execute INSERT in a read-only transaction
Location   : db/migration/afterMigrate__1-7256-upsert-referenceData.sql (/opt/payara/deployments/dataverse/WEB-INF/classes/db/migration/afterMigrate__1-7256-upsert-referenceData.sql)
Line       : 10
Statement  : -- #5361 and #7256 is about faster deployments, especially during development, sitting on an empty database.
--
-- This script has been part of  scripts/database/reference_data.sql that had to be executed manually on every new
-- deployment (manually in the sense of Flyway didn&#39;t, the outside installer or an admin took care of it).
--
-- This script will load some initial, common data if not present (so only once, when booting for the first time).

-- using http://dublincore.org/schemas/xmls/qdc/dcterms.xsd because at http://dublincore.org/schemas/xmls/ it&#39;s the
-- schema location for http://purl.org/dc/terms/ which is referenced in http://swordapp.github.io/SWORDv2-Profile/SWORDProfile.html
INSERT INTO foreignmetadataformatmapping (id, name, startelement, displayName, schemalocation)
       VALUES
              (1, &#39;http://purl.org/dc/terms/&#39;, &#39;entry&#39;, &#39;dcterms: DCMI Metadata Terms&#39;, &#39;http://dublincore.org/schemas/xmls/qdc/dcterms.xsd&#39;)
       ON CONFLICT DO NOTHING

    at org.flywaydb.core.internal.callback.DefaultCallbackExecutor.handleEvent(DefaultCallbackExecutor.java:140)
    at org.flywaydb.core.internal.callback.DefaultCallbackExecutor.execute(DefaultCallbackExecutor.java:133)
    at org.flywaydb.core.internal.callback.DefaultCallbackExecutor.lambda$execute$1(DefaultCallbackExecutor.java:120)
    at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
    at org.flywaydb.core.internal.callback.DefaultCallbackExecutor.execute(DefaultCallbackExecutor.java:118)
    at org.flywaydb.core.internal.callback.DefaultCallbackExecutor.onMigrateOrUndoEvent(DefaultCallbackExecutor.java:72)
    at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:112)
    at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)
    at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
    at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
    at edu.harvard.iq.dataverse.flyway.StartupFlywayMigrator.migrateDatabase(StartupFlywayMigrator.java:33)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.base/java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.ejb.containers.interceptors.BeanCallbackInterceptor.intercept(InterceptorManager.java:1022)
    at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:72)
    at com.sun.ejb.containers.interceptors.CallbackInvocationContext.proceed(CallbackInvocationContext.java:204)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doCall(SystemInterceptorProxy.java:163)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.init(SystemInterceptorProxy.java:125)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.base/java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.ejb.containers.interceptors.CallbackInterceptor.intercept(InterceptorManager.java:978)
    at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:72)
    at com.sun.ejb.containers.interceptors.CallbackInvocationContext.proceed(CallbackInvocationContext.java:204)
    at ...
</code></pre></div>



<a name="425295251"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20ERROR%3A%20cannot%20execute%20INSERT%20in%20a%20read-only%20transaction/near/425295251" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20ERROR.3A.20cannot.20execute.20INSERT.20in.20a.20read-only.20transaction.html#425295251">(Mar 07 2024 at 12:46)</a>:</h4>
<p><a href="#narrow/stream/378866-troubleshooting/topic/ERROR.3A.20cannot.20execute.20INSERT.20in.20a.20read-only.20transaction/near/425267313">A message</a> was moved here from <a class="stream-topic" data-stream-id="378866" href="/#narrow/stream/378866-troubleshooting/topic/Install.20Dataverse">#troubleshooting &gt; Install Dataverse</a> by <span class="user-mention silent" data-user-id="598112">Philip Durbin</span>.</p>



<a name="425471326"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20ERROR%3A%20cannot%20execute%20INSERT%20in%20a%20read-only%20transaction/near/425471326" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20ERROR.3A.20cannot.20execute.20INSERT.20in.20a.20read-only.20transaction.html#425471326">(Mar 08 2024 at 08:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="617722">Johannes D</span> has marked this topic as resolved.</p>



<a name="425524488"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20ERROR%3A%20cannot%20execute%20INSERT%20in%20a%20read-only%20transaction/near/425524488" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin 🚀 <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20ERROR.3A.20cannot.20execute.20INSERT.20in.20a.20read-only.20transaction.html#425524488">(Mar 08 2024 at 14:02)</a>:</h4>
<p><span class="user-mention" data-user-id="617722">@Johannes D</span> resolved? Good! <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>