<html>
<head><meta charset="utf-8"><title>Validation Errors Creating a Dataset w/ pyDataverse Â· troubleshooting Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html">Validation Errors Creating a Dataset w/ pyDataverse</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="399798357"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399798357" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sherry Lake <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399798357">(Nov 01 2023 at 20:25)</a>:</h4>
<p>The following json file creates a dataset with no errors using "curl" API command:<br>
<code>curl -H "X-Dataverse-key:$API_TOKEN" -X POST "$SERVER_URL/api/dataverses/$PARENT/datasets" --upload-file dataset-finch1.json -H 'Content-type:application/json</code></p>
<p>but that same json file <code>dataset-finch1.json</code> gives a validation error in pyDataverse:</p>
<blockquote>
<p>jsonschema.exceptions.ValidationError: {'name': 'CC0 1.0', 'uri': '<a href="http://creativecommons.org/publicdomain/zero/1.0'}">http://creativecommons.org/publicdomain/zero/1.0'}</a> is not of type 'string'</p>
</blockquote>
<blockquote>
<p>Failed validating 'type' in schema['properties']['datasetVersion']['properties']['license']:<br>
    {'$id': '#/properties/datasetVersion/properties/license',<br>
     'type': 'string'}</p>
</blockquote>
<p>My file is attached:<br>
<a href="/user_uploads/53090/nbFks0OaH9oLP9Ysd_Aq1OD3/dataset-finch1.json">dataset-finch1.json</a></p>
<p>What is missing to make the json validate in pyDataverse?</p>



<a name="399803785"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399803785" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399803785">(Nov 01 2023 at 21:07)</a>:</h4>
<p>Hmm. What version of pyDataverse are you using?</p>



<a name="399805952"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399805952" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sherry Lake <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399805952">(Nov 01 2023 at 21:26)</a>:</h4>
<p>I'm using V0.3.1 - <a href="https://pydataverse.readthedocs.io/en/latest/index.html">https://pydataverse.readthedocs.io/en/latest/index.html</a></p>
<p>I can create a dataset  with pyDataverse if I leave out the license part, but then the license on my newly created dataset is "Custom", which I don't want.</p>



<a name="399812949"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399812949" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399812949">(Nov 01 2023 at 22:32)</a>:</h4>
<p>I guess I'd suggest opening an issue at <a href="https://github.com/gdcc/pyDataverse/issues">https://github.com/gdcc/pyDataverse/issues</a></p>



<a name="399927039"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399927039" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399927039">(Nov 02 2023 at 12:41)</a>:</h4>
<p><span class="user-mention" data-user-id="599826">@Sherry Lake</span> there is a huge chance that the schemas in <a href="https://github.com/gdcc/pyDataverse/tree/master/src/pyDataverse/schemas/json">https://github.com/gdcc/pyDataverse/tree/master/src/pyDataverse/schemas/json</a> are outdated. Please create an issue, that would help a lot tracking this!</p>



<a name="399927183"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399927183" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399927183">(Nov 02 2023 at 12:42)</a>:</h4>
<p>On a related note: <span class="user-mention" data-user-id="626369">@Don Sizemore</span> <span class="user-mention" data-user-id="599841">@Jan Range</span> <span class="user-mention" data-user-id="598112">@Philip Durbin</span> (and to some degree me) are trying to get the release train rolling again for pyDataverse. Stay tuned!</p>



<a name="399928105"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399928105" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sherry Lake <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399928105">(Nov 02 2023 at 12:47)</a>:</h4>
<p>Thanks, for the information. I will create a issue.</p>
<p>Issue created: <a href="https://github.com/gdcc/pyDataverse/issues/161">https://github.com/gdcc/pyDataverse/issues/161</a></p>



<a name="399935582"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399935582" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399935582">(Nov 02 2023 at 13:25)</a>:</h4>
<p>Thanks, Sherry. <span class="user-mention" data-user-id="599841">@Jan Range</span> check this out ^^</p>



<a name="399936331"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399936331" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan Range <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399936331">(Nov 02 2023 at 13:28)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="599826">@Sherry Lake</span>! This is related to a missing header in the POST request. There is a fix on a fork of mine:</p>
<p><a href="https://github.com/JR-1991/pyDataverse">https://github.com/JR-1991/pyDataverse</a></p>
<p>Can you try it with this version? Maybe you need to uninstall <code>pyDataverse</code> first for the changes to come into effect.</p>



<a name="399938778"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399938778" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sherry Lake <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399938778">(Nov 02 2023 at 13:42)</a>:</h4>
<p>Even with the validation errors, I still ran the create dataset  command -<code>resp = api.create_dataset("uvacs", ds.json())</code></p>
<p>Dataset was created, but with "Custom terms" - it ignored the license part (assuming because of the failed validation).</p>



<a name="399938965"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399938965" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sherry Lake <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399938965">(Nov 02 2023 at 13:43)</a>:</h4>
<p><span class="user-mention" data-user-id="599841">@Jan Range</span> I am not sure how to uninstall pyDataverse and test your version. I'm on a Mac. Any hints on how to do that? I can try later this afternoon (East Coast US).</p>



<a name="399939441"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/399939441" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan Range <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#399939441">(Nov 02 2023 at 13:45)</a>:</h4>
<p>Of course, here is the command to run:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>pip<span class="w"> </span>uninstall<span class="w"> </span>pyDataverse
pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/JR-1991/pyDataverse
</code></pre></div>
<p>If it doesn't work we may need to figure out where the issue is.</p>



<a name="400015058"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/400015058" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sherry Lake <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#400015058">(Nov 02 2023 at 20:33)</a>:</h4>
<p>Unfortunately, I got the same error with your version <span class="user-mention" data-user-id="599841">@Jan Range</span> (see the install lines below) . Problem seems to be in this json schema:<br>
<a href="http://url">https://github.com/gdcc/pyDataverse/blob/master/src/pyDataverse/schemas/json/dataset_upload_default_schema.json</a></p>
<p>I uninstalled pyDataverse - After uninstalling, I typed this <br>
<code>pip install git+https://github.com/JR-1991/pyDataverse</code></p>
<p>which gave me results:</p>
<div class="codehilite"><pre><span></span><code>Defaulting to user installation because normal site-packages is not writeable
Collecting git+https://github.com/JR-1991/pyDataverse
  Cloning https://github.com/JR-1991/pyDataverse to /private/var/folders/r6/84fn85zs085b3c5n5hcg59xm0000gq/T/pip-req-build-gpqbzqwo
  Running command git clone --filter=blob:none --quiet https://github.com/JR-1991/pyDataverse /private/var/folders/r6/84fn85zs085b3c5n5hcg59xm0000gq/T/pip-req-build-gpqbzqwo
  Resolved https://github.com/JR-1991/pyDataverse to commit 0fcfcd3fbc6bf1aec869899f715a51dca25e91be
  Preparing metadata (setup.py) ... done
Requirement already satisfied: requests&gt;=2.12.0 in /Users/sah/Library/Python/3.9/lib/python/site-packages (from pyDataverse==0.3.1) (2.31.0)
Requirement already satisfied: jsonschema&gt;=3.2.0 in /Users/sah/Library/Python/3.9/lib/python/site-packages (from pyDataverse==0.3.1) (4.18.4)
Requirement already satisfied: attrs&gt;=22.2.0 in /Users/sah/Library/Python/3.9/lib/python/site-packages (from jsonschema&gt;=3.2.0-&gt;pyDataverse==0.3.1) (23.1.0)
Requirement already satisfied: jsonschema-specifications&gt;=2023.03.6 in /Users/sah/Library/Python/3.9/lib/python/site-packages (from jsonschema&gt;=3.2.0-&gt;pyDataverse==0.3.1) (2023.7.1)
Requirement already satisfied: referencing&gt;=0.28.4 in /Users/sah/Library/Python/3.9/lib/python/site-packages (from jsonschema&gt;=3.2.0-&gt;pyDataverse==0.3.1) (0.30.0)
Requirement already satisfied: rpds-py&gt;=0.7.1 in /Users/sah/Library/Python/3.9/lib/python/site-packages (from jsonschema&gt;=3.2.0-&gt;pyDataverse==0.3.1) (0.9.2)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /Users/sah/Library/Python/3.9/lib/python/site-packages (from requests&gt;=2.12.0-&gt;pyDataverse==0.3.1) (3.2.0)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /Users/sah/Library/Python/3.9/lib/python/site-packages (from requests&gt;=2.12.0-&gt;pyDataverse==0.3.1) (3.4)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /Users/sah/Library/Python/3.9/lib/python/site-packages (from requests&gt;=2.12.0-&gt;pyDataverse==0.3.1) (2.0.4)
Requirement already satisfied: certifi&gt;=2017.4.17 in /Users/sah/Library/Python/3.9/lib/python/site-packages (from requests&gt;=2.12.0-&gt;pyDataverse==0.3.1) (2023.7.22)
Building wheels for collected packages: pyDataverse
  Building wheel for pyDataverse (setup.py) ... done
  Created wheel for pyDataverse: filename=pyDataverse-0.3.1-py3-none-any.whl size=32602 sha256=c58d4c133d30bbe3c64b726d087de264ddf6da74e8dd2ec7a6318afc6a1d0f2d
  Stored in directory: /private/var/folders/r6/84fn85zs085b3c5n5hcg59xm0000gq/T/pip-ephem-wheel-cache-yzpofxys/wheels/61/2a/0a/07fb58afbbadb2ed13b0efe12205b86aaff3841ac8792fb06d
Successfully built pyDataverse
Installing collected packages: pyDataverse
Successfully installed pyDataverse-0.3.1
</code></pre></div>



<a name="400015774"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Validation%20Errors%20Creating%20a%20Dataset%20w/%20pyDataverse/near/400015774" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Validation.20Errors.20Creating.20a.20Dataset.20w.2F.20pyDataverse.html#400015774">(Nov 02 2023 at 20:38)</a>:</h4>
<p>On a related note, there's a new JSON Schema for Dataverse datasets at <a href="https://github.com/IQSS/dataverse/issues/9463">#9463</a> if you'd like to play with it.</p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>