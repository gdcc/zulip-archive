<html>
<head><meta charset="utf-8"><title>OAI-PMH Internal Server Error Â· troubleshooting Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html">OAI-PMH Internal Server Error</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="398720343"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398720343" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> CÃ©sar Ferreira <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398720343">(Oct 26 2023 at 15:58)</a>:</h4>
<p>Hi everyone, I and <span class="user-mention" data-user-id="662399">@zbenta</span>  are having some issues with OAI-PMH endpoint in our dataverse instalation at <a href="https://repositorio.polen.fccn.pt/oai">https://repositorio.polen.fccn.pt/oai</a> , the server responds with an internal server error and the logs for payara shows as follow. Any ideas?</p>
<p>[2023-10-26T15:33:47.554+0000] [Payara 5.2022.3] [WARNING] [] [javax.enterprise.web] [tid: _ThreadID=157 _ThreadName=http-thread-pool::http-listener-1(2)] [timeMillis: 1698334427554] [levelValue: 900] [[<br>
  StandardWrapperValve[OAIServlet]: Servlet.service() for servlet OAIServlet threw exception<br>
io.gdcc.xoai.exceptions.BadVerbException: No argument 'verb' found<br>
    at io.gdcc.xoai.dataprovider.request.RequestBuilder.buildRawRequest(RequestBuilder.java:119)<br>
    at edu.harvard.iq.dataverse.harvest.server.web.servlet.OAIServlet.processRequest(OAIServlet.java:265)<br>
    at edu.harvard.iq.dataverse.harvest.server.web.servlet.OAIServlet.doGet(OAIServlet.java:250)<br>
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:645)<br>
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)<br>
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1637)<br>
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:331)<br>
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:211)<br>
    at org.glassfish.tyrus.servlet.TyrusServletFilter.doFilter(TyrusServletFilter.java:282)<br>
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:253)<br>
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:211)<br>
    at org.ocpsoft.rewrite.servlet.RewriteFilter.doFilter(RewriteFilter.java:226)<br>
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:253)<br>
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:211)<br>
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:257)<br>
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:160)<br>
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:757)<br>
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:577)<br>
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:99)<br>
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:158)<br>
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:372)<br>
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:239)<br>
    at com.sun.enterprise.v3.services.impl.ContainerMapper$HttpHandlerCallable.call(ContainerMapper.java:520)<br>
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:217)<br>
    at org.glassfish.grizzly.http.server.HttpHandler.runService(HttpHandler.java:182)<br>
    at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:156)<br>
    at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:201)<br>
    at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:95)<br>
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:260)<br>
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:177)<br>
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:109)<br>
    at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:88)<br>
    at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:53)<br>
    at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:524)<br>
    at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:89)<br>
    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:94)<br>
    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.access$100(WorkerThreadIOStrategy.java:33)<br>
    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:114)<br>
    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:569)<br>
    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:549)<br>
    at java.base/java.lang.Thread.run(Thread.java:829)<br>
]]</p>



<a name="398732224"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398732224" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398732224">(Oct 26 2023 at 17:09)</a>:</h4>
<p>Hi! Based on <a href="https://repositorio.polen.fccn.pt/api/info/version">https://repositorio.polen.fccn.pt/api/info/version</a> it looks like you're running 5.13.</p>
<p>So that's <a href="https://github.com/IQSS/dataverse/blob/v5.13/src/main/java/edu/harvard/iq/dataverse/harvest/server/web/servlet/OAIServlet.java#L250">https://github.com/IQSS/dataverse/blob/v5.13/src/main/java/edu/harvard/iq/dataverse/harvest/server/web/servlet/OAIServlet.java#L250</a></p>
<p>And <a href="https://github.com/gdcc/xoai/blob/xoai-5.0.0/xoai-data-provider/src/main/java/io/gdcc/xoai/dataprovider/request/RequestBuilder.java#L119">https://github.com/gdcc/xoai/blob/xoai-5.0.0/xoai-data-provider/src/main/java/io/gdcc/xoai/dataprovider/request/RequestBuilder.java#L119</a></p>



<a name="398732470"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398732470" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398732470">(Oct 26 2023 at 17:11)</a>:</h4>
<p><a href="https://repositorio.polen.fccn.pt/oai?verb=ListMetadataFormats">https://repositorio.polen.fccn.pt/oai?verb=ListMetadataFormats</a> works. Is it just that you were missing a verb?</p>



<a name="398852006"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398852006" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zbenta <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398852006">(Oct 27 2023 at 08:37)</a>:</h4>
<p><span aria-label="man gesturing ok" class="emoji emoji-1f646-200d-2642" role="img" title="man gesturing ok">:man_gesturing_ok:</span>  We could swear that we did not have to pass any extra arguments to the endpoint. Thanks <span class="user-mention" data-user-id="598112">@Philip Durbin</span> for the help.</p>



<a name="398882876"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398882876" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398882876">(Oct 27 2023 at 11:49)</a>:</h4>
<p>Sure! I don't know how OAI-PMH is supposed to work, if it's supposed to return a 404 if there's no verb.</p>



<a name="398885147"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398885147" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398885147">(Oct 27 2023 at 12:04)</a>:</h4>
<p><a href="http://www.openarchives.org/OAI/openarchivesprotocol.html#StatusCodes">http://www.openarchives.org/OAI/openarchivesprotocol.html#StatusCodes</a></p>



<a name="398885361"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398885361" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398885361">(Oct 27 2023 at 12:05)</a>:</h4>
<p>"OAI-PMH repositories may employ HTTP Status-Codes in addition to "200 OK"."</p>



<a name="398885390"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398885390" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398885390">(Oct 27 2023 at 12:05)</a>:</h4>
<p>So I guess it's up to us. "May".</p>



<a name="398885689"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398885689" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398885689">(Oct 27 2023 at 12:07)</a>:</h4>
<p>Simply throwing a <code>ServletException</code> in <a href="https://github.com/IQSS/dataverse/blob/6b2bcfb359648fe9d7f31ff579a9be0db2ec4d9e/src/main/java/edu/harvard/iq/dataverse/harvest/server/web/servlet/OAIServlet.java#L270">OAIServlet</a> was maybe not the best choice in hindsight</p>



<a name="398885808"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398885808" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398885808">(Oct 27 2023 at 12:08)</a>:</h4>
<p>(Throwing such an exception will always trigger an error 500)</p>



<a name="398885862"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398885862" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398885862">(Oct 27 2023 at 12:08)</a>:</h4>
<p>I would prefer a non-JSF page for the 404 at /oai ... <a href="https://demo.dataverse.org/oai">https://demo.dataverse.org/oai</a> for example. But I guess JSF is going away (thank goodness).</p>



<a name="398885950"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398885950" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398885950">(Oct 27 2023 at 12:09)</a>:</h4>
<p>IMHO we should move that servlet to a JAX-RS endpoint</p>



<a name="398886015"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398886015" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398886015">(Oct 27 2023 at 12:09)</a>:</h4>
<p>Sure, sounds good. SWORD too?</p>



<a name="398886100"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398886100" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398886100">(Oct 27 2023 at 12:10)</a>:</h4>
<p>This is starting to feel like it belongs in <a class="stream" data-stream-id="379673" href="/#narrow/stream/379673-dev">#dev</a> <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="398886138"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398886138" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398886138">(Oct 27 2023 at 12:10)</a>:</h4>
<p>Probably. IIRC SWORD did have some support for this already, but not sure.</p>



<a name="398886295"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/OAI-PMH%20Internal%20Server%20Error/near/398886295" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/OAI-PMH.20Internal.20Server.20Error.html#398886295">(Oct 27 2023 at 12:11)</a>:</h4>
<p>Well what we should say here: <span class="user-mention" data-user-id="662399">@zbenta</span> <span class="user-mention" data-user-id="622863">@CÃ©sar Ferreira</span> if you want the behaviour changed, please open an issue. A link to this conversation would be much appreciated!</p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>