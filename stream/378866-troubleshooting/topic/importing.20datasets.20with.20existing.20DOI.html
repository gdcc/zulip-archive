<html>
<head><meta charset="utf-8"><title>importing datasets with existing DOI Â· troubleshooting Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html">importing datasets with existing DOI</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="452380606"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452380606" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452380606">(Jul 18 2024 at 15:55)</a>:</h4>
<p>Hi everyone,</p>
<p>I am trying to add datasets that have been deposited in other repositories to our collections running 6.2, but not sure how to configure the JSON file to attach the data files. I am following the instructions here: <br>
<a href="https://guides.dataverse.org/en/latest/api/native-api.html#id59">https://guides.dataverse.org/en/latest/api/native-api.html#id59</a></p>
<p>Do I just put the data files to be uploaded in the same folder as the JSON file? How do I name the data files and how to configure the following part of the JSON file. I tried different things and kept getting a message says "Validation Failed: Please specify a file name. (Invalid value:).java.util.stream.ReferencePipeline$3@71302796".</p>
<div class="codehilite"><pre><span></span><code>&quot;files&quot;: [
  {
    &quot;description&quot;: &quot;&quot;,
    &quot;label&quot;: &quot;pub&quot;,
    &quot;restricted&quot;: false,
    &quot;version&quot;: 1,
    &quot;datasetVersionId&quot;: 1,
    &quot;dataFile&quot;: {
      &quot;id&quot;: 4,
      &quot;filename&quot;: &quot;pub&quot;,
      &quot;contentType&quot;: &quot;application/vnd.dataverse.file-package&quot;,
      &quot;filesize&quot;: 1698795873,
      &quot;description&quot;: &quot;&quot;,
      &quot;storageIdentifier&quot;: &quot;162017e5ad5-ee2a2b17fee9&quot;,
      &quot;originalFormatLabel&quot;: &quot;UNKNOWN&quot;,
      &quot;rootDataFileId&quot;: -1,
      &quot;checksum&quot;: {
        &quot;type&quot;: &quot;SHA-1&quot;,
        &quot;value&quot;: &quot;54bc7ddb096a490474bd8cc90cbed1c96730f350&quot;
      }
    }
  }
]
</code></pre></div>



<a name="452410818"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452410818" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452410818">(Jul 18 2024 at 18:16)</a>:</h4>
<p>Hi! First, I'm turning your guides link into something more permanent (since "latest" is always changing): <a href="https://guides.dataverse.org/en/6.2/api/native-api.html#import-a-dataset-into-a-dataverse-collection">https://guides.dataverse.org/en/6.2/api/native-api.html#import-a-dataset-into-a-dataverse-collection</a></p>



<a name="452410971"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452410971" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452410971">(Jul 18 2024 at 18:17)</a>:</h4>
<p>I was just playing with the import API yesterday. One sec.</p>



<a name="452411235"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452411235" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452411235">(Jul 18 2024 at 18:18)</a>:</h4>
<p>This is what I did: <a href="https://github.com/IQSS/dataverse/pull/10694/commits/4f055b6d89e790ff4df6af490f7152e88e1c431d">https://github.com/IQSS/dataverse/pull/10694/commits/4f055b6d89e790ff4df6af490f7152e88e1c431d</a></p>



<a name="452411662"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452411662" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452411662">(Jul 18 2024 at 18:19)</a>:</h4>
<p>Oh, but I wasn't testing files. Let me try with the example from the guides.</p>



<a name="452412472"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452412472" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452412472">(Jul 18 2024 at 18:22)</a>:</h4>
<p>It seems to import ok on my machine. Please check this out:</p>
<p><a href="/user_uploads/53090/OR40d0BBPB7t83XlGdxGu3nk/Screenshot-2024-07-18-at-2.21.56PM.png">Screenshot-2024-07-18-at-2.21.56PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/OR40d0BBPB7t83XlGdxGu3nk/Screenshot-2024-07-18-at-2.21.56PM.png" title="Screenshot-2024-07-18-at-2.21.56PM.png"><img src="/user_uploads/53090/OR40d0BBPB7t83XlGdxGu3nk/Screenshot-2024-07-18-at-2.21.56PM.png"></a></div>



<a name="452413756"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452413756" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452413756">(Jul 18 2024 at 18:27)</a>:</h4>
<p>Thanks, Philip for testing the functions on your machine. I am thinking I probably did not get the JSON file correctly configured. Where do I get the value to add to "storageIdentifier":?</p>



<a name="452414041"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452414041" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452414041">(Jul 18 2024 at 18:28)</a>:</h4>
<p>Well, first you might want to see if scripts/api/data/dataset-package-files.json works for you.</p>



<a name="452414066"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452414066" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452414066">(Jul 18 2024 at 18:28)</a>:</h4>
<p>That's the file I tried that's used in the guides.</p>



<a name="452414223"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452414223" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452414223">(Jul 18 2024 at 18:29)</a>:</h4>
<p>Here's what the guides say about storage identifiers:</p>
<p>Before calling the API, make sure the data files referenced by the <code>POST</code>ed JSON are placed in the dataset directory with filenames matching their specified storage identifiers. In installations using POSIX storage, these files must be made readable by the app server user.</p>



<a name="452414236"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452414236" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452414236">(Jul 18 2024 at 18:29)</a>:</h4>
<p>Which sounds right to me.</p>



<a name="452414332"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452414332" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452414332">(Jul 18 2024 at 18:30)</a>:</h4>
<p>But your current problem, I think, is that your JSON isn't working.</p>



<a name="452414716"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452414716" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452414716">(Jul 18 2024 at 18:32)</a>:</h4>
<p>So I would try scripts/api/data/dataset-package-files.json</p>



<a name="452414826"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452414826" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452414826">(Jul 18 2024 at 18:33)</a>:</h4>
<p>Thanks. Let me try dataset-package-files.json first.</p>



<a name="452420996"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452420996" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452420996">(Jul 18 2024 at 19:07)</a>:</h4>
<p>Is there a place to download the file named "pub" for testing, or I can just use any file?</p>



<a name="452422338"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452422338" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452422338">(Jul 18 2024 at 19:15)</a>:</h4>
<p>I checked my JSON file. It was based on the dataset-package-files.json file. The part I don't know how to set up is the "dataFile" section. In "storageIdentifier": "162017e5ad5-ee2a2b17fee9", do I give a random value to storageIdentifier or is it machine generated? The instruction says "make sure the data files referenced by the <code>POST</code>ed JSON are placed in the dataset directory with filenames matching their specified storage identifiers". Do I rename my data file to a name like 162017e5ad5-ee2a2b17fee9?</p>



<a name="452422622"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452422622" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452422622">(Jul 18 2024 at 19:16)</a>:</h4>
<p>This is the error message after running the curl: {"status":"ERROR","message":"Validation Failed: Please specify a file name. (Invalid value:).java.util.stream.ReferencePipeline$3@55ac8b8e"}</p>



<a name="452432984"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452432984" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452432984">(Jul 18 2024 at 20:19)</a>:</h4>
<p>In the JSON file you are telling Dataverse the name of the file on disk.</p>
<p>So you should use the storage identifier as the name (on disk).</p>



<a name="452433180"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452433180" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452433180">(Jul 18 2024 at 20:20)</a>:</h4>
<p>I don't know where you keep your data but the filename could be something like this:</p>
<p>/usr/local/dataverse/data/10.5072/FK2/ZTIQ5D/18b23995b07-aee7a8fd551d</p>



<a name="452627385"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452627385" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452627385">(Jul 19 2024 at 17:37)</a>:</h4>
<p>Thanks for the detailed explanation! I named the xlsx data file as "19d611809e9-rumbolda6e05" and put it in this folder: <code>/home/hansen/Documents/2Dataset_Migration/10.7266/N7XP72WT/</code>. Below is the setting for the <code>files</code> section. I am still getting the same error message.</p>
<div class="codehilite"><pre><span></span><code>    &quot;files&quot;: [
        {
          &quot;description&quot;: &quot;&quot;,
          &quot;label&quot;: &quot;&quot;,
          &quot;restricted&quot;: false,
          &quot;version&quot;: 1,
          &quot;datasetVersionId&quot;: 1,
          &quot;dataFile&quot;: {
            &quot;id&quot;: 1001,
            &quot;filename&quot;: &quot;19d611809e9-rumbolda6e05&quot;,
            &quot;contentType&quot;: &quot;application/vnd.dataverse.file-package&quot;,
            &quot;filesize&quot;: 239590,
            &quot;description&quot;: &quot;&quot;,
            &quot;storageIdentifier&quot;: &quot;/home/hansen/Documents/2Dataset_Migration/10.7266/N7XP72WT/19d611809e9-rumbolda6e05&quot;,
            &quot;originalFormatLabel&quot;: &quot;UNKNOWN&quot;,
            &quot;rootDataFileId&quot;: -1,
            &quot;checksum&quot;: {
              &quot;type&quot;: &quot;SHA-1&quot;,
              &quot;value&quot;: &quot;7e543d4cd13715aec38ba485267568442a7818fa&quot;
            }
          }
        }
    ]
</code></pre></div>



<a name="452629044"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452629044" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452629044">(Jul 19 2024 at 17:49)</a>:</h4>
<p>Why would it work for me and not for you? You did try scripts/api/data/dataset-package-files.json, right? And it didn't work?</p>



<a name="452631389"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452631389" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452631389">(Jul 19 2024 at 18:02)</a>:</h4>
<p>I would like to try, but I don't have the pub file.</p>



<a name="452633716"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452633716" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452633716">(Jul 19 2024 at 18:12)</a>:</h4>
<p>I tried using the JSON file to add metadata of datasets with existing DOI. They all work fine and can be successfully published without the data file. But after adding the data files in the app, the datasets can not be published. An error message says there were problems registering the datasets. Does it mean that we need to upload metadata and data files altogether using a JSON to be able to publish?</p>



<a name="452634039"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452634039" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452634039">(Jul 19 2024 at 18:14)</a>:</h4>
<p>You don't need the pub file.</p>



<a name="452634060"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452634060" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452634060">(Jul 19 2024 at 18:14)</a>:</h4>
<p>You can just test with that JSON.</p>



<a name="452634088"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452634088" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452634088">(Jul 19 2024 at 18:14)</a>:</h4>
<p>Just to see if the JSON works.</p>



<a name="452636830"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452636830" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452636830">(Jul 19 2024 at 18:25)</a>:</h4>
<p>It works.</p>



<a name="452638415"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452638415" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452638415">(Jul 19 2024 at 18:32)</a>:</h4>
<p>Oh! Great! So now we need to figure out what's different between the two JSON files?</p>



<a name="452638423"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452638423" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452638423">(Jul 19 2024 at 18:32)</a>:</h4>
<p>Using the same JSON, I can successfully add metadata. The error message showed up after adding the "files" section. Does the curl automatically upload the data file on local disk to the server or do we need to upload the files first?</p>



<a name="452638604"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452638604" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452638604">(Jul 19 2024 at 18:34)</a>:</h4>
<p>You need to upload the files first.</p>
<p>But I'm confused. scripts/api/data/dataset-package-files.json does have a "files" section. You're saying it worked, right? You can see a file in Dataverse? Like in the screenshot I put above?</p>



<a name="452639238"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452639238" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452639238">(Jul 19 2024 at 18:39)</a>:</h4>
<p>scripts/api/data/dataset-package-files.json worked for me. I can see a file in Dataverse. <br>
Before doing this, I tried to add metadata to Dataverse first, and then upload the data files in the app before publishing. But ketp getting the "unable to register" error in server.log.</p>



<a name="452639771"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452639771" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452639771">(Jul 19 2024 at 18:42)</a>:</h4>
<p>Ok, that's a different error, related to publishing.</p>



<a name="452640040"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452640040" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452640040">(Jul 19 2024 at 18:44)</a>:</h4>
<p>Have we moved on to that error, the publishing error? The first problem is resolved?</p>



<a name="452640345"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452640345" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452640345">(Jul 19 2024 at 18:46)</a>:</h4>
<p>Based on what you explained, I think I misunderstood how dataset-package-files.json works. I thought it can upload files to the server. <br>
Are we supposed to be able to upload data files in the app after adding the metadata using the JSON? I only see some cache files in the corresponding folder on the server after doing that.</p>



<a name="452640742"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452640742" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452640742">(Jul 19 2024 at 18:49)</a>:</h4>
<p>I'm not sure but I think people use the import API this way:</p>
<ul>
<li>put files in place</li>
<li>use import API (send JSON), setting published=true (or whatever it's called)</li>
</ul>
<p>That is, I'm not sure if it works to keep the imported dataset in draft to add files or make metadata edits. It might work, but I'm not sure.</p>



<a name="452641169"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452641169" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452641169">(Jul 19 2024 at 18:52)</a>:</h4>
<p>I will try and see if the registration error still shows up after uploading the data files to the server first and then using import API to publish.</p>



<a name="452641205"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452641205" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452641205">(Jul 19 2024 at 18:53)</a>:</h4>
<p>I greatly appreciate your time and kind help!</p>



<a name="452642122"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452642122" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452642122">(Jul 19 2024 at 18:58)</a>:</h4>
<p>Awesome. Good luck!</p>



<a name="452642146"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452642146" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452642146">(Jul 19 2024 at 18:58)</a>:</h4>
<p>And feel free to open issues about the API not working the way you expect it to!</p>



<a name="452645360"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452645360" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452645360">(Jul 19 2024 at 19:13)</a>:</h4>
<p>Got it. Thanks!</p>



<a name="452658144"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452658144" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452658144">(Jul 19 2024 at 20:07)</a>:</h4>
<p>Hi Philip, I copied the file to the server and successfully published the dataset. But file seems not downloadable. Is there anything else that I am missing. Here is the link to the dataset: <a href="https://dataverse.fgcu.edu/dataset.xhtml?persistentId=doi:10.7266/N7XP72WT">https://dataverse.fgcu.edu/dataset.xhtml?persistentId=doi:10.7266/N7XP72WT</a></p>



<a name="452658499"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452658499" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452658499">(Jul 19 2024 at 20:08)</a>:</h4>
<p>{"status":"ERROR","code":404,"message":"Datafile 182: Failed to locate and/or open physical file."}</p>



<a name="452658530"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452658530" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452658530">(Jul 19 2024 at 20:08)</a>:</h4>
<p>Hmm, it seems like the file is not in the right place on disk.</p>



<a name="452658546"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452658546" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452658546">(Jul 19 2024 at 20:08)</a>:</h4>
<p>What does server.log say?</p>



<a name="452658720"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452658720" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452658720">(Jul 19 2024 at 20:09)</a>:</h4>
<p>Let me check if it's a permission issue</p>



<a name="452658741"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452658741" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452658741">(Jul 19 2024 at 20:09)</a>:</h4>
<p>Also you're using this:</p>
<p>"contentType": "application/vnd.dataverse.file-package",</p>



<a name="452658776"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452658776" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452658776">(Jul 19 2024 at 20:09)</a>:</h4>
<p>Instead you should use the right contentType for Excel.</p>



<a name="452660112"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452660112" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452660112">(Jul 19 2024 at 20:15)</a>:</h4>
<p>Yes. That's something that I was to ask. Where do I find <code>contentType</code> for different file types?</p>



<a name="452660686"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452660686" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452660686">(Jul 19 2024 at 20:18)</a>:</h4>
<p>Here you go: <a href="https://github.com/IQSS/dataverse/blob/v6.3/src/main/java/propertyFiles/MimeTypeDisplay.properties">https://github.com/IQSS/dataverse/blob/v6.3/src/main/java/propertyFiles/MimeTypeDisplay.properties</a></p>



<a name="452661029"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452661029" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452661029">(Jul 19 2024 at 20:20)</a>:</h4>
<p>Thank you so much!</p>



<a name="452661107"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452661107" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452661107">(Jul 19 2024 at 20:21)</a>:</h4>
<p>You saved my life again <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="452661174"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/452661174" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#452661174">(Jul 19 2024 at 20:21)</a>:</h4>
<p>Ha. Sure! <span aria-label="blush" class="emoji emoji-1f60a" role="img" title="blush">:blush:</span></p>



<a name="454948814"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/454948814" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#454948814">(Jul 29 2024 at 21:02)</a>:</h4>
<p>Hi Philip, I tried to add a folder containing 200 tif images to a dataset. I have tried zip it or double zip it, but the folder does not show up in dataverse. The other xlsx file being added together showed up without any problems. Is there anything I am missing about how to handle folders in the json file?</p>



<a name="454950626"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/454950626" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#454950626">(Jul 29 2024 at 21:09)</a>:</h4>
<p>Hmm, you could try tar.gz format instead of zip.</p>



<a name="454951602"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/importing%20datasets%20with%20existing%20DOI/near/454951602" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen Zhang <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/importing.20datasets.20with.20existing.20DOI.html#454951602">(Jul 29 2024 at 21:15)</a>:</h4>
<p>Okay. Thanks!</p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>