<html>
<head><meta charset="utf-8"><title>Missing reference to deleted/changed file in version info Â· troubleshooting Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html">Missing reference to deleted/changed file in version info</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="572906261"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/572906261" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deirdre Kirmis <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#572906261">(Feb 09 2026 at 23:14)</a>:</h4>
<p>Hi there .. we have a dataset where the user uploaded a file in v1, then posted several new revisions, then needed to change that original uploaded file. This person uploaded a new file with the changes, but then realized the old file could just be replaced, so we deleted the new file, made changes to the original file, and replaced it. However, none of these changes appear in the version history for the file or for the dataset. Usually these type of changes do appear in the history. Any ideas? <br>
<a href="/user_uploads/53090/q_bxhwzWL9qXcFK1iNoBPo_m/df-file-changes.jpg">df-file-changes.jpg</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/q_bxhwzWL9qXcFK1iNoBPo_m/df-file-changes.jpg" title="df-file-changes.jpg"><img data-original-content-type="image/jpeg" data-original-dimensions="1154x268" src="/user_uploads/thumbnail/53090/q_bxhwzWL9qXcFK1iNoBPo_m/df-file-changes.jpg/840x560.webp"></a></div>



<a name="573062419"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573062419" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573062419">(Feb 10 2026 at 14:46)</a>:</h4>
<p>Hmm, want to try replicating this on <a href="https://demo.dataverse.org">https://demo.dataverse.org</a> ?</p>



<a name="573083174"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573083174" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deirdre Kirmis <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573083174">(Feb 10 2026 at 16:04)</a>:</h4>
<p>okay I did test on the demo DV .. I uploaded a file &gt; published &gt; uploaded second copy of file &gt; published &gt; deleted second copy &gt; published &gt; made a change to original file and replaced &gt; published .. all of those changes showed in the version history except for the file replacement .. so likely a publish was not done after each step on our side .. makes sense that if not, the version info wouldn't show as the diff is just between published versions .. </p>
<p>.. but there was definitely a publish after the final replacement of the original file .. would that not show a change in version history? (ie: do file changes done via "Replace" show in the version history?)<br>
<a href="/user_uploads/53090/1WgBPSTEIDSD3_ZAqPSH8gYQ/test-2.jpg">test 2.jpg</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/1WgBPSTEIDSD3_ZAqPSH8gYQ/test-2.jpg" title="test 2.jpg"><img data-original-content-type="image/jpeg" data-original-dimensions="454x141" src="/user_uploads/thumbnail/53090/1WgBPSTEIDSD3_ZAqPSH8gYQ/test-2.jpg/840x560.webp"></a></div>



<a name="573090289"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573090289" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573090289">(Feb 10 2026 at 16:32)</a>:</h4>
<p>I'm confused. Are you saying you replaced a file between these two versions?</p>
<ul>
<li><a href="https://demo.dataverse.org/dataset.xhtml?persistentId=doi:10.70122/FK2/4JSMVV&amp;version=5.0">https://demo.dataverse.org/dataset.xhtml?persistentId=doi:10.70122/FK2/4JSMVV&amp;version=5.0</a></li>
<li><a href="https://demo.dataverse.org/dataset.xhtml?persistentId=doi:10.70122/FK2/4JSMVV&amp;version=5.1">https://demo.dataverse.org/dataset.xhtml?persistentId=doi:10.70122/FK2/4JSMVV&amp;version=5.1</a></li>
</ul>
<p>I'm asking because I see the same file with the same md5.</p>



<a name="573154564"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573154564" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deirdre Kirmis <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573154564">(Feb 10 2026 at 21:35)</a>:</h4>
<p>Yea the plot is thickening on this .. <span class="user-mention" data-user-id="744896">@Rachel Fernandez</span> did some detective work here on our repo and noticed that any file that is uploaded via "Replace" is not actually registering the uploaded file. The same thing has happened here, which is why those 2 files are the same. I did a "replace" and publish but the second publish did not capture the changed file. Both files exist on S3 though, so I know it is making it that far. The step to register the changed file to dataverse just does not seem to be happening.</p>



<a name="573154652"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573154652" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deirdre Kirmis <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573154652">(Feb 10 2026 at 21:36)</a>:</h4>
<p>We didn't  notice originally that the changed file was not showing the changes in the dataset itself.</p>



<a name="573155870"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573155870" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573155870">(Feb 10 2026 at 21:44)</a>:</h4>
<p>smells like a bug <span aria-label="lady beetle" class="emoji emoji-1f41e" role="img" title="lady beetle">:lady_beetle:</span></p>



<a name="573158532"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573158532" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deirdre Kirmis <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573158532">(Feb 10 2026 at 22:02)</a>:</h4>
<p>i will submit a ticket .. i think this could be related to <a href="https://github.com/IQSS/dataverse/issues/11976">https://github.com/IQSS/dataverse/issues/11976</a> as we are having that issue as well</p>



<a name="573565968"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573565968" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573565968">(Feb 12 2026 at 16:20)</a>:</h4>
<p><span class="user-mention" data-user-id="598843">@Deirdre Kirmis</span> thanks for opening this issue!</p>
<p>Replace feature does not replace the fileÂ <a href="https://github.com/IQSS/dataverse/issues/12157">#12157</a></p>



<a name="573567126"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573567126" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573567126">(Feb 12 2026 at 16:25)</a>:</h4>
<p>I hope you don't mind but I edited the issue to link to this topic on Zulip.</p>



<a name="573571808"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573571808" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deirdre Kirmis <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573571808">(Feb 12 2026 at 16:45)</a>:</h4>
<p>oh sure, no problem .. thanks for doing that <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="573572103"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573572103" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573572103">(Feb 12 2026 at 16:47)</a>:</h4>
<p>Sure. Can you also mention in the issue that you were able to reproduce it on demo?</p>



<a name="573572209"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573572209" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573572209">(Feb 12 2026 at 16:47)</a>:</h4>
<p>Also, I'm wondering if you happen to know if replacing file via API is a good workaround.</p>



<a name="573602893"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573602893" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deirdre Kirmis <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573602893">(Feb 12 2026 at 19:27)</a>:</h4>
<p>yes will do .. good point on the API .. I tried it and it does seem that the API replaced the file with the changed one correctly (it created a new draft, and the draft file is the new one, and then the published dataset has the correct file</p>



<a name="573607095"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Missing%20reference%20to%20deleted/changed%20file%20in%20version%20info/near/573607095" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Missing.20reference.20to.20deleted.2Fchanged.20file.20in.20version.20info.html#573607095">(Feb 12 2026 at 19:52)</a>:</h4>
<p>phew!</p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>