<html>
<head><meta charset="utf-8"><title>âœ” indexing issue after upgrading to version 6.2 Â· troubleshooting Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html">âœ” indexing issue after upgrading to version 6.2</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="436694681"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436694681" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen C. <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436694681">(May 02 2024 at 13:31)</a>:</h4>
<p>After upgrading to version 6.2, I got zero dataverse and dataset under dataverse/root/ on the web. But "curl <a href="http://localhost:8080/api/admin/index">http://localhost:8080/api/admin/index</a>" gives the right number of dataverses and datasets. What could be the reason? Please help. Thanks!</p>



<a name="436694834"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436694834" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436694834">(May 02 2024 at 13:31)</a>:</h4>
<p>Anything in server.log?</p>



<a name="436698132"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436698132" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen C. <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436698132">(May 02 2024 at 13:46)</a>:</h4>
<p>It says "4 dataverses and 10 datasets indexed. index all took 2639 milliseconds. Solr index was not cleared before indexing." Does that mean I need to clear it before indexing after upgrading?</p>



<a name="436699707"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436699707" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen C. <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436699707">(May 02 2024 at 13:53)</a>:</h4>
<p>The log file is pretty long with the activities from yesterday. I also see this "[2024-05-01T17:14:03.144-0400] [Payara 6.2023.8] [INFO] [] [edu.harvard.iq.dataverse.search.SearchServiceBean] [tid: _ThreadID=90 _ThreadName=http-thread-pool::jk-connector(1)] [timeMillis: 1714598043144] [levelValue: 800] [[<br>
  Search Syntax Error: Error from server at http://<em>.</em>.<em>.</em>:8983/solr/collection1: undefined field: "license"]]"</p>



<a name="436699969"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436699969" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> luddaniel <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436699969">(May 02 2024 at 13:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="663833">Hansen C.</span> <a href="#narrow/stream/378866-troubleshooting/topic/issue.20after.20upgrading.20to.20version.206.2E2/near/436698132">said</a>:</p>
<blockquote>
<p>It says "4 dataverses and 10 datasets indexed. index all took 2639 milliseconds. Solr index was not cleared before indexing." Does that mean I need to clear it before indexing after upgrading?</p>
</blockquote>
<p>if it's not done, yes you need <code>curlÂ http://localhost:8080/api/admin/index/clear</code> before <code>curlÂ http://localhost:8080/api/admin/index</code></p>



<a name="436700541"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436700541" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> luddaniel <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436700541">(May 02 2024 at 13:56)</a>:</h4>
<p>In production consider <a href="https://guides.dataverse.org/en/latest/admin/solr-search-index.html#reindex-in-place">https://guides.dataverse.org/en/latest/admin/solr-search-index.html#reindex-in-place</a></p>
<div class="codehilite"><pre><span></span><code>curl -X DELETE http://localhost:8080/api/admin/index/timestamps
curl http://localhost:8080/api/admin/index/continue
</code></pre></div>
<p>to avoid blank home page</p>



<a name="436702445"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436702445" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen C. <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436702445">(May 02 2024 at 14:05)</a>:</h4>
<p>Done it. Got this: {"status":"OK","data":{"availablePartitionIds":[0],"args":{"numPartitions":1,"partitionIdToProcess":0},"message":"indexAllOrSubset has begun of 4 dataverses and 10 datasets."}}<br>
But still not records.</p>



<a name="436702472"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436702472" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> luddaniel <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436702472">(May 02 2024 at 14:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="663833">Hansen C.</span> <a href="#narrow/stream/378866-troubleshooting/topic/issue.20after.20upgrading.20to.20version.206.2E2/near/436699707">said</a>:</p>
<blockquote>
<p>The log file is pretty long with the activities from yesterday. I also see this "[2024-05-01T17:14:03.144-0400] [Payara 6.2023.8] [INFO] [] [edu.harvard.iq.dataverse.search.SearchServiceBean] [tid: _ThreadID=90 _ThreadName=http-thread-pool::jk-connector(1)] [timeMillis: 1714598043144] [levelValue: 800] [[<br>
  Search Syntax Error: Error from server at http://<em>.</em>.<em>.</em>:8983/solr/collection1: undefined field: "license"]]"</p>
</blockquote>
<p>This one, I suspect you didn't <strong>Run theÂ <code>update-fields.sh</code>Â script</strong> (<a href="https://github.com/IQSS/dataverse/releases/tag/v6.2">step 8</a>)</p>



<a name="436702695"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436702695" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> luddaniel <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436702695">(May 02 2024 at 14:06)</a>:</h4>
<p>it must be done before reindexing, some SOLR fields are missing</p>



<a name="436702910"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436702910" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen C. <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436702910">(May 02 2024 at 14:07)</a>:</h4>
<p>Isn't step 8 optional? I am not using custom or experimental metadata blocks.</p>



<a name="436702941"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436702941" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> luddaniel <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436702941">(May 02 2024 at 14:07)</a>:</h4>
<p>You are right</p>



<a name="436703039"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436703039" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> luddaniel <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436703039">(May 02 2024 at 14:07)</a>:</h4>
<p>Have you update the default schema.xml ? * <code>wget https://raw.githubusercontent.com/IQSS/dataverse/v6.2/conf/solr/9.3.0/schema.xml</code></p>



<a name="436703202"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436703202" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> luddaniel <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436703202">(May 02 2024 at 14:08)</a>:</h4>
<p>Because it looks like you are missing <code>&lt;field name="license" type="string" stored="true" indexed="true" multiValued="false"/&gt;</code> in your solr</p>



<a name="436703279"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436703279" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> luddaniel <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436703279">(May 02 2024 at 14:08)</a>:</h4>
<p>And SOLR restart/reload after</p>



<a name="436703506"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436703506" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen C. <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436703506">(May 02 2024 at 14:09)</a>:</h4>
<p>Yes. I updated schema.xml and did solr restart a couple of times.</p>



<a name="436703705"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436703705" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> luddaniel <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436703705">(May 02 2024 at 14:10)</a>:</h4>
<p><code>Search Syntax Error: Error from server at http://*.*.*.*:8983/solr/collection1: undefined field: "license"]]"</code> is really clear, your SOLR didn't have the update</p>



<a name="436703793"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436703793" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen C. <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436703793">(May 02 2024 at 14:10)</a>:</h4>
<p>Let me check again to be sure.</p>



<a name="436704027"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436704027" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> luddaniel <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436704027">(May 02 2024 at 14:11)</a>:</h4>
<p>Check Solr Logs maybe ~ <a href="http://localhost:8983/solr/#/~logging">http://localhost:8983/solr/#/~logging</a></p>



<a name="436706661"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436706661" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436706661">(May 02 2024 at 14:24)</a>:</h4>
<p>Sorry, I was in a container meeting. <a class="stream-topic" data-stream-id="375812" href="/#narrow/stream/375812-containers/topic/weekly.20meeting">#containers &gt; weekly meeting</a></p>



<a name="436706766"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436706766" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436706766">(May 02 2024 at 14:25)</a>:</h4>
<p>Yes, it sounds like "license" is missing from your schema.xml. Thanks, <span class="user-mention" data-user-id="649905">@luddaniel</span></p>



<a name="436707588"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436707588" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen C. <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436707588">(May 02 2024 at 14:29)</a>:</h4>
<p>Temporarily lost access to the DB server. I will check the file and log and report back to you. Thank you  both so much for your help!</p>



<a name="436708019"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436708019" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436708019">(May 02 2024 at 14:30)</a>:</h4>
<p>This is more of a Solr thing than a DB thing, but sure. <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="436709768"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436709768" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen C. <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436709768">(May 02 2024 at 14:39)</a>:</h4>
<p>I am not sure how problematic it is, but our solr is running on our DB server. I will check the solr files.</p>



<a name="436711484"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436711484" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436711484">(May 02 2024 at 14:48)</a>:</h4>
<p>Oh, I see. We've done that in the past (before we moved our database to AWS RDS.) Should be fine.</p>



<a name="436745687"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436745687" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hansen C. <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436745687">(May 02 2024 at 17:46)</a>:</h4>
<p>Hi Philip and Daniel, It turns out that I forgot to point solr to solr9.3.0, it was still running 8.11.1. Issue was solved after changing the path to solr. Thank you so much for directing me to schema.xml as the source of problem and sorry for wasting your time on my silly mistakes.  Best, Hansen</p>



<a name="436747575"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436747575" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436747575">(May 02 2024 at 17:57)</a>:</h4>
<p>No worries! Others have seen that error about the license field being missing. I'm glad you're all set.</p>



<a name="436747591"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20indexing%20issue%20after%20upgrading%20to%20version%206.2/near/436747591" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20indexing.20issue.20after.20upgrading.20to.20version.206.2E2.html#436747591">(May 02 2024 at 17:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>