<html>
<head><meta charset="utf-8"><title>âœ” Direct Upload (S3) and API &quot;add&quot; endpoint Â· troubleshooting Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html">âœ” Direct Upload (S3) and API &quot;add&quot; endpoint</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="450203601"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20Direct%20Upload%20%28S3%29%20and%20API%20%22add%22%20endpoint/near/450203601" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sherry Lake <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html#450203601">(Jul 09 2024 at 15:34)</a>:</h4>
<p>Just a question trying to figure things out.</p>
<p>We have direct upload (to S3). If I have a "small" file ~ 300MB, can I still use the simple API "add" endpoint for the file, <br>
OR<br>
do I have to do the 3 steps as described on this page?<br>
<a href="https://guides.dataverse.org/en/latest/developers/s3-direct-upload-api.html">https://guides.dataverse.org/en/latest/developers/s3-direct-upload-api.html</a></p>
<p>Is there a size max, where the 3-step routine has to be used, or will the simple "add" use non-direct (can it do that)?</p>
<p>I use "dvuploader" so I don't have to think about the steps, but was wondering if my researchers would discover the simple "add" API first?</p>



<a name="450208506"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20Direct%20Upload%20%28S3%29%20and%20API%20%22add%22%20endpoint/near/450208506" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html#450208506">(Jul 09 2024 at 15:52)</a>:</h4>
<p>I'm pretty sure you have to use the three step API.</p>
<p>Maybe the docs for the simple API should mention this.</p>



<a name="450208555"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20Direct%20Upload%20%28S3%29%20and%20API%20%22add%22%20endpoint/near/450208555" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html#450208555">(Jul 09 2024 at 15:52)</a>:</h4>
<p>As you say, if you use the UI or DVUploader (and I believe dvwebloader), you don't have to think about it.</p>



<a name="450209079"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20Direct%20Upload%20%28S3%29%20and%20API%20%22add%22%20endpoint/near/450209079" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html#450209079">(Jul 09 2024 at 15:54)</a>:</h4>
<p>What happens if you try the simply API? Does it tell you "sorry, you can't use this because direct upload is enabled?"</p>



<a name="450215329"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20Direct%20Upload%20%28S3%29%20and%20API%20%22add%22%20endpoint/near/450215329" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sherry Lake <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html#450215329">(Jul 09 2024 at 16:15)</a>:</h4>
<p>Oh.... you want me to test.... <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span> <br>
I can do that. <img alt=":dataverse_woman:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/53090/emoji/images/44206.png" title="dataverse woman"> </p>
<p>Also the documentt does mention it, in the simple "add" section, it says:</p>
<blockquote>
<p>Note that when a Dataverse installation is configured to use S3 storage with direct upload enabled, there is API support to send a file directly to S3. This is more complex and is described in theÂ <a href="https://guides.dataverse.org/en/latest/developers/s3-direct-upload-api.html">Direct DataFile Upload/Replace API</a>Â guide.</p>
</blockquote>
<p>but how will the uploader know that a particular installation is direct upload?</p>



<a name="450226971"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20Direct%20Upload%20%28S3%29%20and%20API%20%22add%22%20endpoint/near/450226971" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html#450226971">(Jul 09 2024 at 16:52)</a>:</h4>
<p>Hmm, it must do some sort of check. I'm not sure.</p>



<a name="450965654"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20Direct%20Upload%20%28S3%29%20and%20API%20%22add%22%20endpoint/near/450965654" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sherry Lake <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html#450965654">(Jul 12 2024 at 12:54)</a>:</h4>
<p>Tested.....<br>
When direct upload is configured - IF the file size is less than this JVM setting:  <code>dataverse.files.&lt;id&gt;.min-part-size</code><br>
<em>default is 1GB</em><br>
THEN the simple API command works.</p>
<p>BUT if the file size is larger that the "part" JVM option, the simple command just hangs.... so MUST use the 3-part way described here: <a href="https://guides.dataverse.org/en/latest/developers/s3-direct-upload-api.html">https://guides.dataverse.org/en/latest/developers/s3-direct-upload-api.html</a></p>
<p><strong>OR better use dvuploader!!</strong></p>



<a name="450972170"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20Direct%20Upload%20%28S3%29%20and%20API%20%22add%22%20endpoint/near/450972170" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html#450972170">(Jul 12 2024 at 13:13)</a>:</h4>
<p>Interesting. It's especially interesting that the simple upload API works when direct upload is enabled (if the file is small enough).</p>



<a name="451060725"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20Direct%20Upload%20%28S3%29%20and%20API%20%22add%22%20endpoint/near/451060725" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html#451060725">(Jul 12 2024 at 19:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="599826">Sherry Lake</span> has marked this topic as resolved.</p>



<a name="468875827"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%E2%9C%94%20Direct%20Upload%20%28S3%29%20and%20API%20%22add%22%20endpoint/near/468875827" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.E2.9C.94.20Direct.20Upload.20.28S3.29.20and.20API.20.22add.22.20endpoint.html#468875827">(Sep 09 2024 at 18:01)</a>:</h4>
<p>Related: Feature Request: Restrict API to require direct uploads <a href="https://github.com/IQSS/dataverse/issues/10828">#10828</a></p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>