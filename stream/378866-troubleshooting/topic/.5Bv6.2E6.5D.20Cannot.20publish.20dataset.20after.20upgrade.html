<html>
<head><meta charset="utf-8"><title>[v6.6] Cannot publish dataset after upgrade Â· troubleshooting Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html">[v6.6] Cannot publish dataset after upgrade</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="554117276"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554117276" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl Magnus Nilsen <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554117276">(Nov 06 2025 at 15:16)</a>:</h4>
<p>We recently upgraded <a href="https://dataverse.no">https://dataverse.no</a> from v6.3 to v6.6. After the upgrade we are not able to publish datasets that were created before the upgrade. The error message says "Your dataset named ... could not be published due to a failure to register, or update the Global Identifier for the dataset or one of the files in it." From the logs I only find something similar "Failed to publicize the identifier doi:10.83125/BILMLY, or to publicize a file in the dataset; notifying the user(s), unlocking the dataset|#]"</p>
<p>Datasets that are created after the upgrade works as expected and are published without error. Is there something that should have been done to these datasets during upgrade? Maybe they are missing some new fields? Or could it be something else?</p>



<a name="554148913"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554148913" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554148913">(Nov 06 2025 at 17:23)</a>:</h4>
<p><span class="user-mention" data-user-id="986763">@Karl Magnus Nilsen</span> hi! Nothing comes immediately to mind but I'm asking on our internal Slack.</p>



<a name="554167310"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554167310" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Don Sizemore <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554167310">(Nov 06 2025 at 18:57)</a>:</h4>
<p><span class="user-mention" data-user-id="986763">@Karl Magnus Nilsen</span> is there any more helpful stacktrace in the Payara log?</p>



<a name="554248632"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554248632" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philipp Conzett <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554248632">(Nov 07 2025 at 06:50)</a>:</h4>
<p><span class="user-mention" data-user-id="986763">@Karl Magnus Nilsen</span>  has access to log.  Maybe the reason is that the DataCite metadata is not up-to-date. So, we're currently running a modifyRegistrationMetadata.</p>



<a name="554289027"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554289027" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Juan <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554289027">(Nov 07 2025 at 10:37)</a>:</h4>
<p><span class="user-mention" data-user-id="986763">@Karl Magnus Nilsen</span>  . We are having the same problem sometimes with our v6.5 version. In our case, is associated with the ROR in the CVocConf . After removing problematic ROR (writing the name of the institution), we can publish the dataset.</p>



<a name="554295618"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554295618" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philipp Conzett <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554295618">(Nov 07 2025 at 11:08)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="663397">@Juan</span> . Do you mean you remove the value in the Affiliation metadata field and add a new value? Or is there an issue with the ROR configuration?</p>



<a name="554297653"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554297653" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Juan <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554297653">(Nov 07 2025 at 11:19)</a>:</h4>
<p>I don't investigate the problem yet. But removing the Affiliation value provided by ROR and writing a new value without ROR is working for us. <br>
It only fails with some institutions, so we write the name of the institution without ROR in these cases.</p>



<a name="554297810"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554297810" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philipp Conzett <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554297810">(Nov 07 2025 at 11:19)</a>:</h4>
<p>Thanks! I'll try it out on our datasets that failed to be published.</p>



<a name="554304641"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554304641" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philipp Conzett <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554304641">(Nov 07 2025 at 11:56)</a>:</h4>
<p>Adding the affiliation (and author name) manually, not fetching from ROR (or ORCID) didn't help in our case.</p>



<a name="554305033"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554305033" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Juan <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554305033">(Nov 07 2025 at 11:58)</a>:</h4>
<p>I'm sorry, we don't have problems with ORCID, only with some ROR values</p>



<a name="554305387"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554305387" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554305387">(Nov 07 2025 at 12:00)</a>:</h4>
<p>Can you each please start a new thread at <a href="https://groups.google.com/g/dataverse-community">https://groups.google.com/g/dataverse-community</a> ? Jim isn't in Zulip but I bet he might have some ideas for us.</p>



<a name="554305703"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554305703" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philipp Conzett <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554305703">(Nov 07 2025 at 12:02)</a>:</h4>
<p>I've just sent an email to Jim. :-)</p>



<a name="554310814"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554310814" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Juan <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554310814">(Nov 07 2025 at 12:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598112">Philip Durbin ðŸš€</span> <a href="#narrow/channel/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade/near/554305387">said</a>:</p>
<blockquote>
<p>start</p>
</blockquote>
<p><span class="user-mention" data-user-id="598112">@Philip Durbin ðŸš€</span>  . Thank you, I will investigate a little more our problem and I will start the thread.</p>



<a name="554312324"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554312324" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554312324">(Nov 07 2025 at 12:40)</a>:</h4>
<p><span class="user-mention" data-user-id="663397">@Juan</span> if it helps, Jim just posted this in Slack:</p>
<p>Probably <a href="https://github.com/IQSS/dataverse/issues/11941">#11941</a> - they did not upgrade their ROR config when ROR switched to using v2 as the default and now have a null value cached triggering a bug in creating the DataCite export (<a href="https://github.com/IQSS/dataverse/issues/11782">#11782</a> that missed getting into 6.8). The fix is to update the ROR script to explicitly use v1 (as in the repo) and remove the bad values from the externalvocabularyvalue table (truncating the table is fine).</p>



<a name="554314390"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554314390" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Juan <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554314390">(Nov 07 2025 at 12:51)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="598112">@Philip Durbin ðŸš€</span> , I will investigate it.</p>



<a name="554666520"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554666520" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Juan <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554666520">(Nov 10 2025 at 10:38)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="598112">@Philip Durbin ðŸš€</span>  (and Jim). I have updated the ror.js and people.js files, and also the files modified by  <a href="https://github.com/IQSS/dataverse/issues/11782">#11782</a>. <br>
I checked some ROR that failed before, and now it is working. <br>
I do not remember where I found the other .js files.</p>



<a name="554837960"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554837960" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philipp Conzett <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554837960">(Nov 11 2025 at 05:22)</a>:</h4>
<p>We try to turn on granular logging of PID-related issues by running this command in the Docker container:</p>
<p>asadmin --user=${ADMIN_USER} --passwordfile=${AS_PASSWORD_FILE} set-log-levels edu.harvard.iq.dataverse.pidproviders.AbstractPidProvider=FINE</p>
<p>but get this error message:</p>
<p>remote failure: Could not set logger levels for server.<br>
Command set-log-levels failed.</p>
<p>Any idea what is going wrong here? <span class="user-mention" data-user-id="598112">@Philip Durbin ðŸš€</span>  <span class="user-mention" data-user-id="626369">@Don Sizemore</span>  <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span></p>



<a name="554848650"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554848650" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554848650">(Nov 11 2025 at 07:14)</a>:</h4>
<p><span class="user-mention" data-user-id="651833">@Philipp Conzett</span> please try using "edu.harvard.iq.dataverse.pidproviders=FINE" - this is usually group (package) based.</p>



<a name="554848849"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554848849" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554848849">(Nov 11 2025 at 07:16)</a>:</h4>
<p>That way you will also see debugging output from the concrete (non-abstract) PID provider.</p>



<a name="554853611"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/554853611" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philipp Conzett <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#554853611">(Nov 11 2025 at 07:52)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="598183">@Oliver Bertuch</span> ! I'll pass this on.</p>



<a name="568963300"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/568963300" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Carroll <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#568963300">(Jan 20 2026 at 08:18)</a>:</h4>
<p>The ROR v1 which we switched to to avoid this issue is now deactivated. Do you know how we should proceed with this. I think switcing to v2 on dataverse 6.8 will put us back in the same position of publication failures ?</p>



<a name="568968573"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/568968573" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Bertuch <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#568968573">(Jan 20 2026 at 08:49)</a>:</h4>
<p>Have you tried with <a href="https://github.com/IQSS/dataverse/releases/tag/v6.9">6.9</a>? At least the above mentioned <a href="https://github.com/IQSS/dataverse/issues/11782">#11782</a> is part of  the 6.9 release.</p>



<a name="568986785"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/%5Bv6.6%5D%20Cannot%20publish%20dataset%20after%20upgrade/near/568986785" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Juan <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/.5Bv6.2E6.5D.20Cannot.20publish.20dataset.20after.20upgrade.html#568986785">(Jan 20 2026 at 10:21)</a>:</h4>
<p>You can try to pass to your installation the two files changed by <a href="https://github.com/IQSS/dataverse/issues/11782">#11782</a> (edu/harvard/iq/dataverse/export/ExportService.java and edu/harvard/iq/dataverse/pidproviders/doi/XmlMetadataTemplate.java). <br>
These files have been modified only by the previous PR from v6.8 to v6.9, so the update of the files should be safe.</p>



<hr><p>Last updated: Mar 02 2026 at 13:56 UTC</p>
</html>