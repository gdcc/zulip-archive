<html>
<head><meta charset="utf-8"><title>Question about the search (API) Â· troubleshooting Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html">Question about the search (API)</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="509708427"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509708427" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laura Huis in &#x27;t Veld <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509708427">(Apr 02 2025 at 14:09)</a>:</h4>
<p>Hello all,</p>
<p>Does anyone know if there is a way to exclude some results when doing a search query? <br>
I got this example from a user:</p>
<p><a href="https://archaeology.datastations.nl/dataverse/root?q=&amp;fq0=dansSpatialCoverageText_ss%3A%22West+Betuwe%22&amp;types=dataverses%3Adatasets%3Afiles&amp;sort=dateSort&amp;order=desc">https://archaeology.datastations.nl/dataverse/root?q=&amp;fq0=dansSpatialCoverageText_ss%3A%22West+Betuwe%22&amp;types=dataverses%3Adatasets%3Afiles&amp;sort=dateSort&amp;order=desc</a></p>
<p>Where we would like to exclude all datasets that have 'Portable Antiquities of the Netherlands' as author name. Is this somehow possible? I don't think the boolean 'NOT' will work here?</p>
<p>Laura</p>



<a name="509709401"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509709401" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509709401">(Apr 02 2025 at 14:12)</a>:</h4>
<p>Please try it with double quotes rather than single quotes, like this:</p>
<div class="codehilite"><pre><span></span><code>NOT &quot;Portable Antiquities of the Netherlands&quot;
</code></pre></div>



<a name="509710087"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509710087" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509710087">(Apr 02 2025 at 14:15)</a>:</h4>
<p>This is known as a phrase: <a href="https://solr.apache.org/guide/solr/9_7/query-guide/standard-query-parser.html#specifying-terms-for-the-standard-query-parser">https://solr.apache.org/guide/solr/9_7/query-guide/standard-query-parser.html#specifying-terms-for-the-standard-query-parser</a></p>



<a name="509716325"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509716325" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laura Huis in &#x27;t Veld <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509716325">(Apr 02 2025 at 14:39)</a>:</h4>
<p>Thanks for the hint Phil.<br>
I am not an expert at all with search queries. <br>
I tried this in the Advanced Search UI:<br>
<a href="/user_uploads/53090/X95Ee3kCw6oKKOIozPwcAv3U/Screenshot-2025-04-02-at-16.34.48.png">Screenshot 2025-04-02 at 16.34.48.png</a><br>
<a href="/user_uploads/53090/RpDWVeg_AvdfNgK3TdD0S9Tz/Screenshot-2025-04-02-at-16.35.08.png">Screenshot 2025-04-02 at 16.35.08.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/X95Ee3kCw6oKKOIozPwcAv3U/Screenshot-2025-04-02-at-16.34.48.png" title="Screenshot 2025-04-02 at 16.34.48.png"><img data-original-content-type="image/png" data-original-dimensions="1448x210" src="/user_uploads/thumbnail/53090/X95Ee3kCw6oKKOIozPwcAv3U/Screenshot-2025-04-02-at-16.34.48.png/840x560.webp"></a></div><div class="message_inline_image"><a href="/user_uploads/53090/RpDWVeg_AvdfNgK3TdD0S9Tz/Screenshot-2025-04-02-at-16.35.08.png" title="Screenshot 2025-04-02 at 16.35.08.png"><img data-original-content-type="image/png" data-original-dimensions="1616x108" src="/user_uploads/thumbnail/53090/RpDWVeg_AvdfNgK3TdD0S9Tz/Screenshot-2025-04-02-at-16.35.08.png/840x560.webp"></a></div><p>This results in <a href="https://archaeology.datastations.nl/dataverse/root/?q=%28authorName%3A%22Portable+Antiquities+of+the+Netherlands%22+AND+dansSpatialCoverageText%3AWest%2BBetuwe%29">https://archaeology.datastations.nl/dataverse/root/?q=%28authorName%3A%22Portable+Antiquities+of+the+Netherlands%22+AND+dansSpatialCoverageText%3AWest%2BBetuwe%29</a></p>
<p>It ignores the 'NOT'. Probably a dumb question, but where do I place the 'NOT' in my query?</p>



<a name="509716882"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509716882" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509716882">(Apr 02 2025 at 14:41)</a>:</h4>
<p>Hmm, I see you have spatial coverage in there as well. Let's focus on one field first. Walk before we run. <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="509717018"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509717018" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509717018">(Apr 02 2025 at 14:42)</a>:</h4>
<p>You're right that the Advanced Search page eats the NOT. <img alt=":doh:" class="emoji" src="https://avatars.zulip.com/53090/emoji/images/343009b9.png" title="doh"></p>



<a name="509717062"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509717062" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509717062">(Apr 02 2025 at 14:42)</a>:</h4>
<p>What if you type this directly in the search box?</p>
<div class="codehilite"><pre><span></span><code>NOT authorName:&quot;Portable Antiquities of the Netherlands&quot;
</code></pre></div>



<a name="509717830"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509717830" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laura Huis in &#x27;t Veld <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509717830">(Apr 02 2025 at 14:45)</a>:</h4>
<p>Yes, that is working.</p>



<a name="509718191"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509718191" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laura Huis in &#x27;t Veld <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509718191">(Apr 02 2025 at 14:46)</a>:</h4>
<p>But yeah, the user would like to filter on another metadata field as well.<br>
We have a custom field called 'dansSpatialCoverageText'.</p>



<a name="509718751"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509718751" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509718751">(Apr 02 2025 at 14:48)</a>:</h4>
<p>When you say it isn't working, can you please be more specific?</p>
<p>The default sort is "relevance" and if I flip it to "newest" I see datasets that don't seem to have that search phrase. So it feels like it's working. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="509719012"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509719012" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laura Huis in &#x27;t Veld <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509719012">(Apr 02 2025 at 14:49)</a>:</h4>
<p>Ah, I tried this in the search box, and I think this gives the result I needed:<br>
NOT authorName:"Portable Antiquities of the Netherlands" AND dansSpatialCoverageText:"West Betuwe"</p>



<a name="509719109"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509719109" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509719109">(Apr 02 2025 at 14:49)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="509721450"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509721450" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laura Huis in &#x27;t Veld <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509721450">(Apr 02 2025 at 14:58)</a>:</h4>
<p>Thanks for pointing me in the right direction!</p>



<a name="509721916"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509721916" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509721916">(Apr 02 2025 at 15:00)</a>:</h4>
<p>Sure. And please feel free to create an issue about the Advanced Search page gobbling up that NOT. <span aria-label="hamburger" class="emoji emoji-1f354" role="img" title="hamburger">:hamburger:</span></p>



<a name="509722353"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509722353" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509722353">(Apr 02 2025 at 15:02)</a>:</h4>
<p>It looks like the new front end doesn't have an Advanced Search page yet: <a href="https://beta.dataverse.org/spa/">https://beta.dataverse.org/spa/</a></p>



<a name="509870109"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509870109" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laura Huis in &#x27;t Veld <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509870109">(Apr 03 2025 at 08:04)</a>:</h4>
<p>Ok Round 2 :)</p>
<p>I am trying to recreate this search with the search API: <br>
<a href="https://archaeology.datastations.nl/dataverse/root?q=&amp;fq0=dansSpatialCoverageText_ss%3A%22West+Betuwe%22&amp;fq1=authorName_ss%3A%22Portable+Antiquities+of+the+Netherlands%22&amp;types=datasets&amp;page=1&amp;sort=dateSort&amp;order=desc">https://archaeology.datastations.nl/dataverse/root?q=&amp;fq0=dansSpatialCoverageText_ss%3A%22West+Betuwe%22&amp;fq1=authorName_ss%3A%22Portable+Antiquities+of+the+Netherlands%22&amp;types=datasets&amp;page=1&amp;sort=dateSort&amp;order=desc</a><br>
This link gives us 2403 results.</p>
<p>I have tried this with the search API: <a href="https://archaeology.datastations.nl/api/search?&amp;sort=dateSort&amp;order=desc&amp;q=fq0=dansSpatialCoverageText_ss:%22West%20Betuwe%22&amp;fq1=authorName_ss:%22Portable+Antiquities+of+the+Netherlands%22&amp;type=dataset">https://archaeology.datastations.nl/api/search?&amp;sort=dateSort&amp;order=desc&amp;q=fq0=dansSpatialCoverageText_ss:%22West%20Betuwe%22&amp;fq1=authorName_ss:%22Portable+Antiquities+of+the+Netherlands%22&amp;type=dataset</a><br>
But it seems to ignore the fq1=authorName_ss:%22Portable+Antiquities+of+the+Netherlands%22 part. </p>
<p>What am I missing here?</p>



<a name="509870523"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509870523" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laura Huis in &#x27;t Veld <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509870523">(Apr 03 2025 at 08:06)</a>:</h4>
<p>BTW: I was puzzled first by the fact that to filter in the API on datasets only, you have to use type=dataset, instead of 'types=datasets'. As you can see in the examples above.</p>



<a name="509954252"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509954252" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509954252">(Apr 03 2025 at 14:16)</a>:</h4>
<p>Here you go, 2403: <a href="https://archaeology.datastations.nl/api/search?&amp;sort=dateSort&amp;order=desc&amp;q=*&amp;fq=dansSpatialCoverageText_ss:%22West%20Betuwe%22&amp;fq=authorName_ss:%22Portable+Antiquities+of+the+Netherlands%22&amp;type=dataset">https://archaeology.datastations.nl/api/search?&amp;sort=dateSort&amp;order=desc&amp;q=*&amp;fq=dansSpatialCoverageText_ss:%22West%20Betuwe%22&amp;fq=authorName_ss:%22Portable+Antiquities+of+the+Netherlands%22&amp;type=dataset</a></p>



<a name="509954607"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509954607" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509954607">(Apr 03 2025 at 14:18)</a>:</h4>
<p>I changed <code>q=</code> to <code>q=*&amp;</code> an <code>fq0</code> and <code>fq1</code> to just <code>fq</code>.</p>



<a name="509954740"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509954740" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509954740">(Apr 03 2025 at 14:18)</a>:</h4>
<p>The <code>&amp;</code> is just to separate query parameters.</p>



<a name="509963362"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509963362" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laura Huis in &#x27;t Veld <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509963362">(Apr 03 2025 at 14:52)</a>:</h4>
<p>Thanks for your magic! So the fq does not need numbering at all.. <br>
I see now that I got confused comparing the query from the UI with the API query.</p>



<a name="509964090"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Question%20about%20the%20search%20%28API%29/near/509964090" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Question.20about.20the.20search.20.28API.29.html#509964090">(Apr 03 2025 at 14:55)</a>:</h4>
<p>Interestingly, the SPA does it a third, different way with <code>fqs</code>: <a href="https://beta.dataverse.org/spa/collections?fqs=publicationDate%3A2024%2CauthorName_ss%3ADurbin%252C%2520Philip">https://beta.dataverse.org/spa/collections?fqs=publicationDate%3A2024%2CauthorName_ss%3ADurbin%252C%2520Philip</a> <img alt=":shrugdog:" class="emoji" src="https://avatars.zulip.com/53090/emoji/images/86c833ef.png" title="shrugdog"> </p>
<p>I'm not saying it's wrong but I didn't realize until just now it's different than how the API works. It might be nice to line up with with the API so people can more easily copy and paste between the API and SPA. /cc <span class="user-mention" data-user-id="598447">@Ellen K</span> <span class="user-mention" data-user-id="751566">@Cheng Shi</span> <span class="user-mention" data-user-id="598442">@Guillermo Portas</span> <span class="user-mention" data-user-id="770046">@GermÃ¡n Saracca</span></p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>