<html>
<head><meta charset="utf-8"><title>Updating metadata block controlled vocab Â· troubleshooting Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Updating.20metadata.20block.20controlled.20vocab.html">Updating metadata block controlled vocab</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="520705874"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Updating%20metadata%20block%20controlled%20vocab/near/520705874" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bethany Seeger <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Updating.20metadata.20block.20controlled.20vocab.html#520705874">(May 27 2025 at 16:12)</a>:</h4>
<p>Hello, </p>
<p>We are working on a custom metadata block where we've had to change the key/value of some controlled terms in it a few times.   This is in our test environment. </p>
<p>There are points where we've changed the controlled vocabs key and I suspect the old  original key/value set is still in the database, as we are still seeing the old values in the UI as options. </p>
<p>I think I need to do some database cleanup. Is that the best way to address this? </p>
<p>I see these tables... are there others I need to touch? datasetfield_controlledvocabularyvalue<br>
controlledvocabularyvalue</p>
<p>Also, would having an identifier on these terms have helped prevent the duplication?  (we didn't have an identifer, but could add them)</p>
<p>Thanks!<br>
Bethany</p>



<a name="520729927"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Updating%20metadata%20block%20controlled%20vocab/near/520729927" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Updating.20metadata.20block.20controlled.20vocab.html#520729927">(May 27 2025 at 17:44)</a>:</h4>
<p>I don't have any concrete suggestions apart from how <a href="https://guides.dataverse.org/en/latest/schemaspy/">https://guides.dataverse.org/en/latest/schemaspy/</a> might help you understand the datatabase schema. Be sure to look at the one for your version such as <a href="https://guides.dataverse.org/en/6.6/schemaspy/">https://guides.dataverse.org/en/6.6/schemaspy/</a></p>



<a name="520732169"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Updating%20metadata%20block%20controlled%20vocab/near/520732169" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bethany Seeger <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Updating.20metadata.20block.20controlled.20vocab.html#520732169">(May 27 2025 at 17:58)</a>:</h4>
<p>Thanks, Phil!   That schemaspy is superhelpful. Definitely doing a db backup before hand!</p>



<a name="520742740"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Updating%20metadata%20block%20controlled%20vocab/near/520742740" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bethany Seeger <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Updating.20metadata.20block.20controlled.20vocab.html#520742740">(May 27 2025 at 19:04)</a>:</h4>
<p>Do you know if having identifiers would have helped us here? I suspect it might have, but am not sure how the code adds metadata blocks.</p>



<a name="520752557"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Updating%20metadata%20block%20controlled%20vocab/near/520752557" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Updating.20metadata.20block.20controlled.20vocab.html#520752557">(May 27 2025 at 20:13)</a>:</h4>
<p>I think so but I'm not 100% sure. I do believe the identifiers are there for just this reason. Just a number like 7 or whatever that doesn't change while the string changes.</p>



<a name="520761007"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Updating%20metadata%20block%20controlled%20vocab/near/520761007" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bethany Seeger <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Updating.20metadata.20block.20controlled.20vocab.html#520761007">(May 27 2025 at 21:16)</a>:</h4>
<p>Thanks - do the identifiers just need to be unique among the controlled vocab or all vocabs?   I'm guessing just the one they are apart of?</p>



<a name="520762693"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/Updating%20metadata%20block%20controlled%20vocab/near/520762693" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/Updating.20metadata.20block.20controlled.20vocab.html#520762693">(May 27 2025 at 21:31)</a>:</h4>
<p>Should be just the ones they're part of.</p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>