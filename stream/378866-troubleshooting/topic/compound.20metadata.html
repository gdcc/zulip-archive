<html>
<head><meta charset="utf-8"><title>compound metadata Â· troubleshooting Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/index.html">troubleshooting</a></h2>
<h3>Topic: <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html">compound metadata</a></h3>

<hr>

<base href="https://dataverse.zulipchat.com">

<head><link href="https://gdcc.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="362990739"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/362990739" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henning Timm <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#362990739">(Jun 02 2023 at 09:58)</a>:</h4>
<p>I am having some trouble with the visualization of (nested) compound metadata. Short version: I have a datasetField called "Parent" with type none and two related fields "Child A" and "Child B" that both allow multiple entries from controlled vocaularies and are nested under "Parent" (i.e. have "Parent" in the parent column).</p>



<a name="362990947"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/362990947" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henning Timm <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#362990947">(Jun 02 2023 at 09:59)</a>:</h4>
<p>I can enter multiple values for the "Child A" and "Child B" fields but only the first entry is shown in the UI.</p>



<a name="362991842"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/362991842" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henning Timm <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#362991842">(Jun 02 2023 at 10:02)</a>:</h4>
<p>E.g. if I enter "Child A": 1, 2, 3 , "Child B":  4, 5, 6 the metadata panel of the dataset will only show 1, 4.</p>



<a name="362992677"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/362992677" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henning Timm <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#362992677">(Jun 02 2023 at 10:05)</a>:</h4>
<p>This is the problem discussed in <a href="https://github.com/IQSS/dataverse/issues/9200">https://github.com/IQSS/dataverse/issues/9200</a> right?</p>



<a name="362995209"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/362995209" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henning Timm <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#362995209">(Jun 02 2023 at 10:15)</a>:</h4>
<p>Since there seems to be the possibility of SOLR not playing nicely with this pattern, is it advisable to use a flattened metadata schema instead?</p>



<a name="363063887"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363063887" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363063887">(Jun 02 2023 at 14:11)</a>:</h4>
<p><span class="user-mention" data-user-id="601943">@Henning Timm</span> are you trying to do something like "Student's Program of Study" in this screenshot?</p>
<p><a href="/user_uploads/53090/o6SvAEFcqvn136pKoZJoHIW1/Screen-Shot-2023-06-02-at-10.10.30-AM.png">Screen-Shot-2023-06-02-at-10.10.30-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/o6SvAEFcqvn136pKoZJoHIW1/Screen-Shot-2023-06-02-at-10.10.30-AM.png" title="Screen-Shot-2023-06-02-at-10.10.30-AM.png"><img src="/user_uploads/53090/o6SvAEFcqvn136pKoZJoHIW1/Screen-Shot-2023-06-02-at-10.10.30-AM.png"></a></div>



<a name="363064114"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363064114" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363064114">(Jun 02 2023 at 14:12)</a>:</h4>
<p>That block is here: <a href="https://github.com/IQSS/dataverse/blob/v5.13/scripts/api/data/metadatablocks/customGSD.tsv">https://github.com/IQSS/dataverse/blob/v5.13/scripts/api/data/metadatablocks/customGSD.tsv</a></p>



<a name="363134012"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363134012" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363134012">(Jun 02 2023 at 18:26)</a>:</h4>
<p>Oh wait... you want a subfield. Hmm. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="363550878"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363550878" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Gautier <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363550878">(Jun 04 2023 at 18:30)</a>:</h4>
<p>I think I'm seeing the same thing. I adjusted one of the fields in the astronomy metadatablock so that it was a compound field with two subfields, where each subfield had a controlled vocabulary and allowed multiple values:</p>



<a name="363550897"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363550897" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Gautier <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363550897">(Jun 04 2023 at 18:30)</a>:</h4>
<p><a href="/user_uploads/53090/F-UZaPlVjSNAGfxH1AGP6XIE/Screenshot-2023-06-04-at-7.28.08-PM.png">Screenshot-2023-06-04-at-7.28.08-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/F-UZaPlVjSNAGfxH1AGP6XIE/Screenshot-2023-06-04-at-7.28.08-PM.png" title="Screenshot-2023-06-04-at-7.28.08-PM.png"><img src="/user_uploads/53090/F-UZaPlVjSNAGfxH1AGP6XIE/Screenshot-2023-06-04-at-7.28.08-PM.png"></a></div>



<a name="363550981"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363550981" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Gautier <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363550981">(Jun 04 2023 at 18:31)</a>:</h4>
<p>But Dataverse gives me error messages when saving the dataset with this metadata:<br>
<a href="/user_uploads/53090/z51D-HAYcFR0HqhmaTsRiJMs/Screenshot-2023-06-04-at-7.28.28-PM.png">Screenshot-2023-06-04-at-7.28.28-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/z51D-HAYcFR0HqhmaTsRiJMs/Screenshot-2023-06-04-at-7.28.28-PM.png" title="Screenshot-2023-06-04-at-7.28.28-PM.png"><img src="/user_uploads/53090/z51D-HAYcFR0HqhmaTsRiJMs/Screenshot-2023-06-04-at-7.28.28-PM.png"></a></div>



<a name="363551154"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363551154" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Gautier <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363551154">(Jun 04 2023 at 18:32)</a>:</h4>
<p>And when I view the metadata, only two of the controlled vocabulary terms are shown: the first term I chose from the first child field and the first term I chose from the second child field:<br>
<a href="/user_uploads/53090/WNTizgXGIZzVdi2eowf2p3AK/Screenshot-2023-06-04-at-7.28.36-PM.png">Screenshot-2023-06-04-at-7.28.36-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/53090/WNTizgXGIZzVdi2eowf2p3AK/Screenshot-2023-06-04-at-7.28.36-PM.png" title="Screenshot-2023-06-04-at-7.28.36-PM.png"><img src="/user_uploads/53090/WNTizgXGIZzVdi2eowf2p3AK/Screenshot-2023-06-04-at-7.28.36-PM.png"></a></div>



<a name="363551703"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363551703" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Gautier <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363551703">(Jun 04 2023 at 18:36)</a>:</h4>
<p>I don't think <a href="https://github.com/IQSS/dataverse/issues/9200">https://github.com/IQSS/dataverse/issues/9200</a> is related.</p>
<p>And I wonder if I would have this problem if I created a new metadatablock instead of editing the astronomy metadatablock that ships with Dataverse.</p>



<a name="363643670"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363643670" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henning Timm <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363643670">(Jun 05 2023 at 08:22)</a>:</h4>
<p>Thanks for the fast replies!<br>
Yes, my metadata block looks like what <span class="user-mention" data-user-id="621770">@Julian Gautier</span> has reproduced. I did not get an error when saving, but my metadatablock was new, so that probably was the difference there.</p>



<a name="363643873"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363643873" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henning Timm <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363643873">(Jun 05 2023 at 08:23)</a>:</h4>
<p>As a workaround, I decided to "flatten" the entry for now.</p>



<a name="363731348"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/363731348" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Gautier <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#363731348">(Jun 05 2023 at 13:49)</a>:</h4>
<p>Thanks Henning. Channelling my inner-Phil here, would you like to open a GitHub issue to report this bug. Then I'm hoping folks can investigate the causes, such as if it's something to do with SOLR. Very recently I helped with a new metadatablock and we almost included fields like these, so we would have run into this bug, and others may run into the bug, too, where flattening wouldn't be a good workaround.</p>



<a name="364052184"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/364052184" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henning Timm <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#364052184">(Jun 06 2023 at 16:17)</a>:</h4>
<p>Sure thing :) Thanks for the help.</p>



<a name="389625893"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/389625893" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#389625893">(Sep 07 2023 at 10:45)</a>:</h4>
<p><span class="user-mention" data-user-id="601943">@Henning Timm</span> hi, did you ever create an issue for this?</p>



<a name="389630017"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/389630017" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henning Timm <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#389630017">(Sep 07 2023 at 11:04)</a>:</h4>
<p><span class="user-mention" data-user-id="598112">@Philip Durbin</span> No, sorry, I did not get around to it. But my bad conscience is strong. I will try to get this done tomorrow.</p>



<a name="389632235"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/389632235" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Durbin ðŸš€ <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#389632235">(Sep 07 2023 at 11:15)</a>:</h4>
<p>Ha! Thanks! No rush! <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="390811814"></a>
<h4><a href="https://dataverse.zulipchat.com#narrow/stream/378866-troubleshooting/topic/compound%20metadata/near/390811814" class="zl"><img src="https://gdcc.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henning Timm <a href="https://gdcc.github.io/zulip-archive/stream/378866-troubleshooting/topic/compound.20metadata.html#390811814">(Sep 13 2023 at 22:18)</a>:</h4>
<p>Finally <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> <a href="https://github.com/IQSS/dataverse/issues/9911">https://github.com/IQSS/dataverse/issues/9911</a> Sorry for the delay.</p>



<hr><p>Last updated: Nov 01 2025 at 23:12 UTC</p>
</html>